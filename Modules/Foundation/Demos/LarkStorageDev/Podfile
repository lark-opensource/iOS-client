load './AutoGenerated/BasePodfile'

# sync files that ci needed
load './sync_ci_required_files.rb'

# 建议使用 `lark_demo` 来进行配置。See more: http://py/ios-lark-demo

### demo configuration
lark_demo.use_strict_lock!
lark_demo.disable_swiftlint!
lark_demo.config_binary(strategy: :pb) do
  %w[
    LarkFileKit
    LarkStorageCore
    LarkStorage
    LarkStorageAssembly
    LarkCache
    MMKVCore
    MMKV
  ].each { |v| source v }
end

lark_demo.base_setup

def pod_common
  lark_demo.use_if_pods!
  pod 'LarkStorageCore', 'path': '../../Libs/LarkStorageCore'
  pod 'LarkStorage', 'path': '../../Libs/LarkStorage'
  pod 'LarkStorageAssembly', 'path': '../../Libs/LarkStorageAssembly'
end

target 'LarkStorageDev' do
  pod_common

  # base pods
  pod 'BootManager'
  pod 'AppContainer'
  pod 'LarkAssembler'
  pod 'LarkContainer'
  pod 'LKLoadable'

  pod 'LarkNavigation'
  pod 'PassportDebug'

  target 'LarkStorageDevTests' do
    inherit! :search_paths
  end
end

# @param installer [Pod::Installer]
pre_install do |installer|
  lark_demo.base_pre_install installer
end

# @param installer [Pod::Installer]
post_install do |installer|
  lark_demo.base_post_install installer
end

lark_demo.base_flush
