(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[7],[
/* 0 */,
/* 1 */,
/* 2 */,
/* 3 */,
/* 4 */,
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.like = exports.onboarding = exports.storage = exports.events = exports.platform = exports.ui = exports.route = exports.error = exports.common = exports.apiField = exports.apiUrls = exports.actionTypes = undefined;

var _actionTypes = __webpack_require__(631);

var _apiUrls = __webpack_require__(307);

var apiUrls = _interopRequireWildcard(_apiUrls);

var _common = __webpack_require__(19);

var common = _interopRequireWildcard(_common);

var _error = __webpack_require__(348);

var error = _interopRequireWildcard(_error);

var _route = __webpack_require__(514);

var route = _interopRequireWildcard(_route);

var _ui = __webpack_require__(383);

var ui = _interopRequireWildcard(_ui);

var _platform = __webpack_require__(1033);

var platform = _interopRequireWildcard(_platform);

var _storage = __webpack_require__(1034);

var storage = _interopRequireWildcard(_storage);

var _events = __webpack_require__(219);

var _events2 = _interopRequireDefault(_events);

var _apiField = __webpack_require__(653);

var apiField = _interopRequireWildcard(_apiField);

var _onboarding = __webpack_require__(130);

var onboarding = _interopRequireWildcard(_onboarding);

var _like = __webpack_require__(316);

var like = _interopRequireWildcard(_like);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/**
 * 每增加一个类型的常量集合，请在此引入并导出.
 * 方便外部以 $constants 为单一引用入口.
 * @liaowenhao
 */
exports.actionTypes = _actionTypes.actionTypes;
exports.apiUrls = apiUrls;
exports.apiField = apiField;
exports.common = common;
exports.error = error;
exports.route = route;
exports.ui = ui;
exports.platform = platform;
exports.events = _events2.default;
exports.storage = storage;
exports.onboarding = onboarding;
exports.like = like;

/***/ }),
/* 6 */,
/* 7 */,
/* 8 */,
/* 9 */,
/* 10 */,
/* 11 */,
/* 12 */,
/* 13 */,
/* 14 */,
/* 15 */,
/* 16 */,
/* 17 */,
/* 18 */,
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MOUSE_BUTTON = exports.USE_BLOCK_RENDER = exports.RELATIONSHIP_LEVEL = exports.CAN_CREATE_SHEET = exports.SECTION_NAV = exports.COLOR_PALETTE = exports.READ_WRITE_PERMISSION = exports.THRESHOLD_SHOW_DEL_TIPS = exports.LINK_REG = exports.LENGTH_LIMITED_EMAIL_REG = exports.URL_REG = exports.IP_REG = exports.COMMENT_TYPE_MAP = exports.CSVSuffix = exports.xlsSuffix = exports.xlsxSuffix = exports.docxSuffix = exports.docSuffix = exports.CSVMimeTypes = exports.excelMimeTypes = exports.docxMimeTypes = exports.docMimeTypes = exports.COMMON_DOCS = exports.DELETE = exports.OWNER_TRANSFER = exports.mapPermissionNum2Description = exports.VISITOR_PERMISSION_SETTINGS = exports.MEMBER_AUTH_TYPE_TO_PERMISSION = exports.MEMBER_AUTH_PERMISSIONS = exports.SUM_OF_FULL_PERMISSION = exports.DEFAULT_ADD_MEMBERS_PERMISSION = exports.DIRECT_VISIT_PERMISSION = exports.USER_PERMISSIONS = exports.PERMISSIONS = exports.VISITOR_PERMISSION_DESC_MOBILE = exports.VISITOR_PERMISSION_DESC = exports.PERMISSION_TEXT = exports.PUBLIC_PERMISSION = exports.USER_TYPE_ON_SUITE = exports.PERMISSION = exports.ROOT_TYPE_URL_MAP = exports.FILE_URL_TYPE_MAP = exports.FILE_TYPE_URL_MAP = exports.ROOT_GET_TYPE_MAP = exports.NUM_ROOT_META = exports.mapTypeNumToFileTypeText = exports.mapTypeNumToFileType = exports.mapFileType2TypeNum = exports.folderType = exports.suiteType = exports.suiteType2UnnamedTitle = exports.NUM_FILE_TYPE = exports.NUM_FOLDER_TYPE = exports.NUM_SUITE_TYPE_TO_SUITE_ENGINE_TYPE = exports.SUITE_ENGINE_TYPE = exports.NUM_SUITE_TYPE = exports.URL_BASE = exports.ROUTE_NAME = exports.FILE_TYPE = exports.mapOwnerType2Description = exports.OWNER_TYPE_UNDER_SHARE_FOLDER = exports.OWNER_TYPE_USER = exports.OWNER_TYPE = exports.loadedStatus = exports.StatusMap = exports.SuiteTitle = exports.TOAST_TYPE = exports.REQUEST = exports.SYNC_CLOSED = exports.SYNC_CONNECTED = exports.ACTION_NAMESPACE = exports.DEFERRED = exports.PROJECT_GLOBAL = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _mapOwnerType2Descrip, _NUM_SUITE_TYPE_TO_SU, _suiteType2UnnamedTit, _mapFileType2TypeNum, _mapTypeNumToFileType, _mapTypeNumToFileType2, _FILE_TYPE_URL_MAP, _ROOT_TYPE_URL_MAP, _MEMBER_AUTH_TYPE_TO_, _VISITOR_PERMISSION_S, _mapPermissionNum2Des;

exports.getColorPalette = getColorPalette;

var _reduce = __webpack_require__(230);

var _reduce2 = _interopRequireDefault(_reduce);

var _map = __webpack_require__(561);

var _map2 = _interopRequireDefault(_map);

var _get = __webpack_require__(83);

var _get2 = _interopRequireDefault(_get);

var _sectionNav = __webpack_require__(1025);

var SECTION_NAV = _interopRequireWildcard(_sectionNav);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-disable */
var PROJECT_GLOBAL = exports.PROJECT_GLOBAL = '__BEAR_GLOBAL__';
var DEFERRED = exports.DEFERRED = Symbol('DEFERRED');
var ACTION_NAMESPACE = exports.ACTION_NAMESPACE = undefined;
(function (ACTION_NAMESPACE) {
    ACTION_NAMESPACE["WEBSOCKET"] = "@@websocket";
    ACTION_NAMESPACE["REQUEST"] = "@@request";
    ACTION_NAMESPACE["UI"] = "@@ui";
    ACTION_NAMESPACE["UPDATE"] = "@@update";
    ACTION_NAMESPACE["INITIALIZATION"] = "@initialization";
})(ACTION_NAMESPACE || (exports.ACTION_NAMESPACE = ACTION_NAMESPACE = {}));
var SYNC_CONNECTED = exports.SYNC_CONNECTED = ACTION_NAMESPACE.WEBSOCKET + '/SYNC_CONNECTED';
var SYNC_CLOSED = exports.SYNC_CLOSED = ACTION_NAMESPACE.WEBSOCKET + '/SYNC_CLOSED';
var REQUEST = exports.REQUEST = 'REQUEST';
var TOAST_TYPE = exports.TOAST_TYPE = undefined;
(function (TOAST_TYPE) {
    TOAST_TYPE["success"] = "success";
    TOAST_TYPE["error"] = "error";
})(TOAST_TYPE || (exports.TOAST_TYPE = TOAST_TYPE = {}));
//
// ─── TITLE ─────────────────────────────────────────────────────────────────────
//
var SuiteTitle = exports.SuiteTitle = {
    deleted: t('commom.document.has_been_deleted'),
    notFound: t('common.document.not_exist'),
    forbidden: t('permission.no_permission_for_document'),
    unamedDoc: t('common.unnamed_document'),
    unamedSheet: t('common.unnamed_sheet'),
    unamedSlide: t('common.unnamed_slide'),
    unamedBitable: t('common.unnamed_bitable'),
    unamedMindnote: t('common.unnamed_mindnote')
};
//
// ─── STATUS ─────────────────────────────────────────────────────────────────────
//
var StatusMap = exports.StatusMap = undefined;
(function (StatusMap) {
    StatusMap["uninitialized"] = "uninitialized";
    StatusMap["loading"] = "loading";
    StatusMap["loaded"] = "loaded";
    StatusMap["failed"] = "failed";
})(StatusMap || (exports.StatusMap = StatusMap = {}));
/* 出错也是接口loaded的一种表现 */
var loadedStatus = exports.loadedStatus = [StatusMap.loaded, StatusMap.failed];
// ────────────────────────────────────────────────────────────────────────────────
// 这是一个不可调和的矛盾，Lark 的 owner_type 字段和权限
// 的 owner_type 不是表示的同一个意思，然鹅他们却执意要用
// 同一个字段名字，而前端也执意要复用这个模块和函数。 God bless !
var OWNER_TYPE = exports.OWNER_TYPE = {
    NORMAL: 0,
    LARK: 1,
    LARK_CHAT_GROUP: 2,
    PUBLIC: 4,
    SHARE_FOLDER: 5
};
var OWNER_TYPE_USER = exports.OWNER_TYPE_USER = [OWNER_TYPE.NORMAL, OWNER_TYPE.LARK];
var OWNER_TYPE_UNDER_SHARE_FOLDER = exports.OWNER_TYPE_UNDER_SHARE_FOLDER = {
    USER: 0,
    GROUP: 1
};
// log
var mapOwnerType2Description = exports.mapOwnerType2Description = (_mapOwnerType2Descrip = {}, (0, _defineProperty3.default)(_mapOwnerType2Descrip, OWNER_TYPE.NORMAL, 'user'), (0, _defineProperty3.default)(_mapOwnerType2Descrip, OWNER_TYPE.LARK, 'user'), (0, _defineProperty3.default)(_mapOwnerType2Descrip, OWNER_TYPE.LARK_CHAT_GROUP, 'chat'), _mapOwnerType2Descrip);
//
// ─── FOLDER ─────────────────────────────────────────────────────────────────────
//
var FILE_TYPE = exports.FILE_TYPE = undefined;
(function (FILE_TYPE) {
    FILE_TYPE["FOLDER"] = "folder";
    FILE_TYPE["SHARE_FOLDERS"] = "share-folders";
    FILE_TYPE["SHARE_FILES"] = "share-files";
    FILE_TYPE["DOC"] = "doc";
    FILE_TYPE["LIKELIST"] = "like-list";
    FILE_TYPE["SHEET"] = "sheet";
    FILE_TYPE["BITABLE"] = "bitable";
    FILE_TYPE["IMPORT"] = "import";
    FILE_TYPE["SLIDE"] = "slide";
    FILE_TYPE["MINDNOTE"] = "mindnote";
    FILE_TYPE["JSON"] = "json";
})(FILE_TYPE || (exports.FILE_TYPE = FILE_TYPE = {}));
var ROUTE_NAME = exports.ROUTE_NAME = undefined;
(function (ROUTE_NAME) {
    ROUTE_NAME["DOC"] = "doc";
    ROUTE_NAME["SHEET"] = "sheet";
    ROUTE_NAME["BITABLE"] = "bitable";
    ROUTE_NAME["MINDNOTE"] = "mindnote";
    ROUTE_NAME["TRASH"] = "trash";
    ROUTE_NAME["SHARE_FILES"] = "share-files";
    ROUTE_NAME["SHARE_FOLDERS"] = "share-folder";
})(ROUTE_NAME || (exports.ROUTE_NAME = ROUTE_NAME = {}));
var URL_BASE_EXTRA;
(function (URL_BASE_EXTRA) {
    URL_BASE_EXTRA["SHARE_FILES"] = "share/files";
    URL_BASE_EXTRA["SHARE_FOLDER"] = "share/folders";
})(URL_BASE_EXTRA || (URL_BASE_EXTRA = {}));
var URL_BASE = exports.URL_BASE = undefined;
(function (URL_BASE) {
    URL_BASE["DOC"] = "doc";
    URL_BASE["SHEET"] = "sheet";
    URL_BASE["BITABLE"] = "bitable";
    URL_BASE["TRASH"] = "trash";
    URL_BASE["MINDNOTE"] = "mindnote";
    URL_BASE["SHARE_FILES"] = "share/files";
    URL_BASE["SHARE_FOLDER"] = "share/folders";
})(URL_BASE || (exports.URL_BASE = URL_BASE = {}));
var FILE_TYPE_TEXT = {
    DOC: t('common.docs'),
    SHEET: t('common.sheet'),
    SLIDE: t('common.slide'),
    BITABLE: t('common.bitable'),
    MINDNOTE: t('common.mindnote'),
    FOLDER: t('common.folder'),
    SHARE_FOLDER: t('explorer.shared_folder')
};
var NUM_SUITE_TYPE = exports.NUM_SUITE_TYPE = undefined;
(function (NUM_SUITE_TYPE) {
    NUM_SUITE_TYPE[NUM_SUITE_TYPE["DOC"] = 2] = "DOC";
    NUM_SUITE_TYPE[NUM_SUITE_TYPE["SHEET"] = 3] = "SHEET";
    NUM_SUITE_TYPE[NUM_SUITE_TYPE["LIKELIST"] = 4] = "LIKELIST";
    NUM_SUITE_TYPE[NUM_SUITE_TYPE["BITABLE"] = 8] = "BITABLE";
    NUM_SUITE_TYPE[NUM_SUITE_TYPE["MINDNOTE"] = 11] = "MINDNOTE";
    NUM_SUITE_TYPE[NUM_SUITE_TYPE["FILE"] = 12] = "FILE";
    NUM_SUITE_TYPE[NUM_SUITE_TYPE["SLIDE"] = 15] = "SLIDE";
})(NUM_SUITE_TYPE || (exports.NUM_SUITE_TYPE = NUM_SUITE_TYPE = {}));
var SUITE_ENGINE_TYPE = exports.SUITE_ENGINE_TYPE = undefined;
(function (SUITE_ENGINE_TYPE) {
    /**
     * 文档
     */
    SUITE_ENGINE_TYPE["DOC"] = "DOC";
    /**
     * 表格
     */
    SUITE_ENGINE_TYPE["SHEET"] = "SHEET";
    /**
     * bitable
     */
    SUITE_ENGINE_TYPE["BITABLE"] = "BITABLE_TABLE";
    /**
     * 思维笔记相关消息
     */
    SUITE_ENGINE_TYPE["MINDNOTE"] = "MINDNOTE";
    /**
     * 演示文稿相关消息
     */
    SUITE_ENGINE_TYPE["SLIDE"] = "SLIDE";
    /**
     * 演示文稿的长链
     */
    SUITE_ENGINE_TYPE["JSON"] = "JSON";
})(SUITE_ENGINE_TYPE || (exports.SUITE_ENGINE_TYPE = SUITE_ENGINE_TYPE = {}));
var NUM_SUITE_TYPE_TO_SUITE_ENGINE_TYPE = exports.NUM_SUITE_TYPE_TO_SUITE_ENGINE_TYPE = (_NUM_SUITE_TYPE_TO_SU = {}, (0, _defineProperty3.default)(_NUM_SUITE_TYPE_TO_SU, NUM_SUITE_TYPE.DOC, SUITE_ENGINE_TYPE.DOC), (0, _defineProperty3.default)(_NUM_SUITE_TYPE_TO_SU, NUM_SUITE_TYPE.SHEET, SUITE_ENGINE_TYPE.SHEET), (0, _defineProperty3.default)(_NUM_SUITE_TYPE_TO_SU, NUM_SUITE_TYPE.BITABLE, SUITE_ENGINE_TYPE.BITABLE), (0, _defineProperty3.default)(_NUM_SUITE_TYPE_TO_SU, NUM_SUITE_TYPE.MINDNOTE, SUITE_ENGINE_TYPE.MINDNOTE), (0, _defineProperty3.default)(_NUM_SUITE_TYPE_TO_SU, NUM_SUITE_TYPE.SLIDE, SUITE_ENGINE_TYPE.JSON), _NUM_SUITE_TYPE_TO_SU);
var NUM_FOLDER_TYPE = exports.NUM_FOLDER_TYPE = undefined;
(function (NUM_FOLDER_TYPE) {
    NUM_FOLDER_TYPE[NUM_FOLDER_TYPE["FOLDER"] = 0] = "FOLDER";
    NUM_FOLDER_TYPE[NUM_FOLDER_TYPE["SHARE_FOLDER"] = 6] = "SHARE_FOLDER";
    NUM_FOLDER_TYPE[NUM_FOLDER_TYPE["SHARE_FOLDER_LINK"] = 7] = "SHARE_FOLDER_LINK";
})(NUM_FOLDER_TYPE || (exports.NUM_FOLDER_TYPE = NUM_FOLDER_TYPE = {}));
var NUM_FILE_TYPE = exports.NUM_FILE_TYPE = undefined;
(function (NUM_FILE_TYPE) {
    NUM_FILE_TYPE[NUM_FILE_TYPE["FOLDER"] = 0] = "FOLDER";
    NUM_FILE_TYPE[NUM_FILE_TYPE["DOC"] = 2] = "DOC";
    NUM_FILE_TYPE[NUM_FILE_TYPE["LIKELIST"] = 4] = "LIKELIST";
    NUM_FILE_TYPE[NUM_FILE_TYPE["BITABLE"] = 8] = "BITABLE";
    NUM_FILE_TYPE[NUM_FILE_TYPE["SHEET"] = 3] = "SHEET";
    NUM_FILE_TYPE[NUM_FILE_TYPE["FILE"] = 12] = "FILE";
    NUM_FILE_TYPE[NUM_FILE_TYPE["SLIDE"] = 15] = "SLIDE";
    NUM_FILE_TYPE[NUM_FILE_TYPE["SHARE_FOLDER"] = 6] = "SHARE_FOLDER";
    NUM_FILE_TYPE[NUM_FILE_TYPE["SHARE_FOLDER_LINK"] = 7] = "SHARE_FOLDER_LINK";
    NUM_FILE_TYPE[NUM_FILE_TYPE["MINDNOTE"] = 11] = "MINDNOTE";
})(NUM_FILE_TYPE || (exports.NUM_FILE_TYPE = NUM_FILE_TYPE = {}));
var suiteType2UnnamedTitle = exports.suiteType2UnnamedTitle = (_suiteType2UnnamedTit = {}, (0, _defineProperty3.default)(_suiteType2UnnamedTit, NUM_FILE_TYPE.DOC, SuiteTitle.unamedDoc), (0, _defineProperty3.default)(_suiteType2UnnamedTit, NUM_FILE_TYPE.SHEET, SuiteTitle.unamedSheet), (0, _defineProperty3.default)(_suiteType2UnnamedTit, NUM_FILE_TYPE.SLIDE, SuiteTitle.unamedSlide), (0, _defineProperty3.default)(_suiteType2UnnamedTit, NUM_FILE_TYPE.BITABLE, SuiteTitle.unamedBitable), (0, _defineProperty3.default)(_suiteType2UnnamedTit, NUM_FILE_TYPE.MINDNOTE, SuiteTitle.unamedMindnote), _suiteType2UnnamedTit);
var suiteType = exports.suiteType = [NUM_FILE_TYPE.DOC, NUM_FILE_TYPE.SHEET, NUM_FILE_TYPE.BITABLE];
var folderType = exports.folderType = [NUM_FILE_TYPE.FOLDER, NUM_FILE_TYPE.SHARE_FOLDER];
var mapFileType2TypeNum = exports.mapFileType2TypeNum = (_mapFileType2TypeNum = {}, (0, _defineProperty3.default)(_mapFileType2TypeNum, FILE_TYPE.FOLDER, NUM_FILE_TYPE.FOLDER), (0, _defineProperty3.default)(_mapFileType2TypeNum, FILE_TYPE.DOC, NUM_FILE_TYPE.DOC), (0, _defineProperty3.default)(_mapFileType2TypeNum, FILE_TYPE.SHEET, NUM_FILE_TYPE.SHEET), (0, _defineProperty3.default)(_mapFileType2TypeNum, FILE_TYPE.JSON, NUM_FILE_TYPE.SLIDE), (0, _defineProperty3.default)(_mapFileType2TypeNum, FILE_TYPE.BITABLE, NUM_FILE_TYPE.BITABLE), (0, _defineProperty3.default)(_mapFileType2TypeNum, FILE_TYPE.MINDNOTE, NUM_FILE_TYPE.MINDNOTE), _mapFileType2TypeNum);
var mapTypeNumToFileType = exports.mapTypeNumToFileType = (_mapTypeNumToFileType = {}, (0, _defineProperty3.default)(_mapTypeNumToFileType, NUM_FILE_TYPE.SHARE_FOLDER, FILE_TYPE.SHARE_FOLDERS), (0, _defineProperty3.default)(_mapTypeNumToFileType, NUM_FILE_TYPE.FOLDER, FILE_TYPE.FOLDER), (0, _defineProperty3.default)(_mapTypeNumToFileType, NUM_FILE_TYPE.DOC, FILE_TYPE.DOC), (0, _defineProperty3.default)(_mapTypeNumToFileType, NUM_FILE_TYPE.SHEET, FILE_TYPE.SHEET), (0, _defineProperty3.default)(_mapTypeNumToFileType, NUM_FILE_TYPE.SLIDE, FILE_TYPE.SLIDE), (0, _defineProperty3.default)(_mapTypeNumToFileType, NUM_FILE_TYPE.BITABLE, FILE_TYPE.BITABLE), (0, _defineProperty3.default)(_mapTypeNumToFileType, NUM_FILE_TYPE.MINDNOTE, FILE_TYPE.MINDNOTE), _mapTypeNumToFileType);
var mapTypeNumToFileTypeText = exports.mapTypeNumToFileTypeText = (_mapTypeNumToFileType2 = {}, (0, _defineProperty3.default)(_mapTypeNumToFileType2, NUM_FILE_TYPE.FOLDER, FILE_TYPE_TEXT.FOLDER), (0, _defineProperty3.default)(_mapTypeNumToFileType2, NUM_FILE_TYPE.DOC, FILE_TYPE_TEXT.DOC), (0, _defineProperty3.default)(_mapTypeNumToFileType2, NUM_FILE_TYPE.SHEET, FILE_TYPE_TEXT.SHEET), (0, _defineProperty3.default)(_mapTypeNumToFileType2, NUM_FILE_TYPE.SLIDE, FILE_TYPE_TEXT.SLIDE), (0, _defineProperty3.default)(_mapTypeNumToFileType2, NUM_FILE_TYPE.BITABLE, FILE_TYPE_TEXT.BITABLE), (0, _defineProperty3.default)(_mapTypeNumToFileType2, NUM_FILE_TYPE.MINDNOTE, FILE_TYPE_TEXT.MINDNOTE), (0, _defineProperty3.default)(_mapTypeNumToFileType2, NUM_FILE_TYPE.SHARE_FOLDER, FILE_TYPE_TEXT.SHARE_FOLDER), _mapTypeNumToFileType2);
var NUM_ROOT_META = exports.NUM_ROOT_META = undefined;
(function (NUM_ROOT_META) {
    NUM_ROOT_META[NUM_ROOT_META["HOME"] = 101] = "HOME";
    NUM_ROOT_META[NUM_ROOT_META["EXPLORER"] = 4] = "EXPLORER";
    NUM_ROOT_META[NUM_ROOT_META["SHARE"] = 56] = "SHARE";
    NUM_ROOT_META[NUM_ROOT_META["SHARE_FILES"] = 5] = "SHARE_FILES";
    NUM_ROOT_META[NUM_ROOT_META["SHARE_FOLDERS"] = 6] = "SHARE_FOLDERS";
    NUM_ROOT_META[NUM_ROOT_META["TRASH"] = 1] = "TRASH";
    NUM_ROOT_META[NUM_ROOT_META["MOCK_HIDDEN_SHARE_FOLDERS"] = -2] = "MOCK_HIDDEN_SHARE_FOLDERS";
})(NUM_ROOT_META || (exports.NUM_ROOT_META = NUM_ROOT_META = {}));
var ROOT_GET_TYPE_MAP = exports.ROOT_GET_TYPE_MAP = undefined;
(function (ROOT_GET_TYPE_MAP) {
    ROOT_GET_TYPE_MAP[ROOT_GET_TYPE_MAP["isExplorer"] = 4] = "isExplorer";
    ROOT_GET_TYPE_MAP[ROOT_GET_TYPE_MAP["isTrash"] = 1] = "isTrash";
    ROOT_GET_TYPE_MAP[ROOT_GET_TYPE_MAP["isSharedWithMe"] = 5] = "isSharedWithMe";
})(ROOT_GET_TYPE_MAP || (exports.ROOT_GET_TYPE_MAP = ROOT_GET_TYPE_MAP = {}));
var FILE_TYPE_URL_MAP = exports.FILE_TYPE_URL_MAP = (_FILE_TYPE_URL_MAP = {}, (0, _defineProperty3.default)(_FILE_TYPE_URL_MAP, NUM_FILE_TYPE.FOLDER, FILE_TYPE.FOLDER), (0, _defineProperty3.default)(_FILE_TYPE_URL_MAP, NUM_ROOT_META.TRASH, ROUTE_NAME.TRASH), (0, _defineProperty3.default)(_FILE_TYPE_URL_MAP, NUM_FILE_TYPE.DOC, FILE_TYPE.DOC), (0, _defineProperty3.default)(_FILE_TYPE_URL_MAP, NUM_FILE_TYPE.LIKELIST, FILE_TYPE.LIKELIST), (0, _defineProperty3.default)(_FILE_TYPE_URL_MAP, NUM_FILE_TYPE.SHEET, FILE_TYPE.SHEET), (0, _defineProperty3.default)(_FILE_TYPE_URL_MAP, NUM_FILE_TYPE.BITABLE, FILE_TYPE.BITABLE), (0, _defineProperty3.default)(_FILE_TYPE_URL_MAP, NUM_FILE_TYPE.MINDNOTE, FILE_TYPE.MINDNOTE), (0, _defineProperty3.default)(_FILE_TYPE_URL_MAP, NUM_FILE_TYPE.SLIDE, FILE_TYPE.SLIDE), _FILE_TYPE_URL_MAP);
var FILE_URL_TYPE_MAP = exports.FILE_URL_TYPE_MAP = (0, _reduce2.default)(FILE_TYPE_URL_MAP, function (result, n, key) {
    result[n] = key;
    return result;
}, {});
var ROOT_TYPE_URL_MAP = exports.ROOT_TYPE_URL_MAP = (_ROOT_TYPE_URL_MAP = {}, (0, _defineProperty3.default)(_ROOT_TYPE_URL_MAP, NUM_ROOT_META.EXPLORER, '/folder/'), (0, _defineProperty3.default)(_ROOT_TYPE_URL_MAP, NUM_ROOT_META.TRASH, '/trash/'), (0, _defineProperty3.default)(_ROOT_TYPE_URL_MAP, NUM_ROOT_META.SHARE_FILES, '/share/files/'), (0, _defineProperty3.default)(_ROOT_TYPE_URL_MAP, NUM_ROOT_META.SHARE_FOLDERS, '/share/folders/'), _ROOT_TYPE_URL_MAP);
//
// ─── PERMISSION ─────────────────────────────────────────────────────────────────
//
var PERMISSION = exports.PERMISSION = {
    SHAREABLE: 8,
    EDITABLE: 4,
    COMMENTABLE: 2,
    READABLE: 1,
    PRIVATE: 0,
    ANYONE_READABLE: 16,
    ANYONE_EDITABLE: 32
};
var USER_TYPE_ON_SUITE = exports.USER_TYPE_ON_SUITE = undefined;
(function (USER_TYPE_ON_SUITE) {
    USER_TYPE_ON_SUITE[USER_TYPE_ON_SUITE["READABLE"] = 1] = "READABLE";
    USER_TYPE_ON_SUITE[USER_TYPE_ON_SUITE["EDITABLE"] = 2] = "EDITABLE";
})(USER_TYPE_ON_SUITE || (exports.USER_TYPE_ON_SUITE = USER_TYPE_ON_SUITE = {}));
var PUBLIC_PERMISSION = exports.PUBLIC_PERMISSION = {
    TENANT_PERMISSION: [PERMISSION.READABLE, PERMISSION.EDITABLE],
    ANYONE_PERMISSION: [PERMISSION.ANYONE_READABLE, PERMISSION.ANYONE_EDITABLE]
};
var SHAREABLE = PERMISSION.SHAREABLE,
    EDITABLE = PERMISSION.EDITABLE,
    COMMENTABLE = PERMISSION.COMMENTABLE,
    READABLE = PERMISSION.READABLE;
var PERMISSION_TEXT = exports.PERMISSION_TEXT = {
    1: t('common.readable'),
    2: t('permission.commentable'),
    4: t('common.editable'),
    8: t('common.shareable')
};
var VISITOR_PERMISSION_DESC = exports.VISITOR_PERMISSION_DESC = {
    1: t('permission.read'),
    4: t('permission.edit'),
    8: t('permission.share')
};
var VISITOR_PERMISSION_DESC_MOBILE = exports.VISITOR_PERMISSION_DESC_MOBILE = {
    1: t('permission.read_mobile'),
    4: t('permission.edit_mobile'),
    8: t('permission.share_mobile')
};
var PERMISSIONS = exports.PERMISSIONS = (0, _map2.default)(PERMISSION); // [8, 4, 2, 1, 0]
var USER_PERMISSIONS = exports.USER_PERMISSIONS = [4, 1];
var DIRECT_VISIT_PERMISSION = exports.DIRECT_VISIT_PERMISSION = [32, 16, 4, 1, 0];
var DEFAULT_ADD_MEMBERS_PERMISSION = exports.DEFAULT_ADD_MEMBERS_PERMISSION = PERMISSION.EDITABLE;
var SUM_OF_FULL_PERMISSION = exports.SUM_OF_FULL_PERMISSION = PERMISSIONS.reduce(function (sum, cur) {
    return sum + cur;
}, 0);
var MEMBER_AUTH_PERMISSIONS = exports.MEMBER_AUTH_PERMISSIONS = [PERMISSION.READABLE, PERMISSION.EDITABLE];
var MEMBER_AUTH_TYPE_TO_PERMISSION = exports.MEMBER_AUTH_TYPE_TO_PERMISSION = (_MEMBER_AUTH_TYPE_TO_ = {}, (0, _defineProperty3.default)(_MEMBER_AUTH_TYPE_TO_, PERMISSION.READABLE, t('common.readable')), (0, _defineProperty3.default)(_MEMBER_AUTH_TYPE_TO_, PERMISSION.EDITABLE, t('common.editable')), (0, _defineProperty3.default)(_MEMBER_AUTH_TYPE_TO_, PERMISSION.ANYONE_READABLE, t('common.readable')), (0, _defineProperty3.default)(_MEMBER_AUTH_TYPE_TO_, PERMISSION.ANYONE_EDITABLE, t('common.editable')), _MEMBER_AUTH_TYPE_TO_);
var VISITOR_PERMISSION_SETTINGS = exports.VISITOR_PERMISSION_SETTINGS = (_VISITOR_PERMISSION_S = {}, (0, _defineProperty3.default)(_VISITOR_PERMISSION_S, SHAREABLE, t('common.share')), (0, _defineProperty3.default)(_VISITOR_PERMISSION_S, EDITABLE, t('permission.edit')), (0, _defineProperty3.default)(_VISITOR_PERMISSION_S, COMMENTABLE, t('common.comment')), (0, _defineProperty3.default)(_VISITOR_PERMISSION_S, READABLE, t('permission.read')), _VISITOR_PERMISSION_S);
// log
var mapPermissionNum2Description = exports.mapPermissionNum2Description = (_mapPermissionNum2Des = {}, (0, _defineProperty3.default)(_mapPermissionNum2Des, PERMISSION.SHAREABLE, 'share'), (0, _defineProperty3.default)(_mapPermissionNum2Des, PERMISSION.EDITABLE, 'edit'), (0, _defineProperty3.default)(_mapPermissionNum2Des, PERMISSION.COMMENTABLE, 'comment'), (0, _defineProperty3.default)(_mapPermissionNum2Des, PERMISSION.READABLE, 'read'), _mapPermissionNum2Des);
var OWNER_TRANSFER = exports.OWNER_TRANSFER = 'owner-transfer';
var DELETE = exports.DELETE = 'delete';
//
// ─── MOBILE LARK TAB ─────────────────────────────────────────────────────────────────
//
var COMMON_DOCS = exports.COMMON_DOCS = t('common.docs');
// ────────────────────────────────────────────────────────────────────────────────
// mimetype类型
var docMimeTypes = exports.docMimeTypes = 'application/msword';
var docxMimeTypes = exports.docxMimeTypes = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';
var excelMimeTypes = exports.excelMimeTypes = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';
var CSVMimeTypes = exports.CSVMimeTypes = 'text/csv';
var docSuffix = exports.docSuffix = 'doc';
var docxSuffix = exports.docxSuffix = 'docx';
var xlsxSuffix = exports.xlsxSuffix = 'xlsx';
var xlsSuffix = exports.xlsSuffix = 'xls';
var CSVSuffix = exports.CSVSuffix = 'csv';
var COMMENT_TYPE_MAP = exports.COMMENT_TYPE_MAP = {
    DOC_COMMENT: 'DOC_COMMENT',
    GLOBAL_COMMENT: 'GLOBAL_COMMENT'
};
/* tslint:disable */
var LOCALHOST_REG = /localhost:[0-9]{2,5}/;
var IP_ADDRESS_REG = /(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(2[0-4][0-9]|25[0-5]|1[0-9]{2}|[1-9][0-9]|[0-9])(:[0-9]{2,5})?/;
var IP_REG = exports.IP_REG = new RegExp('(https?|http|ftp)://((' + LOCALHOST_REG.source + ')|(' + IP_ADDRESS_REG.source + '))(/[-a-zA-Z0-9@:%_+.~#?&//=]*)?', 'gi');
var URL_REG = exports.URL_REG = /((https?|http|ftp):\/\/)?[-a-zA-Z0-9:%._+~#=]{1,256}\.(com|org|net|edu|gov|aero|app|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|google|[a-z][a-z])\b([-a-zA-Z0-9@:%_+.~#?&//=;$,!]*)/gi;
// mailto的贪婪匹配在遇到极长的字符串（无空格的英文）会很慢，需要限长。
var LENGTH_LIMITED_EMAIL_REG = exports.LENGTH_LIMITED_EMAIL_REG = /^(?!data:)(?:mailto:)?[\w.!#$%&'*+-/=?^_`{|}~]{1,2000}@[A-Za-z0-9.-]+\.(com|org|net|edu|gov|aero|app|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])/gi;
/* tslint:enable */
var LINK_REG = exports.LINK_REG = new RegExp('(' + IP_REG.source + ')|(' + URL_REG.source + ')|(' + LENGTH_LIMITED_EMAIL_REG.source + ')', 'gi');
// threshold which will trigger tips of delete text
var THRESHOLD_SHOW_DEL_TIPS = exports.THRESHOLD_SHOW_DEL_TIPS = 30;
var READ_WRITE_PERMISSION = exports.READ_WRITE_PERMISSION = [8, 4, 2, 1];
/*tslint:disable*/
var COLOR_PALETTE = exports.COLOR_PALETTE = ["#E94D3D", "#F09A38", "#F7CD46", "#79D572", "#78C6F5", "#347BF6", "#5759CE", "#E9455A", "#4CA490", "#A3CF56", "#EC3778", "#76A635", "#EA6B2C", "#B6E064", "#469AE9", "#8D5AD9", "#A3302A", "#738C36", "#97CDF6", "#E93324", "#76DDD0", "#675DC6", "#78FA4C", "#5EC59A", "#BD67E1", "#317183", "#306EBC", "#FF8047", "#83D7E6", "#982D4E", "#43906B", "#E56F2E", "#57B58A", "#D6622B", "#D35680", "#4467E3", "#7691F4", "#76A534", "#7B3897"];
/*tslint:enable*/
function getColorPalette() {
    return COLOR_PALETTE;
}
exports.SECTION_NAV = SECTION_NAV;
var CAN_CREATE_SHEET = exports.CAN_CREATE_SHEET = window.User.canCreateSheet === '1';
var RELATIONSHIP_LEVEL = exports.RELATIONSHIP_LEVEL = {
    SAME_TENANT: 1,
    DIFF_TENANT_AND_CONTACT: 2,
    DIFF_TENANT_AND_STRANGER: 3,
    CUSTOMER_AND_CONTACT: 4,
    CUSTOMER_AND_STRANGER: 5
};
var androidSelection = true;
if (_browserHelper2.default.android) {
    androidSelection = !!(0, _get2.default)(window, 'User.appConfig.useBlockRender.enable_custom_selection');
}
var USE_BLOCK_RENDER = exports.USE_BLOCK_RENDER = androidSelection && (0, _get2.default)(window, 'User.appConfig.useBlockRender.open') || false;
var MOUSE_BUTTON = exports.MOUSE_BUTTON = {
    LEFT: 0,
    MIDDLE: 1,
    RIGHT: 2
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 20 */,
/* 21 */,
/* 22 */,
/* 23 */,
/* 24 */,
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var i18n = __webpack_require__(973);
var translate = i18n.t;

module.exports = function t() {
  return translate.apply(null, arguments);
};

/***/ }),
/* 26 */,
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _bowser = __webpack_require__(73);

var _bowser2 = _interopRequireDefault(_bowser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ua = window.User && window.User.userAgent || navigator.userAgent || '';
var _browser = Object.assign({}, _bowser2.default.detect(ua), {
    isLark: false,
    isLarkPcTab: false,
    isDocs: false,
    isDocsSDK: false,
    isFeed: false,
    isIphoneX: false,
    isIPad: false,
    isMobile: false,
    isMac: false,
    isSafari: false,
    isIE: false,
    isSougou: false,
    isIOS: false,
    isAndroid: false,
    isQQ: false,
    isX5: false,
    is360: false,
    is360Fast: false,
    isUc: false,
    isBaiDu: false,
    isLB: false,
    oldIE: false,
    modernIE: false,
    kernel: '',
    isLarkTab: false,
    isOldLarkTab: false,
    isEdge: false,
    isFF: false,
    isChrome: false,
    isBytedanceApp: false,
    isIPhoneSeries: function isIPhoneSeries() {
        return false;
    },
    iOSVersion: 12
});
_browser.isLark = /lark|feishu/i.test(ua);
_browser.isLarkPcTab = _browser.isLark && /TYPE\/PC_TAB/i.test(ua);
_browser.isDocs = /Docs/i.test(ua);
_browser.isDocsSDK = _browser.isLark && _browser.isDocs;
_browser.isFeed = /Feed/i.test(ua) || /lark=1/.test(location.search) || /sourceType=feed/.test(location.search);
_browser.isIphoneX = isIphoneX();
_browser.isIPad = /iPad/i.test(ua);
// ipad默认判断成mobile
_browser.mobile = _bowser2.default.mobile = true;
_browser.isMobile = _browser.mobile;
_browser.isMac = _browser.mac;
_browser.isSafari = _browser.safari;
_browser.isIE = _browser.msie || _browser.msedge;
_browser.isSougou = /MetaSr/i.test(ua);
_browser.isIOS = !!ua.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
_browser.isAndroid = ua.indexOf('Android') > -1 || ua.indexOf('Adr') > -1;
_browser.isQQ = /QQBrowser/i.test(ua);
_browser.isX5 = /MQQBrowser/i.test(ua);
_browser.is360 = /360SE/i.test(ua);
_browser.is360Fast = /360EE/i.test(ua);
_browser.isUc = /UBrowser/i.test(ua);
_browser.isBaiDu = /BIDUBrowser/i.test(ua);
// 猎豹浏览器
_browser.isLB = /LBBROWSER/i.test(ua);
_browser.isEdge = /Edge/i.test(ua);
// Firefox
_browser.isFF = /Firefox/i.test(ua);
// chrome
_browser.isChrome = Boolean(window['chrome'] && window['chrome'].webstore);
if (_browser.msie) {
    var version = parseInt(String(_browser.version), 10);
    _browser.oldIE = version < 11;
    _browser.modernIE = version >= 11;
}
if (_browser.isSougou) {
    _browser.name = 'sougou';
    var _version = /SE (\w*.\w*)\s/.exec(ua);
    _browser.version = _version && _version[1] || _browser.version;
}
if (_browser.isQQ) {
    _browser.name = 'qq';
}
if (_browser.is360) {
    _browser.name = '360';
}
if (_browser.is360Fast) {
    _browser.name = '360fast';
}
if (_browser.isLB) {
    _browser.name = 'liebao';
}
if (_browser.isUc) {
    _browser.name = 'uc';
}
if (_browser.isBaiDu) {
    _browser.name = 'baidu';
}
if (_browser.isIOS) {
    var ret = /CPU iOS ([\d_]+) like Mac OS X/.exec(ua);
    if (ret && ret[1]) {
        _browser.iOSVersion = parseFloat(ret[1].replace('_', '.'));
    }
}
// 浏览器内核
var browerKernel = ['msie', 'webkit', 'blink', 'gecko', 'msedge', 'tablet', 'mobile'];
_browser.kernel = browerKernel.find(function (kernel) {
    return _browser[kernel];
});
_browser.isLarkTab = /from\/(old_)?lark_tab/i.test(ua);
_browser.isOldLarkTab = /from\/old_lark_tab/i.test(ua);
var isBytedanceApp = _browser.isLark || _browser.isDocs;
_browser.isBytedanceApp = isBytedanceApp;
_browser.isIPhoneSeries = isIPhoneSeries;
function isIphoneX() {
    return isIPhoneSeries('X');
}
function isIPhoneSeries(series) {
    var regx = new RegExp('(iPhone\\s' + series + ')');
    return !!navigator.userAgent.match(regx);
}
exports.default = _browser;

/***/ }),
/* 28 */,
/* 29 */,
/* 30 */,
/* 31 */,
/* 32 */,
/* 33 */,
/* 34 */,
/* 35 */,
/* 36 */,
/* 37 */,
/* 38 */,
/* 39 */,
/* 40 */,
/* 41 */,
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.collectCommerce = exports.collectCommentSubmitEventError = exports.collectCommentLog = exports.collectCommentSubmitEventSuccess = exports.createNewSessionId = exports.collectWithCustomizeFn = exports.getDefaultOptions = exports.collector = undefined;

var _typeof2 = __webpack_require__(82);

var _typeof3 = _interopRequireDefault(_typeof2);

var _isUndefined2 = __webpack_require__(228);

var _isUndefined3 = _interopRequireDefault(_isUndefined2);

var _get2 = __webpack_require__(83);

var _get3 = _interopRequireDefault(_get2);

exports.getOSNameByBrowser = getOSNameByBrowser;
exports.getOSVersionByBrowser = getOSVersionByBrowser;
exports.getPlatForm = getPlatForm;
exports.getAppVersion = getAppVersion;
exports.getModule = getModule;
exports.getFileType = getFileType;
exports.getEncryToken = getEncryToken;
exports.shouldSendTea = shouldSendTea;
exports.collectSuiteEvent = collectSuiteEvent;

var _bytedTeaSdk = __webpack_require__(674);

var _bytedTeaSdk2 = _interopRequireDefault(_bytedTeaSdk);

var _encryption = __webpack_require__(164);

var _string = __webpack_require__(163);

var _getFileInfo = __webpack_require__(472);

var _abTestHelper = __webpack_require__(583);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _i18nHelper = __webpack_require__(222);

var _networkHelper = __webpack_require__(113);

var _routeHelper = __webpack_require__(67);

var _timeHelper = __webpack_require__(464);

var _constants = __webpack_require__(5);

var _merge2 = __webpack_require__(701);

var _merge3 = _interopRequireDefault(_merge2);

var _teaHelper = __webpack_require__(165);

var _envHelper = __webpack_require__(147);

var _getAllUrlParams = __webpack_require__(231);

var _appHelper = __webpack_require__(543);

var _suiteHelper = __webpack_require__(52);

var _sdkCompatibleHelper = __webpack_require__(45);

var _networkStateHelper = __webpack_require__(129);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
  ==== 目前的格式 ====
  collector('eventtype', {//事件名称 toggle_attribute,new_docs....
    action: ''操作类型
    source: ''操作来源
    eventType: ''事件类型，click||keydown....
    targetId: '',事件目标的id,
    targetClass: ''事件目标的class
  })

  ==== 以下是宗延的example。 ~\(≧▽≦)/~ ====

  collectEvent('toggle_attribute', {
    action: action,
    source: source || 'shortKey',
    eventType: eventType || 'keydown',
    targetId: (_target && _target.id) || '',
    targetClass: (_target && _target.className) || ''
  });
 */

/* utils & helpers & constants */
var IOS = _constants.platform.IOS,
    ANDRORID = _constants.platform.ANDRORID,
    MAC = _constants.platform.MAC,
    WINDOWS = _constants.platform.WINDOWS;

var osMap = {
  'Android': ANDRORID,
  'iOS': IOS,
  'macOS': MAC,
  'Windows': WINDOWS
};

function getOSName(os) {
  return osMap[os] || os || 'web';
}

function getOSNameByBrowser() {
  return osMap[_browserHelper2.default.osname] || _browserHelper2.default.osname || 'web';
}

function getOSVersionByBrowser() {
  return (_browserHelper2.default.osversion || 0).toString();
}

function getPlatForm() {
  if (_browserHelper2.default.isFeed) return 'lark';
  if (_browserHelper2.default.isLark) return 'lark';
  if (_browserHelper2.default.isDocs) return 'doc_app';
  return 'web';
}

function getAppVersion() {
  return (0, _get3.default)(window, 'scm.version', '0');
}

function getWebVersion(type) {
  var version = (0, _get3.default)(window, 'rv_rev') || '';
  var _dateStr = version.substr(version.indexOf('-') + 1);
  var position = _dateStr.indexOf('-', _dateStr.indexOf('-') + 1);
  if (type === 'date') {
    return _dateStr.slice(0, position) || 0;
  }
  if (type === 'timestamp') {
    return parseInt(_dateStr.substr(position + 1), 10) || 0;
  }

  return '-1';
}

var collector = exports.collector = {
  init: function init(opt) {
    if ((0, _networkHelper.isUnitTestEnv)()) return;
    // 在window下挂载tea的命名空间
    window.teaMap = {};

    window.teaMap.sessionId = createNewSessionId();
    window.teaMap.preHref = window.location.href;
    window.teaMap.prePathname = window.location.pathname;
    // 设置appId。必须配置。
    var initCfg = {
      app_id: opt.appId,
      channel: 'cn'
    };
    if ((0, _appHelper.isOverSea)()) {
      initCfg = {
        app_id: 1662,
        channel: 'va'
      };
    }
    _bytedTeaSdk2.default.init(initCfg);

    this.config = {
      _staging_flag: opt.debug ? 1 : 0,
      user_unique_id: opt.userId,
      app_name: 'docs',
      disable_auto_pv: true,
      // browser: opt.browser,
      browser_version: opt.browserVersion,
      os_name: getOSName(opt.osName || 'default'),
      device_model: getOSName(opt.osName || 'default'),
      os_version: opt.osVersion,
      'custom.platform': getPlatForm(),
      'custom.browser': opt.browser,
      'custom.browser_version': opt.browserVersion,
      'custom.browser_kernel': opt.browserKernel,
      'custom.app_form': _browserHelper2.default.isFeed ? 'docs_feed' : (0, _envHelper.isAnnouncement)() ? 'open_doc' : '',
      app_language: (0, _i18nHelper.getLanguage)(),
      ab_version: (0, _abTestHelper.getABVersionName)(),
      tenant_id: opt.tenantId || '',
      department_id: opt.departmentId || '-1',
      web_version_date: getWebVersion('date'),
      web_version_timestamp: getWebVersion('timestamp'),
      gray_scale: (0, _get3.default)(window, 'scm.branch', ''),
      scm_version: getAppVersion(),
      docs_sdk_version: (0, _sdkCompatibleHelper.getAppVersion)() || '0.0.0'
    };

    _bytedTeaSdk2.default.config(this.config);

    window.teaMap.userId = opt.userId;
  },
  updateConfig: function updateConfig(config) {
    _bytedTeaSdk2.default.config((0, _merge3.default)(this.config, config));
  },
  send: function send() {
    _bytedTeaSdk2.default.send();
  }
};

/* ================ helpers start here ================ */

function getModule() {
  var pathname = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : location.pathname;

  if ((0, _networkHelper.isUnitTestEnv)()) return {};
  var prePathname = (0, _get3.default)(window, ['teaMap', 'prePathname'], undefined);
  var oldRouteObj = (0, _routeHelper.getCurrentRouteObj)(prePathname);
  var routeObj = (0, _routeHelper.getCurrentRouteObj)(pathname);
  var isNotSameRoute = oldRouteObj['module'] !== routeObj['module'] || oldRouteObj['subModule'] !== routeObj['subModule'];
  var srcObj = isNotSameRoute ? { src_module: oldRouteObj['module'], src_sub_module: oldRouteObj['subModule'] } : {};
  var rst = Object.assign({
    module: routeObj['module'],
    sub_module: routeObj['subModule']
  }, srcObj);
  return rst;
}

var fileTypeObj = {};
function getFileType(href) {
  var _href = href || window.location.href;
  if (fileTypeObj[_href]) return fileTypeObj[_href];
  var fileRe = /(sheet|folder|mindnote|slide|shared-with-me|trash|doc|recents|share)\//.exec(_href);
  if (fileRe) {
    var fileType = fileRe[1];
    fileTypeObj[_href] = fileType;
    return fileType;
  }
  return '';
}

var encryObj = {};
function getEncryToken(href) {
  var _href = href || window.location.href;
  if (encryObj[_href]) return encryObj[_href];
  var token = /(doc|sheet|mindnote|slide|folder)\/([A-Za-z0-9_]*)/.exec(_href); // 增加_, 适配离线创建文档的token, 例fake_2222222
  if (token && token[2]) {
    var _encryToken = (0, _encryption.encryptTea)(token[2]);
    encryObj[_href] = _encryToken;
    return _encryToken;
  }
  return '';
}

function getCreateDate() {
  var createTime = (0, _get3.default)(window, 'teaMap.createTime');
  if (!createTime) return;
  return (0, _timeHelper.getDateStr)(createTime);
}

function getFromCreateDate() {
  var createTime = (0, _get3.default)(window, 'teaMap.createTime');
  if (!createTime) return;

  var createDate = createTime * 1000;
  var now = new Date();

  return Math.floor((now - createDate) / 86400000);
}

function getIsOwner() {
  return (getUserId() === getOwnerId()).toString();
}

function getUserId() {
  return (0, _encryption.encryptTea)((0, _get3.default)(window, 'User.id'));
}

function getCreateUid() {
  return (0, _encryption.encryptTea)((0, _get3.default)(window, 'teaMap.createUid'));
}

function getOwnerId() {
  return (0, _encryption.encryptTea)((0, _get3.default)(window, 'teaMap.ownerId'));
}

var getTeaMapMsg = function getTeaMapMsg(key) {
  return function () {
    return (0, _get3.default)(window, 'teaMap[' + key + ']') || '';
  };
};

function shouldSendTea() {
  if ((0, _networkHelper.isUnitTestEnv)()) return false;
  return (0, _get3.default)(window, 'User.departmentId') !== '-1';
}

/* ================ helpers start here ================ */

/* ================ 字段配置开始 ================ */
/* 需要默认添加的字段 */
/* 请注意需要加密id字段 */
var moduleFileds = ['module', 'sub_module', 'src_module', 'src_sub_module'];

var fileFileds = ['file_id', 'file_type'];

var crossTenantRequiredFields = ['file_tenant_id', 'file_is_cross_tenant'];

var session = ['session_id', 'member_id'];

var defaultOptionKeys = [].concat(moduleFileds, fileFileds, ['loc_file_id', 'loc_file_type'], session, crossTenantRequiredFields, ['chat_id']);

var suiteOptionKeys = [].concat(moduleFileds, fileFileds, ['create_uid', 'owner_id', 'is_owner', 'create_time', 'create_date', 'from_create_date'], session, crossTenantRequiredFields, ['chat_id']);

/* ================ 字段配置结束 ================ */

/* ================ 字段值Getter指派 ================ */
var getDefaultOptions = exports.getDefaultOptions = {
  module: function module() {
    return getModule().module;
  },
  sub_module: function sub_module() {
    return getModule().sub_module;
  },
  src_module: function src_module() {
    return getModule().src_module;
  },
  src_sub_module: function src_sub_module() {
    return getModule().src_sub_module;
  },
  file_id: getEncryToken,
  file_type: getFileType,
  loc_file_id: getEncryToken,
  loc_file_type: getFileType,
  create_uid: getCreateUid,
  owner_id: getOwnerId,
  is_owner: getIsOwner,
  create_time: getTeaMapMsg('createTime'),
  create_date: getCreateDate,
  from_create_date: getFromCreateDate,
  session_id: getTeaMapMsg('sessionId'),
  member_id: getTeaMapMsg('memberId'),
  file_tenant_id: function file_tenant_id() {
    return (0, _encryption.encryptTea)((0, _getFileInfo.getFileInfoObj)().file_tenant_id);
  },
  file_is_cross_tenant: function file_is_cross_tenant() {
    return (0, _getFileInfo.getFileInfoObj)().file_is_cross_tenant;
  },
  chat_id: function chat_id() {
    return (0, _envHelper.isAnnouncement)() ? (0, _getAllUrlParams.getAllUrlParams)()['chat_id'] : '';
  }
};

var collectEvent = function collectEvent(eventName) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  try {
    defaultOptionKeys.forEach(function (key) {
      if (!options[key]) {
        var val = getDefaultOptions[key] && getDefaultOptions[key]();
        if (!(0, _isUndefined3.default)(val)) {
          options[key] = val;
        }
      }
    });
    if (window.__TEA_DEVTOOLS__) {
      window.__TEA_DEVTOOLS__.send(eventName, options);
    }
    var defaultOptions = {
      is_owner: getIsOwner(),
      network_status: (0, _networkStateHelper.isOnLine)() ? _networkStateHelper.ONLINE : _networkStateHelper.OFFLINE
    };
    if (shouldSendTea()) {
      return collectEventFixParams(eventName, (0, _merge3.default)(defaultOptions, options));
    }
  } catch (e) {
    console.info('collect Event error', e);
  }
};

var collectWithCustomizeParam = function collectWithCustomizeParam() {
  var param = {};

  return {
    setParam: function setParam(type, val) {
      param[type] = val;
    },
    getParam: function getParam(type, defaultVal) {
      return param[type] || defaultVal;
    }
  };
};

var collectWithCustomizeFn = exports.collectWithCustomizeFn = collectWithCustomizeParam();

function collectSuiteEvent(eventName) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  try {
    suiteOptionKeys.forEach(function (key) {
      if (!options[key]) {
        var val = getDefaultOptions[key]();

        if (!(0, _isUndefined3.default)(val)) {
          options[key] = val;
        }
      }
    });

    if (eventName === 'sheet_opration' && !options['mode']) {
      options['mode'] = collectWithCustomizeFn.getParam('mode', 'default');
    }

    if (window.__TEA_DEVTOOLS__) {
      window.__TEA_DEVTOOLS__.send(eventName, options);
    }

    var defaultOpts = {
      is_owner: getIsOwner()
    };

    if (shouldSendTea()) {
      collectEventFixParams(eventName, (0, _merge3.default)(defaultOpts, options));
    }
  } catch (e) {
    console.log('collect suite event error', e);
  }
}

function fixParams(params) {
  var token = (0, _suiteHelper.getToken)();
  if ((typeof params === 'undefined' ? 'undefined' : (0, _typeof3.default)(params)) === 'object') {
    try {
      var str = JSON.stringify(params);
      str = str.replace(new RegExp(token, 'g'), getEncryToken());
      params = JSON.parse(str);
    } catch (e) {
      console.log(e);
    }
  }
  return params;
}

var createNewSessionId = exports.createNewSessionId = function createNewSessionId() {
  return (0, _string.generateRandomString)(20);
};

var collectCommentSubmitEventSuccess = exports.collectCommentSubmitEventSuccess = function collectCommentSubmitEventSuccess(type, commentId, replyId) {
  var option = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

  var options = Object.assign({
    comment_id: commentId,
    comment_type: type,
    reply_id: replyId,
    status_code: 0,
    status_name: 'success',
    zone: (0, _teaHelper.getZone)()
  }, option);
  collectSuiteEvent('click_comment_submit', options);
};

var collectCommentLog = exports.collectCommentLog = function collectCommentLog(type, commentId, replyId, stage, extra) {
  var options = {
    comment_id: commentId,
    comment_type: type,
    reply_id: replyId,
    comment_stage: stage,
    comment_extra: extra
  };
  collectSuiteEvent('dev_comment_event', options);
};

var collectCommentSubmitEventError = exports.collectCommentSubmitEventError = function collectCommentSubmitEventError(type, code, msg) {
  collectSuiteEvent('click_comment_submit', {
    comment_type: type,
    status_name: msg,
    status_code: code,
    zone: (0, _teaHelper.getZone)()
  });
};

var collectCommerce = exports.collectCommerce = function collectCommerce(module) {
  collectEvent('docs_client_commerce', {
    action: 'popup_banner',
    item: 'create',
    sub_item: 'create_new_objs',
    source: '',
    module: module
  });
};

function collectEventFixParams(eventName, options) {
  var fixedParams = fixParams(options);
  (0, _bytedTeaSdk2.default)(eventName, fixedParams);
}
window._tea = _bytedTeaSdk2.default;
exports.default = collectEvent;

/***/ }),
/* 43 */,
/* 44 */,
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isTranslateEnabled = exports.isSupportTranslate = exports.isSupportReaction = exports.isSupportNativeOperationPanel = exports.isUserGuideEnabled = exports.isSupportSheetOfflineEdit = exports.isSupportNativeUserGuide = exports.isSupportNativeImageMenu = exports.isSupportPreferenceStorage = exports.isNativeRNEnabled = exports.isSupportVoiceComment = exports.isSupportEditComment = exports.isSupportRNReload = exports.isSupportNativeWatermark = exports.isSupportReminder = exports.isSupportNoEditModeJSBridge = exports.isSupportMindNoteEdit = exports.isSupportSheetToolbar = exports.isSupportOfflineDocModify = exports.isSupportCommentInImgPreviewer = exports.isSupportTypePreload = exports.isSupportDocFind = exports.isSupportNewToolbar = exports.isSupportSheetContextMenu = exports.isSupportSheetComment = exports.isSupportPrecisePanelHeight = exports.isPreventGetTokenInfo = exports.isSupportNativeLikeList = exports.isSupportSelection = exports.isSupportCustomMenu = exports.isSupportNativeUploadImage = exports.isSupportClickToEdit = exports.isSupportSlide = exports.isSupportTosFilePreview = exports.isSupportIOSRender = exports.isSupportCreate = exports.getSdkVersion = undefined;

var _get3 = __webpack_require__(14);

var _get4 = _interopRequireDefault(_get3);

exports.isHigher = isHigher;
exports.isSupport = isSupport;
exports.getAppVersion = getAppVersion;
exports.isSupportComment = isSupportComment;
exports.isSupportOfflineEdit = isSupportOfflineEdit;
exports.isSupportPreview = isSupportPreview;
exports.isSupportSheetEditor = isSupportSheetEditor;
exports.isSupportHideTitleBar = isSupportHideTitleBar;
exports.isSupportCommentCallback = isSupportCommentCallback;
exports.isSupportNativeNetwork = isSupportNativeNetwork;
exports.isSupportNativeFetch = isSupportNativeFetch;
exports.isDocsourceProtocol = isDocsourceProtocol;
exports.isSupportUserProfile = isSupportUserProfile;
exports.isSupportFilePreview = isSupportFilePreview;
exports.isSupportNativeFeed = isSupportNativeFeed;
exports.isSupportNativeAlert = isSupportNativeAlert;
exports.isSupportNativeToast = isSupportNativeToast;
exports.isSupportSmoothScrollWhenOpenKeyboard = isSupportSmoothScrollWhenOpenKeyboard;
exports.isSupportNativeMiddleToast = isSupportNativeMiddleToast;
exports.isSupportNewWebviewHistory = isSupportNewWebviewHistory;
exports.isSupportCatalogue = isSupportCatalogue;
exports.isSupportTitleAlignLeft = isSupportTitleAlignLeft;

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _suiteHelper = __webpack_require__(52);

var _memorize = __webpack_require__(1421);

var _memorize2 = _interopRequireDefault(_memorize);

var _domainHelper = __webpack_require__(557);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 判断 curVersion 是否大于等于 baseVersion
 * @param {string} curVersion 版本号
 * @param {string} baseVersion 版本号
 */
/**
 * iOS 发版版本: https://bytedance.feishu.cn/space/doc/MdViXFv8dOoa0NrpvQjXpf
 */

function isHigher() {
  var curVersion = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  var baseVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

  var curVersionArr = curVersion.split('.');
  var baseVersionArr = baseVersion.split('.');
  var versionLength = Math.max(curVersionArr.length, baseVersionArr.length);

  for (var index = 0; index < versionLength; index++) {
    var cur = curVersionArr[index];
    var base = baseVersionArr[index];

    if (!base) return true;
    if (!cur) return false;

    var curVersionNumber = Number(cur);
    var baseVersionNumber = Number(base);

    if (curVersionNumber < baseVersionNumber) {
      return false;
    }

    if (curVersionNumber > baseVersionNumber) {
      return true;
    }
  }

  return true;
}

/**
 * 判断版本是否支持
 * @param {string[]} larkVersions lark支持版本 Array [android, ios]
 * @param {string[]} docsVersions docs支持版本 Array [android, ios]
 * 如不支持，则传参为null
 * 例:android端不支持，ios支持docs版本为0.2.7，lark支持版本为1.8.4
 *   isSupport([null, '1.8.4'],[null, '0.2.7'])
 */
function isSupport(larkVersions, docsVersions) {
  var isDocsSDK = _browserHelper2.default.isDocsSDK;
  var supportVersion = void 0;
  if (isDocsSDK) {
    // docs sdk 即为lark
    if (_browserHelper2.default.android) {
      supportVersion = larkVersions[0];
    } else if (_browserHelper2.default.ios) {
      supportVersion = larkVersions[1];
    }
  } else {
    // app
    if (_browserHelper2.default.android) {
      supportVersion = docsVersions[0];
    } else if (_browserHelper2.default.ios) {
      supportVersion = docsVersions[1];
    }
  }
  var curVersion = getAppVersion();
  return supportVersion ? isHigher(curVersion, supportVersion) : false;
}

var getSdkVersion = exports.getSdkVersion = (0, _memorize2.default)(function () {
  var ua = window.navigator.userAgent;
  var sdkVersion = (0, _get4.default)(ua.match(/DocsSDK\/([0-9.]+)/i), '[1]');
  return sdkVersion;
});

var isSupportCreate = exports.isSupportCreate = (0, _memorize2.default)(function () {
  var curVersion = getSdkVersion();
  if (curVersion && _browserHelper2.default.isLark && (_browserHelper2.default.ios && isHigher(curVersion, '1.3') || !_browserHelper2.default.ios && isHigher(curVersion, '1.1.0'))) {
    return true;
  }

  return false;
});

var isSupportIOSRender = exports.isSupportIOSRender = (0, _memorize2.default)(function () {
  var curVersion = getSdkVersion();
  if (curVersion && _browserHelper2.default.ios && isHigher(curVersion, '1.7.0')) {
    return true;
  }
  return false;
});

function getAppVersion() {
  var isDocsSDK = _browserHelper2.default.isDocsSDK;
  if (isDocsSDK) {
    return getSdkVersion();
  }
  var ua = navigator.userAgent || '';
  return (0, _get4.default)(ua.match(/Docs[^SDK/]*\/([0-9.]+)/), '[1]');
}
/**
 * android：
 * lark docs从0.0.108开始支持native评论
 * docs app 从0.2.4开始支持
 * ios:
 * lark docs和docs app都从 0.
 */
function isSupportComment() {
  var isDocsSDK = _browserHelper2.default.isDocsSDK;
  var supportVersion = void 0;
  if (isDocsSDK) {
    // docs sdk
    if (_browserHelper2.default.android) {
      supportVersion = '1.1.108';
    } else if (_browserHelper2.default.ios) {
      supportVersion = '1.7.0';
    }
  } else {
    // app
    supportVersion = '0.2.4';
  }
  var curVersion = getAppVersion();
  return isHigher(curVersion, supportVersion);
}
// todo确认这个
function isSupportOfflineEdit() {
  var curVersion = getAppVersion();
  var supportVersion = '';
  if (_browserHelper2.default.isDocsSDK) {
    // docs sdk
    if (_browserHelper2.default.android) {
      supportVersion = '1.2.3';
    } else {
      supportVersion = '1.8.2';
      // return false;
    }
  } else {
    // app
    supportVersion = '0.2.5';
  }
  if (_browserHelper2.default.isIOS) {
    return isDocsourceProtocol() && isHigher(curVersion, supportVersion);
  }
  return isHigher(curVersion, supportVersion);
}

function isSupportPreview() {
  var curVersion = getAppVersion();
  var supportVersion = '';
  var isDocsSDK = _browserHelper2.default.isDocsSDK;

  if (isDocsSDK) {
    // docs sdk
    if (_browserHelper2.default.android) {
      supportVersion = '0.2.4';
    } else if (_browserHelper2.default.ios) {
      supportVersion = '1.8.0';
    }
  } else {
    // app
    supportVersion = '0.2.4';
  }
  return isHigher(curVersion, supportVersion);
}

function isSupportSheetEditor() {
  var curVersion = getAppVersion();
  var isDocsSDK = _browserHelper2.default.isDocsSDK;
  var supportVersion = void 0;
  if (isDocsSDK) {
    // docs sdk
    if (_browserHelper2.default.android) {
      supportVersion = '1.12.99';
    } else if (_browserHelper2.default.ios) {
      supportVersion = '1.9.1';
    }
  } else {
    // app
    supportVersion = '0.2.6';
  }
  return isHigher(curVersion, supportVersion);
}

function isSupportHideTitleBar() {
  // const curVersion = getAppVersion();
  // let supportVersion = '';
  // const isDocsSDK = browser.isDocsSDK;

  // if (isDocsSDK) { // docs sdk
  //   return;
  // } else { // app
  //   supportVersion = '0.2.5.1';
  // }
  // return isHigher(curVersion, supportVersion);
  return false;
}

/**
 * 针对ios端，新增了评论卡片打开后、通过回调获取可用屏幕高度的方法
 * android：不添加回调
 * ios:
 * lark docsSDK从1.8.3开始支持
 * docs app 从0.2.6开始
 */
function isSupportCommentCallback() {
  if (!_browserHelper2.default.isIOS) {
    return false;
  }
  var isDocsSDK = _browserHelper2.default.isDocsSDK;
  var supportVersion = void 0;
  if (isDocsSDK) {
    // docs sdk
    supportVersion = '1.8.3';
  } else {
    // app
    supportVersion = '0.2.6';
  }
  var curVersion = getAppVersion();
  return isHigher(curVersion, supportVersion);
}

/**
 * 是否支持离线化逻辑走客户端
 */
function isSupportNativeNetwork() {
  return isSupport(['1.12.99', '1.9.1'], ['0.2.7', '0.2.7']);
}

/**
 * 是否支持native fetch
 */
function isSupportNativeFetch() {
  if (_browserHelper2.default.isDocs) {
    if (_browserHelper2.default.ios) {
      return true;
    } else {
      var supportVersion = void 0;
      if (_browserHelper2.default.isDocsSDK) {
        // docs sdk
        supportVersion = '1.12.99';
      } else {
        // app
        supportVersion = '0.2.7';
      }
      var curVersion = getAppVersion();
      return isHigher(curVersion, supportVersion);
    }
  } else {
    return false;
  }
}

function isDocsourceProtocol() {
  return location.protocol.indexOf('docsource') > -1;
}

/**
 * 是否支持用户头像跳转
 */
function isSupportUserProfile() {
  return isSupport(['1.15.99', '1.9.4'], ['0.3.0', '0.3.0']);
}

// 是否支持文件预览
function isSupportFilePreview() {
  return isSupport(['1.14.99', '1.9.3'], ['0.2.9', '0.2.9']);
}

// 是否支持新文件预览 Lark20 开始
var isSupportTosFilePreview = exports.isSupportTosFilePreview = isSupport(['1.99.99', '2.0.0'], ['0.7.0', '0.7.0']);

// 是否支持客户端feed
function isSupportNativeFeed() {
  return isSupport(['1.15.99', '1.9.4'], ['0.3.0', '0.3.0']);
}

function isSupportNativeAlert() {
  return isSupport(['1.15.99', '1.9.4'], ['0.3.0', '0.3.0']);
}

function isSupportNativeToast() {
  return isSupport(['1.15.99', '1.9.4'], ['0.3.0', '0.3.0']);
}
var isSupportSlide = exports.isSupportSlide = isSupport(['2.8.0', '2.8.0'], ['0', '0']);

// 是否支持单击编辑
var isSupportClickToEdit = exports.isSupportClickToEdit = isSupport(['1.15.99', '1.9.4'], ['0.3.0', '0.3.0']);

// 是否支持键盘弹起时页面平滑滚动
function isSupportSmoothScrollWhenOpenKeyboard() {
  return isSupport(['1.17.99', '1.9.6'], ['0.5.0', '0.5.0']);
}

// 是否支持客户端type为3即中间无图标的toast
function isSupportNativeMiddleToast() {
  return isSupport(['1.18.99', '1.9.7'], ['0.6.0', '0.6.0']);
}

// 是否支持新开webview打开历史记录
function isSupportNewWebviewHistory() {
  return isSupport([null, '1.9.7'], [null, '0.6.0']);
}

// 是否支持 Native 上传图片 Lark1.19 iOS 开始支持, Android 待定
var isSupportNativeUploadImage = exports.isSupportNativeUploadImage = isSupport(['2.2.0', '1.9.7'], ['1.1.0', '0.6.0']);

// 是否支持 自定义菜单， Lark2.0.0 开始支持
var isSupportCustomMenu = exports.isSupportCustomMenu = isSupport(['1.99.99', '2.0.0'], ['0.7.0', '0.7.0']);

// 是否支持 滑动选区， Lark2.0.0 安卓开始支持
var isSupportSelection = exports.isSupportSelection = isSupport(['1.99.99', '2.5.0'], ['0.7.0', '1.4.0']);

// 是否支持 Native 点赞列表。
var isSupportNativeLikeList = exports.isSupportNativeLikeList = isSupport(['1.18.99', '1.9.7'], ['0.6.0', '0.6.0']);

// 点击更多按钮 是否阻止请求 getTokenInfo。
var isPreventGetTokenInfo = exports.isPreventGetTokenInfo = isSupportNativeLikeList;

// android端设置的卡片高度是否准确, iOS均支持
var isSupportPrecisePanelHeight = exports.isSupportPrecisePanelHeight = isSupport(['1.19.99', '0'], ['0.7.0', '0']);

// lark 2.0.0开始支持独立sheet 评论
var isSupportSheetComment = exports.isSupportSheetComment = isSupport(['1.19.99', '2.0.0'], ['0.7.0', '0.7.0']);

// 是否支持 sheet 剪切、复制、粘贴、清除 功能。
var isSupportSheetContextMenu = exports.isSupportSheetContextMenu = isSupport(['2.0.99', '2.0.99'], ['1.0.0', '1.0.0']);

// 是否支持 二级工具栏功能
var isSupportNewToolbar = exports.isSupportNewToolbar = isSupport(['2.2.0', '2.2.0'], ['1.1.0', '1.1.0']);

// 是否支持 Doc查找功能
var isSupportDocFind = exports.isSupportDocFind = isSupport(['2.2.99', '2.2.0'], ['1.2.0', '1.1.0']);

// 区分doc和sheet加载js
var isSupportTypePreload = exports.isSupportTypePreload = isSupport(['2.3.0', '2.3.0'], ['1.2.0', '1.2.0']);

// 是否支持 图片查看器评论
var isSupportCommentInImgPreviewer = exports.isSupportCommentInImgPreviewer = isSupport(['2.2.99', '2.3.0'], ['1.2.0', '1.2.0']);

// 是否支持离线文档的编辑
var isSupportOfflineDocModify = exports.isSupportOfflineDocModify = isSupport(['2.2.99', '2.3.0'], ['1.2.0', '1.2.0']);

// 是否支持 sheet 工具栏。
var isSupportSheetToolbar = exports.isSupportSheetToolbar = isSupport(['2.3.99', '2.3.99'], ['1.3.0', '1.3.0']);

// 是否支持思维笔记编辑
var isSupportMindNoteEdit = exports.isSupportMindNoteEdit = isSupport(['2.5.0', '2.5.0'], ['1.2.0', '1.2.0']);

// jsbridge 安卓多了一个editmode调用，只确认2.4以上不需要了，旧版本不确定
var isSupportNoEditModeJSBridge = exports.isSupportNoEditModeJSBridge = isSupport(['2.4.0', '2.4.0'], ['1.3.0', '1.3.0']);

// 是否支持 Reminder, Lark 2.7 开始
var isSupportReminder = exports.isSupportReminder = isSupport(['2.6.99', '2.6.99'], ['1.5.99', '1.5.99']);

// 水印2.7版本转到客户端支持
var isSupportNativeWatermark = exports.isSupportNativeWatermark = isSupport(['2.7.0', '2.7.0'], [null, null]);

// 2.8版本支持rn reload
var isSupportRNReload = exports.isSupportRNReload = isSupport(['2.8.0', '2.8.0'], ['1.7.99', '1.7.99']);

// 是否支持全文评论编辑/删除/解决
var isSupportEditComment = exports.isSupportEditComment = isSupport(['2.8.0', '2.8.0'], ['0', '0']);

// 2.9版本支持目录，灰度控制是否使用目录功能
function isSupportCatalogue() {
  var docsCatalogueEnabled = window.User.appConfig && window.User.appConfig.docsCatalogueEnabled;
  return isSupport(['2.9.0', '2.9.0'], ['1.8.0', '1.8.0']) && docsCatalogueEnabled;
}

// 是否支持语音评论
// export const isSupportVoiceComment = true;
var isSupportVoiceComment = exports.isSupportVoiceComment = isSupport(['2.9.0', '2.9.0'], ['1.8.0', '1.8.0']);

// 原来rn是由客户端控制是否开启的，但已经从2.6版本开始写死开启，2.9开始客户端去掉相应逻辑，改为前端写死;
var isNativeRNEnabled = exports.isNativeRNEnabled = isSupport(['2.9.0', '2.9.0'], ['1.8.0', '1.8.0']);

// 是否支持文档标题局左, 目前仅在doc生效
function isSupportTitleAlignLeft() {
  return (0, _suiteHelper.isDoc)() && isSupport(['2.9.0', '2.9.0'], ['1.8.0', '1.8.0']);
}

// 是否支持小型偏好数据都存储
var isSupportPreferenceStorage = exports.isSupportPreferenceStorage = isSupport(['3.1.0', '3.1.0'], ['1.9.0', '1.9.0']);

// 是否右上角菜单图标改为native实现，并且支持消息的红点逻辑
var isSupportNativeImageMenu = exports.isSupportNativeImageMenu = isSupport(['3.1.0', '3.1.0'], ['1.9.0', '1.9.0']);

// 是否支持客户端引导
var isSupportNativeUserGuide = exports.isSupportNativeUserGuide = isSupport(['3.1.0', '3.1.0'], ['1.9.0', '1.9.0']);

// 是否支持sheet离线编辑，lark 3.3开始支
var isSupportSheetOfflineEdit = exports.isSupportSheetOfflineEdit = isSupport(['3.3.0', '3.3.0'], ['2.1.0', '2.1.0']);

var isUserGuideEnabled = exports.isUserGuideEnabled = function () {
  var isUserGuideEnabled = (0, _get4.default)(window.User, 'appConfig.userGuideEnabled');
  return isUserGuideEnabled && isSupportNativeUserGuide;
}();

// 是否支持客户端Lark表情选择、复制、翻译等综合功能面板
var isSupportNativeOperationPanel = exports.isSupportNativeOperationPanel = isSupport(['3.3.0', '3.3.0'], ['2.1.0', '2.1.0']);

// 是否支持客户端Reaction
var isSupportReaction = exports.isSupportReaction = isSupport(['3.3.0', '3.3.0'], ['2.1.0', '2.1.0']);

// 是否支持翻译
var isSupportTranslate = exports.isSupportTranslate = isSupport(['3.3.0', '3.3.0'], ['1.9.0', '1.9.0']);

var isTranslateEnabled = exports.isTranslateEnabled = function () {
  var isUserGuideEnabled = (0, _get4.default)(window.User, 'appConfig.docsTranslateEnabled');
  return isUserGuideEnabled && isSupportTranslate || (0, _domainHelper.isStagingEnv)();
}();

/***/ }),
/* 46 */,
/* 47 */,
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.selectIsOwnerOfSelectedFirstFile = exports.selectRoute = exports.selectFolderFetchStatus = exports.selectSharedMetaStatus = exports.selectMyRootMetaStatus = exports.selectRootMetaLoadingStatus = exports.selectRecentObjEntities = exports.selectRecentObjTokens = exports.selectCurrentFileEntity = exports.selectCurrentFile = exports.selectCurrentPathAndMeta = exports.selectCurrentPath = exports.selectCurrentFileHistoryObjTokens = exports.selectSharedFiles = exports.selectShareObjectsFiles = exports.selectMyFiles = exports.selectCurrentFiles = exports.createFilesSelectorByTokens = exports.selectCurrentFileHistoryTokens = exports.selectSharedFileTokens = exports.selectMyFileTokens = exports.selectCurrentFileTokens = exports.selectCurrentFolderLoadInfo = exports.createPreviousFileTokensLengthSelectorByType = exports.selectSharedFilesLoadInfo = exports.selectStarListLoadInfo = exports.selectRecentObjLoadInfo = exports.selectExplorerPaginationInfo = exports.selectSharedFileRootToken = exports.selectMyFileRootToken = exports.selectRootToken = exports.selectTrClicked = exports.selectShareTree = exports.selectFolderTree = exports.selectShouldLoadShare = exports.selectStaredFiles = exports.selectPinnedFiles = exports.createSelectFilesByFileMetas = exports.selectSelectedFirstFile = exports.selectSelectedFiles = exports.selectHiddenShareFoldersTokens = exports.selectSelectedFirstFileMeta = exports.selectExplorerListLoadingStatus = exports.selectSelectedFileMetas = exports.selectCurrentFileToken = exports.selectFileHistoryTokens = exports.selectStaredFileMetas = exports.selectPinedFileMetas = exports.selectFileTokens = exports.selectHasShareFolder = exports.selectObjEntities = exports.selectUsersEntities = exports.selectFileEntities = undefined;

var _isUndefined2 = __webpack_require__(227);

var _isUndefined3 = _interopRequireDefault(_isUndefined2);

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reselect = __webpack_require__(131);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(85);

var _user = __webpack_require__(72);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var emptyMap = _immutable2.default.Map();
var emptyList = _immutable2.default.List();
var selectFileEntities = exports.selectFileEntities = function selectFileEntities(state) {
    return state.entities.nodes;
};
var selectUsersEntities = exports.selectUsersEntities = function selectUsersEntities(state) {
    return state.entities.users;
};
var selectObjEntities = exports.selectObjEntities = function selectObjEntities(state) {
    return state.entities.objs;
};
var selectHasShareFolder = exports.selectHasShareFolder = function selectHasShareFolder(state) {
    return state.appState.hasShareFolder;
};
var selectFileTokens = exports.selectFileTokens = function selectFileTokens(state) {
    return state.appState.fileTokens;
};
var selectPinedFileMetas = exports.selectPinedFileMetas = function selectPinedFileMetas(state) {
    return state.appState.pinedFileMetas;
};
var selectStaredFileMetas = exports.selectStaredFileMetas = function selectStaredFileMetas(state) {
    return state.appState.staredFileMetas;
};
var selectFileHistoryTokens = exports.selectFileHistoryTokens = function selectFileHistoryTokens(state) {
    return state.appState.fileTokensHistory;
};
var selectCurrentFileToken = exports.selectCurrentFileToken = function selectCurrentFileToken(state) {
    return state.appState.currentFileToken;
};
var selectSelectedFileMetas = exports.selectSelectedFileMetas = function selectSelectedFileMetas(state) {
    return state.appState.selectedFileMetas;
};
var selectExplorerListLoadingStatus = exports.selectExplorerListLoadingStatus = function selectExplorerListLoadingStatus(state) {
    return state.appState.explorerListLoadingStatus;
};
var selectSelectedFirstFileMeta = exports.selectSelectedFirstFileMeta = (0, _reselect.createSelector)(selectSelectedFileMetas, function (metas) {
    return metas.first();
});
var selectHiddenShareFoldersTokens = exports.selectHiddenShareFoldersTokens = (0, _reselect.createSelector)(selectFileTokens, function (fileTokens) {
    var tokens = fileTokens.get('hidden-share-folders');
    if ((0, _isUndefined3.default)(tokens)) return _immutable2.default.List();
    return tokens;
});
var selectSelectedFiles = exports.selectSelectedFiles = (0, _reselect.createSelector)(selectSelectedFileMetas, selectObjEntities, selectFileEntities, function (metas, objMap, nodeMap) {
    return metas.toList().map(function (meta) {
        var ObjToken = meta.obj_token,
            type = meta.type,
            token = meta.token;

        return ObjToken ? objMap.get(type + ':' + ObjToken) : nodeMap.get(token);
    });
});
var selectSelectedFirstFile = exports.selectSelectedFirstFile = (0, _reselect.createSelector)(selectSelectedFirstFileMeta, selectObjEntities, selectFileEntities, function (meta, objMap, nodeMap) {
    if (!meta) return null;
    var ObjToken = meta.obj_token,
        type = meta.type,
        token = meta.token;

    return ObjToken ? objMap.get(type + ':' + ObjToken) : nodeMap.get(token);
});
var createSelectFilesByFileMetas = exports.createSelectFilesByFileMetas = function createSelectFilesByFileMetas(fileMetasSelector) {
    return (0, _reselect.createSelector)(fileMetasSelector, selectObjEntities, selectFileEntities, function (metas, objMap, nodeMap) {
        var rst = metas.map(function (meta) {
            var token = meta.token,
                objToken = meta.obj_token,
                type = meta.type;

            var node = void 0;
            if (token) {
                node = nodeMap.get(token);
            }
            if (objToken) {
                node = objMap.get(type + ':' + objToken);
            }
            return node;
        });
        return rst;
    });
};
var selectPinnedFiles = exports.selectPinnedFiles = createSelectFilesByFileMetas(selectPinedFileMetas);
var selectStaredFiles = exports.selectStaredFiles = createSelectFilesByFileMetas(selectStaredFileMetas);
var selectShouldLoadShare = exports.selectShouldLoadShare = function selectShouldLoadShare(state) {
    return state.appState.shouldLoadShare;
};
var selectFolderTree = exports.selectFolderTree = function selectFolderTree(state) {
    return state.appState.folderTree;
};
var selectShareTree = exports.selectShareTree = function selectShareTree(state) {
    return state.appState.shareTree;
};
var selectTrClicked = exports.selectTrClicked = function selectTrClicked(state) {
    return state.appState.trClicked;
};
var selectRootToken = exports.selectRootToken = function selectRootToken(state) {
    return state.appState.rootToken;
};
// get里需要传入字符串，NUM_ROOT对应的都是数字，所以这里使用了模板字符串来转换
var selectMyFileRootToken = exports.selectMyFileRootToken = function selectMyFileRootToken(state) {
    return state.appState.rootToken.get('' + _$constants.common.NUM_ROOT_META.EXPLORER);
};
var selectSharedFileRootToken = exports.selectSharedFileRootToken = function selectSharedFileRootToken(state) {
    return state.appState.rootToken.get('' + _$constants.common.NUM_ROOT_META.SHARE_FILES);
};
var selectExplorerPaginationInfo = exports.selectExplorerPaginationInfo = function selectExplorerPaginationInfo(state) {
    return state.appState.explorerPaginationInfo;
};
var selectRecentObjLoadInfo = exports.selectRecentObjLoadInfo = function selectRecentObjLoadInfo(state) {
    return selectExplorerPaginationInfo(state).get('recent');
};
var selectStarListLoadInfo = exports.selectStarListLoadInfo = function selectStarListLoadInfo(state) {
    return selectExplorerPaginationInfo(state).get('star');
};
var selectSharedFilesLoadInfo = exports.selectSharedFilesLoadInfo = (0, _reselect.createSelector)(selectExplorerPaginationInfo, function (paginationInfoMap) {
    return paginationInfoMap.get('share-objects') || emptyMap;
});
var createPreviousFileTokensLengthSelectorByType = exports.createPreviousFileTokensLengthSelectorByType = function createPreviousFileTokensLengthSelectorByType(type) {
    return function (state) {
        return (0, _reselect.createSelector)(selectRootToken, selectFileTokens, function (rootTokenMap, fileTokens) {
            var token = rootTokenMap.get('' + type);
            if (!token) return 0;
            return fileTokens.get(token).size;
        })(state);
    };
};
var selectCurrentFolderLoadInfo = exports.selectCurrentFolderLoadInfo = (0, _reselect.createSelector)(selectCurrentFileToken, selectExplorerPaginationInfo, function (currentFileToken, explorerLoadInfoMap) {
    return explorerLoadInfoMap.get(currentFileToken) || emptyMap;
});
var createFileTokensSelectorByToken = function createFileTokensSelectorByToken(tokenSelector) {
    return (0, _reselect.createSelector)(selectFileTokens, tokenSelector, function (fileTokens, token) {
        return fileTokens.get(token) || emptyList;
    });
};
// TODO: 替换
var selectCurrentFileTokens = exports.selectCurrentFileTokens = (0, _reselect.createSelector)(selectFileTokens, selectCurrentFileToken, function (fileTokens, currentToken) {
    return fileTokens.get(currentToken) || emptyList;
});
var selectMyFileTokens = exports.selectMyFileTokens = createFileTokensSelectorByToken(selectMyFileRootToken);
var selectSharedFileTokens = exports.selectSharedFileTokens = createFileTokensSelectorByToken(selectSharedFileRootToken);
var selectCurrentFileHistoryTokens = exports.selectCurrentFileHistoryTokens = (0, _reselect.createSelector)(selectFileHistoryTokens, selectCurrentFileToken, function (fileHistoryTokens, currentToken) {
    return fileHistoryTokens.get(currentToken) || emptyList;
});
var createFilesSelectorByTokens = exports.createFilesSelectorByTokens = function createFilesSelectorByTokens(tokensSelector) {
    return (0, _reselect.createSelector)(tokensSelector, selectFileEntities, selectObjEntities, selectUsersEntities, function (tokens, fileEntities, objEntities, userEntities) {
        var typeMappedFile = tokens.map(function (nodeToken, i) {
            var targetEntity = fileEntities.get(nodeToken);
            // 后端有可能出现返回的实体里缺少数据
            if (!targetEntity) {
                return null;
            }
            var objToken = targetEntity.get('obj_token');
            // map 2 the true type
            // @TODO: debug here.
            if (objToken !== '') {
                var tempTarget = objEntities.get(objToken);
                if (!tempTarget) {
                    console.log({
                        objToken: objToken,
                        objEntities: objEntities
                    });
                    return null;
                }
                targetEntity = objEntities.get(objToken).delete('token').merge({ token: nodeToken });
            }
            var createUser = userEntities.getIn(['' + targetEntity.get('create_uid'), 'name']);
            var owner = userEntities.getIn(['' + targetEntity.get('owner_id'), 'name']);
            var editUser = userEntities.getIn(['' + targetEntity.get('edit_uid'), 'name']);
            return targetEntity.merge({
                create_user: createUser,
                edit_user: editUser,
                edit_user_name: editUser,
                owner_user_name: owner,
                create_user_name: createUser
            });
        });
        return typeMappedFile.filter(function (file) {
            return file !== null;
        });
    });
};
var selectCurrentFiles = exports.selectCurrentFiles = createFilesSelectorByTokens(selectCurrentFileTokens);
var selectMyFiles = exports.selectMyFiles = createFilesSelectorByTokens(selectMyFileTokens);
var selectShareObjectsFiles = exports.selectShareObjectsFiles = function selectShareObjectsFiles(state) {
    return state.appState.shareObjectsList;
};
var selectSharedFiles = exports.selectSharedFiles = (0, _reselect.createSelector)(selectShareObjectsFiles, selectObjEntities, function (objList, objEntities) {
    return objList.map(function (objToken) {
        return objEntities.get(objToken);
    });
});
var selectCurrentFileHistoryObjTokens = exports.selectCurrentFileHistoryObjTokens = (0, _reselect.createSelector)(selectCurrentFileHistoryTokens, selectFileEntities, selectObjEntities, function (historyTokens, fileEntities, objEntities) {
    return historyTokens.map(function (token) {
        var targetEntity = fileEntities.get(token);
        return targetEntity.get('obj_token').split(':')[1];
    });
});
var selectCurrentPath = exports.selectCurrentPath = function selectCurrentPath(state) {
    return state.appState.currentPath;
};
var selectCurrentPathAndMeta = exports.selectCurrentPathAndMeta = (0, _reselect.createSelector)(selectCurrentPath, selectFileEntities, function (paths, entities) {
    var rst = paths.map(function (path) {
        var name = void 0;
        // 后端返回是share-folders，
        // 因为这个目录并没有真正的实体数据
        // 所以需要在这里手动补充name
        if (path === 'share-folders') {
            name = t('common.shared_folders');
        } else {
            name = entities.getIn(['' + path, 'name']);
        }
        return {
            name: name,
            type: entities.getIn(['' + path, 'type']),
            token: path
        };
    });
    return rst;
});
var selectCurrentFile = exports.selectCurrentFile = (0, _reselect.createSelector)(selectCurrentPath, selectFileEntities, function (path, entities) {
    var currentToken = path.last();
    return _immutable2.default.Map({
        name: entities.getIn(['' + currentToken, 'name']),
        token: currentToken
    });
});
/* 返回当前file的实体 */
var selectCurrentFileEntity = exports.selectCurrentFileEntity = (0, _reselect.createSelector)(selectCurrentPath, selectFileEntities, function (path, entities) {
    var currentToken = path.last();
    return entities.getIn(['' + currentToken]);
});
var selectRecentObjTokens = exports.selectRecentObjTokens = function selectRecentObjTokens(state) {
    return state.appState.recentObjs;
};
var selectRecentObjEntities = exports.selectRecentObjEntities = (0, _reselect.createSelector)(selectRecentObjTokens, selectObjEntities, selectUsersEntities, function (recentObjTokens, objEntities, userEntities) {
    return recentObjTokens.map(function (token) {
        return objEntities.get(token);
    });
});
var selectRootMetaLoadingStatus = exports.selectRootMetaLoadingStatus = function selectRootMetaLoadingStatus(state) {
    return state.appState.rootMetaLoadingStatus;
};
var selectMyRootMetaStatus = exports.selectMyRootMetaStatus = function selectMyRootMetaStatus(state) {
    return selectRootMetaLoadingStatus(state).get(_$constants.common.NUM_ROOT_META.EXPLORER + '');
};
var selectSharedMetaStatus = exports.selectSharedMetaStatus = function selectSharedMetaStatus(state) {
    return (0, _common.selectFetchStatus)('shareObjects')(state);
};
var selectFolderFetchStatus = exports.selectFolderFetchStatus = (0, _reselect.createSelector)((0, _common.selectFetchStatus)('rootMeta'), (0, _common.selectFetchStatus)('fileMeta'), function () {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
    }

    var statusArr = Array.from(args);
    var isFolderLoaded = statusArr.some(function (val) {
        return val === _$constants.common.StatusMap.loaded;
    });
    return isFolderLoaded ? _$constants.common.StatusMap.loaded : statusArr[0];
});
var selectRoute = exports.selectRoute = function selectRoute(state) {
    return state.appState.route;
};
// export const selectCurrentRootType = state =>
//   selectRoute(state).get('rootType');
// export const selectCurrentRootMetaLoadingStatus = state => {
//   return state.appState.rootMetaLoadingStatus.get(String(selectCurrentRootType(state)));
// };
// export const selectCurrentFileMetaStatus = state => {
//   return selectFetchStatus('fileMeta')(state);
// };
var selectIsOwnerOfSelectedFirstFile = exports.selectIsOwnerOfSelectedFirstFile = (0, _reselect.createSelector)(selectSelectedFirstFile, _user.selectCurrentUser, function (file, currentUser) {
    if (!file || !currentUser) return null;
    return file.owner_id === currentUser.get('id');
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 49 */,
/* 50 */,
/* 51 */,
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _slicedToArray2 = __webpack_require__(111);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

exports.suiteType = suiteType;
exports.isDoc = isDoc;
exports.isMindNote = isMindNote;
exports.isSlide = isSlide;
exports.isSheet = isSheet;
exports.suiteTypeNum = suiteTypeNum;
exports.getToken = getToken;
exports.isPreloading = isPreloading;
exports.isFromMultiTask = isFromMultiTask;
exports.isSuiteMention = isSuiteMention;

var _$constants = __webpack_require__(5);

var _urlHelper = __webpack_require__(128);

var _likeHelper = __webpack_require__(361);

var _networkHelper = __webpack_require__(113);

var _const = __webpack_require__(742);

var _mentionHelper = __webpack_require__(570);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 从path中正则匹配拿到当前文档类型
 * 获取当前一级目录, sheet|doc|folder|trash|like-list
 */
function suiteType() {
  var path = window.location.pathname;
  var result = path.match(new RegExp('^(' + _networkHelper.pathPrefix + ')?/([a-zA-Z-]+)/'));
  if (result) {
    var _result = (0, _slicedToArray3.default)(result, 3),
        matched = _result[2];

    if (matched === 'like-list') {
      // like-list 路由下，文件类型要从 query 里的 refer_type 得到
      // refer_type 与 文件类型映射规则如下
      // 1: doc
      // 2: sheet
      var referType = Number((0, _urlHelper.parseQuery)(window.location.search).refer_type);
      if (_likeHelper.ReferTypeToFileTypeMap.has(referType)) {
        matched = _likeHelper.ReferTypeToFileTypeMap.get(referType);
      }
    } else if (matched === 'bitable') {
      // TODO: bitable 先伪装成 sheet，bittable 后端接入后要更新
      matched = 'sheet';
    }
    return matched;
  }
}

function isDoc() {
  return suiteType() === 'doc';
}

function isMindNote() {
  return suiteType() === 'mindnote';
}

function isSlide() {
  return suiteType() === 'slide';
}

function isSheet() {
  return suiteType() === 'sheet';
}

/**
 * 获取当前套件类型
 * sheet:3
 * doc:2 (like-list 属于 doc)
 * folder:0
 * trash:1
 * mindnote:11
 */
function suiteTypeNum() {
  return parseInt(_$constants.common.FILE_URL_TYPE_MAP[suiteType()], 10);
}

/**
 * 通过url来获取token
 */
function getToken(href) {
  var _href = href || window.location.href;
  // eslint-disable-next-line no-useless-escape
  var reg = new RegExp('(folder|' + _mentionHelper.mentionTypeReg + ')/([A-Za-z0-9_-]*)');
  var token = reg.exec(_href);
  if (token && token[2]) {
    return token[2];
  }
  return '';
}

// 是否为预加载
function isPreloading() {
  var isTemplate = /\/folder\/\?template=true/.test(location.href) || new RegExp('^(' + _networkHelper.pathPrefix + ')?/blank').test(location.pathname);
  return isTemplate;
}

function isFromMultiTask() {
  var queryObj = (0, _urlHelper.parseQuery)(location.href) || {};
  return queryObj.from === 'multi_task';
}

function isSuiteMention(mentionType) {
  mentionType = Number(mentionType);
  return mentionType === _const.TYPE_ENUM.USER || mentionType === _const.TYPE_ENUM.FILE || mentionType === _const.TYPE_ENUM.SHEET || mentionType === _const.TYPE_ENUM.BITABLE || mentionType === _const.TYPE_ENUM.MINDNOTE || mentionType === _const.TYPE_ENUM.SLIDE || mentionType === _const.TYPE_ENUM.BOX;
}

/***/ }),
/* 53 */,
/* 54 */,
/* 55 */,
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setExplorerListLoadingStatus = exports.removeFilesShareInfo = exports.fetchPagedStarList = exports.fetchStarList = exports.fetchPagedRecentObjs = exports.fetchRecentObjs = exports.cancelUpdateShareFolderDesc = exports.updateShareFolderDesc = exports.removeStar = exports.addStar = exports.addHelp = exports.removePin = exports.addPinSilently = exports.addPin = exports.fetchPinList = exports.transferShareFolderOwner = exports.cancelableCopyShareFileToPersonalFolder = exports.cancelCopyShareFileToPersonalFolder = exports.copyShareFileToPersonalFolder = exports.deleteOrRemoveFiles = exports.cancelDeleteRemovedFile = exports.deleteRemovedFile = exports.deleteObject = exports.cancelableRemoveFile = exports.cancelRemoveFile = exports.removeFile = exports.cancelRestoreRemovedFile = exports.restoreRemovedFile = exports.cancelableMoveFile = exports.cancelMoveFile = exports.moveFile = exports.fetchFolderTree = exports.cancelableRenameFile = exports.renameFile = exports.createShareFolder = exports.createFilesByFakeTokens = exports.createFolder = exports.createFile = exports.fetchTreeFileMeta = exports.fetchTreeRootMeta = exports.cancelDismissShareFolder = exports.dismissShareFolder = exports.fetchShareHome = exports.fetchFileMeta = exports.fetchShareFiles = exports.fetchInitialShareFiles = exports.fetchRootMeta = exports.fetchShareObjects = exports.fetchExplorerRootTokenMap = exports.loadPersistedRootTokenMap = exports.fetchSelectedFileData = exports.fetchExplorerFolderList = exports.removeFromFileTokens = exports.setRecentObjTokens = exports.setSelectedFileMetas = exports.setPath = exports.setSelectedFolderData = exports.setShouldLoadShare = exports.setTrClicked = exports.setHasShareFolder = exports.setRootMeta = exports.checkRootMeta = exports.setCurrentSuiteToken = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

var _common2 = __webpack_require__(85);

var _explorer = __webpack_require__(48);

var _actionHelper = __webpack_require__(531);

var _models = __webpack_require__(172);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var setCurrentSuiteToken = exports.setCurrentSuiteToken = function setCurrentSuiteToken(objToken, type) {
    return {
        type: _$constants.actionTypes.explorer.SET_CURRENT_SUITE_TOKEN,
        payload: { obj_token: objToken, type: type }
    };
};
var checkRootMeta = function checkRootMeta(_ref) {
    var token = _ref.token,
        type = _ref.type,
        rest = (0, _objectWithoutProperties3.default)(_ref, ['token', 'type']);
    return {
        type: _$constants.actionTypes.explorer.CHECK_ROOT_META,
        payload: Object.assign({ token: token, type: type }, rest)
    };
};
exports.checkRootMeta = checkRootMeta;
var setRootMeta = function setRootMeta(_ref2) {
    var token = _ref2.token,
        type = _ref2.type,
        rest = (0, _objectWithoutProperties3.default)(_ref2, ['token', 'type']);
    return {
        type: _$constants.actionTypes.explorer.SET_ROOT_META,
        payload: Object.assign({ token: token, type: type }, rest)
    };
};
exports.setRootMeta = setRootMeta;
var setHasShareFolder = exports.setHasShareFolder = function setHasShareFolder(hasShareFolder) {
    return {
        type: _$constants.actionTypes.explorer.SET_HAS_SHARE_FOLDER,
        payload: hasShareFolder
    };
};
var setTrClicked = exports.setTrClicked = function setTrClicked(value) {
    return {
        type: _$constants.actionTypes.explorer.SET_TR_CLICKED,
        payload: value
    };
};
var setShouldLoadShare = exports.setShouldLoadShare = function setShouldLoadShare(value) {
    return {
        type: _$constants.actionTypes.explorer.SET_SHOULD_LOAD_SHARE,
        payload: value
    };
};
var setSelectedFolderData = exports.setSelectedFolderData = function setSelectedFolderData(data) {
    return {
        type: _$constants.actionTypes.explorer.SET_CURRENT_FOLDER_DATA,
        payload: data
    };
};
var setPath = exports.setPath = function setPath(path) {
    return {
        type: _$constants.actionTypes.explorer.SET_PATH,
        payload: { path: path }
    };
};
var setSelectedFileMetas = exports.setSelectedFileMetas = function setSelectedFileMetas(metas) {
    return {
        type: _$constants.actionTypes.explorer.SET_SELECTED_FILE_METAS,
        payload: metas
    };
};
var setRecentObjTokens = exports.setRecentObjTokens = function setRecentObjTokens(tokens) {
    return {
        type: _$constants.actionTypes.explorer.SET_RECENT_OBJ_TOKENS,
        payload: { tokens: tokens }
    };
};
var removeFromFileTokens = exports.removeFromFileTokens = function removeFromFileTokens(token, removeToken) {
    return {
        type: _$constants.actionTypes.explorer.REMOVE_FROM_FILE_TOKENS,
        payload: { token: token, removeToken: removeToken }
    };
};
var fetchExplorerFolderList = exports.fetchExplorerFolderList = function fetchExplorerFolderList() {
    var isContinuous = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    return {
        type: _$constants.actionTypes.explorer.FETCH_EXPLORER_FOLDER_LIST,
        payload: { isContinuous: isContinuous }
    };
};
var fetchSelectedFileData = exports.fetchSelectedFileData = function fetchSelectedFileData() {
    return {
        type: _$constants.actionTypes.explorer.FETCH_SELECTED_FILE_DATA
    };
};
var loadPersistedRootTokenMap = exports.loadPersistedRootTokenMap = function loadPersistedRootTokenMap(data) {
    return {
        type: _$constants.actionTypes.explorer.LOAD_PERSISTED_ROOT_TOKEN_MAP,
        payload: data
    };
};
/**
 * 获取用户 Explorer 下所有根目录 token map
 */
var fetchExplorerRootTokenMap = exports.fetchExplorerRootTokenMap = function fetchExplorerRootTokenMap() {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_EXPLORER_ROOT_TOKEN_MAP
    }, _common.REQUEST, {
        url: _$constants.apiUrls.GET_EXPLORER_ROOT_TOKEN_MAP
    });
};
/**
 * 「与我共享」新 api
 */
var fetchShareObjects = exports.fetchShareObjects = function fetchShareObjects() {
    var isContinuous = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 42;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.intermediate.FETCH_PAGED_DATA,
        payload: {
            realActionType: _$constants.actionTypes.explorer.FETCH_SHARE_OBJECTS,
            isContinuous: isContinuous,
            length: length
        }
    }, _common.DEFERRED, true);
};
/**
 * 获取个人文档/回收站目录下全部文件
 * @param {number} type Root类: 1回收站，4个人文档，5与我共享，6共享文件夹 文件类: 2 doc 3 表格
 */
var fetchRootMeta = exports.fetchRootMeta = function fetchRootMeta(type) {
    var isContinuous = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var length = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 42;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_ROOT_META,
        payload: {
            type: type,
            isContinuous: isContinuous,
            length: length
        }
    }, _common.DEFERRED, true);
};
var fetchInitialShareFiles = exports.fetchInitialShareFiles = fetchShareObjects.bind(undefined, false);
var fetchShareFiles = exports.fetchShareFiles = fetchShareObjects.bind(undefined, true);
/**
 * 获取文件信息
 * @param {string} token 空值则返回根目录信息
 * @param {number} needPath 1 or 0 是否需要返回path
 */
var fetchFileMeta = exports.fetchFileMeta = function fetchFileMeta() {
    var token = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    var needPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_FILE_META
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_FETCH_FILE_META,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, need_path: needPath },
        options: { injectRequestData: true }
    });
};
/**
 * 查询共享，优先返回 type=6 的数据
 * https://wiki.bytedance.net/pages/viewpage.action?pageId=145986898
 */
var fetchShareHome = exports.fetchShareHome = function fetchShareHome() {
    var length = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 42;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_SHARE_HOME
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_FETCH_SHARE_HOME,
        method: _$constants.apiUrls.METHOD.POST,
        data: { length: length }
    });
};
var dismissShareFolder = exports.dismissShareFolder = function dismissShareFolder(token) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.DISMISS_SHARE_FOLDER
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_SHARE_FOLDER_DISMISS,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token },
        options: { injectRequestData: true }
    });
};
var cancelDismissShareFolder = exports.cancelDismissShareFolder = function cancelDismissShareFolder() {
    return {
        type: 'CANCEL_' + _$constants.actionTypes.explorer.DISMISS_SHARE_FOLDER
    };
};
var fetchTreeRootMeta = exports.fetchTreeRootMeta = function fetchTreeRootMeta(type) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_TREE_ROOT_META
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_FETCH_ROOT_META,
        method: _$constants.apiUrls.METHOD.POST,
        data: { type: type },
        options: { injectArguments: true }
    });
};
var fetchTreeFileMeta = exports.fetchTreeFileMeta = function fetchTreeFileMeta() {
    var token = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    var needPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_TREE_FILE_META
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_FETCH_FILE_META,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, need_path: needPath },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { token: token, needPath: needPath });
            } }
    });
};
/**
 * 创建文件/文件夹
 * @param {string} title defaultValue:'' 文档标题
 */
var createFile = exports.createFile = function createFile(parentToken, type) {
    var name = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
    var template = arguments[3];
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.CREATE_FILE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_CREATE_FILE,
        method: _$constants.apiUrls.METHOD.POST,
        data: { parent_token: parentToken, type: type, name: name, template_name: template },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { type: type });
            } }
    });
};
var createFolder = exports.createFolder = function createFolder(parentToken, name) {
    return createFile(parentToken, _common.NUM_FILE_TYPE.FOLDER, name);
};
/**
 * 用本地临时token换成线上token
 * names=["singleTest","multiTesti"]&fake_tokens=["ynge6","6iwzeng"]
 */
var createFilesByFakeTokens = exports.createFilesByFakeTokens = function createFilesByFakeTokens(param) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.CREATE_FILE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_CREATE_FILE_BY_FAKE_TOKEN,
        method: _$constants.apiUrls.METHOD.POST,
        data: param,
        noStore: true,
        // headers: { 'Content-Type': 'application/json' },
        options: {
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res);
            }
        }
    });
};
// 在「共享」下面创建共享文件夹
var createShareFolder = exports.createShareFolder = function createShareFolder(name) {
    var needNotify = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    var description = arguments[2];
    var members = arguments[3];
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.CREATE_SHARE_FOLDER
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_CREATE_SHARE_FOLDER,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            name: name,
            need_notify: Number(needNotify),
            share_desc: description,
            members: JSON.stringify(members)
        }
    });
};
/**
 * 文件改名
 * @param {object} token 要改名的文件信息对象 包括token,name,type
 * @param {string} name 新的名字
 */
var renameFile = exports.renameFile = function renameFile(_ref14, newName, newDesc) {
    var token = _ref14.token,
        name = _ref14.name,
        type = _ref14.type;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.RENAME_FILE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_RENAME_FILE,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, name: newName, description: newDesc },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { oldName: name, newName: newName, token: token });
            } }
    });
};
var cancelableRenameFile = exports.cancelableRenameFile = function cancelableRenameFile(_ref16, newName, finalCb) {
    var token = _ref16.token,
        name = _ref16.name,
        type = _ref16.type;
    return function (dispatch, getState) {
        return dispatch(renameFile({ token: token, name: name, type: type }, newName)).then(function (successAction) {
            dispatch({
                type: _$constants.actionTypes.toast.TOAST_SHOW,
                toastConfig: {
                    type: 'success',
                    content: '\u300C' + name + '\u300D' + t('explorer.been_renamed') + '\u300C' + newName + '\u300D',
                    cancelable: true,
                    onCancel: function onCancel() {
                        dispatch(renameFile({ token: token, name: newName, type: type }, name)).then(function () {
                            return dispatch((0, _actionHelper.createCancelToastAction)());
                        });
                    }
                }
            });
        }).finally(function () {
            if (finalCb) {
                finalCb();
            }
        });
    };
};
/**
 * 获取移动目录树
 * @param {string} token 文件夹token
 */
var fetchFolderTree = exports.fetchFolderTree = function fetchFolderTree(token) {
    var hidden = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _models.ShareFolderHiddenType.FetchVisible;

    if (token === 'share-folders') token = '';
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_FOLDER_TREE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_GET_FOLDER_TREE,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            token: token,
            hidden: hidden
        },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { hidden: hidden });
            } }
    });
};
/**
 * 移动文件
 * @param {string} srcToken 被移动的文件的tokenx
 * @param {string} destToken 目标目录的token(不能为文档类型)
 */
var moveFile = exports.moveFile = function moveFile(srcToken, destToken) {
    var cancelable = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
    var isInNav = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.MOVE_FILE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_MOVE_FILE,
        method: _$constants.apiUrls.METHOD.POST,
        data: { src_token: srcToken, dest_token: destToken },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { srcToken: srcToken, destToken: destToken, isInNav: isInNav });
            } }
    });
};
var cancelMoveFile = exports.cancelMoveFile = function cancelMoveFile() {
    return {
        type: 'CANCEL_' + _$constants.actionTypes.explorer.MOVE_FILE
    };
};
var cancelableMoveFile = exports.cancelableMoveFile = function cancelableMoveFile(srcToken, destToken) {
    return function (dispatch, getState) {
        return dispatch(moveFile(srcToken, destToken)).then(function (successAction) {
            var isMulti = srcToken.length > 1;
            var successAmount = successAction.payload.success_tokens.length;
            var state = getState();
            var currentFileToken = (0, _explorer.selectCurrentFileToken)(state);
            var content = isMulti ? t('explorer.move_success') + ' ' + successAmount + ' ' + t('explorer.item') : t('explorer.move_success');
            dispatch({
                type: _$constants.actionTypes.toast.TOAST_SHOW,
                toastConfig: {
                    type: 'success',
                    content: content,
                    cancelable: true,
                    duration: 4000,
                    onCancel: function onCancel() {
                        dispatch(moveFile(srcToken, currentFileToken)).then(function () {
                            return dispatch((0, _actionHelper.createCancelToastAction)());
                        });
                    }
                }
            });
        });
    };
};
/**
 * 恢复回收站里的目标文件
 * @param {string} token 要恢复的文件/文件夹token
 */
var restoreRemovedFile = exports.restoreRemovedFile = function restoreRemovedFile(token) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.RESTORE_REMOVED_FILE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_RESTORE_REMOVED_FILE,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { token: token });
            } }
    });
};
var cancelRestoreRemovedFile = exports.cancelRestoreRemovedFile = function cancelRestoreRemovedFile() {
    return {
        type: 'CANCEL_' + _$constants.actionTypes.explorer.RESTORE_REMOVED_FILE
    };
};
/**
 * 此请求涉及移动端，在saga中写逻辑:
 * 1. 需要手动赋予deffered标记
 * 2. 需要手动resolve, reject
 * 3. 需要手动转化response
 * 移除文件至回收站
 * @param {string} token 被移除目标文件token
 */
var removeFile = exports.removeFile = function removeFile(token) {
    var isOwner = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var isMobile = arguments[2];
    var rootType = arguments[3];
    var fetchAfter = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.REMOVE_FILE,
        payload: { token: token, isOwner: isOwner, isMobile: isMobile, rootType: rootType, fetchAfter: fetchAfter }
    }, _common.DEFERRED, true);
};
var cancelRemoveFile = exports.cancelRemoveFile = function cancelRemoveFile() {
    return {
        type: 'CANCEL_' + _$constants.actionTypes.explorer.REMOVE_FILE
    };
};
var cancelableRemoveFile = exports.cancelableRemoveFile = function cancelableRemoveFile(token, isOwner, isMobile, rootType) {
    return function (dispatch, getState) {
        return dispatch(removeFile(token, isOwner, isMobile, rootType)).then(function (successAction) {
            var isMulti = token.length > 1;
            var successTokens = successAction.payload.success_tokens;
            var successAmount = successTokens.length;
            // const type = isOwner ? t('common.delete') : t('common.remove');
            var type = t('common.delete');
            var content = '';
            if (isOwner) {
                content = isMulti ? t('explorer.deleted_multi_items_successfully', successAmount) : t('explorer.deleted_item_successfully');
            } else {
                content = isMulti ? t('removed_multi_items_successfully', successAmount) : t('explorer.removed_item_successfully');
            }
            var action = !isMobile ? {
                type: _$constants.actionTypes.toast.TOAST_SHOW,
                toastConfig: {
                    type: 'success',
                    content: content,
                    cancelable: true,
                    onCancel: function onCancel() {
                        return dispatch(restoreRemovedFile(successTokens));
                    }
                }
            } : {
                type: _$constants.actionTypes.toastMobile.TOAST_MOBILE_SHOW,
                toastConfig: {
                    content: '' + type + t('explorer.success'),
                    mask: false
                }
            };
            return dispatch(action);
        });
    };
};
var deleteObject = exports.deleteObject = function deleteObject(objToken, objType) {
    var _ref21;

    return _ref21 = {
        type: _$constants.actionTypes.explorer.DELETE_OBJECT
    }, (0, _defineProperty3.default)(_ref21, _common.DEFERRED, true), (0, _defineProperty3.default)(_ref21, _common.REQUEST, {
        url: _$constants.apiUrls.POST_DELETE_OBJECT,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            obj_token: objToken,
            obj_type: objType
        }
    }), _ref21;
};
/**
 * 此请求涉及移动端，在saga中写逻辑:
 * 1. 需要手动赋予deffered标记
 * 2. 需要手动resolve, reject
 * 3. 需要手动转化response
 * 彻底删除回收站里的文件
 * @param {string} 要删除的文件/文件夹token
 */
var deleteRemovedFile = exports.deleteRemovedFile = function deleteRemovedFile(token, isMobile, rootType) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.DELETE_REMOVED_FILE,
        payload: { token: token, isMobile: isMobile, rootType: rootType }
    }, _common.DEFERRED, true);
};
var cancelDeleteRemovedFile = exports.cancelDeleteRemovedFile = function cancelDeleteRemovedFile() {
    return {
        type: 'CANCEL_' + _$constants.actionTypes.explorer.DELETE_REMOVED_FILE
    };
};
// 判断执行的删除类型并执行
var deleteOrRemoveFiles = exports.deleteOrRemoveFiles = function deleteOrRemoveFiles(token, isOwner) {
    var isMobile = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    var rootType = arguments[3];
    return function (dispatch, getState) {
        var state = getState();
        var path = (0, _common2.selectRoute)(state).get('path');
        var isTrash = path === _$constants.route.PATH.TRASH;
        if (isTrash) return dispatch(deleteRemovedFile(token, isMobile, rootType));
        return dispatch(cancelableRemoveFile(token, isOwner, isMobile, rootType));
    };
};
/**
 * 复制文件(从与我共享)到个人文档目录下
 * @param {string} srcToken 被移动的文件的tokenx
 * @param {string} destToken 目标目录的token(不能为文档类型)
 */
var copyShareFileToPersonalFolder = exports.copyShareFileToPersonalFolder = function copyShareFileToPersonalFolder(srcToken, destToken) {
    var cancelable = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.COPY_SHARE_FILES_TO_PERSONAL_FOLDER,
        payload: { cancelable: cancelable }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_COPY_FILE,
        method: _$constants.apiUrls.METHOD.POST,
        data: { src_token: srcToken, dest_token: destToken },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { srcToken: srcToken, destToken: destToken, cancelable: cancelable });
            } }
    });
};
var cancelCopyShareFileToPersonalFolder = exports.cancelCopyShareFileToPersonalFolder = function cancelCopyShareFileToPersonalFolder() {
    return {
        type: 'CANCEL_' + _$constants.actionTypes.explorer.COPY_SHARE_FILES_TO_PERSONAL_FOLDER
    };
};
var cancelableCopyShareFileToPersonalFolder = exports.cancelableCopyShareFileToPersonalFolder = function cancelableCopyShareFileToPersonalFolder(srcToken, destToken) {
    return function (dispatch, getState) {
        return dispatch(copyShareFileToPersonalFolder(srcToken, destToken, true)).then(function (successAction) {
            var isMulti = srcToken.length > 1;
            var successTokens = successAction.payload.success_tokens;
            var successAmount = successTokens.length;
            var content = isMulti ? t('common.add_success') + ' ' + successAmount + ' ' + t('explorer.item') : t('common.add_success');
            dispatch({
                type: _$constants.actionTypes.toast.TOAST_SHOW,
                toastConfig: {
                    type: 'success',
                    content: content,
                    cancelable: true,
                    onCancel: function onCancel() {
                        dispatch(removeFile(successTokens, true)).then(function () {
                            return dispatch((0, _actionHelper.createCancelToastAction)());
                        });
                    }
                }
            });
        });
    };
};
var transferShareFolderOwner = exports.transferShareFolderOwner = function transferShareFolderOwner(spaceId, ownerId, ownerType) {
    var meta = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.TRANSFER_SHARE_FOLDER_OWNER
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_TRANSFER_SHARE_FOLDER_OWNER,
        method: _$constants.apiUrls.METHOD.POST,
        data: { space_id: spaceId, owner_id: ownerId, owner_type: ownerType },
        options: {
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { spaceId: spaceId, ownerId: ownerId, ownerType: ownerType, meta: meta });
            }
        }
    });
};
/**
 * 获取pin数据
 */
var fetchPinList = exports.fetchPinList = function fetchPinList() {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_PIN_LIST
    }, _common.REQUEST, {
        url: _$constants.apiUrls.GET_PIN_LIST,
        method: _$constants.apiUrls.METHOD.GET
    });
};
var addPinFactory = function addPinFactory(actionType) {
    return function (token, type) {
        return (0, _defineProperty3.default)({
            type: actionType
        }, _common.REQUEST, {
            url: _$constants.apiUrls.POST_PIN_ADD,
            method: _$constants.apiUrls.METHOD.POST,
            data: { token: token, type: type },
            options: {
                transformResponse: function transformResponse(res) {
                    return Object.assign({}, res, {
                        token: token,
                        type: type,
                        field: 'is_pined',
                        value: true
                    });
                }
            }
        });
    };
};
/**
 * 更新Pin数据
 */
var addPin = exports.addPin = addPinFactory(_$constants.actionTypes.explorer.ADD_PIN);
/**
 * 更新Pin数据(无Toast通知)
 */
var addPinSilently = exports.addPinSilently = addPinFactory(_$constants.actionTypes.explorer.ADD_PIN_SILENTLY);
/**
 * UnPin数据
 */
var removePin = exports.removePin = function removePin(token, type) {
    var _ref27;

    return _ref27 = {
        type: _$constants.actionTypes.explorer.REMOVE_PIN
    }, (0, _defineProperty3.default)(_ref27, _common.DEFERRED, true), (0, _defineProperty3.default)(_ref27, _common.REQUEST, {
        url: _$constants.apiUrls.POST_PIN_REMOVE,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, type: type },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, {
                    token: token,
                    type: type,
                    field: 'is_pined',
                    value: false
                });
            }
        }
    }), _ref27;
};
var addHelp = exports.addHelp = function addHelp() {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.ADD_HELP
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_HELP_ADD,
        method: _$constants.apiUrls.METHOD.POST
    });
};
/**
 * 更新star数据
 */
var addStar = exports.addStar = function addStar(token, type) {
    var _ref30;

    var _ref29 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
        _ref29$from = _ref29.from,
        from = _ref29$from === undefined ? '' : _ref29$from;

    return _ref30 = {
        type: _$constants.actionTypes.explorer.ADD_STAR
    }, (0, _defineProperty3.default)(_ref30, _common.REQUEST, {
        url: _$constants.apiUrls.POST_STAR_ADD,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, type: type },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, {
                    token: token,
                    type: type,
                    field: 'is_stared',
                    value: true
                });
            }
        }
    }), (0, _defineProperty3.default)(_ref30, 'payload', {
        from: from
    }), _ref30;
};
/**
 * UnStar数据
 */
var removeStar = exports.removeStar = function removeStar(token, type) {
    var _ref32;

    var _ref31 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
        _ref31$from = _ref31.from,
        from = _ref31$from === undefined ? '' : _ref31$from;

    return _ref32 = {
        type: _$constants.actionTypes.explorer.REMOVE_STAR
    }, (0, _defineProperty3.default)(_ref32, _common.REQUEST, {
        url: _$constants.apiUrls.POST_STAR_REMOVE,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, type: type },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, {
                    token: token,
                    type: type,
                    field: 'is_stared',
                    value: false
                });
            }
        }
    }), (0, _defineProperty3.default)(_ref32, 'payload', {
        from: from
    }), _ref32;
};
/* 更新共享目录的描述 */
var updateShareFolderDesc = exports.updateShareFolderDesc = function updateShareFolderDesc(token, updateInfo) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.UPDATE_SHARE_FOLDER_DESC
    }, _common.REQUEST, {
        url: _$constants.apiUrls.UPDATE_SHARE_FOLDER_DESC,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            token: token,
            data: JSON.stringify({
                name: updateInfo.name,
                share_desc: updateInfo.description
            })
        },
        options: {
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res, {
                    token: token,
                    newName: updateInfo.name,
                    newDescription: updateInfo.description
                });
            }
        }
    });
};
/* 取消共享目录的描述 */
var cancelUpdateShareFolderDesc = exports.cancelUpdateShareFolderDesc = function cancelUpdateShareFolderDesc() {
    return {
        type: 'CANCEL_' + _$constants.actionTypes.explorer.UPDATE_SHARE_FOLDER_DESC
    };
};
var DEFAULT_FETCH_SIZE = 20;
/**
 * 最近访问
 * @param {number} nextTime 默认为0, 10位时间戳 可以不传 获取时间新于openTime的文件/文件夹
 * @param {number} size 默认为20, 获取文件/文件夹的数量
 */
var fetchRecentObjs = exports.fetchRecentObjs = function fetchRecentObjs() {
    var isContinuous = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_FETCH_SIZE;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.intermediate.FETCH_PAGED_DATA,
        payload: {
            realActionType: _$constants.actionTypes.explorer.FETCH_RECENT_OBJS,
            isContinuous: isContinuous,
            length: length
        }
    }, _common.DEFERRED, true);
};
var fetchPagedRecentObjs = exports.fetchPagedRecentObjs = fetchRecentObjs.bind(null, true);
var fetchStarList = exports.fetchStarList = function fetchStarList() {
    var isContinuous = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_FETCH_SIZE;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.intermediate.FETCH_PAGED_DATA,
        payload: {
            realActionType: _$constants.actionTypes.explorer.FETCH_STAR_LIST,
            isContinuous: isContinuous,
            length: length
        }
    }, _common.DEFERRED, true);
};
var fetchPagedStarList = exports.fetchPagedStarList = fetchStarList.bind(null, true);
var removeFilesShareInfo = exports.removeFilesShareInfo = function removeFilesShareInfo(metas) {
    return {
        type: _$constants.actionTypes.explorer.REMOVE_FILES_SHARED_INFO,
        payload: { metas: metas }
    };
};
var setExplorerListLoadingStatus = exports.setExplorerListLoadingStatus = function setExplorerListLoadingStatus(loadingStatus) {
    return {
        type: _$constants.actionTypes.explorer.SET_EXPLORER_LIST_LOADING_STATUS,
        payload: { loadingStatus: loadingStatus }
    };
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 57 */,
/* 58 */,
/* 59 */,
/* 60 */,
/* 61 */,
/* 62 */,
/* 63 */,
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _configureStore = __webpack_require__(807);

var _configureStore2 = _interopRequireDefault(_configureStore);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// const store = configureStore(window.___INITIAL_STATE__);
window.store = _configureStore2.default;
exports.default = _configureStore2.default;

/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.get4BackUserName = exports.getUserAvatar = exports.getUserName = exports.setStore = exports.isDocRnEnabled = exports.isSzUser = exports.isBytedanceUser = exports.makeCompatibleUser = exports.isSameUser = exports.isCurrentUser = undefined;
exports.getIsBytedanceUser = getIsBytedanceUser;
exports.getNameByIdFromUsers = getNameByIdFromUsers;
exports.getLocaleName = getLocaleName;
exports.isCreator = isCreator;
exports.isOwner = isOwner;
exports.getAllOnlineUsers = getAllOnlineUsers;
exports.getUserByMemberId = getUserByMemberId;
exports.getUserFromEntitiesByUserId = getUserFromEntitiesByUserId;
exports.getIsCurrentUserToCuser = getIsCurrentUserToCuser;
exports.getCurrentUser = getCurrentUser;
exports.getCurrentUserInfo = getCurrentUserInfo;

var _immutable = __webpack_require__(31);

var _get2 = __webpack_require__(83);

var _get3 = _interopRequireDefault(_get2);

var _i18nHelper = __webpack_require__(222);

var _$store = __webpack_require__(64);

var _$store2 = _interopRequireDefault(_$store);

var _member = __webpack_require__(533);

var _user = __webpack_require__(72);

var _$constants = __webpack_require__(5);

var _sdkCompatibleHelper = __webpack_require__(45);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// 初始化整个state
var globalStore = null;

/**
 * 双写判断已经下线，不再需要判断id + suid
 * 给定currentUser实体和对比id，得出是否为用户本人
 * @param {Object} currentUser 1. Immutable.map store中的currentUser 2.user api返回的data
 * @param {String} id 作对比的目标id
 */
var isCurrentUser = exports.isCurrentUser = function isCurrentUser(currentUser, id) {
  var PREDICATE_KEY = 'id';
  var derivedId = currentUser instanceof _immutable.Map ? currentUser.get(PREDICATE_KEY) : currentUser[PREDICATE_KEY];
  return id === derivedId;
};

var isSameUser = exports.isSameUser = function isSameUser(userA, userB) {
  return userA.user_id === userB.user_id || userA._larkId && userB._larkId && userA._larkId === userB._larkId || userA._bearId && userB._bearId && userA._bearId === userB._bearId;
};

var makeCompatibleUser = exports.makeCompatibleUser = function makeCompatibleUser(user) {
  var suid = user.suid,
      userId = user.user_id;

  return Object.assign({}, user, {
    user_id: String(suid || userId),
    _larkId: suid,
    _bearId: userId
  });
};

var isBytedanceUser = exports.isBytedanceUser = (0, _get3.default)(window, 'User.tenantId') === '1';

// 移动端User信息更新可能有延迟，因此增加一个函数来获取最新的信息
function getIsBytedanceUser() {
  var tenantId = (0, _get3.default)(window, 'User.tenantId');
  return tenantId === '1';
}

var isSzUser = exports.isSzUser = (0, _get3.default)(window, 'User.sz') === '1';

var isDocRnEnabled = exports.isDocRnEnabled = function isDocRnEnabled() {
  // return true;
  var isBlankPage = location.href.indexOf(_$constants.route.PATH.BLANK) >= 0;
  if (isBlankPage) return false;
  return _sdkCompatibleHelper.isNativeRNEnabled || (0, _get3.default)(window, 'User.docRnEnabled') || location.href.indexOf('doc_rn_enabled') >= 0;
};

var setStore = exports.setStore = function setStore(store) {
  globalStore = store;
  // @REMOVE ME
  window.__store__ = store;
};

/**
 * 根据id从store中获取对应的名字
 * 该函数中的users是Immutable对象
 * why use it: 国际化适配
 * @param   {string}  id            用户id
 * @param   {string}  defaultName   默认的名称,可选
 * @return  {string}  userName      用户名称
 */
var getUserName = exports.getUserName = function getUserName(id) {
  var defaultName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

  if (!globalStore) return '';

  var state = globalStore.getState();
  var entities = state.entities;

  if (!entities) return defaultName;

  var users = entities.users;

  if (!users) return defaultName;

  var user = users.get(id);
  if (!user) return defaultName;

  var name = user.get('name') || defaultName;
  if (_i18nHelper.LANG_MAP.zh) {
    return user.get('cn_name') || name;
  }
  return user.get('en_name') || name || user.get('cn_name');
};

/**
 * 根据id从请求返回的users对象获取对应的名字
 * 该函数中的users是普通对象
 * 实现国际化
 * @param   {object}  users         所有用户数据
 * @param   {string}  id            用户id
 * @param   {string}  defaultName   默认的名称,可选
 * @return  {string}  userName      用户名称
 */
function getNameByIdFromUsers(users, id) {
  var defaultName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';

  if (!users) return defaultName;

  var user = users[id] || {};
  return getLocaleName(user, defaultName);
};

/**
 * 获取用户的国际化名称
 * @param {object} user 单个用户数据
 * @param {string} defaultName 默认的名称,可选
 */
function getLocaleName(user) {
  var defaultName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

  if (!user) return defaultName;

  var name = user['name'] || defaultName;
  if (_i18nHelper.LANG_MAP.zh) {
    return user['cn_name'] || name;
  }
  // 部分接口返回的数据没有name字段，例如：历史记录接口的users
  return user['en_name'] || name || user['cn_name'];
}

var getUserAvatar = exports.getUserAvatar = function getUserAvatar(id) {
  if (!globalStore) return '';
  var users = (0, _get3.default)(globalStore.getState(), 'entities.users');
  if (!_immutable.Iterable.isIterable(users)) return '';
  return users.getIn([id, 'avatar_url'], '');
};

var get4BackUserName = exports.get4BackUserName = function get4BackUserName(id, fallBackName) {
  var derivedUserName = getUserName(id);
  return derivedUserName === '' ? fallBackName : derivedUserName;
};

function isCreator(userId, currentSuite) {
  var createUid = currentSuite.get('create_uid');
  return userId === createUid;
}

function isOwner(userId, currentSuite) {
  var ownerId = currentSuite.get('owner_id');
  return userId === ownerId;
}

function getAllOnlineUsers() {
  return (0, _member.selectCurrentSuiteMembers)(_$store2.default.getState());
}

function getUserByMemberId(memberId) {
  var users = getAllOnlineUsers();
  if (!users) return;

  return users.find(function (user) {
    return user.member_id === memberId;
  });
}

// 上面的 getUserByMemberId 用于获取当前正在访问suite的用户
// 下面这个getUserFromEntitiesByUserId从Entities中获取用户
function getUserFromEntitiesByUserId(userId) {
  var users = (0, _user.selectUserEntities)(_$store2.default.getState());
  if (!users) return;
  return users.find(function (user) {
    return user.id === userId;
  });
}

function getIsCurrentUserToCuser() {
  var state = _$store2.default.getState();
  return (0, _user.selectIsCurrentUserToCuser)(state);
};

function getCurrentUser() {
  var currentUser = (0, _user.selectCurrentUser)(_$store2.default.getState());
  return currentUser;
}

/**
 * 获取当前用户信息对象，user_name字段实现国际化
 */
function getCurrentUserInfo() {
  var userInfo = (0, _user.selectCurrentUser)(_$store2.default.getState()).toJSON() || {};
  return Object.assign({}, userInfo, {
    user_name: getLocaleName(userInfo),
    name: name
  });
}

/***/ }),
/* 66 */,
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _findKey2 = __webpack_require__(1152);

var _findKey3 = _interopRequireDefault(_findKey2);

var _camelCase2 = __webpack_require__(529);

var _camelCase3 = _interopRequireDefault(_camelCase2);

exports.locateRoute = locateRoute;
exports.isUnderRootRoute = isUnderRootRoute;
exports.isUnderFileListView = isUnderFileListView;
exports.isUnderSuiteView = isUnderSuiteView;
exports.isUnderOpenableListView = isUnderOpenableListView;
exports.isUnderShareRoute = isUnderShareRoute;
exports.isUnderHomeRoute = isUnderHomeRoute;
exports.getPath = getPath;
exports.getUrlToken = getUrlToken;
exports.rootRouteTypeNum = rootRouteTypeNum;
exports.mapCurrentLocationTo = mapCurrentLocationTo;
exports.generatePath = generatePath;
exports.getSuiteTypeStr = getSuiteTypeStr;
exports.getFileTypeStr = getFileTypeStr;
exports.getCurrentRouteObj = getCurrentRouteObj;
exports.getParentMeta = getParentMeta;
exports.getParentToken = getParentToken;

var _$constants = __webpack_require__(5);

var _find = __webpack_require__(451);

var _find2 = _interopRequireDefault(_find);

var _snakeCase = __webpack_require__(1167);

var _snakeCase2 = _interopRequireDefault(_snakeCase);

var _explorer = __webpack_require__(48);

var _url2 = __webpack_require__(530);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 请在此配置route信息，及时更新。
 * 若对配置项进行增减，请务必测试各个route的正则判定。
 * @author liaowenhao
 *
 * 关于query的解释：
 *  /doc/token  -> query: true;
 *  /doc/       -> query: false;
 */
var routeList = _$constants.route.routeList;
var _cache = {}; // 缓存结果，防止正则计算浪费
var _default = {
    prefix: 'is'
};
/* ================ Helper functions as follow ================= */
/**
 * Helper Function
 * 构造route判定对象的key
 * @param {String} routeName
 * @param {String} url
 * @param {Object} option
 */
function _getKey(routeName, url, option) {
    var _option$prefix = option.prefix,
        prefix = _option$prefix === undefined ? '' : _option$prefix,
        _option$suffix = option.suffix,
        suffix = _option$suffix === undefined ? '' : _option$suffix,
        _option$separator = option.separator,
        separator = _option$separator === undefined ? '-' : _option$separator;

    var _url = (routeName || url).split('/').filter(function (val) {
        return val !== '';
    }).join(separator);
    // Default separtor is '-'
    var _key = prefix + separator + _url + separator + suffix;
    return (0, _camelCase3.default)(_key);
}
/**
 * Helper Function
 * 判断是否匹配当前路径
 * @param {String} url
 * @param {String} query
 */
function _isMatchRoute(url, query, pathname) {
    var _withQuery = '.+';
    var reg = '^' + url + (query ? _withQuery : '') + '$';
    return new RegExp(reg, 'g').test(pathname);
}
function _getIsRouteMatchEntry(routeConfig, pathname) {
    var _routeConfig$routeNam = routeConfig.routeName,
        routeName = _routeConfig$routeNam === undefined ? '' : _routeConfig$routeNam,
        _routeConfig$url = routeConfig.url,
        url = _routeConfig$url === undefined ? '' : _routeConfig$url,
        _routeConfig$query = routeConfig.query,
        query = _routeConfig$query === undefined ? false : _routeConfig$query;

    if (!url) {
        return null;
    }
    var routeKey = _getKey(routeName, url, {
        prefix: _default.prefix
    });
    var isRouteMatch = _isMatchRoute(url, query, pathname);
    return (0, _defineProperty3.default)({}, routeKey, isRouteMatch);
}
/**
 * Helper Function
 * 遍历routeList，并产生由判定结果组装的key-value pair组成的数组
 * Example: [{isTrash: false}, {isDoc: true}, ...}]
 */
function _getRouteMatchEntryList(pathname) {
    return routeList.map(function (routeConfig) {
        return _getIsRouteMatchEntry(routeConfig, pathname);
    });
}
/**
 * Helper Function
 * 找到当前匹配的Route所对应生成的key
 * Example: { isTrash: false, isDoc: true } => 'isDoc'
 */
function _getCurrentLocationKey() {
    var key = Object.keys(locateRoute()).find(function (key) {
        return locateRoute()[key] === true;
    });
    var transformedKey = key ? key.replace(_default.prefix, '').toUpperCase() : '';
    return transformedKey;
}
/**
 * Helper Function
 * 将route判定结果merge进routeList对应信息对象中
 * Example:
 * { routeName: 'explorer', url: 'folder', query: false }
 *                          ↓
 * { isExplorer: true, routeName: 'explorer', url: 'folder', query: false }
 */
// const _getRouteListWithRouteMatch = () => {
//   return routeList.map(routeConfig => {
//     const routeMatchEntry = _getIsRouteMatchEntry(routeConfig);
//     return { ...routeConfig, ...routeMatchEntry };
//   });
// };
/**
 * Helper Function
 * 当前目录配置信息里的类型是否为file-list
 * @param {string} type
 */
var _isTypeOfFileList = function _isTypeOfFileList(_ref2) {
    var type = _ref2.type;
    return type === _$constants.route.RouteType.FILELIST;
};
/**
 * Helper Function
 * 当前目录配置信息里的类型是否为suite
 * @param {string} type
 */
var _isTypeOfSuite = function _isTypeOfSuite(_ref3) {
    var type = _ref3.type;
    return type === _$constants.route.RouteType.SUITE;
};
/**
 * Helper Function
 * 当前模流配置信息的类型是否支持打开操作
 * @param {boolean} param0
 */
var _isFileOpenable = function _isFileOpenable(_ref4) {
    var canOpen = _ref4.canOpen;
    return canOpen;
};
/**
 * Helper Function
 * 判断一组测试函数的结果是否满足特定的条件，如：全部为真，部分为真
 * @param {array} predicates 测试函数组成的数组
 * @param {function} iterateTestMethod 默认为Array.prototype.every
 */
var _mixPredicate = function _mixPredicate() {
    var predicates = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
    var iterateTestMethod = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Array.prototype.every;
    return function (testVal) {
        return iterateTestMethod.call(predicates, function (predicate) {
            return predicate(testVal);
        });
    };
};
/**
 * 获取route(location)判定对象
 * @param {Object} pathname
 */
function locateRoute() {
    var pathname = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : location.pathname;

    if (pathname in _cache) {
        return _cache[pathname];
    }
    var routeMap = {};
    var routeRstList = _getRouteMatchEntryList(pathname);
    routeMap = routeRstList.reduce(function (cur, next) {
        return Object.assign({}, cur, next);
    }, routeMap);
    _cache[pathname] = routeMap; // value只可能有一个为true, 请注意判定条件的唯一性
    return routeMap;
}
/**
 * 根据自定义的filterRule来确定当前路径是否满足条件
 * @param {function} predicate
 */
function filterRouteMatch(predicate, locateRouteResult) {
    var rootRouteDetectRstArr = routeList.filter(function (val) {
        var rst = predicate(val);
        return rst;
    }).map(function (_ref5) {
        var routeName = _ref5.routeName,
            url = _ref5.url;
        return _getKey(routeName, url, {
            prefix: _default.prefix
        });
    }).map(function (rootRouteKey) {
        return locateRouteResult[rootRouteKey];
    });
    return rootRouteDetectRstArr.some(function (isUnderRoute) {
        return isUnderRoute === true;
    });
}
/**
 * 是否处于根目录范畴
 */
function isUnderRootRoute() {
    var locateRouteResult = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : locateRoute();

    return filterRouteMatch(function (_ref6) {
        var query = _ref6.query;
        return !query;
    }, locateRouteResult);
}
/**
 * 是否在文件浏览类型目录
 */
function isUnderFileListView() {
    var locateRouteResult = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : locateRoute();

    return filterRouteMatch(_isTypeOfFileList, locateRouteResult);
}
/**
 * 是否在suite路径下
 */
function isUnderSuiteView() {
    var locateRouteResult = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : locateRoute();

    return filterRouteMatch(_isTypeOfSuite, locateRouteResult);
}
/**
 * 是否在可打开文件浏览目录
 */
function isUnderOpenableListView() {
    var locateRouteResult = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : locateRoute();

    var mixedPredicate = _mixPredicate([_isTypeOfFileList, _isFileOpenable]);
    var result = filterRouteMatch(mixedPredicate, locateRouteResult);
    return result;
}
/**
 * 是否在share路径下
 */
function isUnderShareRoute() {
    var locateRouteResult = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : locateRoute();

    return filterRouteMatch(function (_ref7) {
        var path = _ref7.path;
        return path.indexOf('share') > -1;
    }, locateRouteResult);
}
/**
 * 是否在home路径下
 */
function isUnderHomeRoute() {
    var locateRouteResult = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : locateRoute();

    return filterRouteMatch(function (_ref8) {
        var path = _ref8.path;
        return path.indexOf('home') > -1;
    }, locateRouteResult);
}
/**
 * 在不接入react-router的withRouter时判定当前base_path
 */
function getPath() {
    var _url = void 0;
    var path = window.location.pathname;
    var result = path.match(/^\/(.+)?\//);
    if (result) {
        _url = result[1];
    }
    var urlWithSlash = '/' + _url + '/'; // React-Router里的path是带'/'的
    return urlWithSlash;
}
function getUrlToken() {
    var group = /\/folder\/(\w+)/.exec(window.location.pathname);
    if (group === null) return null;
    return group[1];
}
/**
 * 获取根目录范畴下的当前目录对应type(Number)
 */
function rootRouteTypeNum() {
    var transformedKey = _getCurrentLocationKey();
    return _$constants.common.NUM_ROOT_META[transformedKey];
}
/**
 * 根据传入的map来获取当前location所对应的值
 * @param {Object} map
 */
function mapCurrentLocationTo(map) {
    var transformedKey = _getCurrentLocationKey();
    return map[transformedKey] || '';
}
/**
 * 根据提供的token/obj_token和type生成suite地址
 * @param {Number} type
 * @param {String} targetToken
 */
function generatePath(_ref9) {
    var type = _ref9.type,
        _ref9$objToken = _ref9.objToken,
        objToken = _ref9$objToken === undefined ? '' : _ref9$objToken,
        _ref9$token = _ref9.token,
        token = _ref9$token === undefined ? '' : _ref9$token;

    var SLASH = '/';
    var realTarget = objToken || token;
    return SLASH + _$constants.common.FILE_TYPE_URL_MAP[type] + SLASH + realTarget;
}
/**
 * locateRoute() => { isShareFolders: true } => SHARE_FOLDERS
 * input: isShareFolders
 * output: SHARE_FOLDERS
 */
function transLocateRouteTruthyKey2SnakeUpperCased(locateRouteTruthyKey) {
    return _$constants.common.FILE_TYPE[(0, _snakeCase2.default)((locateRouteTruthyKey || '').replace('is', '')).toUpperCase()] || '';
}
function getSuiteTypeStr() {
    if (!isUnderSuiteView()) return '';
    var locateRouteRst = locateRoute();
    var currentRouteKey = (0, _findKey3.default)(locateRouteRst, function (val) {
        return val === true;
    });
    return transLocateRouteTruthyKey2SnakeUpperCased(currentRouteKey);
}
function getFileTypeStr() {
    var locateRouteRst = locateRoute();
    var currentRouteKey = (0, _findKey3.default)(locateRouteRst, function (val) {
        return val === true;
    });
    return transLocateRouteTruthyKey2SnakeUpperCased(currentRouteKey);
}
function getCurrentRouteObj() {
    var pathname = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : location.pathname;

    var matchResult = pathname.match(/\/(([a-zA-Z-]+\/)+)([a-zA-Z0-9]+)?/);
    if (!matchResult) return null;
    var basePath = matchResult[1];
    var hasQuery = !!matchResult[3];
    if (!basePath) return null;
    return (0, _find2.default)(routeList, function (_ref10) {
        var url = _ref10.url,
            query = _ref10.query;

        return url.replace(/\//g, '') === basePath.replace(/\//g, '') && query === hasQuery;
    });
}
function getParentMeta() {
    var store = __webpack_require__(64).default;
    return (0, _explorer.selectCurrentPathAndMeta)(store.getState()).toJS();
}
function getParentToken(parentMeta) {
    // @TODO: REMOVE OPENFROMFOLDER
    // const openFromPathName = (window as any).App.openDocFromFolder[location.pathname];
    var store = __webpack_require__(64).default;
    var openFromPathName = (0, _url2.selectBackUrl)(store.getState());
    var openFromLocation = locateRoute(openFromPathName);
    var isOpenFromFolder = openFromLocation.isFolder;
    var hasPath = parentMeta.length > 0;
    var adaptedTokenForCreateFile = '';
    if (isOpenFromFolder && hasPath) {
        var meta = parentMeta[parentMeta.length - 1];
        adaptedTokenForCreateFile = meta.token;
    }
    return adaptedTokenForCreateFile;
}

/***/ }),
/* 68 */,
/* 69 */,
/* 70 */,
/* 71 */,
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.selectCurrentUserId = exports.selectIsCurrentUserToCuser = exports.selectUserEntities = exports.selectCurrentUser = undefined;

var _reselect = __webpack_require__(131);

var selectCurrentUser = exports.selectCurrentUser = function selectCurrentUser(state) {
    return state.appState.currentUser;
};
var selectUserEntities = exports.selectUserEntities = function selectUserEntities(state) {
    return state.entities.users;
};
var selectIsCurrentUserToCuser = exports.selectIsCurrentUserToCuser = function selectIsCurrentUserToCuser(state) {
    return (0, _reselect.createSelector)(selectCurrentUser, function (currentUser) {
        return !!(currentUser && Number(currentUser.get('tenant_id')) === 0);
    })(state);
};
var selectCurrentUserId = exports.selectCurrentUserId = function selectCurrentUserId(state) {
    return (0, _reselect.createSelector)(selectCurrentUser, function (currentUser) {
        return currentUser.get('suid');
    })(state);
};

/***/ }),
/* 73 */,
/* 74 */,
/* 75 */,
/* 76 */,
/* 77 */,
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sendFolderPermissionRequest = exports.addPermission = exports.universalTransferOwner = exports.transferSuiteOwner = exports.sendSuitePermissionRequest = exports.removeMemberFromFolder = exports.addMembersToFolder = exports.fetchShareFolderMembers = exports.bulkSetUserPermission = exports.removeAuthorizedMember = exports.setSuitePublicPermission = exports.setUserPermission = exports.fetchAllPermissionInfo = exports.fetchUserPermissionOnSuite = exports.fetchSuitePublicPermission = exports.fetchAuthorizedMembers = exports.hideShareFolder = exports.showShareFolder = exports.fetchRootShareFolder = exports.updateAuthorizedMembers = undefined;

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

var _permissionHelper = __webpack_require__(302);

var _models = __webpack_require__(172);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var updateAuthorizedMembers = exports.updateAuthorizedMembers = function updateAuthorizedMembers(token, type, data) {
    return {
        type: _$constants.actionTypes.permission.UPDATE_AUTHORIZED_MEMBERS,
        payload: { token: token, type: type, data: data }
    };
};
/**
 * hidden 为 undefined 等于拉全部
 */
var fetchRootShareFolder = exports.fetchRootShareFolder = function fetchRootShareFolder() {
    var hidden = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _models.ShareFolderHiddenType.FetchVisible;
    var willUpdatePath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_ROOT_SHARE_FOLDER,
        payload: { willUpdatePath: willUpdatePath }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.GET_ROOT_SHARE_FOLDERS,
        params: {
            hidden: hidden
        },
        options: {
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res, {
                    hidden: hidden,
                    willUpdatePath: willUpdatePath
                });
            }
        }
    });
};
var showShareFolder = exports.showShareFolder = function showShareFolder(token) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.SHOW_SHARE_FOLDER
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_SHOW_SHARE_FOLDER,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token },
        options: {
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res, {
                    token: token
                });
            }
        }
    });
};
var hideShareFolder = exports.hideShareFolder = function hideShareFolder(token) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.HIDE_SHARE_FOLDER
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_HIDE_SHARE_FOLDER,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token },
        options: {
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res, {
                    token: token
                });
            }
        }
    });
};
/**
 * 拉取对应文档已添加权限成员列表
 * @param {string} token
 * @param {number} type
 */
var fetchAuthorizedMembers = exports.fetchAuthorizedMembers = function fetchAuthorizedMembers(token, type) {
    var isFromNotification = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.permission.FETCH_AUTHORIZED_MEMBERS,
        payload: { isFromNotification: isFromNotification }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.GET_SUITE_AUTH_MEMBERS,
        params: { token: token, type: type },
        options: {
            injectRequestData: true,
            takeLatest: true
        }
    });
};
/**
 * 拉取对应文档的公共权限
 * available value 8 4 2 1 null
 * @param {string} token
 * @param {number} type
 */
var fetchSuitePublicPermission = function fetchSuitePublicPermission(token, type) {
    var isFromNotification = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.permission.FETCH_SUITE_PUBLIC_PERMISSION,
        payload: { isFromNotification: isFromNotification }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.GET_SUITE_PUBLIC_PERMISSION,
        params: { token: token, type: type },
        key: '/api/suite/permission.v2/public/',
        options: {
            takeLatest: true,
            transformResponse: function transformResponse(res) {
                var permissions = res.permissions,
                    rest = (0, _objectWithoutProperties3.default)(res, ['permissions']);

                return Object.assign({ permission: permissions }, rest, { token: token, type: type });
            }
        }
    });
};
/**
 * 拉取当前用户相对对应文档的权限
 * @param {string} token
 * @param {number} type
 */
exports.fetchSuitePublicPermission = fetchSuitePublicPermission;
var fetchUserPermissionOnSuite = exports.fetchUserPermissionOnSuite = function fetchUserPermissionOnSuite(token, type) {
    var isFromNotification = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    var options = arguments[3];
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE,
        payload: { isFromNotification: isFromNotification }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.GET_USER_PERMISSION_ON_SUITE_V2,
        params: { token: token, type: type },
        key: '/api/suite/permission.v2/user/',
        serverFirst: options && options.serverFirst,
        options: {
            takeLatest: true,
            transformResponse: function transformResponse(response) {
                var permissions = response.permissions,
                    contact_url = response.contact_url,
                    relationship_level = response.relationship_level,
                    copy = response.copy;

                var adaptedPermissions = (0, _permissionHelper.adaptPermissionNum2Arr)(permissions);
                return {
                    token: token,
                    type: type,
                    permissions: adaptedPermissions,
                    contact_url: contact_url,
                    relationship_level: relationship_level,
                    copy: copy
                };
            }
        }
    });
};
/* 拉取 suite公共权限 & 用户权限 */
var fetchAllPermissionInfo = exports.fetchAllPermissionInfo = function fetchAllPermissionInfo(token, type) {
    var isFromNotification = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    return {
        type: _$constants.actionTypes.permission.FETCH_ALL_PERMISSION_INFO,
        payload: { token: token, type: type, isFromNotification: isFromNotification }
    };
};
/**
 * 设置对应用户权限
 * @param {string} token
 * @param {number} type
 * @param {string} ownerId
 * @param {number} ownerType
 * @param {permission}
 */
var setUserPermission = exports.setUserPermission = function setUserPermission(_ref7) {
    var token = _ref7.token,
        type = _ref7.type,
        ownerId = _ref7.ownerId,
        ownerType = _ref7.ownerType,
        permission = _ref7.permission,
        source = _ref7.source;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.permission.SET_USER_PERMISSION
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_UPDATE_MEMBER_PERMISSION,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            token: token,
            type: type,
            owner_id: ownerId,
            owner_type: ownerType,
            permission: permission,
            source: source
        },
        options: { injectRequestData: true }
    });
};
/**
 * 设置对应文档的公共权限
 * available value 8 4 2 1 null
 * @param {string} token
 * @param {number} type
 * @param {number} permission
 */
var setSuitePublicPermission = exports.setSuitePublicPermission = function setSuitePublicPermission(token, type, permission) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.permission.SET_SUITE_PUBLIC_PERMISSION
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_SET_SUITE_PUBLIC_PERMISSION,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, type: type, permission: permission },
        options: { injectRequestData: true }
    });
};
/**
 * 移除对应用户权限
 * @param {string} token
 * @param {number} type
 * @param {string} ownerId
 * @param {number} ownerType
 */
var removeAuthorizedMember = exports.removeAuthorizedMember = function removeAuthorizedMember(_ref10) {
    var token = _ref10.token,
        type = _ref10.type,
        ownerId = _ref10.ownerId,
        ownerType = _ref10.ownerType,
        source = _ref10.source;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.permission.REMOVE_AUTHORIZED_MEMBERS
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_DELETE_MEMBER_PERMISSION,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            token: token,
            type: type,
            owner_id: ownerId,
            owner_type: ownerType,
            source: source
        },
        options: { injectRequestData: true }
    });
};
/**
 * 批量设置用户权限
 * @param {string} token
 * @param {number} type
 * @param {array of object} owners
 */
var bulkSetUserPermission = exports.bulkSetUserPermission = function bulkSetUserPermission(_ref12) {
    var token = _ref12.token,
        type = _ref12.type,
        owners = _ref12.owners,
        shouldNotifyLark = _ref12.shouldNotifyLark,
        source = _ref12.source;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.permission.BULK_SET_PERM
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_ADD_MEMBERS,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            token: token,
            type: type,
            owners: JSON.stringify(owners),
            notify_lark: Number(shouldNotifyLark),
            source: source
        },
        options: { injectRequestData: true }
    });
};
var fetchShareFolderMembers = exports.fetchShareFolderMembers = function fetchShareFolderMembers(spaceId) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.FETCH_MEMBERS_OF_SHARE_FOLDER
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_FETCH_MEMBERS_OF_SHARE_FOLDER,
        method: _$constants.apiUrls.METHOD.POST,
        data: { space_id: spaceId },
        options: { takeLatest: true, injectRequestData: true }
    });
};
var addMembersToFolder = function addMembersToFolder(_ref15) {
    var getExtraInfo = _ref15.getExtraInfo,
        data = (0, _objectWithoutProperties3.default)(_ref15, ['getExtraInfo']);
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_ADD_MEMBERS_TO_FOLDER,
        method: _$constants.apiUrls.METHOD.POST,
        data: data,
        options: {
            transformResponse: function transformResponse(resp) {
                if (data.token) {
                    return Object.assign({}, resp, { token: data.token });
                } else {
                    if (typeof data.space_id === 'undefined') {
                        throw new Error('data have neither token nor space_id');
                    }
                    // 用下划线是为了和后端保持一致 （摊手
                    return Object.assign({}, resp, { space_id: data.space_id });
                }
            },
            getExtraInfo: getExtraInfo
        }
    });
};
exports.addMembersToFolder = addMembersToFolder;
var removeMemberFromFolder = exports.removeMemberFromFolder = function removeMemberFromFolder(token, spaceId, ownerId) {
    var onlyOne = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.explorer.REMOVE_MEMBER_FROM_FOLDER,
        payload: { onlyOne: onlyOne }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_REMOVE_MEMBER_FROM_FOLDER,
        method: _$constants.apiUrls.METHOD.POST,
        data: { space_id: spaceId, owner_id: ownerId },
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { onlyOne: onlyOne, token: token, spaceId: spaceId, ownerId: ownerId });
            } }
    });
};
var sendSuitePermissionRequest = exports.sendSuitePermissionRequest = function sendSuitePermissionRequest(token, objType, permission) {
    var _ref18;

    var message = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';
    var deviceType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';
    return _ref18 = {
        type: _$constants.actionTypes.permission.SEND_SUITE_PERMISSION_REQUEST
    }, (0, _defineProperty3.default)(_ref18, _common.DEFERRED, true), (0, _defineProperty3.default)(_ref18, _common.REQUEST, {
        noStore: true,
        url: _$constants.apiUrls.POST_SEND_SUITE_PERMISSION_REQUEST,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, obj_type: objType, permission: permission, message: message, deviceType: deviceType }
    }), _ref18;
};
var transferSuiteOwner = exports.transferSuiteOwner = function transferSuiteOwner(_ref19) {
    var _ref20;

    var token = _ref19.token,
        type = _ref19.type,
        ownerId = _ref19.ownerId,
        ownerType = _ref19.ownerType,
        meta = _ref19.meta,
        source = _ref19.source;
    return _ref20 = {
        type: _$constants.actionTypes.permission.TRANSFER_SUITE_OWNER
    }, (0, _defineProperty3.default)(_ref20, _common.DEFERRED, true), (0, _defineProperty3.default)(_ref20, _common.REQUEST, {
        url: _$constants.apiUrls.POST_TRANSFER_SUITE_OWNER,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            token: token,
            type: type,
            owner_id: ownerId,
            owner_type: ownerType,
            source: source
        },
        options: {
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { suiteToken: token, suiteType: type, ownerId: ownerId, ownerType: ownerType, meta: meta || {} });
            }
        }
    }), _ref20;
};
var universalTransferOwner = exports.universalTransferOwner = function universalTransferOwner(data) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.permission.UNIVERSAL_TRANSFER_OWNER,
        payload: data
    }, _common.DEFERRED, true);
};
/**
 * mobile新建文档 默认有权限， 手动触发该action赋权
 */
var addPermission = exports.addPermission = function addPermission(token, permissions) {
    var isFromNotification = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    return {
        type: _$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_SUCCESS,
        meta: {
            isLoading: false
        },
        payload: {
            token: token,
            permissions: permissions,
            isFromNotification: isFromNotification
        }
    };
};
var sendFolderPermissionRequest = exports.sendFolderPermissionRequest = function sendFolderPermissionRequest(token) {
    var _ref22;

    var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    var deviceType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
    return _ref22 = {
        type: _$constants.actionTypes.permission.SEND_FOLDER_PERMISSION_REQUEST
    }, (0, _defineProperty3.default)(_ref22, _common.DEFERRED, true), (0, _defineProperty3.default)(_ref22, _common.REQUEST, {
        noStore: true,
        url: _$constants.apiUrls.POST_SEND_FOLDER_PERMISSION_REQUEST,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, message: message, deviceType: deviceType }
    }), _ref22;
};

/***/ }),
/* 79 */,
/* 80 */,
/* 81 */,
/* 82 */,
/* 83 */,
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.selectNewMessageNum = exports.selectMessageShowing = exports.selectCurrentSuiteTenantName = exports.selectCurrentSuiteOwner = exports.selectCurrentLarkTitle = exports.selectSidebarStatus = exports.selectNewVersionInfo = exports.selectShouldPrint = exports.selectNoteMeta = exports.selectCurrentSuiteByObjToken = exports.selectCurrentSuiteTokenWithType = exports.selectCurrentSuiteType = exports.selectCurrentSuiteToken = exports.selectSuiteObjs = undefined;

var _reselect = __webpack_require__(131);

var _user = __webpack_require__(72);

var selectSuiteObjs = exports.selectSuiteObjs = function selectSuiteObjs(state) {
    return state.entities.objs;
};
var selectCurrentSuiteToken = exports.selectCurrentSuiteToken = function selectCurrentSuiteToken(state) {
    return state.appState.currentNoteToken.get('obj_token');
};
var selectCurrentSuiteType = exports.selectCurrentSuiteType = function selectCurrentSuiteType(state) {
    return state.appState.currentNoteToken.get('type');
};
var selectCurrentSuiteTokenWithType = exports.selectCurrentSuiteTokenWithType = function selectCurrentSuiteTokenWithType(state) {
    return (0, _reselect.createSelector)(selectCurrentSuiteType, selectCurrentSuiteToken, function (type, currentSuiteToken) {
        return type + ':' + currentSuiteToken;
    })(state);
};
var selectCurrentSuiteByObjToken = exports.selectCurrentSuiteByObjToken = function selectCurrentSuiteByObjToken(state) {
    return (0, _reselect.createSelector)(selectSuiteObjs, selectCurrentSuiteTokenWithType, function (objEntities, currentSuiteTokenWithType) {
        return objEntities.get(currentSuiteTokenWithType);
    })(state);
};
var selectNoteMeta = exports.selectNoteMeta = function selectNoteMeta(state) {
    return state.appState.noteMeta;
};
var selectShouldPrint = exports.selectShouldPrint = function selectShouldPrint(state) {
    return state.appState.shouldPrint;
};
var selectNewVersionInfo = exports.selectNewVersionInfo = function selectNewVersionInfo(state) {
    return state.updateChecking.hasNewVersion;
};
var selectSidebarStatus = exports.selectSidebarStatus = function selectSidebarStatus(state) {
    return state.appState.sidebarStatus;
};
var selectCurrentLarkTitle = exports.selectCurrentLarkTitle = function selectCurrentLarkTitle(state) {
    return state.appState.curLarkTitle;
};
var selectCurrentSuiteOwner = exports.selectCurrentSuiteOwner = function selectCurrentSuiteOwner(state) {
    return (0, _reselect.createSelector)(_user.selectUserEntities, selectCurrentSuiteByObjToken, function (users, suite) {
        return suite && users.get(suite.get('owner_id'));
    })(state);
};
var selectCurrentSuiteTenantName = exports.selectCurrentSuiteTenantName = function selectCurrentSuiteTenantName(state) {
    return selectCurrentSuiteOwner(state).get('tenant_name');
};
var selectMessageShowing = exports.selectMessageShowing = function selectMessageShowing(state) {
    return state.appState.messageShowing;
};
var selectNewMessageNum = exports.selectNewMessageNum = function selectNewMessageNum(state) {
    return state.appState.message.newMessageNum;
};

/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.selectIsSpecifiedStatusAllLoaded = exports.selectPathnameFromLocation = exports.selectPathFromMatch = exports.selectFolderTokenFromMatch = exports.selectQuery = exports.selectRoute = exports.selectLocation = exports.selectRouter = exports.selectAsyncError = exports.selectError = exports.selectIsContinuous = exports.selectFetchStatus = exports._selectFetchStatus = undefined;

var _reselect = __webpack_require__(131);

var _common = __webpack_require__(19);

var _selectFetchStatus = exports._selectFetchStatus = function _selectFetchStatus(state, actionName) {
    return state.appState.fetchStatus[actionName].status;
};
var selectFetchStatus = exports.selectFetchStatus = function selectFetchStatus(actionName) {
    return function (state) {
        return _selectFetchStatus(state, actionName);
    };
};
var selectIsContinuous = exports.selectIsContinuous = function selectIsContinuous(actionName) {
    return function (state) {
        return state.appState.fetchStatus[actionName].isContinuous;
    };
};
var selectError = exports.selectError = function selectError(state) {
    return state.appState.error;
};
var selectAsyncError = exports.selectAsyncError = function selectAsyncError(actionName) {
    return function (state) {
        return selectError(state).get(actionName, undefined);
    };
};
var selectRouter = exports.selectRouter = function selectRouter(state) {
    return state.appState.router;
};
var selectLocation = exports.selectLocation = function selectLocation(state) {
    return selectRouter(state).location;
};
var selectRoute = exports.selectRoute = function selectRoute(state) {
    return state.appState.route;
};
var selectQuery = exports.selectQuery = (0, _reselect.createSelector)(selectRoute, function (route) {
    return route && route.get('query');
});
var selectFolderTokenFromMatch = exports.selectFolderTokenFromMatch = function selectFolderTokenFromMatch(ownProps) {
    return ownProps.match.params.token;
};
var selectPathFromMatch = exports.selectPathFromMatch = function selectPathFromMatch(ownProps) {
    return ownProps.match.path;
};
var selectPathnameFromLocation = exports.selectPathnameFromLocation = function selectPathnameFromLocation(ownProps) {
    return ownProps.location.pathname;
};
// export const selectStateFromLocation = ownProps => ownProps.location.state;
var _isAllLoaded = function _isAllLoaded() {
    for (var _len = arguments.length, statusArray = Array(_len), _key = 0; _key < _len; _key++) {
        statusArray[_key] = arguments[_key];
    }

    return statusArray.every(function (status) {
        return _common.loadedStatus.indexOf(status) > -1;
    });
};
var selectIsSpecifiedStatusAllLoaded = exports.selectIsSpecifiedStatusAllLoaded = function selectIsSpecifiedStatusAllLoaded() {
    for (var _len2 = arguments.length, fetchStatusSelectors = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        fetchStatusSelectors[_key2] = arguments[_key2];
    }

    return _reselect.createSelector.apply(null, [].concat(fetchStatusSelectors, [_isAllLoaded]));
};

/***/ }),
/* 86 */,
/* 87 */,
/* 88 */,
/* 89 */,
/* 90 */,
/* 91 */,
/* 92 */,
/* 93 */,
/* 94 */,
/* 95 */,
/* 96 */,
/* 97 */,
/* 98 */,
/* 99 */,
/* 100 */,
/* 101 */,
/* 102 */,
/* 103 */,
/* 104 */,
/* 105 */,
/* 106 */,
/* 107 */,
/* 108 */,
/* 109 */,
/* 110 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _wolfy87Eventemitter = __webpack_require__(149);

var _wolfy87Eventemitter2 = _interopRequireDefault(_wolfy87Eventemitter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// 目的是多个entry导出的js中，都复用同一个Emitter，而不是new多个
var eventEmitter = window.__eventEmitter || new _wolfy87Eventemitter2.default();
window.__eventEmitter = eventEmitter;
exports.default = eventEmitter;

/***/ }),
/* 111 */,
/* 112 */,
/* 113 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.wsURL = exports.isUnitTestEnv = exports.getEnvSpecificConfig = exports.getEnv = exports.isTestEnv = exports.isStagingEnv = exports.isOnlineEnv = exports.isProdEnv = exports.pathPrefix = undefined;

var _envConfigs = __webpack_require__(515);

var _envHelper = __webpack_require__(147);

var PROD = _envConfigs.ENV_TYPE.PROD,
    STAGING = _envConfigs.ENV_TYPE.STAGING,
    TEST = _envConfigs.ENV_TYPE.TEST;
/**
 * 由终端在mobile_index.html中注入
 * 文档：https://docs.bytedance.net/doc/6xt3w7IJSwtGbc4H2IVfyg
 */

var _pathPrefix = '';
if (_envHelper.isDev && location.pathname.indexOf('/space') === 0) {
    _pathPrefix = '/space';
} else if (navigator.pathPrefix !== '{{navigator_path_prefix}}' && navigator.pathPrefix) {
    _pathPrefix = '/' + navigator.pathPrefix;
}
var pathPrefix = exports.pathPrefix = _pathPrefix;
var isProdEnv = exports.isProdEnv = function isProdEnv() {
    return window.location.host.indexOf('docs.bytedance.net') > -1 || navigator.env === PROD;
};
var isOnlineEnv = exports.isOnlineEnv = function isOnlineEnv() {
    return isProdEnv();
};
var isStagingEnv = exports.isStagingEnv = function isStagingEnv() {
    return window.location.host.indexOf('docs-staging.bytedance.net') > -1;
};
var isTestEnv = exports.isTestEnv = function isTestEnv() {
    return window.location.host.indexOf('bear-test.bytedance.net') > -1;
};
var getEnv = exports.getEnv = function getEnv() {
    return isProdEnv() ? PROD : isStagingEnv() ? STAGING : TEST;
};
var getEnvSpecificConfig = exports.getEnvSpecificConfig = function getEnvSpecificConfig(config) {
    return config[getEnv()];
};
// 判断单测环境
var isUnitTestEnv = exports.isUnitTestEnv = function isUnitTestEnv() {
    return !!window.isTest;
};
// 未替换则认为是国内，替换后可能是0、1
var wsURL = exports.wsURL = navigator.isOversea === '{{navigator_is_oversea}}' || !parseInt(navigator.isOversea, 10) ? 'wss://frontier.snssdk.com/ws/v2' : 'wss://lark-frontier.byteoversea.com/ws/v2';

/***/ }),
/* 114 */,
/* 115 */,
/* 116 */,
/* 117 */,
/* 118 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Applicator = exports.ApplicateOptions = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _shared = __webpack_require__(1111);

Object.defineProperty(exports, 'ApplicateOptions', {
  enumerable: true,
  get: function get() {
    return _shared.ApplicateOptions;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Applicator = exports.Applicator = function Applicator() {
  (0, _classCallCheck3.default)(this, Applicator);
};

/***/ }),
/* 119 */,
/* 120 */,
/* 121 */,
/* 122 */,
/* 123 */,
/* 124 */,
/* 125 */,
/* 126 */,
/* 127 */,
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _slicedToArray2 = __webpack_require__(111);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _isObject2 = __webpack_require__(74);

var _isObject3 = _interopRequireDefault(_isObject2);

exports.parseUrl = parseUrl;
exports.parseQuery = parseQuery;
exports.parseHash = parseHash;
exports.formatQuery = formatQuery;
exports.formatUrl = formatUrl;
exports.getSearch2Params = getSearch2Params;
exports.getParams2Search = getParams2Search;
exports.getFromValue = getFromValue;
exports.cleanFromSearch = cleanFromSearch;
exports.parseOriginUrl = parseOriginUrl;
exports.hasHashAnchor = hasHashAnchor;

var _history = __webpack_require__(192);

var _history2 = _interopRequireDefault(_history);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parseUrl() {
    var href = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

    var searchIndex = href.indexOf('?');
    var hashIndex = href.indexOf('#');
    var searchEndIndex = hashIndex > -1 ? hashIndex : href.length;
    return {
        pathname: href.replace(/([\?#].*)/g, ''),
        search: searchIndex > -1 ? href.slice(searchIndex, searchEndIndex) : '',
        hash: hashIndex > -1 ? href.slice(hashIndex + 1) : ''
    };
}
function parseQuery() {
    var href = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : location.href;

    var parsed = {};
    var searchIndex = href.indexOf('?');
    var searches = href.slice(searchIndex + 1).split('&');
    searches.forEach(function (search) {
        if (!search) return;

        var _search$split = search.split('='),
            _search$split2 = (0, _slicedToArray3.default)(_search$split, 2),
            key = _search$split2[0],
            _search$split2$ = _search$split2[1],
            value = _search$split2$ === undefined ? '' : _search$split2$;

        parsed[key] = value.replace(/#.*/, '');
    });
    return parsed;
}
function parseHash() {
    var href = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

    var parsed = {};
    var hashIndex = href.indexOf('#');
    if (hashIndex > -1) {
        var hashes = href.slice(hashIndex + 1).split('&');
        hashes.forEach(function (hash) {
            parsed[hash] = true;
        });
    }
    return parsed;
}
function formatQuery() {
    var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    var query = Object.keys(search).map(function (key) {
        return key + '=' + (search[key] || '');
    }).join('&');
    return query ? '?' + query : '';
}
function formatUrl() {
    var href = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    var paramObject = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { search: '', hash: '' };
    var search = paramObject.search,
        hash = paramObject.hash;

    var searchStr = search;
    if ((0, _isObject3.default)(search)) {
        searchStr = formatQuery(search);
    }
    var hashStr = hash;
    if ((0, _isObject3.default)(hash)) {
        hashStr = Object.keys(hash).join('&');
        if (hashStr) {
            hashStr = '#' + hashStr;
        }
    }
    return '' + href.replace(/\?.*/, '') + searchStr + hashStr;
}
function getSearch2Params(url) {
    var params = {};
    var rep = /(?:\?([^#]*))?(?:#(.*))?$/;
    var execMatch = rep.exec(url);
    if (execMatch && execMatch[1]) {
        var search = execMatch[1];
        search.split('&').forEach(function (item) {
            var _item$split = item.split('='),
                _item$split2 = (0, _slicedToArray3.default)(_item$split, 2),
                key = _item$split2[0],
                value = _item$split2[1];

            value && (params[key] = value);
        });
    }
    return params;
}
function getParams2Search(params) {
    return Object.keys(params).map(function (key) {
        return key + '=' + params[key];
    }).join('&');
}
function getFromValue(url) {
    var params = getSearch2Params(url);
    var launchSource = params.hasOwnProperty('from') ? params.from : '';
    var sourceUrl = '';
    var rep = /^(?:([A-Za-z]+):)(?:\/\/([.\-\w]+))(?::(\d+))?(?:\/([^?#/]*))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;
    launchSource = decodeURIComponent(launchSource);
    if (rep.test(launchSource)) {
        sourceUrl = launchSource;
        var match = rep.exec(launchSource);
        if (!match || !match.length) {
            return launchSource;
        }
        var host = match[2];
        var port = match[3] ? ':' + match[3] : '';
        var currentPath = match[4] ? '/' + match[4] : '';
        launchSource = host + port + currentPath;
    }
    return { launchSource: launchSource, sourceUrl: sourceUrl };
}
function cleanFromSearch(url) {
    var params = getSearch2Params(url);
    if (params.hasOwnProperty('from')) {
        delete params.from;
        var search = getParams2Search(params);
        var deleteFromUrl = location.pathname + (search ? '?' + search : '') + location.hash;
        _history2.default.replace(deleteFromUrl);
    }
}
function parseOriginUrl(url) {
    var rep = /^(?:([A-Za-z]+):\/\/)?(?:([.\-\w]+))?(?::(\d+))?(\/[^?#]*)?(\?[^#]*)?(#.*)?$/;
    var decodeUrl = '';
    try {
        decodeUrl = decodeURIComponent(url);
    } catch (e) {
        decodeUrl = unescape(url);
    }
    var parsedUrl = rep.exec(decodeUrl) || [];

    var _parsedUrl = (0, _slicedToArray3.default)(parsedUrl, 7),
        _parsedUrl$ = _parsedUrl[1],
        protocol = _parsedUrl$ === undefined ? '' : _parsedUrl$,
        _parsedUrl$2 = _parsedUrl[2],
        hostname = _parsedUrl$2 === undefined ? '' : _parsedUrl$2,
        _parsedUrl$3 = _parsedUrl[3],
        port = _parsedUrl$3 === undefined ? '' : _parsedUrl$3,
        _parsedUrl$4 = _parsedUrl[4],
        pathname = _parsedUrl$4 === undefined ? '' : _parsedUrl$4,
        _parsedUrl$5 = _parsedUrl[5],
        search = _parsedUrl$5 === undefined ? '' : _parsedUrl$5,
        _parsedUrl$6 = _parsedUrl[6],
        hash = _parsedUrl$6 === undefined ? '' : _parsedUrl$6;
    /**
     * 0: "http://test.feishu.cn/space/doc/gsDFHGYREDou70HAFlByhe?a=1#123"
     * 1: "http"
     * 2: "test.feishu.cn"
     * 3: undefined
     * 4: "/space/doc/gsDFHGYREDou70HAFlByhe"
     * 5: "?a=1"
     * 6: "#123"
     */


    var matchPath = /(?:\/)?(?:space\/)?([a-zA-Z-]+)?(?:\/([^?#]*))/.exec(pathname) || [];
    return {
        protocol: protocol,
        hostname: hostname,
        port: port,
        pathname: pathname,
        type: matchPath[1] || '',
        token: matchPath[2] || '',
        search: search,
        hash: hash
    };
}
/**
 * 是否有跳转锚点
 */
function hasHashAnchor() {
    var hash = location.hash.replace('#', '');
    if (!hash || hash === 'history' || hash === 'feed') {
        return false;
    } else {
        return true;
    }
}

/***/ }),
/* 129 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.OFFLINE = exports.ONLINE = undefined;
exports.initNetworkEvent = initNetworkEvent;
exports.isOnLine = isOnLine;

var _$store = __webpack_require__(64);

var _$store2 = _interopRequireDefault(_$store);

var _sdkCompatibleHelper = __webpack_require__(45);

var _network = __webpack_require__(1150);

var _network2 = __webpack_require__(676);

var _eventEmitter = __webpack_require__(110);

var _eventEmitter2 = _interopRequireDefault(_eventEmitter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function initNetworkEvent() {
    /**
     * 设置网络状态
     * @param {object} data 网络状态 {type: string, connected: boolean}
     * @param {boolean} fromNative 是否由客户端触发，默认为true
     */
    window.native.setNetworkState = function (data) {
        var fromNative = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

        console.info('>>> setNetworkState --> ' + JSON.stringify(data) + ', fromNative: ' + fromNative);
        window.NETWORK_STATE = data;
        if (fromNative) {
            var evt = data.connected ? new Event('online') : new Event('offline');
            evt.fromNative = true;
            window.dispatchEvent(evt);
        }
        _$store2.default.dispatch((0, _network.setNetworkState)(data));
        _eventEmitter2.default.emit(data.connected ? 'online' : 'offline');
    };
    // 初始化状态，避免客户端调用不及时
    window.native.setNetworkState({
        type: _network2.NETWORK_TYPE.FRONTEND,
        connected: navigator.onLine
    }, false);
    var networkChangeHandler = function networkChangeHandler(e, _connected) {
        if (!(0, _sdkCompatibleHelper.isSupportNativeNetwork)()) {
            // 兼容不支持客户端获取网络状态的老版本App
            window.native.setNetworkState({
                type: _network2.NETWORK_TYPE.FRONTEND,
                connected: _connected
            }, false);
        } else if (!e.fromNative) {
            // 拦截支持客户端获取网络状态的新版本App的默认online事件，避免组件监听函数调用两次
            e.stopImmediatePropagation();
        }
    };
    window.addEventListener('online', function (e) {
        networkChangeHandler(e, true);
    });
    window.addEventListener('offline', function (e) {
        networkChangeHandler(e, false);
    });
}
/**
 * 是否有网络
 */
function isOnLine() {
    var networkState = window.NETWORK_STATE;
    return networkState ? networkState.connected : navigator.onLine;
}
var ONLINE = exports.ONLINE = 'online';
var OFFLINE = exports.OFFLINE = 'offline';

/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.GROUP_STEPS = exports.TRIGGER_TYPE = exports.PLACEMENT = exports.GROUP_TYPE = exports.GUIDE_TYPE = exports.STEP_STATE = exports.DATA_FIELD = exports.PROFILE = exports.PROFILE_GROUP = exports.STEP_TYPES = exports.MOBILE_STEP_TYPES = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var MOBILE_STEP_TYPES = exports.MOBILE_STEP_TYPES = undefined;
(function (MOBILE_STEP_TYPES) {
    MOBILE_STEP_TYPES["mobile_new_doc_user_header"] = "mobile_new_doc_user_header";
    MOBILE_STEP_TYPES["mobile_new_doc_user_toolbar"] = "mobile_new_doc_user_toolbar";
    MOBILE_STEP_TYPES["mobile_new_doc_user_checkbox"] = "mobile_new_doc_user_checkbox";
    MOBILE_STEP_TYPES["mobile_new_doc_user_checkbox_a"] = "mobile_new_doc_user_checkbox_a";
    MOBILE_STEP_TYPES["mobile_new_doc_user_checkbox_b"] = "mobile_new_doc_user_checkbox_b";
    MOBILE_STEP_TYPES["mobile_new_doc_user_share"] = "mobile_new_doc_user_share";
    MOBILE_STEP_TYPES["mobile_new_doc_user_create"] = "mobile_new_doc_user_create";
    MOBILE_STEP_TYPES["mobile_new_translate"] = "mobile_new_translate";
    MOBILE_STEP_TYPES["mobile_new_translate_switch"] = "mobile_new_translate_switch";
})(MOBILE_STEP_TYPES || (exports.MOBILE_STEP_TYPES = MOBILE_STEP_TYPES = {}));
var STEP_TYPES = exports.STEP_TYPES = {
    create_doc_group_at_panel: 'create_doc_group_at_panel',
    create_doc_group_congrats: 'create_doc_group_congrats',
    create_doc_group_intro: 'create_doc_group_intro',
    create_doc_group_line_popover: 'create_doc_group_line_popover',
    create_doc_group_selection_popup: 'create_doc_group_selection_popup',
    create_doc_group_share_button: 'create_doc_group_share_button',
    home_tutorial_best_practice: 'home_tutorial_best_practice',
    home_tutorial_create_doc: 'home_tutorial_create_doc',
    home_tutorial_intro: 'home_tutorial_intro',
    home_tutorial_shared_folder: 'home_tutorial_shared_folder',
    iframe_guide: 'iframe_guide',
    import_success_share_plan_a: 'import_success_share_plan_a',
    import_success_share_plan_b: 'import_success_share_plan_b',
    main_announce: 'main_announce',
    mention_box: 'mention_box',
    mention_chat: 'mention_chat',
    mention_file: 'mention_file',
    mention_group: 'mention_group',
    mention_insert_sheet: 'mention_insert_sheet',
    mention_intro: 'mention_intro',
    mention_sheet_doc: 'mention_sheet_doc',
    mention_table: 'mention_table',
    mention_user: 'mention_user',
    mindmap_create_heading: 'mindmap_create_heading',
    mindmap_docs: 'mindmap_docs',
    mindmap_double_click: 'mindmap_double_click',
    mindmap_guide: 'mindmap_guide',
    shared_doc_group_comment: 'shared_doc_group_comment',
    shared_doc_group_create: 'shared_doc_group_create',
    shared_doc_group_intro: 'shared_doc_group_intro',
    shared_doc_group_toc: 'shared_doc_group_toc',
    suite_history: 'suite_history',
    undo_redo_callout: 'undo_redo_callout',
    gallery_image_guide: 'gallery_image_guide'
};
var PROFILE_GROUP = exports.PROFILE_GROUP = {
    USER: 'user'
};
var PROFILE = exports.PROFILE = (0, _defineProperty3.default)({}, PROFILE_GROUP.USER, {
    docs_acc_create_doc_count: 'docs_acc_create_doc_count',
    docs_acc_editor_redo_count: 'docs_acc_editor_redo_count',
    docs_acc_editor_undo_count: 'docs_acc_editor_undo_count',
    docs_acc_enter_home_count: 'docs_acc_enter_home_count',
    docs_acc_open_share_count: 'docs_acc_open_share_count',
    docs_first_create_file_time: 'docs_first_create_file_time'
});
var DATA_FIELD = exports.DATA_FIELD = {
    PROFILE: 'profile',
    GUIDES: 'guides',
    MOBILE_LOCAL_GUIDES: 'mobile_local_guides'
};
var STEP_STATE = exports.STEP_STATE = {
    DONE: 'is_done',
    CONTEXT: 'context'
};
var GUIDE_TYPE = exports.GUIDE_TYPE = {
    CALLOUT: 'CALLOUT'
};
var GROUP_TYPE = exports.GROUP_TYPE = {
    CREATE_DOC: 'CREATE_DOC',
    SHARED_DOC: 'SHARED_DOC'
};
var PLACEMENT = exports.PLACEMENT = {
    BOTTOM: 'bottom',
    TOP: 'top',
    LEFT: 'left',
    RIGHT: 'right'
};
var TRIGGER_TYPE = exports.TRIGGER_TYPE = {
    ACKNOWLEDGE: 'ACKNOWLEDGE',
    COMPLETE: 'COMPLETE'
};
/**
 * Each group should at least have an intro state
 * at index 0, to track whether the group has been
 * entered / done.
 */
var GROUP_STEPS = exports.GROUP_STEPS = {
    CREATE_DOC: [STEP_TYPES.create_doc_group_intro, STEP_TYPES.create_doc_group_selection_popup, STEP_TYPES.create_doc_group_line_popover, STEP_TYPES.create_doc_group_at_panel, STEP_TYPES.create_doc_group_share_button, STEP_TYPES.create_doc_group_congrats],
    SHARED_DOC: [STEP_TYPES.shared_doc_group_intro, STEP_TYPES.shared_doc_group_toc, STEP_TYPES.shared_doc_group_create, STEP_TYPES.shared_doc_group_comment]
};

/***/ }),
/* 131 */,
/* 132 */,
/* 133 */,
/* 134 */,
/* 135 */,
/* 136 */,
/* 137 */,
/* 138 */,
/* 139 */,
/* 140 */,
/* 141 */,
/* 142 */,
/* 143 */,
/* 144 */,
/* 145 */,
/* 146 */,
/* 147 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.isDebugApp = exports.isDebug = exports.isDev = exports.isTestMode = undefined;
exports.isE2E = isE2E;
exports.isAnnouncement = isAnnouncement;

var _getAllUrlParams = __webpack_require__(231);

// 是否为测试包, 即 scm 包为 测试包
var isTestMode = exports.isTestMode = function () {
    var W = window;
    return W.scm && W.scm.type === 'test';
}();
/**
 * 是否为 dev 版本, 即本地开发
 * host 为 127.0.0.1, localhost, 10.94.*.*
 */
var isDev = exports.isDev = function () {
    return window._isDev;
}();
var isDebug = exports.isDebug = isTestMode || isDev;
function isE2E() {
    var isE2E = window.User.isE2E;
    return isE2E;
}
var isDebugApp = exports.isDebugApp = function () {
    return window.User.appDebugConfig && window.User.appDebugConfig.isDebug;
}();
function isAnnouncement() {
    // 判断是否在群公告里打开文档
    return (0, _getAllUrlParams.getAllUrlParams)()['open_type'] === 'announce';
}

/***/ }),
/* 148 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getNewDocClientVars = getNewDocClientVars;
var CLIENT_VARS = exports.CLIENT_VARS = 'CLIENT_VARS';
var SHEET_CLIENT_VARS = exports.SHEET_CLIENT_VARS = 'SHEET_CLIENT_VARS';
var CLIENT_VARS_OLD = exports.CLIENT_VARS_OLD = 'CLIENT_VARS_OLD';
var USER_CHANGESET = exports.USER_CHANGESET = 'USER_CHANGESET';
var COMMITED_CHANGESET = exports.COMMITED_CHANGESET = 'COMMITED_CHANGESET';
var USER_CHANGES = exports.USER_CHANGES = 'USER_CHANGES';
var UNIQUE_MEMBER_ID = exports.UNIQUE_MEMBER_ID = 10000000000000;
var EMPTY_RESULT = exports.EMPTY_RESULT = 204;
var CACHE = exports.CACHE = 'CACHE';
var NETWORK = exports.NETWORK = 'NETWORK';
var TYPE_APPLICATION_JSON = exports.TYPE_APPLICATION_JSON = 'application/json';
var TYPE_FORM_DATA = exports.TYPE_FORM_DATA = 'application/x-www-form-urlencoded';
var ERR_USER_NOT_MATCHED = exports.ERR_USER_NOT_MATCHED = 1;
var ERR_NODE_DELETED = exports.ERR_NODE_DELETED = 2;
var ERR_CREATE_FAILD = exports.ERR_CREATE_FAILD = 3;
var DATA_TYEP_MAIN = exports.DATA_TYEP_MAIN = 1; // 离线关键数据
var OFFLINE_ERROR = exports.OFFLINE_ERROR = -1;
var NETWORK_ERROR = exports.NETWORK_ERROR = -8;
var BACKUP_HTML = exports.BACKUP_HTML = 'BACKUP_HTML'; // 出错保存的html
function getNewDocClientVars() {
    var author = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.User.id;

    if (!author) {
        console.error('author must not be undefined');
    }
    return {
        apool: {
            nextNum: 1,
            numToAttrib: {
                0: ['author', author]
            }
        },
        initialAttributedText: {
            attribs: '*0|1+1|1+1',
            text: '\n\n'
        },
        initialAttributedTexts: {
            attribs: {
                0: '*0|1+1|1+1'
            },
            text: {
                0: '\n\n'
            }
        }
    };
}

/***/ }),
/* 149 */,
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fetchSheet = exports.fetchMobileDoc = exports.fetchDoc = undefined;

var _createRequest = __webpack_require__(579);

var _config = __webpack_require__(1271);

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var fetchDoc = exports.fetchDoc = (0, _createRequest.createNormalRequest)(_config2.default.doc);

var fetchMobileDoc = exports.fetchMobileDoc = (0, _createRequest.createSupportOfflineRequest)();

var fetchSheet = exports.fetchSheet = (0, _createRequest.createNormalRequest)(_config2.default.sheet);

/***/ }),
/* 151 */,
/* 152 */,
/* 153 */,
/* 154 */,
/* 155 */,
/* 156 */,
/* 157 */,
/* 158 */,
/* 159 */,
/* 160 */,
/* 161 */,
/* 162 */,
/* 163 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.snakeCase = exports.camelCase = exports.intToLowerRoman = exports.intToLowerLatin = undefined;

var _snakeCase2 = __webpack_require__(799);

var _snakeCase3 = _interopRequireDefault(_snakeCase2);

var _camelCase2 = __webpack_require__(838);

var _camelCase3 = _interopRequireDefault(_camelCase2);

exports.generateRandomString = generateRandomString;
exports.randomString = randomString;
exports.isEmpty = isEmpty;
exports.isSizeofOver = isSizeofOver;
exports.intToAZ = intToAZ;
exports.AZToInt = AZToInt;
exports.hasUrlProtocol = hasUrlProtocol;
exports.isUrl = isUrl;
exports.isEmail = isEmail;
exports.parseAllUrl = parseAllUrl;
exports.UUIDv4 = UUIDv4;

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
function generateRandomString() {
    var length = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 20;

    var randomString = '';
    for (var i = 0; i < length; i++) {
        var randomNumber = Math.floor(Math.random() * chars.length);
        randomString += chars[randomNumber];
    }
    return randomString;
}
function randomString() {
    var length = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 20;

    var randomString = '';
    for (var i = 0; i < length; i++) {
        var randomNumber = Math.floor(Math.random() * chars.length);
        randomString += chars[randomNumber];
    }
    return randomString;
}
/**
 * 判断一个字符串是否为空
 * @param val
 * @param isSpaceCount 是否将空格计入
 */
function isEmpty(val) {
    var isSpaceCount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

    return (!isSpaceCount ? val.trim() : val) === '';
}
/**
 * 计算字符串所占的内存字节数，默认使用UTF-8的编码方式计算，也可指定为UTF-16
 * UTF-8 是一种可变长度的 Unicode 编码格式，使用一至四个字节为每个字符编码
 *
 * 000000 - 00007F(128个代码)      0zzzzzzz(00-7F)                             一个字节
 * 000080 - 0007FF(1920个代码)     110yyyyy(C0-DF) 10zzzzzz(80-BF)             两个字节
 * 000800 - 00D7FF
 * 00E000 - 00FFFF(61440个代码)    1110xxxx(E0-EF) 10yyyyyy 10zzzzzz           三个字节
 * 010000 - 10FFFF(1048576个代码)  11110www(F0-F7) 10xxxxxx 10yyyyyy 10zzzzzz  四个字节
 *
 * 注: Unicode在范围 D800-DFFF 中不存在任何字符
 * {@link http://zh.wikipedia.org/wiki/UTF-8}
 *
 * UTF-16 大部分使用两个字节编码，编码超出 65535 的使用四个字节
 * 000000 - 00FFFF  两个字节
 * 010000 - 10FFFF  四个字节
 *
 * {@link http://zh.wikipedia.org/wiki/UTF-16}
 * @param {string} str
 * @param {number} max, 超过max返回false
 * @param {string} charset utf-8, utf-16
 * @return {boolean} 返回str是否超过了max长度
 */
function isSizeofOver(str, max, charset) {
    charset = charset ? charset.toLowerCase() : '';
    var total = 0;
    var getByte = charset === 'utf-16' || charset === 'utf16' ? getUTF16Byte : getUTF8Byte;
    for (var i = 0, len = str.length; i < len; i++) {
        var charCode = str.charCodeAt(i);
        total += getByte(charCode);
        if (total > max) {
            return true;
        }
    }
    return false;
}
function getUTF16Byte(charCode) {
    return charCode <= 0xffff ? 2 : 4;
}
function getUTF8Byte(charCode) {
    if (charCode <= 0x007f) {
        return 1;
    }
    if (charCode <= 0x07ff) {
        return 2;
    }
    if (charCode <= 0xffff) {
        return 3;
    }
    return 4;
}
/*
 * 将整数转换为 A-Z进制，例：0 -> A; 26 -> AA
 */
function intToAZ(n) {
    var s = '';
    while (n >= 0) {
        s = String.fromCharCode(n % 26 + 65) + s;
        n = Math.floor(n / 26) - 1;
    }
    return s;
}
/*
 * 将整数转换为 A-Z进制，例：A -> 0; AA -> 26
 */
function AZToInt() {
    var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

    s = s.split('').reverse().join('');
    var i = 0;
    var n = 0;
    while (i < s.length) {
        n = n + Math.pow(26, i) * s.charCodeAt(i) % 64;
        i++;
    }
    return Math.max(n - 1, 0);
}
/**
 * 将正整数转换为LowerLatin格式，例：1->a, 27 -> aa
 */
function _intToLowerLatin(n) {
    if (n < 1) return '';
    return intToAZ(n - 1).toLowerCase();
}
/**
 * 将正整数转换为LowerRoman格式
 */
function _intToLowerRoman(n) {
    if (n < 1) return '';
    if (n > 10000) return String(n); // 超过10000的罗马数字会很长，甚至会导致转换程序陷入死循环，这个限制一下
    var lookup = { m: 1000, cm: 900, d: 500, cd: 400, c: 100, xc: 90, l: 50, xl: 40, x: 10, ix: 9, v: 5, iv: 4, i: 1 };
    var romanStr = '';
    for (var i in lookup) {
        while (n >= lookup[i]) {
            romanStr += i;
            n -= lookup[i];
        }
    }
    return romanStr;
}
/**
 * 将数字转化的结果存入缓存，第二次直接从缓存读取
 * @param transformFn 转化函数
 */
function transformInt(transformFn) {
    var cache = {};
    return function (n) {
        var result = cache[n];
        if (result == null) {
            result = cache[n] = transformFn(n);
        }
        return result;
    };
}
var intToLowerLatin = exports.intToLowerLatin = transformInt(_intToLowerLatin);
var intToLowerRoman = exports.intToLowerRoman = transformInt(_intToLowerRoman);
/**
 * 将字符串转化的结果存入缓存，第二次直接从缓存读取
 * @param transformFn 转化函数
 */
function transformString(transformFn) {
    var cache = {};
    return function (str) {
        if (str in cache) return cache[str];
        var result = transformFn(str);
        cache[str] = result;
        return result;
    };
}
var camelCase = exports.camelCase = transformString(_camelCase3.default);
var snakeCase = exports.snakeCase = transformString(_snakeCase3.default);
/* tslint:disable */
var LOCALHOST_REG = /localhost:[0-9]{2,5}/;
var IP_ADDRESS_REG = /(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(2[0-4][0-9]|25[0-5]|1[0-9]{2}|[1-9][0-9]|[0-9])(:[0-9]{2,5})?/;
var IP_REG = new RegExp('((https?|http|ftp)://)?((' + LOCALHOST_REG.source + ')|(' + IP_ADDRESS_REG.source + '))(/[-a-zA-Z0-9@:%_+.~#?&//=]*)?', 'gi');
/* tslint:enable */
var URL_PROTOCOL_REG = /^(https?|ftp):\/\/|mailto:/i;
var LINK_REG = new RegExp('(' + IP_REG.source + ')|(' + _common.URL_REG.source + ')|(' + _common.LENGTH_LIMITED_EMAIL_REG.source + ')', 'gi');
function hasUrlProtocol(url) {
    return new RegExp(URL_PROTOCOL_REG).test(url);
}
function isUrl(url) {
    // tslint:disable-next-line
    return new RegExp(LINK_REG).test(url);
}
function isEmail(url) {
    // tslint:disable-next-line
    return new RegExp('^' + _common.LENGTH_LIMITED_EMAIL_REG.source + '$', 'i').test(url);
}
function parseAllUrl(value) {
    var valueArray = [];
    var lastEndIndex = 0;
    var regExp = new RegExp(LINK_REG);
    var execResult = regExp.exec(value);
    if (execResult == null) {
        return value;
    }
    while (execResult) {
        var startIndex = execResult.index;
        var regExpMatch = execResult[0];
        if (startIndex !== lastEndIndex) {
            valueArray.push({
                type: 'text',
                text: value.substring(lastEndIndex, startIndex)
            });
        }
        if (hasUrlProtocol(regExpMatch)) {
            valueArray.push({ type: 'url', text: regExpMatch });
        } else if (isUrl(regExpMatch)) {
            valueArray.push({ type: 'url', link: 'http://' + regExpMatch, text: regExpMatch });
        } else if (isEmail(regExpMatch)) {
            valueArray.push({ type: 'url', link: 'mailto:' + regExpMatch, text: regExpMatch });
        }
        lastEndIndex = regExp.lastIndex;
        execResult = regExp.exec(value);
    }
    if (lastEndIndex < value.length) {
        valueArray.push({
            type: 'text',
            text: value.substring(lastEndIndex)
        });
    }
    return valueArray;
}
function UUIDv4() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = Math.random() * 16 | 0;
        var v = c === 'x' ? r : r & 0x3 | 0x8;
        return v.toString(16);
    });
}

/***/ }),
/* 164 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.encryptTea = encryptTea;

var _blueimpMd = __webpack_require__(568);

var _blueimpMd2 = _interopRequireDefault(_blueimpMd);

var _sha = __webpack_require__(390);

var _sha2 = _interopRequireDefault(_sha);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var saltA = '08a441';
var saltB = '42b91e';
function encryptTea(message) {
  return (0, _sha2.default)(saltA + (0, _blueimpMd2.default)(message + saltB)).toString();
};

/***/ }),
/* 165 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.collectShowToolbar = exports.clientOpenFileEvent = undefined;

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(99);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var clientOpenFileEvent = exports.clientOpenFileEvent = function () {
  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
    var _module, fileInfoObj;

    return _regenerator2.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _module = (0, _tea.getModule)().module;

            if (!(_module === 'doc' || _module === 'sheet')) {
              _context.next = 11;
              break;
            }

            fileInfoObj = (0, _getFileInfo.getFileInfoObj)();

          case 3:
            if (!isFileInfoEmpty(fileInfoObj)) {
              _context.next = 9;
              break;
            }

            _context.next = 6;
            return (0, _asyncHelper.sleep)(2000);

          case 6:
            fileInfoObj = (0, _getFileInfo.getFileInfoObj)();
            _context.next = 3;
            break;

          case 9:
            _tea.collector.updateConfig({
              access: _network.NETWORK_TYPE_DESC[window.NETWORK_STATE.type]
            });
            (0, _tea2.default)('client_file_open', {
              network_status: (0, _networkStateHelper.isOnLine)() ? _networkStateHelper.ONLINE : _networkStateHelper.OFFLINE,
              is_have_anchor: (0, _urlHelper2.hasHashAnchor)()
            });

          case 11:
          case 'end':
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function clientOpenFileEvent() {
    return _ref.apply(this, arguments);
  };
}();

exports.durationEvent = durationEvent;
exports.bindTeaEvent = bindTeaEvent;
exports.createNewObjsEvent = createNewObjsEvent;
exports.clientEnterDocs = clientEnterDocs;
exports.launchWebEvent = launchWebEvent;
exports.getZone = getZone;
exports.getZoneForMsg = getZoneForMsg;
exports.setTeaMapCreateInfo = setTeaMapCreateInfo;
exports.clearTeaMapCreateInfo = clearTeaMapCreateInfo;
exports.getMentionType = getMentionType;

var _tea = __webpack_require__(42);

var _tea2 = _interopRequireDefault(_tea);

var _getFileInfo = __webpack_require__(472);

var _urlHelper = __webpack_require__(128);

var _asyncHelper = __webpack_require__(569);

var _networkStateHelper = __webpack_require__(129);

var _network = __webpack_require__(676);

var _suiteHelper = __webpack_require__(52);

var _urlHelper2 = __webpack_require__(128);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function durationEvent(inPage) {
  var now = +new Date();
  var minuend = window.teaMap.preDuration || window.teaMap.launchWeb;
  var duration = now - minuend;
  window.teaMap.preDuration = now;
  // 离线状态不发送
  if (!window.navigator.onLine) return;
  var _inPage = inPage || document.hasFocus().toString();
  if (_inPage === 'false') {
    return;
  }
  (0, _tea2.default)('launch_duration', {
    session_duration: Math.floor(duration / 1000),
    module: (0, _tea.getModule)(window.teaMap.preHref).module,
    in_page: inPage || document.hasFocus().toString(),
    __disable_storage__: 1
  });
};

function bindTeaEvent() {
  window.teaMap.launchWeb = +new Date();
  window.addEventListener('beforeunload', function () {
    durationEvent();
  });
  window.addEventListener('focus', function () {
    durationEvent((!document.hasFocus()).toString());
  });
  window.addEventListener('blur', function () {
    durationEvent((!document.hasFocus()).toString());
  });
}

function isFileInfoEmpty(fileInfoObj) {
  return (0, _networkStateHelper.isOnLine)() && (!fileInfoObj.file_tenant_id || !fileInfoObj.file_id);
}

function createNewObjsEvent() {
  var onLine = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (0, _networkStateHelper.isOnLine)();

  var type = (0, _suiteHelper.suiteType)();
  (0, _tea2.default)('create_new_objs', {
    file_type: type,
    network_status: onLine ? _networkStateHelper.ONLINE : _networkStateHelper.OFFLINE
  });
}

function clientEnterDocs(url) {
  var params = {
    launchSource: '',
    sourceUrl: ''
  };
  try {
    params = (0, _urlHelper.getFromValue)(url);
  } catch (error) {
    console.log(error);
  }
  if (!params.launchSource) {
    return;
  }

  (0, _tea2.default)('client_enter_docs', {
    source: params.launchSource,
    source_url: params.sourceUrl
  });
}

function launchWebEvent(platform) {
  (0, _tea2.default)('launch_web', {
    action: 'launch_web',
    source: platform
  });
};

function getZone(rep) {
  if (rep) {
    return rep.zoneId !== '0' ? 'table' : 'default';
  }
  return 'default';
}

function getZoneForMsg(message) {
  if (message.zone_changesets) {
    var zoneChangesetKeys = Object.keys(message['zone_changesets']);
    var keysLength = zoneChangesetKeys.length;
    // 如果只有一个key，而且0在其中，那么就是default
    if (keysLength === 1 && zoneChangesetKeys['0']) return 'default';
    // 如果有至少两个key，那么一定有在table中编辑
    if (keysLength > 1) return 'table';
  }
  return 'default';
}

function setTeaMapCreateInfo(payload) {
  window.teaMap.createUid = payload.create_uid;
  window.teaMap.ownerId = payload.owner_id;
  window.teaMap.createTime = payload.create_time;
}

function clearTeaMapCreateInfo() {
  window.teaMap.createUid = void 0;
  window.teaMap.ownerId = void 0;
  window.teaMap.createTime = void 0;
}

/**
 * 0 = 用户 = 'user',
 * 1 = 文档 = 'file',
 * 2 = 文档路径 = 'folder',
 * 3 = sheet = 'sheet',
 * 4 = 表格+文档 = 'sheet_doc',
 * 5 = 群聊 = 'chat',
 * 6 = 群 = 'group',
 */
function getMentionType(mentionType) {
  switch (mentionType.toString()) {
    case '0':
      return 'user';
    case '1':
      return 'file';
    case '2':
      return 'folder';
    case '3':
      return 'sheet';
    case '4':
      return 'sheet_doc';
    case '5':
      return 'chat';
    case '6':
      return 'group';
    case '7':
      return 'block';
    default:
      return '';
  }
}

var collectShowToolbar = exports.collectShowToolbar = function collectShowToolbar(source) {
  (0, _tea.collectSuiteEvent)('show_style_toolbar', {
    source: source
  });
};

/***/ }),
/* 166 */,
/* 167 */,
/* 168 */,
/* 169 */,
/* 170 */,
/* 171 */,
/* 172 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _Node = __webpack_require__(681);

Object.keys(_Node).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _Node[key];
    }
  });
});

var _Obj = __webpack_require__(683);

Object.keys(_Obj).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _Obj[key];
    }
  });
});

var _User = __webpack_require__(684);

Object.keys(_User).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _User[key];
    }
  });
});

var _typings = __webpack_require__(392);

Object.keys(_typings).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _typings[key];
    }
  });
});

var _Divider = __webpack_require__(1174);

Object.keys(_Divider).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _Divider[key];
    }
  });
});

/***/ }),
/* 173 */,
/* 174 */,
/* 175 */,
/* 176 */,
/* 177 */,
/* 178 */,
/* 179 */,
/* 180 */,
/* 181 */,
/* 182 */,
/* 183 */,
/* 184 */,
/* 185 */,
/* 186 */,
/* 187 */,
/* 188 */,
/* 189 */,
/* 190 */,
/* 191 */,
/* 192 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.unOverwriteHistory = exports.overwriteHistory = undefined;

var _isString2 = __webpack_require__(576);

var _isString3 = _interopRequireDefault(_isString2);

var _createBrowserHistory = __webpack_require__(1035);

var _createBrowserHistory2 = _interopRequireDefault(_createBrowserHistory);

var _urlHelper = __webpack_require__(128);

var _modal = __webpack_require__(588);

var _modal2 = _interopRequireDefault(_modal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var history = (0, _createBrowserHistory2.default)({
  getUserConfirmation: function getUserConfirmation(message, next) {
    if (message) {
      _modal2.default.show({
        title: t('common.leave_page_warning_title'),
        body: message,
        confirmText: t('common.leave_page_warning_confirm'),
        cancelText: t('common.leave_page_warning_cancel'),
        onConfirm: function onConfirm() {
          next(true);
        },
        onClose: function onClose() {
          next(false);
        }
      });
      return;
    }

    next(true);
  }
});
exports.default = history;


history.rawPush = history.push;
var overwriteHistory = exports.overwriteHistory = function overwriteHistory(history) {
  var hooks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  history.push = function (nextLocation, nextState) {
    var curHref = location.href;
    var processed = nextLocation;
    if (hooks.beforePush) {
      var parsed = nextLocation;
      if ((0, _isString3.default)(nextLocation)) {
        parsed = (0, _urlHelper.parseUrl)(nextLocation);
      }
      processed = hooks.beforePush(parsed);
    }

    if (!processed) return;

    history.rawPush(processed, nextState);

    hooks.afterPush && hooks.afterPush(curHref);
  };
  return history;
};

var unOverwriteHistory = exports.unOverwriteHistory = function unOverwriteHistory(history) {
  history.push = history.rawPush;
  return history;
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 193 */,
/* 194 */,
/* 195 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setDocumentTitle = setDocumentTitle;
exports.getTitle = getTitle;
exports.getUnnamedTitle = getUnnamedTitle;
exports.setTitle = setTitle;

var _routeHelper = __webpack_require__(67);

var _userHelper = __webpack_require__(65);

var _common = __webpack_require__(19);

var _$constants = __webpack_require__(5);

// mapCurrentLocationTo内部返回的key一律是大写
var mapLocationToSuffix = {
  DOC: _userHelper.isBytedanceUser ? 'Doc' : t('common.doc'),
  SHEET: _userHelper.isBytedanceUser ? 'Sheet' : t('common.sheet'),
  FOLDER: t('common.folder')
};

function setDocumentTitle(title) {
  var suffix = (0, _routeHelper.mapCurrentLocationTo)(mapLocationToSuffix);
  var separtor = suffix ? ' - ' : '';
  return document.title = !title ? suffix : '' + title + separtor + suffix;
}

/* eslint-disable */
function getTitle(action) {
  var _action$payload = action.payload,
      delete_flag = _action$payload.delete_flag,
      title = _action$payload.title,
      type = _action$payload.type;

  var code = void 0;
  if (action.error) {
    code = action.error.code;
  }
  if (delete_flag === 1) return _$constants.common.SuiteTitle.deleted;
  if (code === _$constants.error.STATUS_CODE.FORBIDDEN) {
    return _$constants.common.SuiteTitle.forbidden;
  }
  if (code === _$constants.error.STATUS_CODE.NOT_FOUND || code === _$constants.error.STATUS_CODE.INVALID_PARAMETERS) {
    return _$constants.common.SuiteTitle.notFound;
  }
  if (!title && type) return getUnnamedTitle(type);
  return title;
}
/* eslint-enable */

function getUnnamedTitle(type) {
  return _$constants.common.suiteType2UnnamedTitle[type] || '';
}

function setTitle(type) {
  switch (type) {
    case _common.NUM_ROOT_META.EXPLORER:
      setDocumentTitle(t('common.my_document'));
      break;
    case _common.NUM_ROOT_META.SHARE_FILES:
      setDocumentTitle(t('common.share'));
      break;
    case _common.NUM_ROOT_META.SHARE_FOLDERS:
      setDocumentTitle(t('common.share_folders'));
      break;
    case _common.NUM_ROOT_META.TRASH:
      setDocumentTitle(t('explorer.recyle_cin'));
      break;
  }
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 196 */,
/* 197 */,
/* 198 */,
/* 199 */,
/* 200 */,
/* 201 */,
/* 202 */,
/* 203 */,
/* 204 */,
/* 205 */,
/* 206 */,
/* 207 */,
/* 208 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _assignAll = __webpack_require__(669);

Object.keys(_assignAll).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _assignAll[key];
    }
  });
});

var _bind = __webpack_require__(1104);

Object.keys(_bind).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _bind[key];
    }
  });
});

var _CompositeKeyWeakMap = __webpack_require__(1105);

Object.keys(_CompositeKeyWeakMap).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _CompositeKeyWeakMap[key];
    }
  });
});

var _copyMetaData = __webpack_require__(671);

Object.keys(_copyMetaData).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _copyMetaData[key];
    }
  });
});

var _isDecoratorArgs = __webpack_require__(1106);

Object.keys(_isDecoratorArgs).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _isDecoratorArgs[key];
    }
  });
});

var _isPrototypeAccess = __webpack_require__(1107);

Object.keys(_isPrototypeAccess).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _isPrototypeAccess[key];
    }
  });
});

var _log = __webpack_require__(672);

Object.keys(_log).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _log[key];
    }
  });
});

var _resolveFunction = __webpack_require__(1108);

Object.keys(_resolveFunction).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _resolveFunction[key];
    }
  });
});

var _returnAtIndex = __webpack_require__(1109);

Object.keys(_returnAtIndex).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _returnAtIndex[key];
    }
  });
});

var _wrapConstructor = __webpack_require__(1110);

Object.keys(_wrapConstructor).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _wrapConstructor[key];
    }
  });
});

/***/ }),
/* 209 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.transformType2VirtualType = transformType2VirtualType;
exports.transformVirtualType2Real = transformVirtualType2Real;
exports.getTypePrefixRemovedToken = getTypePrefixRemovedToken;
exports.getTypePrefixedToken = getTypePrefixedToken;

var _common = __webpack_require__(19);

var _$models = __webpack_require__(172);

/**
 * 转换后端接口可识别的 type 到前端虚拟 type (根据后端的定义)
 * 后端 type 用于一切后端接口操作
 * 前端 type 用于一些特定标识： 比如 Icon 的识别
 * 这个函数存在起因是因为后端隐藏了特定类型如：共享文件夹 type = 6.
 * 前端需要用其他佐证字段来进行辅助判断
 * @param type NUM_SUITE_TYPE + NUM_FOLDER_TYPE.FOLDER
 * @param shareRoot 是否为共享根节点
 */
function transformType2VirtualType(_ref) {
    var type = _ref.type,
        _ref$shareRoot = _ref.shareRoot,
        shareRoot = _ref$shareRoot === undefined ? _$models.IsSharedRootFolder.no : _ref$shareRoot;

    var isFolder = type === _common.NUM_FOLDER_TYPE.FOLDER;
    var isShared = shareRoot === _$models.IsSharedRootFolder.yes;
    var isSharedRootFolder = isFolder && isShared;
    return isSharedRootFolder ? _common.NUM_FOLDER_TYPE.SHARE_FOLDER : type;
}
/**
 * 将前端的 type 转换为后端接口操作可识别的 type
 * 是 transformType2VirtualType 的逆操作
 * @param type common.NUM_FILE_TYPE
 */
function transformVirtualType2Real(type) {
    var isShareFolderType = type === _common.NUM_FILE_TYPE.SHARE_FOLDER;
    return isShareFolderType ? _common.NUM_FILE_TYPE.FOLDER : type;
}
/**
 * 获取移除了type prefix 的 token
 * @example 2:xxxxxxx => xxxxxxx
 * @example 2xxxxxxxx => 2xxxxxxxx
 */
function getTypePrefixRemovedToken(typePrefixedToken) {
    if (typePrefixedToken.indexOf(':') < 0) {
        return typePrefixedToken;
    }
    return typePrefixedToken.split(':')[1] || typePrefixedToken;
}
function getTypePrefixedToken(type, token) {
    return type + ':' + token;
}

/***/ }),
/* 210 */,
/* 211 */,
/* 212 */,
/* 213 */,
/* 214 */,
/* 215 */,
/* 216 */,
/* 217 */,
/* 218 */,
/* 219 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _each2 = __webpack_require__(749);

var _each3 = _interopRequireDefault(_each2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var EVENTS = {
    PC: {
        DOCS: {
            ONBOARDING: {
                ADD_STEP: 'ADD_STEP',
                REMOVE_STEP: 'REMOVE_STEP',
                HIDE_STEP: 'HIDE_STEP',
                ACKNOWLEDGE_STEP: 'ACKNOWLEDGE_STEP',
                COMPLETE_STEP: 'COMPLETE_STEP',
                SCAN_STEP: 'SCAN_STEP',
                RENDER_STEP: 'RENDER_STEP',
                DRIVER_NEXT_STEP: 'DRIVER_NEXT_STEP',
                FINISH_HOME_TUTORIAL: 'FINISH_HOME_TUTORIAL',
                COMPLETE_MANUAL_GUIDE: 'COMPLETE_MANUAL_GUIDE',
                CLOSE_UNDO_REDO_CALLOUT: 'CLOSE_UNDO_REDO_CALLOUT'
            }
        }
    },
    MOBILE: {
        DOCS: {
            Statistics: {
                fetchClientVarsStart: 'fetchClientVarsStart',
                fetchClientVarsEnd: 'fetchClientVarsEnd',
                renderStart: 'renderStart',
                renderEnd: 'renderEnd',
                fetchClientVarDelete: 'fetchClientVarDelete',
                networkRenderCancel: 'networkRenderCancel'
            },
            MESSAGE: {
                SET_MESSAGE_READ: 'SET_MESSAGE_READ',
                SHOW_MESSAGE_PANEL: 'SHOW_MESSAGE_PANEL',
                SHOW_GLOBAL_COMMENT_PANEL: 'SHOW_GLOBAL_COMMENT_PANEL'
            },
            CREATE_SUCCESS: 'CREATE_SUCCESS',
            RENDER: {
                finish: 'finish'
            },
            HISTORY: {
                hide: 'hide'
            },
            USER_GUIDE: {
                CHECKBOX_STEP: 'CHECKBOX_STEP'
            },
            TRANSLATE: {
                SHOW_ORIGINAL_LANGUAGE: 'SHOW_ORIGINAL_LANGUAGE',
                ENTER_TRANSLATE: 'ENTER_TRANSLATE',
                PERFORM_TRANSLATEDATE: 'PERFORM_TRANSLATEDATE'
            }
        },
        SHEET: {
            Zoom: 'zoom',
            CLEAR_ACTIVE_CHART: 'clearActiveChart',
            SEND_CHANGESET_SUCC: 'sendChangesetSucc'
        },
        CONTEXT_MENU: {
            showDocContextMenu: 'showDocContextMenu',
            showSheetContextMenu: 'showSheetContextMenu',
            closeContextMenu: 'closeContextMenu',
            onSelectAll: 'onSelectAll'
        },
        COMMON: {
            BEGIN_EDIT: 'BEGIN_EDIT',
            END_EDIT: 'END_EDIT',
            SET_MENU: 'SET_MENU',
            KEYBOARD_CHANGED: 'KEYBOARD_CHANGED',
            TITLE_CHANGE: 'TITLE_CHANGE',
            USER_GUIDE: {
                EVENT_READY: 'EVENT_READY',
                ADD_STEP: 'ADD_STEP',
                SHOW_STEP: 'SHOW_STEP',
                CREATE_DOC_TEMPLATE_SET: 'CREATE_DOC_TEMPLATE_SET'
            }
        }
    },
    COMMON: {
        LIKE: {
            GLOBAL_LIKE_MESSAGE: 'GLOBAL_LIKE_MESSAGE'
        }
    },
    TOOLBAR: {
        SET_SELECT_MODE: 'SET_SELECT_MODE'
    }
};
/**
 * 下面的操作为了给字符串加上前缀, 获取方法还是为 `*.MOBILE.DOCS.XXX`
 * 比如
 * { MOBILE: { DOCS: { XXX: 'XXX' } } }
 *
 * 加上前缀变成
 * { MOBILE: { DOCS: { XXX: 'MOBILE:DOCS:XXX' } } }
 */
var addPrefix = function addPrefix(obj) {
    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

    (0, _each3.default)(obj, function (value, key) {
        if (typeof value === 'string') {
            obj[key] = prefix + ':' + value;
        } else {
            var newPrefix = prefix ? prefix + ':' + key : key;
            addPrefix(value, newPrefix);
        }
    });
};
addPrefix(EVENTS);
exports.default = EVENTS;

/***/ }),
/* 220 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TYPE_FORM_DATA = exports.setData = exports.getData = exports.setFetchConfig = exports.compatibleAxiosFetch = exports.fetch = undefined;

var _fetch = __webpack_require__(814);

var _offlineStorageHelper = __webpack_require__(313);

var _offline = __webpack_require__(148);

exports.fetch = _fetch.fetch;
exports.compatibleAxiosFetch = _fetch.compatibleAxiosFetch;
exports.setFetchConfig = _fetch.setFetchConfig;
exports.getData = _offlineStorageHelper.getData;
exports.setData = _offlineStorageHelper.setData;
exports.TYPE_FORM_DATA = _offline.TYPE_FORM_DATA;

/***/ }),
/* 221 */,
/* 222 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getLanguage = getLanguage;
exports.bodyAddLanguage = bodyAddLanguage;
exports.getLocale = getLocale;
exports.getUnnamedTitle = getUnnamedTitle;
var ContryToLanguage = {
    'zh-CN': 'zh',
    'ja-JP': 'ja',
    'en-US': 'en'
};
function getLanguage() {
    return ContryToLanguage[getLocale()] || 'en';
}
var LANG_MAP = exports.LANG_MAP = function () {
    var language = getLanguage();
    return {
        zh: language === 'zh',
        en: language === 'en',
        ja: language === 'ja'
    };
}();
function bodyAddLanguage() {
    document.body.id = getLocale();
}
function getLocale() {
    var lang = void 0;
    if (window.User && window.User.language) {
        lang = window.User.language;
    } else if (window.navigator.language) {
        lang = window.navigator.language;
    }
    if (lang) {
        if (lang.indexOf('en') !== -1) {
            return 'en-US';
        }
        if (lang.indexOf('ja') !== -1) {
            return 'ja-JP';
        }
    }
    return 'zh-CN';
}
function getUnnamedTitle(type) {
    return type === 2 ? t('common.unnamed_document') : t('common.unnamed_sheet');
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 223 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.updateSuiteExternal = exports.copySuite = exports.getTokenInfo = exports.updateHasCopied = exports.copyFileByObjToken = exports.setShouldPrint = exports.syncNoteMeta = exports.updateDocTitle = exports.syncTabTitle = exports.updateTitle = exports.fetchMobileCurrentSuite = exports.fetchCurrentSuite = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

var _suite = __webpack_require__(84);

var _sliApiMap = __webpack_require__(309);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 拉取对应文档数据
 * @param {token} fetchCurrentSuite: 对应文档token
 * @param {type} number
 */
var fetchCurrentSuite = exports.fetchCurrentSuite = function fetchCurrentSuite(token, type) {
    var path = void 0;
    var xCommand = void 0;
    if (type === _common.NUM_FILE_TYPE.DOC) {
        path = _$constants.apiUrls.GET_NOTE;
        xCommand = _sliApiMap.API_DOC_BASE;
    }
    if (type === _common.NUM_FILE_TYPE.SHEET) {
        path = _$constants.apiUrls.GET_SPREADSHEET;
        xCommand = _sliApiMap.API_SHEET_BASE;
    } else if (type === _common.NUM_FILE_TYPE.MINDNOTE || type === _common.NUM_FILE_TYPE.SLIDE) {
        // 思维笔记走 api/meta, 不是 api/xxx/token，传参方式不一样
        return (0, _defineProperty3.default)({
            type: _$constants.actionTypes.suite.FETCH_CURRENT_SUITE,
            payload: { type: type }
        }, _common.REQUEST, {
            url: _$constants.apiUrls.GET_META,
            params: { token: token, type: type },
            headers: (0, _defineProperty3.default)({}, _sliApiMap.X_COMMAND, type === _common.NUM_FILE_TYPE.MINDNOTE ? _sliApiMap.API_MINDNOTE_BASE : _sliApiMap.API_SLIDE_BASE),
            options: {
                takeLatest: true,
                transformResponse: function transformResponse(res) {
                    return Object.assign({}, res, { token: token, type: type });
                }
            }
        });
    }
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.suite.FETCH_CURRENT_SUITE,
        payload: { type: type }
    }, _common.REQUEST, {
        url: '' + path + token + '/',
        headers: (0, _defineProperty3.default)({}, _sliApiMap.X_COMMAND, xCommand),
        options: {
            takeLatest: true,
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { token: token, type: type });
            }
        }
    });
};
/**
 * 拉取对应文档数据
 * @param {token} fetchMobileCurrentSuite: 对应文档token
 * @param {type} number
 */
var fetchMobileCurrentSuite = exports.fetchMobileCurrentSuite = function fetchMobileCurrentSuite(token, type) {
    var path = void 0;
    var xCommand = void 0;
    if (type === _common.NUM_FILE_TYPE.DOC) {
        path = _$constants.apiUrls.GET_NOTE;
        xCommand = _sliApiMap.API_DOC_BASE;
    }
    if (type === _common.NUM_FILE_TYPE.SHEET) {
        path = _$constants.apiUrls.GET_SPREADSHEET;
        xCommand = _sliApiMap.API_SHEET_BASE;
    } else if (type === _common.NUM_FILE_TYPE.MINDNOTE) {
        // 思维笔记走 api/meta, 不是 api/xxx/token，传参方式不一样
        return (0, _defineProperty3.default)({
            type: _$constants.actionTypes.suite.FETCH_CURRENT_SUITE,
            payload: { type: type }
        }, _common.REQUEST, {
            url: _$constants.apiUrls.GET_META,
            params: { token: token, type: type },
            headers: (0, _defineProperty3.default)({}, _sliApiMap.X_COMMAND, _sliApiMap.API_MINDNOTE_BASE),
            options: {
                takeLatest: true,
                transformResponse: function transformResponse(res) {
                    return Object.assign({}, res, { token: token, type: type });
                }
            }
        });
    } else if (type === _common.NUM_FILE_TYPE.SLIDE) {
        path = _$constants.apiUrls.GET_META;
        xCommand = _sliApiMap.API_SLIDE_BASE;
    }
    if (path === _$constants.apiUrls.GET_META) {
        return (0, _defineProperty3.default)({
            type: _$constants.actionTypes.suite.FETCH_CURRENT_SUITE,
            payload: { type: type }
        }, _common.REQUEST, {
            url: path,
            params: { token: token, type: type },
            headers: (0, _defineProperty3.default)({}, _sliApiMap.X_COMMAND, xCommand),
            options: {
                takeLatest: true,
                transformResponse: function transformResponse(res) {
                    return Object.assign({}, res, { token: token, type: type });
                }
            }
        });
    }
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.suite.FETCH_CURRENT_SUITE
    }, _common.REQUEST, {
        url: '' + path + token + '/',
        headers: (0, _defineProperty3.default)({}, _sliApiMap.X_COMMAND, xCommand),
        serverFirst: true,
        options: { transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { token: token, type: type });
            } }
    });
};
/**
 * 更新对应文档的标题
 * @param {string} token
 * @param {string} title
 */
var updateTitle = exports.updateTitle = function updateTitle(_ref6) {
    var token = _ref6.token,
        type = _ref6.type,
        title = _ref6.title,
        memberId = _ref6.memberId;

    var path = void 0;
    var data = { token: token, type: type, title: title };
    switch (type) {
        case _common.NUM_FILE_TYPE.DOC:
            path = _$constants.apiUrls.POST_UPDATE_TITLE;
            break;
        case _common.NUM_FILE_TYPE.SHEET:
            path = _$constants.apiUrls.POST_UPDATE_TITLE_SPREADSHEET;
            break;
        case _common.NUM_FILE_TYPE.MINDNOTE:
            // 思维笔记走 api/meta/update，不是 api/xxx/update_meta
            path = _$constants.apiUrls.UPDATE_META;
            data = { token: token, type: type, title: title, member_id: memberId || '' };
            break;
    }
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.suite.UPDATE_TITLE
    }, _common.REQUEST, {
        url: path,
        method: _$constants.apiUrls.METHOD.POST,
        data: data,
        options: {
            takeLatest: true,
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { obj_token: token, type: type, title: title });
            }
        }
    });
};
/**
 * 不会进入reducer，单纯的通过saga去强制更新title.
 */
var syncTabTitle = exports.syncTabTitle = function syncTabTitle(_ref8) {
    var objToken = _ref8.token,
        type = _ref8.type,
        title = _ref8.title;
    return {
        type: _$constants.actionTypes.suite.SYNC_TAB_TITLE,
        payload: {
            obj_token: objToken,
            type: type,
            title: title
        }
    };
};
var updateDocTitle = exports.updateDocTitle = function updateDocTitle(_ref9) {
    var objToken = _ref9.token,
        type = _ref9.type,
        title = _ref9.title;
    return function (dispatch, getState) {
        var state = getState();
        if ((0, _suite.selectCurrentSuiteToken)(state) !== objToken) return;
        var curData = (0, _suite.selectCurrentSuiteByObjToken)(state);
        if (!curData || curData.get('title') === title) return;
        return dispatch({
            type: _$constants.actionTypes.suite.UPDATE_DOC_TITLE,
            payload: Object.assign({}, curData.toJS(), { obj_token: objToken, type: type, title: title, name: title })
        });
    };
};
var syncNoteMeta = exports.syncNoteMeta = function syncNoteMeta(data) {
    return {
        type: _$constants.actionTypes.suite.SYNC_NOTE_META,
        payload: data
    };
};
var setShouldPrint = exports.setShouldPrint = function setShouldPrint(data) {
    return {
        type: _$constants.actionTypes.suite.SET_SHOULD_PRINT,
        payload: data
    };
};
var copyFileByObjToken = exports.copyFileByObjToken = function copyFileByObjToken(objToken, objType, destToken) {
    var _ref10;

    return _ref10 = {
        type: _$constants.actionTypes.suite.COPY_FILE_BY_OBJ_TOKEN
    }, (0, _defineProperty3.default)(_ref10, _common.REQUEST, {
        url: _$constants.apiUrls.POST_COPY_FILE_BY_OBJ_TOKEN,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            src_obj_type: objType,
            src_obj_token: objToken,
            dest_token: destToken
        }
    }), (0, _defineProperty3.default)(_ref10, _common.DEFERRED, true), _ref10;
};
var updateHasCopied = exports.updateHasCopied = function updateHasCopied(objToken, value) {
    return {
        type: _$constants.actionTypes.suite.UPDATE_HAS_COPIED,
        payload: {
            objToken: objToken,
            value: value
        }
    };
};
var getTokenInfo = exports.getTokenInfo = function getTokenInfo(objToken, objType) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.suite.FETCH_TOKEN_INFO
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_GET_TOKEN_INFO,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            obj_token: objToken,
            obj_type: objType
        }
    });
};
var copySuite = exports.copySuite = function copySuite(objToken, objType, parentToken, title, needPermission, needComment) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.suite.COPY_SUITE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.COPY_SUITE,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            obj_token: objToken,
            obj_type: objType,
            parent_token: parentToken,
            title: title,
            need_permission: needPermission,
            need_comment: needComment
        },
        options: {
            transformResponse: function transformResponse(res) {
                return Object.assign({}, res, { parentToken: parentToken });
            }
        }
    });
};
var updateSuiteExternal = exports.updateSuiteExternal = function updateSuiteExternal(objToken, objType) {
    return {
        type: _$constants.actionTypes.suite.UPDATE_SUITE_EXTERNAL_START,
        payload: {
            objToken: objToken,
            objType: objType
        }
    };
};

/***/ }),
/* 224 */,
/* 225 */,
/* 226 */,
/* 227 */,
/* 228 */,
/* 229 */,
/* 230 */,
/* 231 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _slicedToArray2 = __webpack_require__(111);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

exports.getAllUrlParams = getAllUrlParams;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// refers: https://www.sitepoint.com/get-url-parameters-with-javascript/
// Todo: 这个函数与urlHelper的 parseQuery 有类似功效，2.4暂时解决原函数无法处理链接为 'xxxxx?a=b&&#hhh'格式url的问题
// 2.5版本可以整理为一个方法
function getAllUrlParams(url) {
  var d = decodeURIComponent;
  var parsed = {};

  var queryString = url ? url.split('?')[1] : window.location.search.slice(1);
  if (queryString) {
    queryString = queryString.split('#')[0]; // eslint-disable-line
    var searches = queryString.split('&');
    searches.forEach(function (search) {
      if (!search) return;

      var _search$split = search.split('='),
          _search$split2 = (0, _slicedToArray3.default)(_search$split, 2),
          key = _search$split2[0],
          _search$split2$ = _search$split2[1],
          value = _search$split2$ === undefined ? '' : _search$split2$;

      parsed[key] = d(value);
    });
  }

  return parsed;
}

/***/ }),
/* 232 */,
/* 233 */,
/* 234 */,
/* 235 */,
/* 236 */,
/* 237 */,
/* 238 */,
/* 239 */,
/* 240 */,
/* 241 */,
/* 242 */,
/* 243 */,
/* 244 */,
/* 245 */,
/* 246 */,
/* 247 */,
/* 248 */,
/* 249 */,
/* 250 */,
/* 251 */,
/* 252 */,
/* 253 */,
/* 254 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.bulkDecorateNameSpace = exports.SUFFIX = exports.FETCH = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

exports.decorateActionType = decorateActionType;
exports.getSuffixedTypes = getSuffixedTypes;

var _string = __webpack_require__(163);

var _mapValues = __webpack_require__(513);

var _mapValues2 = _interopRequireDefault(_mapValues);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var FETCH = exports.FETCH = 'FETCH_';
var SUFFIX = exports.SUFFIX = {
    START: '_START',
    SUCCESS: '_SUCCESS',
    FAIL: '_FAIL',
    CANCEL: '_CANCEL'
};
var _empty = {};
/**
 * 生成一个含有本身加上请求行为的 prefix 以及三个过程 suffix 的对象，一般使用于异步 API 调用 action。
 * @Tips: Store 里的 fetchStatus 以检测 prefix:FETCH_ 来生成对应数据 loadingStatus
 * @param {string} type 原始 action type
 */
function decorateActionType(type) {
    var _ref;

    var withPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

    if ((0, _string.isEmpty)(type)) return _empty;
    var PREFIX = withPrefix ? FETCH : '';
    return _ref = {}, (0, _defineProperty3.default)(_ref, '' + PREFIX + type, '' + PREFIX + type), (0, _defineProperty3.default)(_ref, '' + PREFIX + type + SUFFIX.START, '' + PREFIX + type + SUFFIX.START), (0, _defineProperty3.default)(_ref, '' + PREFIX + type + SUFFIX.SUCCESS, '' + PREFIX + type + SUFFIX.SUCCESS), (0, _defineProperty3.default)(_ref, '' + PREFIX + type + SUFFIX.FAIL, '' + PREFIX + type + SUFFIX.FAIL), (0, _defineProperty3.default)(_ref, '' + PREFIX + type + SUFFIX.CANCEL, '' + PREFIX + type + SUFFIX.CANCEL), _ref;
}
function getSuffixedTypes(_ref2) {
    var type = _ref2.type,
        suffixs = _ref2.suffixs,
        _ref2$withPrefix = _ref2.withPrefix,
        withPrefix = _ref2$withPrefix === undefined ? true : _ref2$withPrefix;

    var PREFIX = withPrefix ? FETCH : '';
    return suffixs.map(function (suffix) {
        return '' + PREFIX + type + suffix;
    });
}
/**
 * 批量装饰typeMap，加上前缀namespace，并保证type大写
 */
var bulkDecorateNameSpace = exports.bulkDecorateNameSpace = function bulkDecorateNameSpace(actionMap, namespace) {
    return (0, _mapValues2.default)(actionMap, function (actualType, typeKey) {
        return namespace + '/' + actualType.toUpperCase();
    });
};

/***/ }),
/* 255 */,
/* 256 */,
/* 257 */,
/* 258 */,
/* 259 */,
/* 260 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.requestActions = undefined;
exports.isRequestAction = isRequestAction;
exports.getRequestConfig = getRequestConfig;
exports.getRequestData = getRequestData;
exports.getActionOptions = getActionOptions;
exports.getAbortOn = getAbortOn;
exports.getRequestDataMergedPayload = getRequestDataMergedPayload;
exports.getMeta = getMeta;
exports.getActionTypes = getActionTypes;

var _defaults = __webpack_require__(1189);

var defaultOptions = _interopRequireWildcard(_defaults);

var _$constants = __webpack_require__(5);

var _object = __webpack_require__(462);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function isRequestAction(action) {
    return !!action[_$constants.common.REQUEST];
}
function getRequestConfig(action) {
    return action[_$constants.common.REQUEST];
}
function _getRequestDataKey(method) {
    switch (method) {
        case _$constants.apiUrls.METHOD.GET:
            return 'params';
        case _$constants.apiUrls.METHOD.POST:
            return 'data';
        default:
            return 'params';
    }
}
function getRequestData(action) {
    var config = getRequestConfig(action);
    if (!config) return {};
    var methodKey = _getRequestDataKey(config.method);
    var requestData = config[methodKey];
    return requestData;
}
function getActionOptions(action) {
    var options = action[_$constants.common.REQUEST] && action[_$constants.common.REQUEST].options;
    var actionOptions = Object.assign({}, defaultOptions, options);
    return actionOptions;
}
function getAbortOn(action) {
    var _getActionOptions = getActionOptions(action),
        abortOn = _getActionOptions.abortOn;

    var defaultAbortOn = 'CANCEL_' + action.type;
    var abortOnWithDefault = Array.isArray(abortOn) ? [defaultAbortOn].concat([abortOn]) : [defaultAbortOn, abortOn];
    return abortOnWithDefault;
}
/**
 * 将request里的data/params merge进action.payload并返回
 */
function getRequestDataMergedPayload(action) {
    var requestData = getRequestData(action);
    var payload = Object.assign({}, action.payload, requestData);
    return payload;
}
/**
 * 获取服务端返回的meta
 * @param {Object} responseObj
 * @return {Object} metaObj
 */
function getMeta(response) {
    return response.meta || {};
}
/**
 * 获取被装饰后缀的type
 * @param {Object} action
 * @param {Object} suffixConfig
 */
function getActionTypes(action) {
    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        _ref$startSuffix = _ref.startSuffix,
        startSuffix = _ref$startSuffix === undefined ? _$constants.actionTypes.suffix.START : _ref$startSuffix,
        _ref$successSuffix = _ref.successSuffix,
        successSuffix = _ref$successSuffix === undefined ? _$constants.actionTypes.suffix.SUCCESS : _ref$successSuffix,
        _ref$failSuffix = _ref.failSuffix,
        failSuffix = _ref$failSuffix === undefined ? _$constants.actionTypes.suffix.FAIL : _ref$failSuffix,
        _ref$cancelSuffix = _ref.cancelSuffix,
        cancelSuffix = _ref$cancelSuffix === undefined ? _$constants.actionTypes.suffix.CANCEL : _ref$cancelSuffix;

    var types = void 0;
    if (typeof action.type !== 'undefined') {
        var type = action.type;

        types = {
            type: type,
            start: '' + type + startSuffix,
            success: '' + type + successSuffix,
            fail: '' + type + failSuffix,
            cancel: '' + type + cancelSuffix
        };
    } else if (typeof action.types !== 'undefined') {
        types = action.types;
    } else {
        throw new Error('Action which matched axios middleware needs to have "type" or "types" key which is not null');
    }
    return types;
}
function getTransformedResponse(response, action) {
    var actionOptions = getActionOptions(action);
    // 用于记录接口返回的数据实体，用于处理用户信息等源信息
    var entities = response.entities;
    var users = response.users;
    if (users) {
        users = Object.assign({}, users);
    }
    if (actionOptions.transformResponse) {
        response = actionOptions.transformResponse(response, action);
    }
    // 无论结果怎么样，如果带有数据实体，都需要重新赋予 @xiaojun
    // 国际化, 吐给专门的reducer使用
    // 之所以取第一个判断，是防止在业务中调用了这个信息
    if (!response.entities) {
        if (entities) {
            response.entities = Object.assign({}, entities);
        } else if (users) {
            response.entities = { users: users };
        }
    }
    if (actionOptions.enableCamelCaseResponse) {
        response = (0, _object.camelize)(response);
    }
    if (actionOptions.enableSnakeCaseResponse) {
        response = (0, _object.snakelize)(response);
    }
    return response;
}
/**
 * 考虑到使用场景
 * 对于start/fail/cancel，我们默认将请求参数merge进payload
 */
var requestActions = exports.requestActions = {
    start: function start(action) {
        var actionOptions = getActionOptions(action);
        var requestData = getRequestData(action);
        return {
            type: getActionTypes(action, actionOptions).start,
            payload: Object.assign({}, action.payload, requestData),
            meta: { isLoading: true, previousAction: action }
        };
    },
    success: function success(action, response) {
        var payload = action.payload;
        // 抽离meta 和 真正的 response
        var _response = response,
            data = _response.data,
            meta = _response.meta;

        var actionOptions = getActionOptions(action);
        // 与response无关，单纯的就原有 payload 进行 requestData 的 merge.
        if (actionOptions && actionOptions.injectRequestData) {
            payload = getRequestDataMergedPayload(action);
        }
        // 获取转换后的response，与payload无关
        if (isRequestAction(action)) {
            response = getTransformedResponse(data, action);
        }
        // 聚合数据: { ...合并(?)requestData 的 payload，...转化(?)后的response }
        var finalPayload = payload ? Object.assign({}, payload, response) : response;
        return {
            type: getActionTypes(action, actionOptions).success,
            payload: finalPayload,
            meta: Object.assign({}, meta, {
                isLoading: false,
                previousAction: action
            })
        };
    },
    fail: function fail(action, error) {
        var response = {};
        if (isRequestAction(action)) {
            response = getTransformedResponse(response, action);
        }
        var actionOptions = getActionOptions(action);
        var requestData = getRequestData(action);
        // 约定：
        // 注意在reducer中handle的时候我们需要去action.error里获取错误信息
        // 而在payload中拿取请求参数
        return {
            type: getActionTypes(action, actionOptions).fail,
            error: error,
            payload: Object.assign({}, action.payload, requestData, response),
            meta: {
                previousAction: action,
                isLoading: false,
                isError: true
            }
        };
    },
    cancel: function cancel(action) {
        var actionOptions = getActionOptions(action);
        var requestData = getRequestData(action);
        var abortOn = getAbortOn(action);
        return {
            type: getActionTypes(action, actionOptions).cancel,
            payload: Object.assign({}, requestData, { abortOn: abortOn }),
            meta: {
                previousAction: action,
                isLoading: false,
                isError: false
            }
        };
    }
};

/***/ }),
/* 261 */,
/* 262 */,
/* 263 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var OVERLAY_OPACITY = exports.OVERLAY_OPACITY = 0.75;
var OVERLAY_PADDING = exports.OVERLAY_PADDING = 10;

var SHOULD_ANIMATE_OVERLAY = exports.SHOULD_ANIMATE_OVERLAY = true;
var SHOULD_OUTSIDE_CLICK_CLOSE = exports.SHOULD_OUTSIDE_CLICK_CLOSE = true;
var ALLOW_KEYBOARD_CONTROL = exports.ALLOW_KEYBOARD_CONTROL = true;
var SHOULD_OUTSIDE_CLICK_NEXT = exports.SHOULD_OUTSIDE_CLICK_NEXT = false;
var SHOULD_DISABLE_BUTTON = exports.SHOULD_DISABLE_BUTTON = false;

var ESC_KEY_CODE = exports.ESC_KEY_CODE = 27;
var LEFT_KEY_CODE = exports.LEFT_KEY_CODE = 37;
var RIGHT_KEY_CODE = exports.RIGHT_KEY_CODE = 39;

var ID_OVERLAY = exports.ID_OVERLAY = 'driver-page-overlay';
var ID_STAGE = exports.ID_STAGE = 'driver-highlighted-element-stage';
var ID_MASK = exports.ID_MASK = 'driver-highlighted-element-mask';
var ID_POPOVER = exports.ID_POPOVER = 'driver-popover-item';

var CLASS_DRIVER_HIGHLIGHTED_ELEMENT = exports.CLASS_DRIVER_HIGHLIGHTED_ELEMENT = 'driver-highlighted-element';
var CLASS_POSITION_RELATIVE = exports.CLASS_POSITION_RELATIVE = 'driver-position-relative';
var CLASS_FIX_STACKING_CONTEXT = exports.CLASS_FIX_STACKING_CONTEXT = 'driver-fix-stacking';

var CLASS_STAGE_NO_ANIMATION = exports.CLASS_STAGE_NO_ANIMATION = 'driver-stage-no-animation';
var CLASS_POPOVER_TIP = exports.CLASS_POPOVER_TIP = 'driver-popover-tip';
var CLASS_POPOVER_TITLE = exports.CLASS_POPOVER_TITLE = 'driver-popover-title';
var CLASS_POPOVER_DESCRIPTION = exports.CLASS_POPOVER_DESCRIPTION = 'driver-popover-description';
var CLASS_POPOVER_FOOTER = exports.CLASS_POPOVER_FOOTER = 'driver-popover-footer';
var CLASS_CLOSE_BTN = exports.CLASS_CLOSE_BTN = 'driver-close-btn';
var CLASS_NEXT_STEP_BTN = exports.CLASS_NEXT_STEP_BTN = 'driver-next-btn';
var CLASS_PREV_STEP_BTN = exports.CLASS_PREV_STEP_BTN = 'driver-prev-btn';
var CLASS_BTN_DISABLED = exports.CLASS_BTN_DISABLED = 'driver-disabled';
var CLASS_BTN_HIDDEN = exports.CLASS_BTN_HIDDEN = 'driver-hidden';

// It must match the one set in the animations in CSS file
var ANIMATION_DURATION_MS = exports.ANIMATION_DURATION_MS = 400;

// language=HTML
var POPOVER_HTML = exports.POPOVER_HTML = '\n  <div id="' + ID_POPOVER + '">\n    <div class="' + CLASS_POPOVER_TIP + '"></div>\n    <div class="' + CLASS_POPOVER_TITLE + '">Popover Title</div>\n    <div class="' + CLASS_POPOVER_DESCRIPTION + '">Popover Description</div>\n    <div class="' + CLASS_POPOVER_FOOTER + '">\n      <button class="' + CLASS_CLOSE_BTN + '">Close</button>\n      <span class="driver-btn-group">\n        <button class="' + CLASS_PREV_STEP_BTN + '">&larr; Previous</button>\n        <button class="' + CLASS_NEXT_STEP_BTN + '">Next &rarr;</button>\n      </span>\n    </div>\n  </div>';

var OVERLAY_HTML = exports.OVERLAY_HTML = '<div id="' + ID_OVERLAY + '"></div>';
var STAGE_HTML = exports.STAGE_HTML = '<div id="' + ID_STAGE + '"></div>';
var MASK_HTML = exports.MASK_HTML = '<div id="' + ID_MASK + '"></div>';

/***/ }),
/* 264 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isDomElement = exports.getStyleProperty = exports.createNodeFromString = undefined;

var _typeof2 = __webpack_require__(82);

var _typeof3 = _interopRequireDefault(_typeof2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Turn a string into a node
 * @param  {String} htmlString to convert
 * @return {Node}   Converted node element
 */
// eslint-disable-next-line
var createNodeFromString = exports.createNodeFromString = function createNodeFromString(htmlString) {
  var div = document.createElement('div');
  div.innerHTML = htmlString.trim();

  // Change this to div.childNodes to support multiple top-level nodes
  return div.firstChild;
};

/**
 * Gets the CSS property from the given element
 * @param {HTMLElement|Node} element
 * @param {string} propertyName
 * @param {boolean} prefixVendor
 * @return {string}
 */
var getStyleProperty = exports.getStyleProperty = function getStyleProperty(element, propertyName) {
  var prefixVendor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

  if (prefixVendor) {
    var prefixes = ['', '-webkit-', '-ms-', 'moz-', '-o-'];
    for (var counter = 0; counter < prefixes.length; counter++) {
      var prefixedProperty = prefixes[counter] + propertyName;
      var foundValue = getStyleProperty(element, prefixedProperty);

      if (foundValue) {
        return foundValue;
      }
    }

    return '';
  }

  var propertyValue = '';

  if (element.currentStyle) {
    propertyValue = element.currentStyle[propertyName];
  } else if (document.defaultView && document.defaultView.getComputedStyle) {
    propertyValue = document.defaultView.getComputedStyle(element, null).getPropertyValue(propertyName);
  }

  return propertyValue && propertyValue.toLowerCase ? propertyValue.toLowerCase() : propertyValue;
};

/**
 * Checks if the passed element is dom object or not
 * @param element
 * @returns {boolean}
 */
var isDomElement = exports.isDomElement = function isDomElement(element) {
  return element && (typeof element === 'undefined' ? 'undefined' : (0, _typeof3.default)(element)) === 'object' && 'nodeType' in element;
};

/***/ }),
/* 265 */,
/* 266 */,
/* 267 */,
/* 268 */,
/* 269 */,
/* 270 */,
/* 271 */,
/* 272 */,
/* 273 */,
/* 274 */,
/* 275 */,
/* 276 */,
/* 277 */,
/* 278 */,
/* 279 */,
/* 280 */,
/* 281 */,
/* 282 */,
/* 283 */,
/* 284 */,
/* 285 */,
/* 286 */,
/* 287 */,
/* 288 */,
/* 289 */,
/* 290 */,
/* 291 */,
/* 292 */,
/* 293 */,
/* 294 */,
/* 295 */,
/* 296 */,
/* 297 */,
/* 298 */,
/* 299 */,
/* 300 */,
/* 301 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.showToast = showToast;
exports.hideToast = hideToast;

var _toast = __webpack_require__(554);

var _toast2 = _interopRequireDefault(_toast);

var _sdkCompatibleHelper = __webpack_require__(45);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 展示toast
 * @param toastConfig toast参数
 * @param useWeb 是否使用前端的toast
 */
function showToast(toastConfig) {
    var useWeb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

    if ((0, _sdkCompatibleHelper.isSupportNativeToast)() && !useWeb) {
        window.lark.biz.util.showToast(toastConfig);
    } else {
        _toast2.default.show(Object.assign({}, toastConfig, {
            type: toastConfig.type === 1 ? 'error' : 'success',
            duration: toastConfig.duration * 1000,
            content: toastConfig.message
        }));
    }
}
/**
 * 隐藏toast
 * @param useWeb 是否使用前端的toast
 * @param key 前端 toast 唯一标识
 */
function hideToast() {
    var useWeb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    var key = arguments[1];

    if ((0, _sdkCompatibleHelper.isSupportNativeToast)() && !useWeb) {
        window.lark.biz.util.hideToast();
    } else {
        if (key) {
            _toast2.default.remove(key);
        } else {
            _toast2.default.removeAll();
        }
    }
}

/***/ }),
/* 302 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getUserPermissionStatus = exports.getIsSuitePublic = exports.compensatePermWeight = exports.getPublicPermissionOffset = exports.getPublicPermissionStatusItems = exports.mirrorMapPermission = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _PUBLIC_PERMISSION_SE;

exports.formatPermissionItems = formatPermissionItems;
exports.permission2Booleans = permission2Booleans;
exports.permissionToKey = permissionToKey;
exports.getMemberPermission = getMemberPermission;
exports.adaptPermissionNum2Arr = adaptPermissionNum2Arr;
exports.permissionArr2Num = permissionArr2Num;
exports.getIsReadable = getIsReadable;
exports.getIsCommentable = getIsCommentable;
exports.getIsEditable = getIsEditable;
exports.getIsShareable = getIsShareable;
exports.getUserPermissions = getUserPermissions;
exports.getSimilarPubPermissions = getSimilarPubPermissions;
exports.permissionList2Num = permissionList2Num;
exports.isPermissionChange = isPermissionChange;

var _max = __webpack_require__(1183);

var _max2 = _interopRequireDefault(_max);

var _sum = __webpack_require__(1185);

var _sum2 = _interopRequireDefault(_sum);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SEPARATOR = t('common.separator');

var SHAREABLE = _common.PERMISSION.SHAREABLE,
    EDITABLE = _common.PERMISSION.EDITABLE,
    COMMENTABLE = _common.PERMISSION.COMMENTABLE,
    READABLE = _common.PERMISSION.READABLE,
    ANYONE_READABLE = _common.PERMISSION.ANYONE_READABLE,
    ANYONE_EDITABLE = _common.PERMISSION.ANYONE_EDITABLE;


var PUBLIC_PERMISSION_SETTINGS_NUMS = [COMMENTABLE, SHAREABLE, READABLE];

var DIRECT_VISIT_PERMISSION_NUMS = [COMMENTABLE, EDITABLE, ANYONE_READABLE, ANYONE_EDITABLE];

var PUBLIC_PERMISSION_SETTINGS = (_PUBLIC_PERMISSION_SE = {}, (0, _defineProperty3.default)(_PUBLIC_PERMISSION_SE, COMMENTABLE, t('permission.commentable')), (0, _defineProperty3.default)(_PUBLIC_PERMISSION_SE, -COMMENTABLE, t('permission.notcommentable')), (0, _defineProperty3.default)(_PUBLIC_PERMISSION_SE, SHAREABLE, t('common.shareable')), (0, _defineProperty3.default)(_PUBLIC_PERMISSION_SE, -SHAREABLE, t('permission.not_sharable')), (0, _defineProperty3.default)(_PUBLIC_PERMISSION_SE, EDITABLE, t('permission.link_editable_2')), (0, _defineProperty3.default)(_PUBLIC_PERMISSION_SE, READABLE, t('permission.link_redable_2')), (0, _defineProperty3.default)(_PUBLIC_PERMISSION_SE, -READABLE, t('permission.link_not_accessible')), (0, _defineProperty3.default)(_PUBLIC_PERMISSION_SE, ANYONE_READABLE, t('permission.link_redable_anyone')), (0, _defineProperty3.default)(_PUBLIC_PERMISSION_SE, ANYONE_EDITABLE, t('permission.link_editable_anyone')), _PUBLIC_PERMISSION_SE);

var defaultFormatConfig = {
  prefix: '',
  suffix: '',
  separator: SEPARATOR
};

function formatPermissionItems(permissionItems) {
  var formatConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var _defaultFormatConfig$ = Object.assign({}, defaultFormatConfig, formatConfig),
      prefix = _defaultFormatConfig$.prefix,
      suffix = _defaultFormatConfig$.suffix,
      separator = _defaultFormatConfig$.separator;

  return prefix + permissionItems.join(separator) + suffix;
}

/**
 * 某些特殊情况下需要将权限转换getUserPermissionStatus
 * @param {Number} originPerm
 * @param {Number} newPerm
 * @param {Function or Boolean} predicate
 */
function transPerm(originPerm, newPerm, predicate) {
  var shouldTrans = void 0;
  if (typeof predicate === 'function') {
    shouldTrans = predicate();
  }
  shouldTrans = predicate;
  return shouldTrans ? newPerm : originPerm;
}

/**
 * 将不具有的权限数值转化为负数
 * @param {Array} permissionPresets 预设权限数值数组bussiness
 * @param {*} permissionNum 权限累加合数组(8,4,2,1)
 */
var mirrorMapPermission = exports.mirrorMapPermission = function mirrorMapPermission(permissionPresets, permissionNum) {
  return permissionPresets.map(function (presetNum) {
    return (permissionNum & presetNum) !== 0 ? presetNum : -presetNum;
  });
};

var getPublicPermissionStatusItems = exports.getPublicPermissionStatusItems = function getPublicPermissionStatusItems(publicPermissionNum) {
  return mirrorMapPermission(PUBLIC_PERMISSION_SETTINGS_NUMS, publicPermissionNum).map(function (num) {
    if (num === _common.PERMISSION.READABLE) {
      var getMaxPerm = (0, _max2.default)(DIRECT_VISIT_PERMISSION_NUMS.map(function (val) {
        return publicPermissionNum & val;
      }));
      var noDirectPerm = getMaxPerm === 0;
      return noDirectPerm ? num : transPerm(getMaxPerm, num, getMaxPerm === _common.PERMISSION.COMMENTABLE);
    }
    return num;
  }).map(function (val) {
    return PUBLIC_PERMISSION_SETTINGS[val];
  });
};

var getPublicPermissionOffset = exports.getPublicPermissionOffset = function getPublicPermissionOffset(curPublicPermNum, newPublicPermNum) {
  var oldPubNum = compensatePermWeight(curPublicPermNum);
  var newPerNum = compensatePermWeight(newPublicPermNum);
  return newPerNum - oldPubNum;
};

/**
 * 根据单个权限值计算出实际权限值
 * 例：4(同租户编辑权限) => 1(同租户阅读权限) + 4(同租户编辑权限) => 5
 * 例：16（任何人可阅读权限）=> 1（同租户阅读权限）+ 16（任何人可阅读权限）=> 17
 * 例：32(任何人编辑权限) => 1(同租户阅读权限) + 4(同租户编辑权限) + 16（任何人阅读权限） + 32（任何人编辑权限）=> 53
 * 要
 * @method panhaitao
 * @param {Number} 单个权限值
 * @return {Number} 实际权限值
 */
var compensatePermWeight = exports.compensatePermWeight = function compensatePermWeight(permNum) {
  // 同租户可编辑权限=同租户编辑+同租户阅读
  var VISIT_WITH_EDIT = _common.PERMISSION.EDITABLE + _common.PERMISSION.READABLE;
  // 任何人可阅读权限=同租户阅读+任何人阅读
  var ANYONE_VISIT = _common.PERMISSION.ANYONE_READABLE + _common.PERMISSION.READABLE;
  // 任何人可编辑权限=同租户编辑+同租户阅读+任何人阅读+任何人编辑
  var ANYONE_VISIT_WITH_EDIT = VISIT_WITH_EDIT + _common.PERMISSION.ANYONE_READABLE + _common.PERMISSION.ANYONE_EDITABLE;
  switch (permNum) {
    case _common.PERMISSION.EDITABLE:
      permNum = VISIT_WITH_EDIT;
      break;
    case _common.PERMISSION.ANYONE_READABLE:
      permNum = ANYONE_VISIT;
      break;
    case _common.PERMISSION.ANYONE_EDITABLE:
      permNum = ANYONE_VISIT_WITH_EDIT;
      break;
    default:
      ;
  }
  return permNum;
};

var getIsSuitePublic = exports.getIsSuitePublic = function getIsSuitePublic(suitePublicPermission) {
  return Boolean(suitePublicPermission & _common.PERMISSION.READABLE);
};

/**
 * 根据userPermission获取展示的权限状态
 * @param {Array} userPermissions  from: api/suite/permission/user
 */
var getUserPermissionStatus = exports.getUserPermissionStatus = function getUserPermissionStatus(userPermissions, filterFunc) {
  if (typeof userPermissions === 'undefined' || userPermissions.length === 0) return [];
  var getShouldShowReadable = function getShouldShowReadable(userPermissions) {
    return userPermissions.indexOf(_common.PERMISSION.COMMENTABLE) === -1 && userPermissions.indexOf(_common.PERMISSION.EDITABLE) === -1;
  };
  var shouldShowReadable = getShouldShowReadable(userPermissions);
  var isReadOnly = userPermissions.every(function (val) {
    return val < _common.PERMISSION.COMMENTABLE;
  });
  var filteredPermissions = filterFunc ? userPermissions.filter(filterFunc) : userPermissions;
  return filteredPermissions.filter(function (val) {
    if (shouldShowReadable || isReadOnly) return val;
    return val !== _common.PERMISSION.READABLE;
  }).map(function (val) {
    return _common.VISITOR_PERMISSION_SETTINGS[val];
  });
};

/**
 * num => map of boolean
 * @param {Number} permissionNum
 * 8 4 2 1
 * 11 => 8 0 2 1
 * 15 => 8 4 2 1
 * 3 =>  0 0 2 1
 * 7 =>  0 4 2 1
 */
function permission2Booleans(permissionNum) {
  var parsedPermissionNum = parseInt(permissionNum, 10);
  return {
    readable: Boolean(parsedPermissionNum & 1),
    commentable: Boolean(parsedPermissionNum & 2),
    editable: Boolean(parsedPermissionNum & 4),
    shareable: Boolean(parsedPermissionNum & 8)
  };
}

function permissionToKey(permissionPresetArray, permissionNum) {
  return (0, _max2.default)(permissionPresetArray.filter(function (keyVal) {
    return permissionNum & keyVal;
  })) || 0;
}

function getMemberPermission(permKey) {
  var permissionNum = parseInt(permKey);
  return permissionToKey(_common.PERMISSIONS, permissionNum);
}

function adaptPermissionNum2Arr(permissionNum) {
  var rst = _common.PERMISSIONS.map(function (val) {
    return permissionNum & val;
  }).filter(function (val) {
    return val !== 0;
  });
  return rst.length ? rst : rst.concat([0]);
}

/**
 * 权限数组加和
 * @param {number[]} permissionArr
 */
function permissionArr2Num(permissionArr) {
  return (0, _sum2.default)(permissionArr);
}

/* ========== 编辑器新版权限适配Helper Functions ========== */
/**
 * 通过权限数组获得用户是否可以阅读
 * @param {Array} userPermissionOnSuite
 * @return {Boolean} isReadable
 */
function getIsReadable(userPermissionOnSuite) {
  if (!userPermissionOnSuite || userPermissionOnSuite.length === 0) return false;
  return userPermissionOnSuite.indexOf(_common.PERMISSION.READABLE) > -1;
}

/**
 * 通过权限数组获得用户是否可以评论
 * @param {Array} userPermissionOnSuite
 * @return {Boolean} isCommentable
 */
function getIsCommentable(userPermissionOnSuite) {
  if (!userPermissionOnSuite || userPermissionOnSuite.length === 0) return false;
  return [_common.PERMISSION.COMMENTABLE, _common.PERMISSION.EDITABLE].some(function (permissionNum) {
    return userPermissionOnSuite.indexOf(permissionNum) > -1;
  });
}

/**
 * 通过权限数组获得用户是否可以编辑
 * @param {Array} userPermissionOnSuite
 * @return {Boolean} isEditable
 */
function getIsEditable(userPermissionOnSuite) {
  if (!userPermissionOnSuite || userPermissionOnSuite.length === 0) return false;
  return userPermissionOnSuite.indexOf(_common.PERMISSION.EDITABLE) > -1;
}

/**
 * 通过权限数组获得用户是否可以分享
 * @param {Array} userPermissionOnSuite
 * @return {Boolean} isShareable
 */
function getIsShareable(userPermissionOnSuite) {
  if (!userPermissionOnSuite || userPermissionOnSuite.length === 0) return false;
  return userPermissionOnSuite.indexOf(_common.PERMISSION.SHAREABLE) > -1;
}

/**
 * 根据user在当前suite的权限的数组计算：
 * 1. 是否可评论
 * 2. 是否可编辑
 * @param {Array} userPermissionOnSuite 用户在当前suite的权限数组
 * @return {Object} boolean组成的表示是否具有某一种权限的对象
 */
function getUserPermissions() {
  var userPermissionOnSuite = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

  return {
    readable: getIsReadable(userPermissionOnSuite),
    commentable: getIsCommentable(userPermissionOnSuite),
    editable: getIsEditable(userPermissionOnSuite),
    shareable: getIsShareable(userPermissionOnSuite)
  };
}

/**
 * 根据某个public permission number 获取和该number同组的所有number
 * 例：1 => [1, 4]
 * 例：4 => [1, 4]
 * 例：16 => [16, 32]
 * 例：32 => [16, 32]
 * @param {Number} publicPermissionNum 某个public permission number，可能是1，4，16，32
 * @return {Array} 和该number同组的所有number
 */
function getSimilarPubPermissions() {
  var publicPermissionNum = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;

  var similarPubPermissions = [];
  Object.values(_common.PUBLIC_PERMISSION).forEach(function (pubPerArr) {
    if (pubPerArr.includes(publicPermissionNum)) {
      similarPubPermissions = pubPerArr;
    }
  });
  return similarPubPermissions;
}
/**
 * 权限immutable list求和
 * @param {List} list 权限list
 */
function permissionList2Num(list) {
  return list.reduce(function (prev, cur) {
    return prev + cur;
  }, 0);
}

/**
 * 判断权限是否发生变更
 * @param {Array} oldPermission 旧权限数组
 * @param {Array} newPermission 新权限数组
 */
function isPermissionChange(oldPermission, newPermission) {
  var oldPermissionNum = permissionList2Num(oldPermission);
  var newPermissionNum = permissionList2Num(newPermission);
  return oldPermissionNum !== newPermissionNum;
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 303 */,
/* 304 */,
/* 305 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _envHelper = __webpack_require__(147);

var ERROR = 'error';
var INFO = 'info';
var WARM = 'warm';
var FATAL = 'fatal';
var DEBUG = 'debug';
exports.default = {
    info: function info(msg, body) {
        logger(INFO, msg, body);
    },
    error: function error(msg, body) {
        logger(ERROR, msg, body);
    },
    warning: function warning(msg, body) {
        logger(WARM, msg, body);
    }
};
// debug 模式下会将body console出来

function logger(level, msg, body) {
    var stack = '';
    if (level === ERROR || level === FATAL || level === DEBUG) {
        console.trace();
        stack = new Error().stack || '';
    }
    var W = window;
    if (W.lark && W.lark.biz && W.lark.biz.util.logger) {
        var log = '[' + level + '] ' + msg + ' ';
        if (_envHelper.isDebug) {
            console.log(log, body || '');
        }
        console.info(log);
    }
}
/*tslint:disable*/
function getTime() {
    var d = new Date();
    return pad(d.getMonth() + 1) + '-' + pad(d.getDate()) + ' ' + pad(d.getHours()) + ':' + pad(d.getMinutes()) + ':' + pad(d.getSeconds()) + '.' + pad(d.getMilliseconds(), 3);
}
/*tslint:enable*/
function pad(num) {
    var len = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;

    var numStr = '' + num;
    if (num < Math.pow(10, len - 1)) {
        numStr = '00000'.slice(0, len - numStr.length) + num;
    }
    return numStr;
}

/***/ }),
/* 306 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.isOfflineCreateDoc = isOfflineCreateDoc;
exports.getFreeStateDoc = getFreeStateDoc;

var _suiteHelper = __webpack_require__(52);

function isOfflineCreateDoc() {
    var token = (0, _suiteHelper.getToken)();
    return token.slice(0, 5) === 'fake_';
}
/**
 * 在线文档有对应的本地文档
 */
function getFreeStateDoc() {
    var match = location.search.match(/(\?|&)fakeToken=([^#&]+)/);
    return match && match[2];
}

/***/ }),
/* 307 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var METHOD = exports.METHOD = {
  POST: 'post',
  GET: 'get'
};
var V2 = exports.V2 = 'v2';
/**
 * ===============API BASE================
 */
var API_PREFIX = exports.API_PREFIX = navigator.apiPrefix === '{{navigator_api_prefix}}' || !navigator.apiPrefix ? '' : navigator.apiPrefix;
var API_BASE = exports.API_BASE = API_PREFIX + '/api';
var API_BASE_V2 = exports.API_BASE_V2 = API_PREFIX + '/api/v2';
/**
 * ===============文件操作================
 */
var EXPLORER = exports.EXPLORER = API_BASE + '/explorer';
var GET_EXPLORER_ROOT_TOKEN_MAP = exports.GET_EXPLORER_ROOT_TOKEN_MAP = EXPLORER + '/root/';
var GET_ROOT_SHARE_FOLDERS = exports.GET_ROOT_SHARE_FOLDERS = EXPLORER + '/share/folder/';
var GET_SHARE_OBJECTS = exports.GET_SHARE_OBJECTS = EXPLORER + '/share/object/';
var POST_HIDE_SHARE_FOLDER = exports.POST_HIDE_SHARE_FOLDER = EXPLORER + '/share/folder/hide/';
var POST_SHOW_SHARE_FOLDER = exports.POST_SHOW_SHARE_FOLDER = EXPLORER + '/share/folder/show/';
var POST_FOLDER_BECOME_SHARE = exports.POST_FOLDER_BECOME_SHARE = EXPLORER + '/share/become/';
var POST_FETCH_MEMBERS_OF_SHARE_FOLDER = exports.POST_FETCH_MEMBERS_OF_SHARE_FOLDER = EXPLORER + '/space/mget/';
var POST_ADD_MEMBERS_TO_FOLDER = exports.POST_ADD_MEMBERS_TO_FOLDER = EXPLORER + '/space/add/';
var POST_REMOVE_MEMBER_FROM_FOLDER = exports.POST_REMOVE_MEMBER_FROM_FOLDER = EXPLORER + '/space/remove/';
var POST_TRANSFER_SHARE_FOLDER_OWNER = exports.POST_TRANSFER_SHARE_FOLDER_OWNER = EXPLORER + '/space/transfer_owner/';
var POST_SEND_FOLDER_PERMISSION_REQUEST = exports.POST_SEND_FOLDER_PERMISSION_REQUEST = EXPLORER + '/space/apply_permission/';
var POST_SHARE_FOLDER_DISMISS = exports.POST_SHARE_FOLDER_DISMISS = EXPLORER + '/share/dismiss/';
var POST_CREATE_SHARE_FOLDER = exports.POST_CREATE_SHARE_FOLDER = EXPLORER + '/share/create/';
var POST_OPEN_FOLDER_OR_FILE = exports.POST_OPEN_FOLDER_OR_FILE = EXPLORER + '/open/';
var POST_FETCH_FILE_META = exports.POST_FETCH_FILE_META = EXPLORER + '/get/';
var POST_FETCH_ROOT_META = exports.POST_FETCH_ROOT_META = EXPLORER + '/root/get/';
var POST_FETCH_SHARE_HOME = exports.POST_FETCH_SHARE_HOME = EXPLORER + '/share/home/';
var POST_RENAME_FILE = exports.POST_RENAME_FILE = EXPLORER + '/rename/';
var POST_FETCH_RECENT_OBJS = exports.POST_FETCH_RECENT_OBJS = EXPLORER + '/get_recent/';
var POST_CREATE_FILE = exports.POST_CREATE_FILE = EXPLORER + '/create/';
var POST_CREATE_FILE_BY_FAKE_TOKEN = exports.POST_CREATE_FILE_BY_FAKE_TOKEN = EXPLORER + '/createdocsoffline/';
var POST_MOVE_FILE = exports.POST_MOVE_FILE = EXPLORER + '/move/';
var POST_COPY_FILE = exports.POST_COPY_FILE = EXPLORER + '/copy/';
var POST_COPY_FILE_BY_OBJ_TOKEN = exports.POST_COPY_FILE_BY_OBJ_TOKEN = EXPLORER + '/copy_by_obj_token/';
var POST_GET_TOKEN_INFO = exports.POST_GET_TOKEN_INFO = EXPLORER + '/get_token_info/';
var POST_GET_FOLDER_TREE = exports.POST_GET_FOLDER_TREE = EXPLORER + '/path_stack/';
var POST_REMOVE_FILE = exports.POST_REMOVE_FILE = EXPLORER + '/delete/';
var POST_RESTORE_REMOVED_FILE = exports.POST_RESTORE_REMOVED_FILE = EXPLORER + '/trash/restore/';
var POST_DELETE_REMOVED_FILE = exports.POST_DELETE_REMOVED_FILE = EXPLORER + '/trash/delete/';
var POST_DELETE_OBJECT = exports.POST_DELETE_OBJECT = EXPLORER + '/obj/delete/';
var COPY_SUITE = exports.COPY_SUITE = EXPLORER + '/clone/';
/**
 * =============== pin && star 操作 ================
 */
var GET_PIN_LIST = exports.GET_PIN_LIST = EXPLORER + '/pin/get/';
var POST_PIN_ADD = exports.POST_PIN_ADD = EXPLORER + '/pin/add/';
var POST_PIN_REMOVE = exports.POST_PIN_REMOVE = EXPLORER + '/pin/remove/';
var GET_STAR_LIST = exports.GET_STAR_LIST = EXPLORER + '/star/get/';
var POST_STAR_ADD = exports.POST_STAR_ADD = EXPLORER + '/star/add/';
var POST_STAR_REMOVE = exports.POST_STAR_REMOVE = EXPLORER + '/star/remove/';
var UPDATE_SHARE_FOLDER_DESC = exports.UPDATE_SHARE_FOLDER_DESC = EXPLORER + '/share/folder/update/';
var POST_HELP_ADD = exports.POST_HELP_ADD = EXPLORER + '/help/add/';
/**
 * ===============笔记操作================
 */
var NOTE = API_BASE + '/doc';
var GET_NOTE_LIST = exports.GET_NOTE_LIST = NOTE;
var POST_CREATE_NOTE = exports.POST_CREATE_NOTE = NOTE + '/create/';
var POST_DELETE_NOTE = exports.POST_DELETE_NOTE = NOTE + '/delete/';
var POST_DETACH_NOTE = exports.POST_DETACH_NOTE = NOTE + '/detach/';
var GET_NOTE = exports.GET_NOTE = NOTE + '/';
var POST_UPDATE_TITLE = exports.POST_UPDATE_TITLE = NOTE + '/update_meta/';
/**
 * ===============笔记历史记录操作================
 */
var POST_HISTORY_LIST = exports.POST_HISTORY_LIST = API_BASE + '/xhistory/';
/**
 * ===============思维笔记操作================
 */
var META = API_BASE + '/meta';
var GET_META = exports.GET_META = META + '/';
var UPDATE_META = exports.UPDATE_META = META + '/update/';
/**
 * ===============表格操作================
 */
var SPREADSHEET = API_BASE + '/sheet';
var SPREADSHEET_V2 = API_BASE_V2 + '/sheet';
var GET_SPREADSHEET_LIST = exports.GET_SPREADSHEET_LIST = SPREADSHEET;
var POST_CREATE_SPREADSHEET = exports.POST_CREATE_SPREADSHEET = SPREADSHEET + '/create/';
var POST_DELETE_SPREADSHEET = exports.POST_DELETE_SPREADSHEET = SPREADSHEET + '/delete/';
var POST_DETACH_SPREADSHEET = exports.POST_DETACH_SPREADSHEET = SPREADSHEET + '/detach/';
var GET_SPREADSHEET = exports.GET_SPREADSHEET = SPREADSHEET + '/';
var POST_UPDATE_TITLE_SPREADSHEET = exports.POST_UPDATE_TITLE_SPREADSHEET = SPREADSHEET + '/update_meta/';
// sheet 历史记录
var GET_SHEET_HISTORY_LIST = exports.GET_SHEET_HISTORY_LIST = SPREADSHEET + '/histories';
var GET_SHEET_HISTORY_FIRST = exports.GET_SHEET_HISTORY_FIRST = SPREADSHEET + '/first_block';
// 表格异步分行加载数据
var FETCH_ROWS_SPREADSHEET = exports.FETCH_ROWS_SPREADSHEET = SPREADSHEET + '/fetch_rows';
var FETCH_BLOCKS_SPREADSHEET = exports.FETCH_BLOCKS_SPREADSHEET = SPREADSHEET + '/sub_block';
var FETCH_BLOCKS_SPREADSHEET_V2 = exports.FETCH_BLOCKS_SPREADSHEET_V2 = SPREADSHEET_V2 + '/sub_block';
var GET_SHEET_HISTORY_FIRST_V2 = exports.GET_SHEET_HISTORY_FIRST_V2 = SPREADSHEET_V2 + '/first_block';
// Doc插Sheet 历史记录
var GET_EMBED_SHEET_HISTORY_LIST = exports.GET_EMBED_SHEET_HISTORY_LIST = SPREADSHEET + '/cs_range';
/**
 * ===============用户================
 */
var USER = API_BASE + '/user';
var GET_USER = exports.GET_USER = USER + '/';
var GET_USER_DETAIL = exports.GET_USER_DETAIL = USER + '/detail';
var GET_SEARCH_USER = exports.GET_SEARCH_USER = API_BASE + '/search/permission_candidates/';
var GET_USER_ET = exports.GET_USER_ET = USER + '/get_et';
/**
 * ==========权限============
 */
var PERMISSION_NEW = API_BASE + '/suite/permission';
var BASE_MEMBER_OPERATION = PERMISSION_NEW + '/members';
var BASE_PUBLIC_PERMISSION = PERMISSION_NEW + '.' + V2 + '/public';
var GET_USER_PERMISSION_ON_SUITE = exports.GET_USER_PERMISSION_ON_SUITE = PERMISSION_NEW + '/user/';
var GET_USER_PERMISSION_ON_SUITE_V2 = exports.GET_USER_PERMISSION_ON_SUITE_V2 = PERMISSION_NEW + '.' + V2 + '/user/';
var POST_SEND_SUITE_PERMISSION_REQUEST = exports.POST_SEND_SUITE_PERMISSION_REQUEST = PERMISSION_NEW + '/apply_permission/';
var GET_SUITE_PUBLIC_PERMISSION = exports.GET_SUITE_PUBLIC_PERMISSION = BASE_PUBLIC_PERMISSION + '/';
var POST_SET_SUITE_PUBLIC_PERMISSION = exports.POST_SET_SUITE_PUBLIC_PERMISSION = BASE_PUBLIC_PERMISSION + '/update/';
var GET_SUITE_AUTH_MEMBERS = exports.GET_SUITE_AUTH_MEMBERS = BASE_MEMBER_OPERATION + '/';
var POST_ADD_MEMBERS = exports.POST_ADD_MEMBERS = BASE_MEMBER_OPERATION + '/create/';
var POST_UPDATE_MEMBER_PERMISSION = exports.POST_UPDATE_MEMBER_PERMISSION = BASE_MEMBER_OPERATION + '/update/';
var POST_DELETE_MEMBER_PERMISSION = exports.POST_DELETE_MEMBER_PERMISSION = BASE_MEMBER_OPERATION + '/delete/';
var POST_EXIST_MEMBER_PERMISSION = exports.POST_EXIST_MEMBER_PERMISSION = BASE_MEMBER_OPERATION + '/exist/';
var POST_TRANSFER_SUITE_OWNER = exports.POST_TRANSFER_SUITE_OWNER = PERMISSION_NEW + '/members/transfer/';
/**
 * ==========Doc编辑器内容=============
 */
var RCE_SERVICE = exports.RCE_SERVICE = API_BASE + '/rce';
var GET_CLIENT_VARS = exports.GET_CLIENT_VARS = RCE_SERVICE + '/client_vars/';
var POST_RCE_MESSAGE = exports.POST_RCE_MESSAGE = RCE_SERVICE + '/messages';
/**
 * =============文档搜索===============
 */
var GET_SEARCH_SUITE = exports.GET_SEARCH_SUITE = API_BASE + '/search/obj/';
/**
 * =============用户引导===============
 */
var USER_GUIDE_BASE = exports.USER_GUIDE_BASE = API_BASE + '/user_guide';
var POST_GET_USER_GUIDE = exports.POST_GET_USER_GUIDE = USER_GUIDE_BASE + '/get/';
var POST_UPDATE_USER_GUIDE = exports.POST_UPDATE_USER_GUIDE = USER_GUIDE_BASE + '/update/';
var POST_CLOSE_USER_GUIDE = exports.POST_CLOSE_USER_GUIDE = USER_GUIDE_BASE + '/done/';
/**
 * =============评论===============
 */
var POST_GET_COMMENT_LIST = exports.POST_GET_COMMENT_LIST = API_BASE + '/comment/get/';
var POST_UPDATE_COMMENT = exports.POST_UPDATE_COMMENT = API_BASE + '/comment/update/';
var POST_UPDATE_REPLY_COMMENT = exports.POST_UPDATE_REPLY_COMMENT = API_BASE + '/comment/reply/update/';
var POST_DELETE_REPLY_COMMENT = exports.POST_DELETE_REPLY_COMMENT = API_BASE + '/comment/reply/delete/';
var POST_ADD_COMMENT = exports.POST_ADD_COMMENT = API_BASE + '/comment/add/';
/**
 * =============全文评论===============
 */
var POST_GET_GLOBAL_COMMENT_LIST = exports.POST_GET_GLOBAL_COMMENT_LIST = API_BASE + '/comment/whole/get/';
var POST_UPDATE_GLOBAL_COMMENT = exports.POST_UPDATE_GLOBAL_COMMENT = API_BASE + '/comment/reply/update/';
var POST_GET_NEW_GLOBAL_COMMENT = exports.POST_GET_NEW_GLOBAL_COMMENT = API_BASE + '/comment/reply/mget/';
var POST_DELETE_GLOBAL_COMMENT = exports.POST_DELETE_GLOBAL_COMMENT = API_BASE + '/comment/reply/delete/';
/**
 * =============文档内评论===============
 */
var POST_REPLY_COMMENT = exports.POST_REPLY_COMMENT = API_BASE + '/comment/reply/add/';
/**
 * =============已解决评论===============
 */
var POST_GET_COMMENT_HISTORY_LIST = exports.POST_GET_COMMENT_HISTORY_LIST = API_BASE + '/comment/all/';
var POST_REOPEN_COMMENT = exports.POST_REOPEN_COMMENT = API_BASE + '/comment/update/';
/**
 * =============Lark唤醒===============
 */
var POST_FETCH_LARK_CHAT_ID = exports.POST_FETCH_LARK_CHAT_ID = API_BASE + '/mention/chatid/';
var POST_FETCH_LARK_CHAT_INFO = exports.POST_FETCH_LARK_CHAT_INFO = API_BASE + '/mention/chat.info/';
var POST_JOIN_LARK_CHAT = exports.POST_JOIN_LARK_CHAT = API_BASE + '/mention/join.chat/';
var FETCH_DOCS_CUSTOMER_SERVICE_CHAT_ID = exports.FETCH_DOCS_CUSTOMER_SERVICE_CHAT_ID = API_BASE + '/message/join_on_call_chat/';
var LARK_CHAT_SCHEMA = exports.LARK_CHAT_SCHEMA = 'lark://client/chat/';
/**
 * =============消息接口===============
 */
var POST_GET_MESSAGE_LIST = exports.POST_GET_MESSAGE_LIST = API_BASE + '/message/get_message/';
var POST_SET_MESSAGE_READ = exports.POST_SET_MESSAGE_READ = API_BASE + '/message/read/';
var POST_SET_ALL_MESSAGE_READ = exports.POST_SET_ALL_MESSAGE_READ = API_BASE + '/message/read_all/';
/**
 * =============更新检查===============
 */
var GET_PACKAGE_VERSION = exports.GET_PACKAGE_VERSION = API_BASE + '/resource_package/get_info/';
/**
 * =============实验室===============
 */
var FETCH_OPEN_LABS = exports.FETCH_OPEN_LABS = API_BASE + '/experiment/userquery/';
var POST_UPDATE_LABS = exports.POST_UPDATE_LABS = API_BASE + '/experiment/usermodify/';
/**
 * =============导出===============
 */
var GET_EXPORT_TICKET = exports.GET_EXPORT_TICKET = API_BASE + '/parser/export/';
var GET_EXPORT_STATUS = exports.GET_EXPORT_STATUS = API_BASE + '/parser/get_export_result/';
var GET_EXPORT_RESULT = exports.GET_EXPORT_RESULT = API_BASE + '/parser/download/';
/**
 * =============NPS问卷===============
 */
var FETCH_NPS_QUESTIONAIRE = exports.FETCH_NPS_QUESTIONAIRE = API_BASE + '/survey/pull/';
var APPEAR_NPS_QUESTIONAIRE = exports.APPEAR_NPS_QUESTIONAIRE = API_BASE + '/survey/appear/';
var CLOSE_NPS_QUESTIONAIRE = exports.CLOSE_NPS_QUESTIONAIRE = API_BASE + '/survey/close/';
var SUBMIT_NPS_QUESTIONAIRE = exports.SUBMIT_NPS_QUESTIONAIRE = API_BASE + '/survey/submit/';
var SUBMIT_ANSWER = exports.SUBMIT_ANSWER = API_BASE + '/survey/answer/';
/**
 * =============点赞===============
 */
var LIKE_API_BASE = API_BASE + '/like';
var FETCH_LIKE_LIST = exports.FETCH_LIKE_LIST = LIKE_API_BASE + '/data/';
var FETCH_LIKE_COUNT = exports.FETCH_LIKE_COUNT = LIKE_API_BASE + '/count/';
var POST_LIKE = exports.POST_LIKE = LIKE_API_BASE + '/like/';
var POST_DISLIKE = exports.POST_DISLIKE = LIKE_API_BASE + '/dislike/';
/**
 * =============翻译===============
 */
var GET_TRANSLATE_CONFIG = exports.GET_TRANSLATE_CONFIG = API_BASE + '/translation/language/detection/';
var FETCH_TRANSLATION = exports.FETCH_TRANSLATION = API_BASE + '/translation/language/translate/';

/***/ }),
/* 308 */,
/* 309 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var X_COMMAND = exports.X_COMMAND = 'x-command';
/**
 * 特殊情况 目前有4个
 * https://docs.bytedance.net/doc/m12VM2tAVRYk3iakVePM2b
 */
var API_RCE_PANDORA = exports.API_RCE_PANDORA = 'api.rce.pandora';
var SUITE_BASE = exports.SUITE_BASE = 'doc.token';
var API_DOC_BASE = exports.API_DOC_BASE = 'api.doc.token';
var API_SHEET_BASE = exports.API_SHEET_BASE = 'api.sheet.token';
var API_BITABLE_BASE = exports.API_BITABLE_BASE = 'api.bitable.token';
var API_SLIDE_BASE = exports.API_SLIDE_BASE = 'api.slide.token';
var API_DOC_CREATE_SHEET = exports.API_DOC_CREATE_SHEET = API_DOC_BASE + '.create_sheet';
var API_MINDNOTE_BASE = exports.API_MINDNOTE_BASE = 'api.mindnote.token';
var API_SHEET_HISTORIES = exports.API_SHEET_HISTORIES = 'api.sheet.histories.token';
var API_SHEET_RCE_MESSAGE = exports.API_SHEET_RCE_MESSAGE = 'api.sheet.rce.message';
var API_SHEET_CSRANGE_TOKEN = exports.API_SHEET_CSRANGE_TOKEN = 'api.sheet.cs_range.token';
// pattern: '/api/rce/message/'
// pattern: '/api/explorer/create/'
// pattern: '/api/explorer/get_recent/'
// pattern: '/api/explorer/root/get/'
// pattern: '/api/explorer/space/mget/'
// pattern: '/api/suite/permission.v2/user/'
// pattern: '/api/suite/permission.v2/public/'
// pattern: '/doc/:token/'
// pattern: '/api/doc/:token/'
// pattern: '/api/user/'
// pattern: '/api/comment/all/'
// pattern: '/api/comment/get/'
// pattern: '/api/comment/reply/mget/'
// pattern: '/api/comment/whole/get/'
// pattern: '/api/search/obj/'
// pattern: '/api/mention/recommend.v2/'
// pattern: '/api/message/get_message/'
// pattern: '/api/sheet/:token/'
// pattern: '/api/v2/sheet/first_block/'
// pattern: '/api/v2/sheet/sub_block/'
// pattern: '/api/doc/:token/create_sheet/'
// pattern: '/api/sheet/create/'

/***/ }),
/* 310 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setLocalUserGuideInfo = exports.updateLocalUserGuideInfo = exports.closeUserGuide = exports.updateUserGuide = exports.fetchUserGuide = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _isString2 = __webpack_require__(232);

var _isString3 = _interopRequireDefault(_isString2);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

var _userGuide = __webpack_require__(714);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var fetchUserGuide = exports.fetchUserGuide = function fetchUserGuide(options) {
    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'web';
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.guide.FETCH_USER_GUIDE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_GET_USER_GUIDE,
        method: _$constants.apiUrls.METHOD.POST,
        serverFirst: options && options.serverFirst,
        data: { type: type }
    });
};
var updateUserGuide = exports.updateUserGuide = function updateUserGuide(guideType, context) {
    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'web';

    var action = (0, _userGuide.mapKey)(guideType, false);
    var data = (0, _isString3.default)(context) ? { action: action, context: context, type: type } : { action: action, type: type };
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.guide.UPDATE_USER_GUIDE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_UPDATE_USER_GUIDE,
        method: _$constants.apiUrls.METHOD.POST,
        options: { transformResponse: function transformResponse(response) {
                return Object.assign({}, response, { guideType: guideType });
            } },
        data: data
    });
};
var closeUserGuide = exports.closeUserGuide = function closeUserGuide(guideType, context) {
    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'web';

    var action = (0, _userGuide.mapKey)(guideType, false);
    var data = (0, _isString3.default)(context) ? { action: action, context: context, type: type } : { action: action, type: type };
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.guide.CLOSE_USER_GUIDE
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_CLOSE_USER_GUIDE,
        method: _$constants.apiUrls.METHOD.POST,
        options: { transformResponse: function transformResponse(response) {
                return Object.assign({}, response, { guideType: guideType });
            } },
        data: data
    });
};
var updateLocalUserGuideInfo = exports.updateLocalUserGuideInfo = function updateLocalUserGuideInfo(guideType) {
    return {
        type: _$constants.actionTypes.guide.UPDATE_LOCAL_USER_GUIDE,
        payload: guideType
    };
};
var setLocalUserGuideInfo = exports.setLocalUserGuideInfo = function setLocalUserGuideInfo(guides) {
    return {
        type: _$constants.actionTypes.guide.SET_LOCAL_USER_GUIDE,
        payload: guides
    };
};

/***/ }),
/* 311 */,
/* 312 */,
/* 313 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setData = setData;
exports.getData = getData;
exports.genKey = genKey;

var _sdkCompatibleHelper = __webpack_require__(45);

var _suiteHelper = __webpack_require__(52);

var _store = __webpack_require__(393);

var _store2 = _interopRequireDefault(_store);

var _isEmpty2 = __webpack_require__(454);

var _isEmpty3 = _interopRequireDefault(_isEmpty2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

window.getData = getData;
window.setData = setData;
function setData(param) {
    return new Promise(function (resolve, reject) {
        var data = param.data;

        data = Object.is(param.data, null) ? '' : data;
        var _param$needSync = param.needSync,
            needSync = _param$needSync === undefined ? false : _param$needSync;
        var _param$token = param.token,
            token = _param$token === undefined ? (0, _suiteHelper.getToken)() : _param$token,
            _param$uri = param.uri,
            uri = _param$uri === undefined ? location.pathname : _param$uri;

        var key = param.keyGened ? param.key : genKey(param.key);
        if (/USER_CHANGESET/.test(key) && data && !data.apool) {
            console.log('error user no pool');
            throw new Error('user changeset no pool');
        }
        if ((0, _sdkCompatibleHelper.isSupportOfflineEdit)()) {
            window.lark.biz.util.setData({
                key: key,
                data: data,
                needSync: needSync,
                objToken: token,
                uri: uri,
                type: param.type,
                dataType: param.dataType,
                callback: function callback(res) {
                    resolve(res);
                }
            });
        } else {
            _store2.default.setItem(token + '_' + key, JSON.stringify(data)).then(function (res) {
                resolve({ code: 0, data: data });
            });
        }
    });
}
function getData(param) {
    return new Promise(function (resolve, reject) {
        // console.log('call getData ------->', param);
        var _param$token2 = param.token,
            token = _param$token2 === undefined ? (0, _suiteHelper.getToken)() : _param$token2;

        param.token = token;
        var key = param.keyGened ? param.key : genKey(param.key);
        if ((0, _sdkCompatibleHelper.isSupportOfflineEdit)()) {
            window.lark.biz.util.getData({
                key: key,
                objToken: param.token,
                callback: function callback(res) {
                    /**
                     * 新版Editor使用 baseZaText而旧版使用 baseAText
                     * 首次从缓存加载时,无initialAttributedTexts,需设置,且存储时将更新initialAttributedText数据结构
                     *
                     * key 可能为***_sheet_client_vars 或 ***_client_vars
                     * res.data 可能为 "" 或 {...}
                     *
                     */
                    // console.info('Promise getData:', res, key);
                    var clientVars = key.substr(-11) === 'CLIENT_VARS' && res.data && res.data.data && res.data.data.collab_client_vars || {};
                    if (clientVars.initialAttributedText && !clientVars.initialAttributedTexts) {
                        clientVars.initialAttributedTexts = {
                            texts: {
                                0: clientVars.initialAttributedText.text
                            },
                            attribs: {
                                0: clientVars.initialAttributedText.attribs
                            }
                        };
                    }
                    resolve(res);
                }
            });
        } else {
            _store2.default.getItem(token + '_' + key).then(function (data) {
                var resData = JSON.parse(data);
                if ((0, _isEmpty3.default)(resData)) {
                    resData = '';
                }
                resolve({ code: 0, data: resData });
            });
        }
    });
}
function genKey(str) {
    var namespace = getNameSpace();
    return namespace + '_' + str;
}
function getNameSpace() {
    var User = window.User;
    var _User$tenantId = User.tenantId,
        tenantId = _User$tenantId === undefined ? 1 : _User$tenantId,
        id = User.id;

    return tenantId + '_' + id;
}

/***/ }),
/* 314 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.isGuideTypeExpired = exports.getSelectorDataAttr = exports.getUserProfileAttr = exports.getGuideTypeContext = exports.isGuideGroupDone = exports.isGuideTypeDone = exports.getGroupIntroStep = undefined;

var _common = __webpack_require__(1346);

Object.keys(_common).forEach(function (key) {
    if (key === "default" || key === "__esModule") return;
    Object.defineProperty(exports, key, {
        enumerable: true,
        get: function get() {
            return _common[key];
        }
    });
});

var _driver = __webpack_require__(1347);

Object.keys(_driver).forEach(function (key) {
    if (key === "default" || key === "__esModule") return;
    Object.defineProperty(exports, key, {
        enumerable: true,
        get: function get() {
            return _driver[key];
        }
    });
});

var _events = __webpack_require__(1355);

Object.keys(_events).forEach(function (key) {
    if (key === "default" || key === "__esModule") return;
    Object.defineProperty(exports, key, {
        enumerable: true,
        get: function get() {
            return _events[key];
        }
    });
});

var _steps = __webpack_require__(1356);

Object.keys(_steps).forEach(function (key) {
    if (key === "default" || key === "__esModule") return;
    Object.defineProperty(exports, key, {
        enumerable: true,
        get: function get() {
            return _steps[key];
        }
    });
});

var _types = __webpack_require__(1358);

Object.keys(_types).forEach(function (key) {
    if (key === "default" || key === "__esModule") return;
    Object.defineProperty(exports, key, {
        enumerable: true,
        get: function get() {
            return _types[key];
        }
    });
});

var _onboarding = __webpack_require__(130);

var getGroupIntroStep = exports.getGroupIntroStep = function getGroupIntroStep(groupType) {
    return _onboarding.GROUP_STEPS[groupType][0];
};
var isGuideTypeDone = exports.isGuideTypeDone = function isGuideTypeDone(userGuide, guideType) {
    return userGuide.getIn([guideType, _onboarding.STEP_STATE.DONE]);
};
var isGuideGroupDone = exports.isGuideGroupDone = function isGuideGroupDone(userGuide, groupType) {
    var intro = _onboarding.GROUP_STEPS[groupType][0];
    var steps = _onboarding.GROUP_STEPS[groupType].slice(1);
    if (groupType === _onboarding.GROUP_TYPE.CREATE_DOC) {
        steps = steps.filter(function (step) {
            return step !== _onboarding.STEP_TYPES.create_doc_group_congrats;
        });
    }
    return isGuideTypeDone(userGuide, intro) || !steps.some(function (step) {
        return !isGuideTypeDone(userGuide, step);
    });
};
var getGuideTypeContext = exports.getGuideTypeContext = function getGuideTypeContext(userGuide, guideType) {
    return userGuide.getIn([guideType, _onboarding.STEP_STATE.CONTEXT]);
};
var getUserProfileAttr = exports.getUserProfileAttr = function getUserProfileAttr(userProfile, attrGroup, attrType) {
    return userProfile.getIn([attrGroup, attrType]);
};
var getSelectorDataAttr = exports.getSelectorDataAttr = function getSelectorDataAttr(on, selector) {
    return on ? { 'data-selector': selector } : {};
};
var isGuideTypeExpired = exports.isGuideTypeExpired = function isGuideTypeExpired(userGuide, guideType) {
    var context = userGuide.getIn([guideType, _onboarding.STEP_STATE.CONTEXT]);
    if (!context) return true;
    var contextObj = void 0;
    try {
        contextObj = JSON.parse(context);
    } catch (e) {
        return true;
    }
    if (!contextObj || !contextObj.closeTime) return true;
    var expiredTime = new Date(new Date(contextObj.closeTime).toLocaleDateString() + ' 23:59:59').getTime();
    return Date.now() > expiredTime;
};

/***/ }),
/* 315 */,
/* 316 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var LIKE_MESSAGE_TYPE = exports.LIKE_MESSAGE_TYPE = 'LIKE';
var EMPTY_LAST_LIKE_ID = exports.EMPTY_LAST_LIKE_ID = '0';
var MY_TEMP_LIKE_ID = exports.MY_TEMP_LIKE_ID = 'MY_TEMP_LIKE_ID';
var DOC_RECENT_LIKE_MAX_AVATAR_NUM = exports.DOC_RECENT_LIKE_MAX_AVATAR_NUM = 5;
var DOC_RECENT_LIKE_SIZE = exports.DOC_RECENT_LIKE_SIZE = 10;
// FIXME: 改成更大的数值
var DOC_LIKE_PAGE_SIZE = exports.DOC_LIKE_PAGE_SIZE = 5;

/***/ }),
/* 317 */,
/* 318 */,
/* 319 */,
/* 320 */,
/* 321 */,
/* 322 */,
/* 323 */,
/* 324 */,
/* 325 */,
/* 326 */,
/* 327 */,
/* 328 */,
/* 329 */,
/* 330 */,
/* 331 */,
/* 332 */,
/* 333 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.guardWorkerSaga = undefined;

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.autoResume = autoResume;

var _effects = __webpack_require__(17);

var _raven = __webpack_require__(389);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(autoResume);

var guardWorkerSaga = exports.guardWorkerSaga = function guardWorkerSaga(workerSaga) {
    return (/*#__PURE__*/_regenerator2.default.mark(function workerSagaGuard() {
            return _regenerator2.default.wrap(function workerSagaGuard$(_context) {
                while (1) {
                    switch (_context.prev = _context.next) {
                        case 0:
                            _context.prev = 0;
                            _context.next = 3;
                            return (0, _effects.call)(workerSaga);

                        case 3:
                            _context.next = 9;
                            break;

                        case 5:
                            _context.prev = 5;
                            _context.t0 = _context['catch'](0);

                            console.error('Worker saga failed:', _context.t0);
                            (0, _raven.captureException)(_context.t0);

                        case 9:
                        case 'end':
                            return _context.stop();
                    }
                }
            }, workerSagaGuard, this, [[0, 5]]);
        })
    );
};
function autoResume(sagas, errorHandler) {
    return _regenerator2.default.wrap(function autoResume$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return sagas.map(function (saga) {
                        return (0, _effects.spawn)( /*#__PURE__*/_regenerator2.default.mark(function __spawn_resume___() {
                            return _regenerator2.default.wrap(function __spawn_resume___$(_context2) {
                                while (1) {
                                    switch (_context2.prev = _context2.next) {
                                        case 0:
                                            if (false) {}

                                            _context2.prev = 1;
                                            _context2.next = 4;
                                            return (0, _effects.call)(saga);

                                        case 4:
                                            _context2.next = 9;
                                            break;

                                        case 6:
                                            _context2.prev = 6;
                                            _context2.t0 = _context2['catch'](1);

                                            errorHandler && errorHandler(_context2.t0);

                                        case 9:
                                            _context2.next = 0;
                                            break;

                                        case 11:
                                        case 'end':
                                            return _context2.stop();
                                    }
                                }
                            }, __spawn_resume___, this, [[1, 6]]);
                        }));
                    });

                case 2:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked, this);
}

/***/ }),
/* 334 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.closeModal = exports.openModal = undefined;

var _$constants = __webpack_require__(5);

var openModal = exports.openModal = function openModal(modalType) {
    var modalProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    return {
        type: _$constants.actionTypes.ui.OPEN_MODAL,
        payload: { modalType: modalType, modalProps: modalProps }
    };
};
var closeModal = exports.closeModal = function closeModal(modalType, closeType, payload) {
    return {
        type: _$constants.actionTypes.ui.CLOSE_MODAL,
        payload: Object.assign({}, payload, {
            modalType: modalType,
            closeType: closeType
        })
    };
};

/***/ }),
/* 335 */,
/* 336 */,
/* 337 */,
/* 338 */,
/* 339 */,
/* 340 */,
/* 341 */,
/* 342 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.selectFromMinaConfig = exports.selectCanEditInvolvingEditMode = exports.selectIsInEditMode = exports.selectSelectedSuiteOtherPermissions = exports.selectSelectedSuitePermissionInfo = exports.selectCurrentSuiteOtherPermissions = exports.selectIsPermissionForbidden = exports.isSheetPermissionForbidden = exports.ifhaveCommentPermission = exports.ifhaveEditPermission = exports.selectCurrentPermission = exports.selectPublicPermission = exports.selectCopyPermission = exports.selectIsSameTenant = exports.selectExternalAccess = exports.selectInviteExternal = exports.selectCanCross = exports.selectIsOwner = exports.selectIsCreator = exports.selectCurNoteMember = exports.selectCurrentSuitePermissionInfo = exports.selectSelectedSuiteEditable = exports.selectSelectedSuiteShareable = exports.selectSelectedSuitePermission = exports.selectShareFolderPermissions = exports.selectPermissions = undefined;

var _reselect = __webpack_require__(131);

var _immutable = __webpack_require__(31);

var _isUndefined = __webpack_require__(228);

var _isUndefined2 = _interopRequireDefault(_isUndefined);

var _$constants = __webpack_require__(5);

var _rentalHelper = __webpack_require__(1182);

var _suite = __webpack_require__(84);

var _explorer = __webpack_require__(48);

var _user = __webpack_require__(72);

var _common = __webpack_require__(85);

var _permissionHelper = __webpack_require__(302);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Default values
 * For performance consideration
 */

/* Outside selectors */
var emptyList = (0, _immutable.List)([]);
var emptyPlainMap = {};
var selectPermissions = exports.selectPermissions = function selectPermissions(state) {
    return state.entities.permissions;
};
var selectShareFolderPermissions = exports.selectShareFolderPermissions = function selectShareFolderPermissions(state) {
    return state.entities.folderPermissions;
};
var selectSelectedSuitePermission = exports.selectSelectedSuitePermission = (0, _reselect.createSelector)(selectPermissions, _explorer.selectSelectedFirstFileMeta, function (permissionMap, meta) {
    if (!meta) return undefined;
    return permissionMap.getIn([meta.obj_token, 'permissions']);
});
var selectSelectedSuiteShareable = exports.selectSelectedSuiteShareable = (0, _reselect.createSelector)(selectSelectedSuitePermission, function (permissions) {
    return typeof permissions !== 'undefined' && permissions.indexOf(_$constants.common.PERMISSION.SHAREABLE) > -1;
});
var selectSelectedSuiteEditable = exports.selectSelectedSuiteEditable = (0, _reselect.createSelector)(selectSelectedSuitePermission, function (permissions) {
    return typeof permissions !== 'undefined' && permissions.indexOf(_$constants.common.PERMISSION.EDITABLE) > -1;
});
var selectCurrentSuitePermissionInfo = exports.selectCurrentSuitePermissionInfo = (0, _reselect.createSelector)(selectPermissions, _suite.selectCurrentSuiteToken, function (permissions, currentSuiteToken) {
    return permissions.get(currentSuiteToken);
});
var createPermissionsFieldSelector = function createPermissionsFieldSelector(key) {
    return (0, _reselect.createSelector)(selectPermissions, _suite.selectCurrentSuiteToken, function (permissions, currentSuiteToken) {
        return permissions.getIn([currentSuiteToken, key]);
    });
};
var selectCurNoteMember = exports.selectCurNoteMember = createPermissionsFieldSelector('authorizedMembers');
var selectIsCreator = exports.selectIsCreator = createPermissionsFieldSelector('isCreator');
var selectIsOwner = exports.selectIsOwner = createPermissionsFieldSelector('isOwner');
var selectCanCross = exports.selectCanCross = createPermissionsFieldSelector('canCross');
var selectInviteExternal = exports.selectInviteExternal = createPermissionsFieldSelector('inviteExternal');
var selectExternalAccess = exports.selectExternalAccess = createPermissionsFieldSelector('externalAccess');
var selectIsSameTenant = exports.selectIsSameTenant = (0, _reselect.createSelector)(selectIsOwner, _suite.selectCurrentSuiteByObjToken, _user.selectCurrentUser, function (isOwner, currentNote, currentUser) {
    return isOwner || !!(currentNote && currentUser && currentNote.get('tenant_id') === currentUser.get('tenant_id'));
});
var selectCopyPermission = exports.selectCopyPermission = createPermissionsFieldSelector('copy');
var selectPublicPermission = exports.selectPublicPermission = createPermissionsFieldSelector('publicPermission');
/**
 * 权限 1:可查看 2:可评论 4:可编辑 8:可共享
 * @param {object} state
 */
var selectCurrentPermission = exports.selectCurrentPermission = function selectCurrentPermission(state) {
    var rst = createPermissionsFieldSelector('permissions')(state);
    return !(0, _isUndefined2.default)(rst) ? rst : emptyList;
};
var createHasPermissionSelector = function createHasPermissionSelector(permissionStr) {
    return (0, _reselect.createSelector)((0, _common.selectAsyncError)('currentSuite'), selectCurrentPermission, function (currentNoteError, currentPermission) {
        var forbidden = currentNoteError && currentNoteError.get('code') === _$constants.error.STATUS_CODE.FORBIDDEN;
        var permission = (0, _permissionHelper.getUserPermissions)(currentPermission.toJS()) || emptyPlainMap;
        return !forbidden && permission[permissionStr];
    });
};
var ifhaveEditPermission = exports.ifhaveEditPermission = createHasPermissionSelector('editable');
var ifhaveCommentPermission = exports.ifhaveCommentPermission = createHasPermissionSelector('commentable');
var isSheetPermissionForbidden = exports.isSheetPermissionForbidden = (0, _reselect.createSelector)(_suite.selectCurrentSuiteType, function (suiteType) {
    return (0, _rentalHelper.isSuiteDisabled)(suiteType);
});
var selectIsPermissionForbidden = exports.selectIsPermissionForbidden = (0, _reselect.createSelector)(
// isSheetPermissionForbidden,
(0, _common.selectAsyncError)('userPermissionOnSuite'), (0, _common.selectAsyncError)('suitePublicPermission'), (0, _common.selectAsyncError)('currentSuite'),
// (isSheetPermissionForbidden, ...errorEntities) => {
//   return (
//     isSheetPermissionForbidden ||
//       errorEntities.some(entity => entity && entity.get('code') === error.STATUS_CODE.FORBIDDEN)
//   );
// },
function () {
    for (var _len = arguments.length, errorEntities = Array(_len), _key = 0; _key < _len; _key++) {
        errorEntities[_key] = arguments[_key];
    }

    return errorEntities.some(function (entity) {
        return entity && entity.get('code') === _$constants.error.STATUS_CODE.FORBIDDEN;
    });
});
var selectCurrentSuiteOtherPermissions = exports.selectCurrentSuiteOtherPermissions = (0, _reselect.createSelector)(selectCurrentSuitePermissionInfo, ifhaveEditPermission, function (currentSuitePermissionInfo, haveEditPermission) {
    if (!currentSuitePermissionInfo) {
        return {};
    }
    var canPrintUserType = currentSuitePermissionInfo.get('print');
    var canExportUserType = currentSuitePermissionInfo.get('export');
    var canCopyUserType = currentSuitePermissionInfo.get('copy');
    return {
        print: canPrintUserType,
        export: canExportUserType,
        copy: canCopyUserType,
        printable: canPrintUserType === _$constants.common.USER_TYPE_ON_SUITE.READABLE || canPrintUserType === _$constants.common.USER_TYPE_ON_SUITE.EDITABLE && haveEditPermission,
        exportable: canExportUserType === _$constants.common.USER_TYPE_ON_SUITE.READABLE || canExportUserType === _$constants.common.USER_TYPE_ON_SUITE.EDITABLE && haveEditPermission,
        copyable: canCopyUserType === _$constants.common.USER_TYPE_ON_SUITE.READABLE || canCopyUserType === _$constants.common.USER_TYPE_ON_SUITE.EDITABLE && haveEditPermission
    };
});
var selectSelectedSuitePermissionInfo = exports.selectSelectedSuitePermissionInfo = (0, _reselect.createSelector)(selectPermissions, _explorer.selectSelectedFirstFileMeta, function (permissionMap, meta) {
    if (!meta) return undefined;
    return permissionMap.getIn([meta.obj_token]);
});
var selectSelectedSuiteOtherPermissions = exports.selectSelectedSuiteOtherPermissions = (0, _reselect.createSelector)(selectSelectedSuitePermissionInfo, selectSelectedSuiteEditable, function (selectedSuitePermissionInfo, selectedSuiteEditable) {
    if (!selectedSuitePermissionInfo) {
        return;
    }
    var canPrintUserType = selectedSuitePermissionInfo.get('print');
    var canExportUserType = selectedSuitePermissionInfo.get('export');
    var canCopyUserType = selectedSuitePermissionInfo.get('copy');
    return {
        print: canPrintUserType,
        export: canExportUserType,
        copy: canCopyUserType,
        printable: canPrintUserType === _$constants.common.USER_TYPE_ON_SUITE.READABLE || canPrintUserType === _$constants.common.USER_TYPE_ON_SUITE.EDITABLE && selectedSuiteEditable,
        exportable: canExportUserType === _$constants.common.USER_TYPE_ON_SUITE.READABLE || canExportUserType === _$constants.common.USER_TYPE_ON_SUITE.EDITABLE && selectedSuiteEditable,
        copyable: canCopyUserType === _$constants.common.USER_TYPE_ON_SUITE.READABLE || canCopyUserType === _$constants.common.USER_TYPE_ON_SUITE.EDITABLE && selectedSuiteEditable
    };
});
var selectIsInEditMode = exports.selectIsInEditMode = function selectIsInEditMode(state) {
    return state.entities.isInEditMode;
};
var selectCanEditInvolvingEditMode = exports.selectCanEditInvolvingEditMode = (0, _reselect.createSelector)(ifhaveEditPermission, selectIsOwner, selectIsInEditMode, function (hasEditPerm, isOwner, isInEditMode) {
    if (!hasEditPerm) return false;
    return isOwner || isInEditMode;
});
var selectFromMinaConfig = exports.selectFromMinaConfig = function selectFromMinaConfig(state) {
    // TODO 地图视频在海外隐藏, 以及展示 Google 地图等
    // TODO 产品@yuanzhiwei 加上这个需求， PC 已有
    // const appConfig = window.User.appConfig;
    // const isGoogleApiKeyEnabled = appConfig && appConfig.isGoogleApiKeyEnabled;
    // return isGoogleApiKeyEnabled;
    return {
        googleApiKey: ''
    };
};

/***/ }),
/* 343 */,
/* 344 */,
/* 345 */,
/* 346 */,
/* 347 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.generateHeaders = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _cookie = __webpack_require__(536);

var _tea = __webpack_require__(42);

var _get = __webpack_require__(14);

var _get2 = _interopRequireDefault(_get);

var _sliApiMap = __webpack_require__(309);

var _parsedApiUrlHelper = __webpack_require__(1215);

var _generateRequestIdHelper = __webpack_require__(457);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 生成带有部分业务需要字段&值的 header obj. 注意这个 header 并不是请求最终的 header
 * @param request? not required
 */
var generateHeaders = exports.generateHeaders = function generateHeaders(request) {
    // 如果没有requestId, 那么为这个请求生成一个，否则用request里的。
    var requestId = getRequestId(request);
    var contextGetterMap = {
        request_id: requestId,
        os: _tea.getOSNameByBrowser,
        app_version: _tea.getAppVersion,
        os_version: _tea.getOSVersionByBrowser,
        platform: _tea.getPlatForm
    };
    return Object.assign({}, getXCommandHeaderObj(request), {
        'Request-Id': requestId,
        'X-CSRFToken': (0, _cookie.getCookie)('_csrf_token') || '',
        'F-Version': window && window.rv_rev || '',
        Context: generateContextConfigStr(contextGetterMap)
    });
};
var getRequestId = function getRequestId(request) {
    if (!request || !request.requestId) {
        return (0, _generateRequestIdHelper.generateRequestId)();
    }
    return request.requestId;
};
var getXCommandHeaderObj = function getXCommandHeaderObj(request) {
    if (!request || !request.url) {
        return null;
    }
    var xCommandFromRequestPreset = (0, _get2.default)(request, ['headers', 'x-command']);
    // 如果有预设，使用预设里的，预设位于action[REQUEST].headers里。
    if (typeof xCommandFromRequestPreset !== 'undefined') {
        return (0, _defineProperty3.default)({}, _sliApiMap.X_COMMAND, xCommandFromRequestPreset);
    }
    return (0, _defineProperty3.default)({}, _sliApiMap.X_COMMAND, (0, _parsedApiUrlHelper.replaceSlashToDot)(request.url));
};
var generateContextConfigStr = function generateContextConfigStr(contextConfigMap) {
    return Object.keys(contextConfigMap).map(function (key) {
        var val = '';
        if (typeof contextConfigMap[key] === 'function') {
            val = contextConfigMap[key]();
        } else {
            val = contextConfigMap[key];
        }
        return key + '=' + val;
    }).join(';');
};

/***/ }),
/* 348 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});
var ERRCODE = exports.ERRCODE = {
    TIMEOUT: 'ECONNABORTED'
};
var REQUEST_TIMEOUT = exports.REQUEST_TIMEOUT = t('error.request_timeout');
/**
 * 非业务错误
 * https://wiki.bytedance.net/pages/viewpage.action?pageId=121742738
 */
var STATUS_CODE = exports.STATUS_CODE = {
    TIMEOUT: 'ECONNABORTED',
    SUCCESS: 0,
    FAILED: 1,
    INVALID_PARAMETERS: 2,
    NOT_FOUND: 3,
    FORBIDDEN: 4,
    LOGIN_REQUIRED: 5,
    DATA_EXCEED_LIMIT: 6,
    OBJCT_DELETED: 7,
    CONNECT_ERROR: '-8',
    NOTE_DELETED: 1002,
    VERSION_TOO_OLD: 1010,
    PAY_FOR_PREMIUM: 11001
};
var SERVER_STATUS_CODE = exports.SERVER_STATUS_CODE = {
    NOTE_DELETE: 1012,
    SERVER_BUSY: 9001
};
var WARNING_TYPE = exports.WARNING_TYPE = undefined;
(function (WARNING_TYPE) {
    WARNING_TYPE["SILENCE"] = "silence";
    WARNING_TYPE["TOAST"] = "toast";
    WARNING_TYPE["ALERT"] = "alert";
    WARNING_TYPE["REDIRECT"] = "redirect";
})(WARNING_TYPE || (exports.WARNING_TYPE = WARNING_TYPE = {}));
var ERROR_CODE_MAP = exports.ERROR_CODE_MAP = {
    '-8': {
        msg: 'Network error',
        description: t('server.error_code_-8'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('server.error_code_-8')
    },
    '-1': {
        msg: 'Changeset submit repeatedly',
        description: t('server.error_code_-1'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('server.error_code_-1')
    },
    0: {
        msg: 'Success',
        description: t('server.error_code_0'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('server.error_code_0')
    },
    1: {
        msg: 'Failed',
        description: t('server.error_code_1'),
        warningType: WARNING_TYPE.TOAST,
        warningText: t('error.operation_fail_twice_retry')
    },
    2: {
        msg: 'Invalid Parameters',
        description: t('error.args_error'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('error.internal_error_please_refresh')
    },
    3: {
        msg: 'Not Found',
        description: t('error.object_not_found'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('error.jump_deleted_page')
    },
    4: {
        msg: 'Forbidden',
        description: t('server.error_code_4'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('error.jump_no_permission_page')
    },
    5: {
        msg: 'Login Required',
        description: t('server.error_code_5'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('error.jump_to_login_page')
    },
    6: {
        msg: 'data exceed limit',
        description: t('server.error_code_6'),
        warningType: WARNING_TYPE.TOAST,
        warningText: t('error.too_many_operations')
    },
    7: {
        msg: 'object was deleted',
        description: t('server.error_code_7'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('error.jump_deleted_page')
    },
    8: {
        msg: 'Not in current document',
        description: t('server.error_code_8'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('error.invalid_link')
    },
    9: {
        msg: 'unchanged',
        description: t('server.error_code_9'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('error.not_notify_now')
    },
    10: {
        msg: 'WRONG_CONN',
        description: t('server.error_code_10'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('server.error_code_10')
    },
    1001: {
        msg: 'changeset size exceed limit',
        description: t('server.error_code_1001'),
        warningType: WARNING_TYPE.TOAST,
        warningText: t('error.too_many_data_retry')
    },
    1002: {
        msg: 'note deleted',
        description: t('server.error_code_1002'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('error.jump_deleted_page')
    },
    1003: {
        msg: 'not in room',
        description: t('server.error_code_1003'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('error.connect_fail')
    },
    1004: {
        msg: 'note not exists',
        description: t('server.error_code_1004'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('error.jump_deleted_page')
    },
    1005: {
        msg: 'changeset validate failed',
        description: t('server.error_code_1005'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('error.internal_error_please_refresh')
    },
    1006: {
        msg: 'internal server error',
        description: t('server.error_code_1006'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('error.internal_error_please_refresh')
    },
    1007: {
        msg: t('error.invalid_message'),
        description: t('server.error_code_1007'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('error.illegal_message_retry')
    },
    1008: {
        msg: 'Sync algorithm failed',
        description: t('server.error_code_1008'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('error.internal_error_please_refresh')
    },
    1009: {
        msg: 'rce_engine check_ready base_revision overstep',
        description: t('server.error_code_1009'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('error.doc.sync_error_retry')
    },
    1010: {
        msg: 'rce_engine check_ready base_revision too old',
        description: t('server.error_code_1010'),
        warningType: WARNING_TYPE.TOAST,
        warningText: t('error.version_should_upgrade')
    },
    1011: {
        msg: 'Member revision not synchronizeMember revision not synchronize',
        description: t('server.error_code_1011'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('error.doc.sync_error_retry')
    },
    1012: {
        msg: 'Have no edit permissions',
        description: t('server.error_code_1012'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('server.error_code_1012')
    },
    1013: {
        msg: 'Have no comment permissions',
        description: t('server.error_code_1013'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('server.error_code_1013')
    },
    1014: {
        msg: 'Fail to save the modification',
        description: t('server.error_code_1014'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: ''
    },
    1015: {
        msg: 'get redis lock failed（sheet）',
        description: t('server.error_code_1015'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('server.error_code_1015')
    },
    1016: {
        msg: 'Fail to modify the current application',
        description: t('server.error_code_1016'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('server.error_code_1016')
    },
    1017: {
        msg: 'Document length exceeds the system limit of %d character',
        description: t('server.error_code_1017'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('server.error_code_1017')
    },
    1018: {
        msg: 'Error on database query',
        description: t('server.error_code_1018'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('server.error_code_1018')
    },
    1019: {
        msg: 'The specified version of the document cannot be found',
        description: t('server.error_code_1019'),
        warningType: WARNING_TYPE.SILENCE,
        warningText: t('server.error_code_1019')
    },
    1020: {
        msg: t('server.error_code_1020'),
        description: t('server.error_code_1020_desc'),
        warningType: WARNING_TYPE.ALERT,
        warningText: t('server.error_code_1020_desc')
    },
    2001: {
        msg: t('error.cannot_get_note'),
        description: t('server.error_code_2001'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('error.jump_deleted_page')
    },
    2002: {
        msg: 'Server internal error',
        description: t('server.error_code_2002'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('server.error_code_2002')
    },
    2003: {
        msg: 'Histories can not be found',
        description: t('server.error_code_2003'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('server.error_code_2003')
    },
    2004: {
        msg: 'This type of history is not supported',
        description: t('server.error_code_2004'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('server.error_code_2004')
    },
    2005: {
        msg: 'The historical record is too old to restore',
        description: t('server.error_code_2005'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('server.error_code_2005')
    },
    21001: {
        msg: 'Index conflicts',
        description: t('server.error_code_21001'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('server.error_code_21001')
    },
    3001: {
        msg: 'Times of the interface access exceeds the day limit',
        description: t('server.error_code_3001'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('server.error_code_3001')
    },
    3002: {
        msg: 'Upload file size exceeds limit',
        description: t('server.error_code_3002'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('server.error_code_3002')
    },
    4002: {
        msg: 'duplicate record'
    },
    9998: {
        msg: 'Requests are too frequent',
        description: t('server.error_code_9998'),
        warningType: WARNING_TYPE.REDIRECT,
        warningText: t('server.error_code_9998')
    }
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 349 */,
/* 350 */,
/* 351 */,
/* 352 */,
/* 353 */,
/* 354 */,
/* 355 */,
/* 356 */,
/* 357 */,
/* 358 */,
/* 359 */,
/* 360 */,
/* 361 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.GlobalLikeDetailCommonController = exports.GlobalLikeCommonController = exports.LikeToggle = exports.OpenGlobalLikeDetailMethod = exports.GlobalLikeTeaEvent = exports.ReferTypeToFileTypeMap = undefined;

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(99);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _typeof2 = __webpack_require__(82);

var _typeof3 = _interopRequireDefault(_typeof2);

exports.makeSyncLikeCountPayload = makeSyncLikeCountPayload;
exports.getCurrentCreateTime = getCurrentCreateTime;
exports.fixCountUsingRecentLikes = fixCountUsingRecentLikes;
exports.collectGlobalLikeEvent = collectGlobalLikeEvent;

var _rxjs = __webpack_require__(781);

var _operators = __webpack_require__(797);

var _like = __webpack_require__(526);

var _$decorators = __webpack_require__(553);

var _like2 = __webpack_require__(388);

var _like3 = __webpack_require__(316);

var _raven = __webpack_require__(389);

var _tea = __webpack_require__(42);

var _tea2 = _interopRequireDefault(_tea);

var _encryption = __webpack_require__(164);

var _shakeHelper = __webpack_require__(823);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
        r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
        d;
    if ((typeof Reflect === "undefined" ? "undefined" : (0, _typeof3.default)(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    }return c > 3 && r && Object.defineProperty(target, key, r), r;
};
function makeSyncLikeCountPayload(data, referType, curUserId) {
    // 当前没有 curUserId，则不做同步
    if (curUserId === undefined) return null;
    var like = new _like.LikeCtor({
        id: data.id,
        userId: data.user_id,
        referType: referType,
        likeType: data.like_type,
        createTime: data.create_time,
        userName: data.user_name,
        userAvatarUrl: data.avatar_url
    });
    var action = void 0;
    if (data.type === _like2.LikeMessageDataType.LIKE) {
        action = _like2.SyncGlobalLikeCountAction.INCREASE;
    } else if (data.type === _like2.LikeMessageDataType.DISLIKE) {
        action = _like2.SyncGlobalLikeCountAction.DECREASE;
    }
    // 遇到未知的 action，则不做同步
    if (action === undefined) {
        return null;
    }
    return { action: action, curUserId: curUserId, like: like };
}
function getCurrentCreateTime() {
    return Math.floor(Date.now() / 1000);
}
/**
 * 强行矫正不合理的情况
 * - 由于分开了 /like/count/ 和 /like/data/ 两个api, 两个api的点赞数量可能不一致
 * - 优先以 /like/data 接口的数据为准
 * - 只有两个接口的数据都大于最近头像的数量DOC_RECENT_LIKE_MAX_AVATAR_NUM时，才采用 /like/count 接口的结果
 */
function fixCountUsingRecentLikes(count, recentLikes) {
    // 都大于最近头像的展示数量时，人数才依赖 count 的值
    if (recentLikes.size > _like3.DOC_RECENT_LIKE_MAX_AVATAR_NUM && count > _like3.DOC_RECENT_LIKE_MAX_AVATAR_NUM && recentLikes.size < count) {
        return count;
    }
    // 否则人数显示 recentLikes.size
    return recentLikes.size;
}
var ReferTypeToFileTypeMap = exports.ReferTypeToFileTypeMap = new Map([[_like2.LikeReferType.DOC, 'doc'], [_like2.LikeReferType.SHEET, 'sheet'], [_like2.LikeReferType.SLIDE, 'slide'], [_like2.LikeReferType.BITABLE, 'bitable']]);
var GlobalLikeTeaEvent = exports.GlobalLikeTeaEvent = undefined;
(function (GlobalLikeTeaEvent) {
    GlobalLikeTeaEvent["CLICK_LIKE_BUTTON"] = "client_praise_button";
    GlobalLikeTeaEvent["CLICK_RECENT_LIKE_LIST"] = "client_praise_icon";
    GlobalLikeTeaEvent["OPEN_LIKE_LIST"] = "show_praise_page";
})(GlobalLikeTeaEvent || (exports.GlobalLikeTeaEvent = GlobalLikeTeaEvent = {}));
var OpenGlobalLikeDetailMethod = exports.OpenGlobalLikeDetailMethod = undefined;
(function (OpenGlobalLikeDetailMethod) {
    OpenGlobalLikeDetailMethod["CLICK"] = "from_click";
    OpenGlobalLikeDetailMethod["LARK_INFO"] = "from_lark_info";
})(OpenGlobalLikeDetailMethod || (exports.OpenGlobalLikeDetailMethod = OpenGlobalLikeDetailMethod = {}));
function collectGlobalLikeEvent(event, targetInfo, options) {
    var commonOptions = {
        file_id: (0, _encryption.encryptTea)(targetInfo.token),
        file_type: ReferTypeToFileTypeMap.get(targetInfo.refer_type)
    };
    (0, _tea2.default)(event, Object.assign(commonOptions, options));
}

var LikeToggle = exports.LikeToggle = function () {
    function LikeToggle(props) {
        var _this = this;

        (0, _classCallCheck3.default)(this, LikeToggle);

        this.props = props;
        this.subscription = new _rxjs.Subscription();
        /** 本地是否点赞 */
        this.hasLiked$ = new _rxjs.Subject();
        /** 作为一个锁，保证同一时间只有一个 `toggle` 请求发出 */
        this.isThrottled = false;
        /** 储存被 `throttled` 的值 */
        this.throttledHasLiked = null;
        /** 表示发出了 `toggle` 请求 */
        this.toggle$ = new _rxjs.Subject();
        /** 表示用户不再操作点赞，可以准备 `clearHasLikedFromLocal` 了 */
        this.readyToClear$ = new _rxjs.Subject();
        this.newSub = this.hasLiked$.subscribe(function (hasLiked) {
            if (_this.isThrottled) {
                // 被 throttled 时：存下最新的 hasLiked 值
                _this.throttledHasLiked = hasLiked;
                return;
            }
            // throttle 上升沿：加锁
            _this.isThrottled = true;
            // 清空，表示暂时没有被 throttle 的值
            _this.throttledHasLiked = null;
            // 发出请求
            _this.newSub = (0, _rxjs.from)(_this.props.toggle(hasLiked)).subscribe(function () {
                return _this.onToggleDone(hasLiked);
            });
            // 切换到新的 readyToClear$ 流
            _this.toggle$.next();
        });
        // readyToClear 后，等待 clearDelay 的时间间隔，如果期间没有新的 toggle 请求，则认为已经稳定，可以 clearHasLikedFromLocal 了
        this.newSub = this.toggle$.pipe((0, _operators.switchMap)(function () {
            return _this.readyToClear$.pipe((0, _operators.delay)(_this.props.clearDelay));
        })).subscribe(function () {
            return _this.props.clearHasLikedFromLocal();
        });
    }

    (0, _createClass3.default)(LikeToggle, [{
        key: "onToggleDone",
        value: function onToggleDone(hasLikedBeforeToggle) {
            // throttle 下降沿：解锁
            this.isThrottled = false;
            // 如果有 throttle 过 hasLiked，而且节流的值和 toggle 前的值不同，则要发起新的 toggle 请求
            if (this.throttledHasLiked !== null && this.throttledHasLiked !== hasLikedBeforeToggle) {
                this.hasLiked$.next(this.throttledHasLiked);
            } else {
                // 否则，准备 clearHasLikedFromLocal
                this.readyToClear$.next();
            }
        }
    }, {
        key: "destroy",
        value: function destroy() {
            this.subscription.unsubscribe();
        }
    }, {
        key: "newSub",
        set: function set(sub) {
            this.subscription.add(sub);
        }
    }]);
    return LikeToggle;
}();

__decorate([(0, _$decorators.Bind)()], LikeToggle.prototype, "onToggleDone", null);

var GlobalLikeCommonController = exports.GlobalLikeCommonController = function () {
    function GlobalLikeCommonController(prompt, propsGetter) {
        var _this2 = this;

        (0, _classCallCheck3.default)(this, GlobalLikeCommonController);

        this.prompt = prompt;
        this.propsGetter = propsGetter;
        this.subscription = new _rxjs.Subscription();
        /** 请求结束到收到广播的时间差 */
        this.clearDelay = 1000;
        /** 负责同步本地和远端是否点赞的状态 */
        this.likeToggle = new LikeToggle(this);
        /** 表示一次 refreshAfterOnline（断网恢复时刷新）调用 */
        this.refreshAfterOnline$ = new _rxjs.Subject();
        this.handleGlobalLikeMessage$ = new _rxjs.Subject();
        this.handledGlobalLikeMessage = new Set();
        // 每次有新的 refreshAfterOnline，都重新等待 delayTime 后 refresh
        this.newSub = this.refreshAfterOnline$.pipe((0, _operators.debounce)(function (delayTime) {
            return (0, _rxjs.timer)(delayTime);
        })).subscribe(this.refresh);
        // 10s 后移除处理过的消息 id，释放内存
        this.newSub = this.handleGlobalLikeMessage$.subscribe(function (messageId) {
            return _this2.handledGlobalLikeMessage.add(messageId);
        });
        this.newSub = this.handleGlobalLikeMessage$.pipe((0, _operators.delay)(10 * 1000)).subscribe(function (messageId) {
            return _this2.handledGlobalLikeMessage.delete(messageId);
        });
    }

    (0, _createClass3.default)(GlobalLikeCommonController, [{
        key: "destroy",

        /**
         * 停止 controller 的活动，清除全局点赞状态
         */
        value: function destroy() {
            this.likeToggle.destroy();
            this.subscription.unsubscribe();
            this.props.clearGlobalLikeState();
        }
        /**
         * 刷新点赞数、我有没有点赞、最近点赞列表
         */

    }, {
        key: "refresh",
        value: function refresh() {
            var _props = this.props,
                targetInfo = _props.targetInfo,
                fetchRecentGlobalLikeList = _props.fetchRecentGlobalLikeList,
                fetchGlobalLikeCount = _props.fetchGlobalLikeCount;
            // 没有文档 token 时不做刷新

            if (!targetInfo.token) return;
            // 拉取点赞数、我有没有点赞
            fetchGlobalLikeCount(targetInfo);
            // 拉最近点赞列表
            fetchRecentGlobalLikeList(Object.assign({}, targetInfo, { page_size: _like3.DOC_RECENT_LIKE_SIZE }));
        }
    }, {
        key: "refreshAfterOnline",
        value: function refreshAfterOnline() {
            var delayTime = Math.random() * 10 * 1000;
            this.refreshAfterOnline$.next(delayTime);
        }
        /**
         * 请求切换是否点赞
         */

    }, {
        key: "toggleHasLiked",
        value: function toggleHasLiked() {
            if (this.handleOffline()) return;
            var _props2 = this.props,
                targetInfo = _props2.targetInfo,
                hasLiked = _props2.hasLiked;

            collectGlobalLikeEvent(GlobalLikeTeaEvent.CLICK_LIKE_BUTTON, targetInfo, undefined);
            var newHasLiked = !hasLiked;
            newHasLiked && (0, _shakeHelper.triggerShake)('heavy');
            this.props.setHasLikedFromLocal(newHasLiked);
            this.likeToggle.hasLiked$.next(newHasLiked);
        }
    }, {
        key: "toggle",
        value: function () {
            var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(hasLiked) {
                return _regenerator2.default.wrap(function _callee$(_context) {
                    while (1) {
                        switch (_context.prev = _context.next) {
                            case 0:
                                if (!hasLiked) {
                                    _context.next = 5;
                                    break;
                                }

                                _context.next = 3;
                                return this.postLike();

                            case 3:
                                _context.next = 7;
                                break;

                            case 5:
                                _context.next = 7;
                                return this.postDislike();

                            case 7:
                            case "end":
                                return _context.stop();
                        }
                    }
                }, _callee, this);
            }));

            function toggle(_x) {
                return _ref.apply(this, arguments);
            }

            return toggle;
        }()
    }, {
        key: "clearHasLikedFromLocal",
        value: function clearHasLikedFromLocal() {
            this.props.setHasLikedFromLocal(null);
        }
        /**
         * 处理服务端的点赞推送
         * @param data `message.data`
         */

    }, {
        key: "handleGlobalLikeMessage",
        value: function handleGlobalLikeMessage(data) {
            var _props3 = this.props,
                targetInfo = _props3.targetInfo,
                syncGlobalLike = _props3.syncGlobalLike,
                curUserId = _props3.curUserId;

            var messageId = this.getMessageId(data);
            if (this.handledGlobalLikeMessage.has(messageId)) return;
            var payload = makeSyncLikeCountPayload(data, targetInfo.refer_type, curUserId);
            if (!payload) return;
            // 有 payload 才同步到本地
            syncGlobalLike(Object.assign({}, targetInfo, payload));
            this.handleGlobalLikeMessage$.next(messageId);
        }
    }, {
        key: "getMessageId",
        value: function getMessageId(data) {
            return data.type + "-" + data.id;
        }
        /**
         * 返回 true 表示处理了离线
         */

    }, {
        key: "handleOffline",
        value: function handleOffline() {
            if (!this.isOnline) {
                this.prompt.error(t('like.network_error'));
                return true;
            }
            return false;
        }
    }, {
        key: "postLike",
        value: function () {
            var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {
                var _props4, targetInfo, curUserId, curUser, userName, userAvatarUrl;

                return _regenerator2.default.wrap(function _callee2$(_context2) {
                    while (1) {
                        switch (_context2.prev = _context2.next) {
                            case 0:
                                _context2.prev = 0;
                                _props4 = this.props, targetInfo = _props4.targetInfo, curUserId = _props4.curUserId, curUser = _props4.curUser;
                                userName = curUser.get('name');
                                userAvatarUrl = curUser.get('avatar_url');
                                _context2.next = 6;
                                return this.props.postGlobalLike(Object.assign({}, targetInfo, { curUserId: curUserId, userName: userName, userAvatarUrl: userAvatarUrl }));

                            case 6:
                                return _context2.abrupt("return", _context2.sent);

                            case 9:
                                _context2.prev = 9;
                                _context2.t0 = _context2["catch"](0);

                                (0, _raven.captureException)(_context2.t0);
                                return _context2.abrupt("return", this.prompt.error(this.getPromptText(_context2.t0, t('like.post_like_error'))));

                            case 13:
                            case "end":
                                return _context2.stop();
                        }
                    }
                }, _callee2, this, [[0, 9]]);
            }));

            function postLike() {
                return _ref2.apply(this, arguments);
            }

            return postLike;
        }()
    }, {
        key: "postDislike",
        value: function () {
            var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3() {
                var _props5, targetInfo, curUserId;

                return _regenerator2.default.wrap(function _callee3$(_context3) {
                    while (1) {
                        switch (_context3.prev = _context3.next) {
                            case 0:
                                _context3.prev = 0;
                                _props5 = this.props, targetInfo = _props5.targetInfo, curUserId = _props5.curUserId;
                                _context3.next = 4;
                                return this.props.postGlobalDislike(Object.assign({}, targetInfo, { curUserId: curUserId }));

                            case 4:
                                return _context3.abrupt("return", _context3.sent);

                            case 7:
                                _context3.prev = 7;
                                _context3.t0 = _context3["catch"](0);

                                (0, _raven.captureException)(_context3.t0);
                                return _context3.abrupt("return", this.prompt.error(this.getPromptText(_context3.t0, t('like.post_dislike_error'))));

                            case 11:
                            case "end":
                                return _context3.stop();
                        }
                    }
                }, _callee3, this, [[0, 7]]);
            }));

            function postDislike() {
                return _ref3.apply(this, arguments);
            }

            return postDislike;
        }()
    }, {
        key: "getPromptText",
        value: function getPromptText(e, defaultText) {
            if (e) {
                if (e.code === '-8') {
                    return t('like.network_error');
                } else if (e.code === 429) {
                    return t('like.too_frequent_error');
                }
            }
            return defaultText;
        }
    }, {
        key: "newSub",
        set: function set(sub) {
            this.subscription.add(sub);
        }
    }, {
        key: "props",
        get: function get() {
            return this.propsGetter.getProps();
        }
    }, {
        key: "isOnline",
        get: function get() {
            return this.propsGetter.getIsOnline();
        }
    }]);
    return GlobalLikeCommonController;
}();

__decorate([(0, _$decorators.Bind)()], GlobalLikeCommonController.prototype, "refresh", null);
__decorate([(0, _$decorators.Bind)()], GlobalLikeCommonController.prototype, "refreshAfterOnline", null);
__decorate([(0, _$decorators.Bind)()], GlobalLikeCommonController.prototype, "toggleHasLiked", null);
__decorate([(0, _$decorators.Bind)()], GlobalLikeCommonController.prototype, "handleGlobalLikeMessage", null);

var GlobalLikeDetailCommonController = exports.GlobalLikeDetailCommonController = function () {
    function GlobalLikeDetailCommonController(propsGetter) {
        (0, _classCallCheck3.default)(this, GlobalLikeDetailCommonController);

        this.propsGetter = propsGetter;
    }

    (0, _createClass3.default)(GlobalLikeDetailCommonController, [{
        key: "destroy",
        value: function destroy() {
            return;
        }
        /**
         * 拉取更多点赞
         */

    }, {
        key: "fetchMoreLikes",
        value: function () {
            var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4() {
                var _props6, targetInfo, isLoadingLikes, lastLikeId;

                return _regenerator2.default.wrap(function _callee4$(_context4) {
                    while (1) {
                        switch (_context4.prev = _context4.next) {
                            case 0:
                                _props6 = this.props, targetInfo = _props6.targetInfo, isLoadingLikes = _props6.isLoadingLikes, lastLikeId = _props6.lastLikeId;

                                if (!isLoadingLikes) {
                                    _context4.next = 3;
                                    break;
                                }

                                return _context4.abrupt("return");

                            case 3:
                                return _context4.abrupt("return", this.props.fetchGlobalLikeList(Object.assign({}, targetInfo, {
                                    last_like_id: lastLikeId,
                                    page_size: _like3.DOC_LIKE_PAGE_SIZE
                                })));

                            case 4:
                            case "end":
                                return _context4.stop();
                        }
                    }
                }, _callee4, this);
            }));

            function fetchMoreLikes() {
                return _ref4.apply(this, arguments);
            }

            return fetchMoreLikes;
        }()
    }, {
        key: "openDetail",
        value: function openDetail(targetInfo, method) {
            collectGlobalLikeEvent(GlobalLikeTeaEvent.OPEN_LIKE_LIST, targetInfo, { praise_page_source: method });
            this.props.openGlobalLikeDetail();
        }
    }, {
        key: "closeDetail",
        value: function closeDetail() {
            this.props.closeGlobalLikeDetail();
        }
    }, {
        key: "props",
        get: function get() {
            return this.propsGetter.getProps();
        }
    }]);
    return GlobalLikeDetailCommonController;
}();

__decorate([(0, _$decorators.Bind)()], GlobalLikeDetailCommonController.prototype, "fetchMoreLikes", null);
__decorate([(0, _$decorators.Bind)()], GlobalLikeDetailCommonController.prototype, "openDetail", null);
__decorate([(0, _$decorators.Bind)()], GlobalLikeDetailCommonController.prototype, "closeDetail", null);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 362 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setCreateDocCheckDone = exports.setUndoRedoGuideStateOn = exports.checkUndoRedoGuideState = exports.setMentionGuideReady = exports.setHomeTutorialState = exports.checkHomeTutorialState = exports.setHomeTutorialReady = exports.setSharedDocGuideReady = exports.prepareSharedDocGuide = exports.setCreateDocGuideReady = exports.prepareCreateDocGuide = exports.cancelHomeGuide = exports.startHomeGuide = exports.closeHomeGuide = exports.prepareHomeGuide = exports.fetchLatestGuide = undefined;

var _$constants = __webpack_require__(5);

var fetchLatestGuide = exports.fetchLatestGuide = function fetchLatestGuide() {
    return {
        type: _$constants.actionTypes.onboarding.FETCH_LATEST_GUIDE
    };
};
var prepareHomeGuide = exports.prepareHomeGuide = function prepareHomeGuide() {
    return {
        type: _$constants.actionTypes.onboarding.HOME_GUIDE_PREPARE
    };
};
var closeHomeGuide = exports.closeHomeGuide = function closeHomeGuide() {
    return {
        type: _$constants.actionTypes.onboarding.HOME_GUIDE_CLOSE
    };
};
var startHomeGuide = exports.startHomeGuide = function startHomeGuide() {
    return {
        type: _$constants.actionTypes.onboarding.HOME_GUIDE_START
    };
};
var cancelHomeGuide = exports.cancelHomeGuide = function cancelHomeGuide() {
    return {
        type: _$constants.actionTypes.onboarding.HOME_GUIDE_CANCEL
    };
};
var prepareCreateDocGuide = exports.prepareCreateDocGuide = function prepareCreateDocGuide() {
    return {
        type: _$constants.actionTypes.onboarding.CREATE_DOC_GUIDE_PREPARE
    };
};
var setCreateDocGuideReady = exports.setCreateDocGuideReady = function setCreateDocGuideReady(on) {
    return {
        type: _$constants.actionTypes.onboarding.CREATE_DOC_GUIDE_READY,
        payload: { on: on }
    };
};
var prepareSharedDocGuide = exports.prepareSharedDocGuide = function prepareSharedDocGuide() {
    return {
        type: _$constants.actionTypes.onboarding.SHARED_DOC_GUIDE_PREPARE
    };
};
var setSharedDocGuideReady = exports.setSharedDocGuideReady = function setSharedDocGuideReady(on) {
    return {
        type: _$constants.actionTypes.onboarding.SHARED_DOC_GUIDE_READY,
        payload: { on: on }
    };
};
var setHomeTutorialReady = exports.setHomeTutorialReady = function setHomeTutorialReady(on) {
    var bannerOn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    return {
        type: _$constants.actionTypes.onboarding.HOME_TUTORIAL_READY,
        payload: { on: on, bannerOn: bannerOn }
    };
};
var checkHomeTutorialState = exports.checkHomeTutorialState = function checkHomeTutorialState() {
    return {
        type: _$constants.actionTypes.onboarding.HOME_TUTORIAL_CHECK_STATE
    };
};
var setHomeTutorialState = exports.setHomeTutorialState = function setHomeTutorialState(state) {
    return {
        type: _$constants.actionTypes.onboarding.HOME_TUTORIAL_SET_STATE,
        payload: state
    };
};
var setMentionGuideReady = exports.setMentionGuideReady = function setMentionGuideReady(on) {
    var bannerOn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    return {
        type: _$constants.actionTypes.onboarding.MENTION_GUIDE_READY,
        payload: { on: on, bannerOn: bannerOn }
    };
};
var checkUndoRedoGuideState = exports.checkUndoRedoGuideState = function checkUndoRedoGuideState() {
    return {
        type: _$constants.actionTypes.onboarding.UNDO_REDO_GUIDE_CHECK_STATE
    };
};
var setUndoRedoGuideStateOn = exports.setUndoRedoGuideStateOn = function setUndoRedoGuideStateOn() {
    return {
        type: _$constants.actionTypes.onboarding.UNDO_REDO_GUIDE_SET_ON
    };
};
var setCreateDocCheckDone = exports.setCreateDocCheckDone = function setCreateDocCheckDone() {
    return {
        type: _$constants.actionTypes.onboarding.CREATE_DOC_CHECK_DONE
    };
};

/***/ }),
/* 363 */,
/* 364 */,
/* 365 */,
/* 366 */,
/* 367 */,
/* 368 */,
/* 369 */,
/* 370 */,
/* 371 */,
/* 372 */,
/* 373 */,
/* 374 */,
/* 375 */,
/* 376 */,
/* 377 */,
/* 378 */,
/* 379 */,
/* 380 */,
/* 381 */,
/* 382 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var SHOW_FORMULA_LIST = exports.SHOW_FORMULA_LIST = 'SHOW_FORMULA_LIST';
var HIDE_FORMULA_LIST = exports.HIDE_FORMULA_LIST = 'HIDE_FORMULA_LIST';
var SHOW_FINDBAR = exports.SHOW_FINDBAR = 'SHOW_FINDBAR';
var HIDE_FINDBAR = exports.HIDE_FINDBAR = 'HIDE_FINDBAR';
var FOCUS_FINDBAR = exports.FOCUS_FINDBAR = 'FOCUS_FINDBAR';
var FREEZE_SPREAD_TOGGLE = exports.FREEZE_SPREAD_TOGGLE = 'FREEZE_SPREAD_TOGGLE';
var UPDATE_SHEET_STATUS = exports.UPDATE_SHEET_STATUS = 'UPDATE_SHEET_STATUS';
var SET_ACTIVE_SHEETID = exports.SET_ACTIVE_SHEETID = 'SET_ACTIVE_SHEETID';
var SHOW_HYPER_LINK_EDITOR = exports.SHOW_HYPER_LINK_EDITOR = 'SHOW_HYPER_LINK_EDITOR';
var HIDE_HYPER_LINK_EDITOR = exports.HIDE_HYPER_LINK_EDITOR = 'HIDE_HYPER_LINK_EDITOR';
var FORMAT_PAINTER_TOGGLE = exports.FORMAT_PAINTER_TOGGLE = 'FORMAT_PAINTER_TOGGLE';
var TOGGLE_COMMENT_PANEL = exports.TOGGLE_COMMENT_PANEL = 'TOGGLE_COMMENT_PANEL';
var ADD_SHEET_COMMENT = exports.ADD_SHEET_COMMENT = 'ADD_SHEET_COMMENT';
var PULL_SHEET_COMMENT = exports.PULL_SHEET_COMMENT = 'PULL_SHEET_COMMENT';
var PULL_SHEET_COMMENT_SUCCESS = exports.PULL_SHEET_COMMENT_SUCCESS = 'PULL_SHEET_COMMENT_SUCCESS';
var PULL_SHEET_COMMENT_FAIL = exports.PULL_SHEET_COMMENT_FAIL = 'PULL_SHEET_COMMENT_FAIL';
var ADD_SHEET_COMMENT_REPLY = exports.ADD_SHEET_COMMENT_REPLY = 'ADD_SHEET_COMMENT_REPLY';
var ADD_SHEET_COMMENT_REPLY_SUCCESS = exports.ADD_SHEET_COMMENT_REPLY_SUCCESS = 'ADD_SHEET_COMMENT_REPLY_SUCCESS';
var RESOLVE_SHEET_COMMENT = exports.RESOLVE_SHEET_COMMENT = 'RESOLVE_SHEET_COMMENT';
var RESOLVE_SHEET_COMMENT_SUCCESS = exports.RESOLVE_SHEET_COMMENT_SUCCESS = 'RESOLVE_SHEET_COMMENT_SUCCESS';
var DELETE_SHEET_REPLY_COMMENT = exports.DELETE_SHEET_REPLY_COMMENT = 'DELETE_SHEET_REPLY_COMMENT';
var DELETE_SHEET_COMMENT = exports.DELETE_SHEET_COMMENT = 'DELETE_SHEET_COMMENT';
var UPDATE_SHEET_REPLY_COMMENT = exports.UPDATE_SHEET_REPLY_COMMENT = 'UPDATE_SHEET_REPLY_COMMENT';
var UPDATE_SHEET_REPLY_COMMENT_SUCCESS = exports.UPDATE_SHEET_REPLY_COMMENT_SUCCESS = 'UPDATE_SHEET_REPLY_COMMENT_SUCCESS';
var UPDATE_COMMENT_DATA = exports.UPDATE_COMMENT_DATA = 'UPDATE_COMMENT_DATA';
var REOPEN_SHEET_COMMENT = exports.REOPEN_SHEET_COMMENT = 'REOPEN_SHEET_COMMENT';
var TOGGLE_COMMENT_MASK = exports.TOGGLE_COMMENT_MASK = 'TOGGLE_COMMENT_MASK';
var CLEAN_COMMENT = exports.CLEAN_COMMENT = 'CLEAN_COMMENT';
var SHOW_HISTORY = exports.SHOW_HISTORY = 'SHOW_HISTORY';
var HIDE_HISTORY = exports.HIDE_HISTORY = 'HIDE_HISTORY';
var TOGGLE_HISTORY = exports.TOGGLE_HISTORY = 'TOGGLE_HISTORY';
var SHOW_DROPDOWN_MENU = exports.SHOW_DROPDOWN_MENU = 'SHOW_DROPDOWN_MENU';
var HIDE_DROPDOWN_MENU = exports.HIDE_DROPDOWN_MENU = 'HIDE_DROPDOWN_MENU';
var SNAPSHOT_META = exports.SNAPSHOT_META = 'SNAPSHOT_META';
var SNAPSHOT_LOADING = exports.SNAPSHOT_LOADING = 'SNAPSHOT_LOADING';
var SNAPSHOT_LOADED = exports.SNAPSHOT_LOADED = 'SNAPSHOT_LOADED';
var LOAD_ROW_DATA = exports.LOAD_ROW_DATA = 'LOAD_ROW_DATA';
var RESET_SPREAD_STATE = exports.RESET_SPREAD_STATE = 'RESET_SPREAD_STATE';
var CHANNEL_ONLINE = exports.CHANNEL_ONLINE = 'CHANNEL_ONLINE';
var CHANNEL_OFFLINE = exports.CHANNEL_OFFLINE = 'CHANNEL_OFFLINE';
var SET_CELL_COORD = exports.SET_CELL_COORD = 'SET_CELL_COORD';
var SET_FORMULA = exports.SET_FORMULA = 'SET_FORMULA';
var SHOW_FILTER_MENU = exports.SHOW_FILTER_MENU = 'SHOW_FILTER_MENU';
var SET_EMBED_SHEET_COMMENT_FUNC = exports.SET_EMBED_SHEET_COMMENT_FUNC = 'SET_EMBED_SHEET_COMMENT_FUNC';
var SET_EMBED_TOOLBAR_VISIBLE = exports.SET_EMBED_TOOLBAR_VISIBLE = 'SET_EMBED_TOOLBAR_VISIBLE';
var SET_EMBED_SHEET_ALLOW_COMMENT = exports.SET_EMBED_SHEET_ALLOW_COMMENT = 'SET_EMBED_SHEET_ALLOW_COMMENT';
var EXPORT_FILE = exports.EXPORT_FILE = 'EXPORT_FILE';
var TOGGLE_NAV_BAR = exports.TOGGLE_NAV_BAR = 'TOGGLE_NAV_BAR';
var SET_SHEET_CLIENT_VARS = exports.SET_SHEET_CLIENT_VARS = 'SET_SHEET_CLIENT_VARS';
var RESET_SHEET_CLIENT_VARS = exports.RESET_SHEET_CLIENT_VARS = 'RESET_SHEET_CLIENT_VARS';
var INIT_SHEET_CHART = exports.INIT_SHEET_CHART = 'INIT_SHEET_CHART';
var SET_SHEET_CHART = exports.SET_SHEET_CHART = 'SET_SHEET_CHART';
var DEL_SHEET_CHART = exports.DEL_SHEET_CHART = 'DEL_SHEET_CHART';
var SET_ACTIVE_CHART = exports.SET_ACTIVE_CHART = 'SET_ACTIVE_CHART';
var CLEAR_ACTIVE_CHART = exports.CLEAR_ACTIVE_CHART = 'CLEAR_ACTIVE_CHART';
var HIDE_CHART_PANEL = exports.HIDE_CHART_PANEL = 'HIDE_CHART_PANEL';
var SHOW_CHART_PANEL = exports.SHOW_CHART_PANEL = 'SHOW_CHART_PANEL';
var TOGGLE_CHART_PANEL = exports.TOGGLE_CHART_PANEL = 'TOGGLE_CHART_PANEL';
var CHANGE_CHART_OPTIONS = exports.CHANGE_CHART_OPTIONS = 'CHANGE_CHART_OPTIONS';
var CHANGE_SHEET_LOCKED_STATUS = exports.CHANGE_SHEET_LOCKED_STATUS = 'CHANGE_SHEET_LOCKED_STATUS';
var SET_SHEET_PERMISSIONS = exports.SET_SHEET_PERMISSIONS = 'SET_SHEET_PERMISSIONS';
var SHEET_CONTENT_VISIBLE = exports.SHEET_CONTENT_VISIBLE = 'SHEET_CONTENT_VISIBLE';

/***/ }),
/* 383 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var LIST_VIEW_DEFAULT_ROW_HEIGHT = exports.LIST_VIEW_DEFAULT_ROW_HEIGHT = 64;
var isLangJa = navigator.language === 'ja';
var FONT_FAMILY = exports.FONT_FAMILY = isLangJa ? ['Hiragino Sans', 'Yu Gothic', 'PingFangSC-Regular', 'Microsoft YaHei', 'Helvetica Neue', 'Myriad Pro', 'Lucida Grande', 'sans-serif'].join() : ['PingFangSC-Regular', 'Microsoft YaHei', 'Helvetica Neue', 'Myriad Pro', 'Hiragino Sans', 'Yu Gothic', 'Lucida Grande', 'sans-serif'].join();
var DOC_FONT_FAMILY = exports.DOC_FONT_FAMILY = isLangJa ? ['Helvetica Neue', 'Hiragino Sans', 'Yu Gothic', '-apple-system', 'BlinkMacSystemFont', 'PingFang SC', 'Roboto', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'Myriad Pro', 'Lucida Grande', 'sans-serif'].join() : ['Helvetica Neue', '-apple-system', 'BlinkMacSystemFont', 'PingFang SC', 'Roboto', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'Myriad Pro', 'Hiragino Sans', 'Yu Gothic', 'Lucida Grande', 'sans-serif'].join();
var SUITE_HELP_BTN_GROUPS = exports.SUITE_HELP_BTN_GROUPS = undefined;
(function (SUITE_HELP_BTN_GROUPS) {
    SUITE_HELP_BTN_GROUPS[SUITE_HELP_BTN_GROUPS["BTN_SIZE"] = 34] = "BTN_SIZE";
})(SUITE_HELP_BTN_GROUPS || (exports.SUITE_HELP_BTN_GROUPS = SUITE_HELP_BTN_GROUPS = {}));
var CLOSE_TYPES = exports.CLOSE_TYPES = undefined;
(function (CLOSE_TYPES) {
    CLOSE_TYPES["ABORT"] = "ABORT";
    CLOSE_TYPES["COMPLETE"] = "COMPLETE";
    CLOSE_TYPES["TRANSFER"] = "TRANSFER";
})(CLOSE_TYPES || (exports.CLOSE_TYPES = CLOSE_TYPES = {}));
var MODAL_TYPES = exports.MODAL_TYPES = undefined;
(function (MODAL_TYPES) {
    MODAL_TYPES["MOVE"] = "MOVE";
    MODAL_TYPES["CLONE"] = "CLONE";
    MODAL_TYPES["COPY"] = "COPY";
    MODAL_TYPES["SHARE"] = "SHARE";
    MODAL_TYPES["RENAME"] = "RENAME";
    MODAL_TYPES["CREATE_FOLDER"] = "CREATE_FOLDER";
    MODAL_TYPES["CREATE_SHARE_FOLDER"] = "CREATE_SHARE_FOLDER";
    MODAL_TYPES["EDIT_SHARE_FOLDER_INFO"] = "EDIT_SHARE_FOLDER_INFO";
    MODAL_TYPES["DELETE_OR_REMOVE"] = "DELETE_OR_REMOVE";
    MODAL_TYPES["MOVE_TO_PERSONAL_FOLDER"] = "MOVE_TO_PERSONAL_FOLDER";
    MODAL_TYPES["MOVE_TO_SHARE_FOLDER"] = "MOVE_TO_SHARE_FOLDER";
    MODAL_TYPES["DELETE"] = "DELETE";
})(MODAL_TYPES || (exports.MODAL_TYPES = MODAL_TYPES = {}));
var modalTypesArr = exports.modalTypesArr = Object.values(MODAL_TYPES);
var toggleActionTypes = exports.toggleActionTypes = {
    TOGGLE_PIN: 'TOGGLE_PIN',
    TOGGLE_STAR: 'TOGGLE_STAR'
};
var toggleTypesArr = exports.toggleTypesArr = Object.values(toggleActionTypes);
var toggleTypePrefix = exports.toggleTypePrefix = 'TOGGLE_';
var suiteFolderSharedActionTypes = exports.suiteFolderSharedActionTypes = Object.assign({
    NEWTABOPEN: 'NEWTABOPEN',
    COPY: 'COPY',
    SHARE: 'SHARE',
    MOVE: 'MOVE',
    DELETE_OR_REMOVE: 'DELETE_OR_REMOVE',
    RESTORE: 'RESTORE',
    DELETE: 'DELETE',
    REMOVE: 'REMOVE'
}, toggleActionTypes);
var suiteActionTypes = exports.suiteActionTypes = {
    CLONE: 'CLONE',
    PRINT: 'PRINT',
    EXPORT: 'EXPORT',
    EXPORT_CSV: 'EXPORT_CSV',
    HISTORY: 'HISTORY',
    COMMENT_HISTORY: 'COMMENT_HISTORY',
    ABOUT_US: 'ABOUT_US'
};
var folderActionTypes = exports.folderActionTypes = {
    RENAME: 'RENAME'
};
var explorerActionTypes = exports.explorerActionTypes = {
    CREATE: 'CREATE',
    IMPORT: 'IMPORT'
};
var menuActionTypes = exports.menuActionTypes = Object.assign({}, suiteFolderSharedActionTypes, suiteActionTypes, folderActionTypes, explorerActionTypes);
var MENU_TYPE = exports.MENU_TYPE = undefined;
(function (MENU_TYPE) {
    MENU_TYPE["EXPLORER_GLOBAL_CONTEXT"] = "EXPLORER_GLOBAL_CONTEXT";
    MENU_TYPE["EXPLORER_FILE_DROPDOWN"] = "EXPLORER_FILE_DROPDOWN";
    MENU_TYPE["EXPLORER_FILE_CONTEXT"] = "EXPLORER_FILE_CONTEXT";
    MENU_TYPE["EXPLORER_CREATE_DROPDOWN"] = "EXPLORER_CREATE_DROPDOWN";
    MENU_TYPE["NAVIGATION_BAR_DROPDOWN"] = "NAVIGATION_BAR_DROPDOWN";
    MENU_TYPE["MULTI_SELECT_OPERATION_PANEL"] = "MULTI_SELECT_OPERATION_PANEL";
})(MENU_TYPE || (exports.MENU_TYPE = MENU_TYPE = {}));
var MENU_ITEM = exports.MENU_ITEM = 'item';
var MENU_DIVIDER = exports.MENU_DIVIDER = 'divider';
var STAR_SOURCE = exports.STAR_SOURCE = undefined;
(function (STAR_SOURCE) {
    STAR_SOURCE["FILELIST_ITEM_STAR"] = "FILELIST_ITEM_STAR";
    STAR_SOURCE["SUITE_HEADER_TITLE_STAR"] = "SUITE_HEADER_TITLE_STAR";
    STAR_SOURCE["SUITE_HEADER_MENU"] = "SUITE_HEADER_MENU";
})(STAR_SOURCE || (exports.STAR_SOURCE = STAR_SOURCE = {}));

/***/ }),
/* 384 */,
/* 385 */,
/* 386 */,
/* 387 */,
/* 388 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
/**
 * 给什么东西点赞
 *
 * 定义文档：https://docs.bytedance.net/doc/PcVqgBgmGQRjVYWpvZUS4d#CiqKG0
 */
var LikeReferType = exports.LikeReferType = undefined;
(function (LikeReferType) {
    LikeReferType[LikeReferType["DOC"] = 1] = "DOC";
    LikeReferType[LikeReferType["SHEET"] = 2] = "SHEET";
    LikeReferType[LikeReferType["SLIDE"] = 3] = "SLIDE";
    LikeReferType[LikeReferType["BITABLE"] = 4] = "BITABLE";
    LikeReferType[LikeReferType["COMMENT"] = 5] = "COMMENT";
})(LikeReferType || (exports.LikeReferType = LikeReferType = {}));
/**
 * 定义文档：https://docs.bytedance.net/doc/PcVqgBgmGQRjVYWpvZUS4d#sQJmu2
 */
var LikeType = exports.LikeType = undefined;
(function (LikeType) {
    LikeType[LikeType["COMMON"] = 1] = "COMMON";
})(LikeType || (exports.LikeType = LikeType = {}));
var SyncGlobalLikeCountAction = exports.SyncGlobalLikeCountAction = undefined;
(function (SyncGlobalLikeCountAction) {
    /** 有人点赞 */
    SyncGlobalLikeCountAction[SyncGlobalLikeCountAction["INCREASE"] = 0] = "INCREASE";
    /** 有人取消点赞 */
    SyncGlobalLikeCountAction[SyncGlobalLikeCountAction["DECREASE"] = 1] = "DECREASE";
})(SyncGlobalLikeCountAction || (exports.SyncGlobalLikeCountAction = SyncGlobalLikeCountAction = {}));
var LikeMessageDataType = exports.LikeMessageDataType = undefined;
(function (LikeMessageDataType) {
    LikeMessageDataType["LIKE"] = "LIKE";
    LikeMessageDataType["DISLIKE"] = "DISLIKE";
})(LikeMessageDataType || (exports.LikeMessageDataType = LikeMessageDataType = {}));

/***/ }),
/* 389 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.reportAPIError = reportAPIError;
exports.captureException = captureException;
/**
 * 向Raven报告api错误
 * 目前只处理400-500之间，这么做的是因为500以上后端可以自己检测
 *
 * @param {object} error - 错误信息
 * @param {object} callAPI - 请求体
 */
function reportAPIError(error, callAPI) {
  if (!window.Raven || !window.Raven.captureException) {
    return;
  }

  var res = error && error.response || error;

  if (!res || !res.status) {
    return;
  }

  if (Number.parseInt(res.status, 10) < 500) {
    return;
  }

  window.Raven.captureException('API:' + res.status + ':' + callAPI.url, {
    level: 'fatal',
    fingerprint: ['API', '' + callAPI.url],
    tags: {
      from: 'api'
    },
    extra: {
      method: callAPI.method || 'GET'
    }
  });
}

function captureException(e) {
  var extra = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  console.error(e);
  if (!window.Raven) return;
  window.Raven.captureException(e, {
    tags: {
      scm: JSON.stringify(window.scm)
    },
    extra: extra
  });
}

/***/ }),
/* 390 */,
/* 391 */,
/* 392 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var IsSharedRootFolder = exports.IsSharedRootFolder = undefined;
(function (IsSharedRootFolder) {
    IsSharedRootFolder[IsSharedRootFolder["yes"] = 1] = "yes";
    IsSharedRootFolder[IsSharedRootFolder["no"] = 0] = "no";
})(IsSharedRootFolder || (exports.IsSharedRootFolder = IsSharedRootFolder = {}));
var IsDeleted = exports.IsDeleted = undefined;
(function (IsDeleted) {
    IsDeleted[IsDeleted["yes"] = 1] = "yes";
    IsDeleted[IsDeleted["no"] = 0] = "no";
})(IsDeleted || (exports.IsDeleted = IsDeleted = {}));
var ShareFolderHiddenType = exports.ShareFolderHiddenType = undefined;
(function (ShareFolderHiddenType) {
    ShareFolderHiddenType[ShareFolderHiddenType["FetchVisible"] = 0] = "FetchVisible";
    ShareFolderHiddenType[ShareFolderHiddenType["FetchHidden"] = 1] = "FetchHidden";
})(ShareFolderHiddenType || (exports.ShareFolderHiddenType = ShareFolderHiddenType = {}));

/***/ }),
/* 393 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(99);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _getStore = __webpack_require__(1217);

var _getStore2 = _interopRequireDefault(_getStore);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Storage = {
  /**
   * 获取一个 key 对应 string value
   * @param  {string}  key  example: 'bytedance_storage.user.name'
   * @return {Promise<string|null>}
   */
  getItem: function getItem(key) {
    var _this = this;

    return (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
      var secureStorage;
      return _regenerator2.default.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return (0, _getStore2.default)();

            case 2:
              secureStorage = _context.sent;
              return _context.abrupt('return', secureStorage.getItem(key));

            case 4:
            case 'end':
              return _context.stop();
          }
        }
      }, _callee, _this);
    }))();
  },

  /**
   * 设置一个 key 对应的 string value
   * @param {string}  key   example: 'bytedance_storage.user.name'
   * @param {string}  data  example: 'jinlei'
   */
  setItem: function setItem(key, data) {
    var _this2 = this;

    return (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {
      var secureStorage;
      return _regenerator2.default.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return (0, _getStore2.default)();

            case 2:
              secureStorage = _context2.sent;
              return _context2.abrupt('return', secureStorage.setItem(key, data));

            case 4:
            case 'end':
              return _context2.stop();
          }
        }
      }, _callee2, _this2);
    }))();
  },

  /**
   * 删除一个key
   * @param {string} key
   */
  removeItem: function removeItem(key) {
    var _this3 = this;

    return (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3() {
      var secureStorage;
      return _regenerator2.default.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return (0, _getStore2.default)();

            case 2:
              secureStorage = _context3.sent;
              return _context3.abrupt('return', secureStorage.removeItem(key));

            case 4:
            case 'end':
              return _context3.stop();
          }
        }
      }, _callee3, _this3);
    }))();
  },
  clear: function clear() {
    var _this4 = this;

    return (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4() {
      var secureStorage;
      return _regenerator2.default.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return (0, _getStore2.default)();

            case 2:
              secureStorage = _context4.sent;

              secureStorage.clear();

            case 4:
            case 'end':
              return _context4.stop();
          }
        }
      }, _callee4, _this4);
    }))();
  },
  getVersion: function getVersion() {
    var _this5 = this;

    return (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee5() {
      var secureStorage;
      return _regenerator2.default.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.next = 2;
              return (0, _getStore2.default)();

            case 2:
              secureStorage = _context5.sent;
              return _context5.abrupt('return', secureStorage.version);

            case 4:
            case 'end':
              return _context5.stop();
          }
        }
      }, _callee5, _this5);
    }))();
  }
}; /**
    * Created by jinlei.chen on 2017/7/6.
    * @fileoverview 封装一发localStorage操作
    * 注意这里不捕获异常
    * 如果不支持localStorage的异常处理需要业务自己处理
    */

exports.default = Storage;

/***/ }),
/* 394 */,
/* 395 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _constants = __webpack_require__(263);

var _utils = __webpack_require__(264);

var _position = __webpack_require__(1350);

var _position2 = _interopRequireDefault(_position);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Wrapper around DOMElements to enrich them
 * with the functionality necessary
 */
var Element = function () {
  /**
   * DOM element object
   * @param {Node|HTMLElement} node
   * @param {Object} options
   * @param {Popover} popover
   * @param {Stage} stage
   * @param {Overlay} overlay
   * @param {Window} window
   * @param {Document} document
   */
  function Element() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
        node = _ref.node,
        options = _ref.options,
        popover = _ref.popover,
        stage = _ref.stage,
        mask = _ref.mask,
        overlay = _ref.overlay,
        window = _ref.window,
        document = _ref.document;

    (0, _classCallCheck3.default)(this, Element);

    this.node = node;
    this.document = document;
    this.window = window;
    this.options = options;
    this.overlay = overlay;
    this.popover = popover;
    this.stage = stage;
    this.mask = mask;

    this.animationTimeout = null;
  }

  /**
   * Checks if the current element is visible in viewport
   * @returns {boolean}
   * @private
   */


  (0, _createClass3.default)(Element, [{
    key: 'isInView',
    value: function isInView() {
      var top = this.node.offsetTop;
      var left = this.node.offsetLeft;
      var width = this.node.offsetWidth;
      var height = this.node.offsetHeight;

      var el = this.node;

      while (el.offsetParent) {
        el = el.offsetParent;
        top += el.offsetTop;
        left += el.offsetLeft;
      }

      return top >= this.window.pageYOffset && left >= this.window.pageXOffset && top + height <= this.window.pageYOffset + this.window.innerHeight && left + width <= this.window.pageXOffset + this.window.innerWidth;
    }

    /**
     * Manually scrolls to the position of element if `scrollIntoView` fails
     * @private
     */

  }, {
    key: 'scrollManually',
    value: function scrollManually() {
      var elementRect = this.node.getBoundingClientRect();
      var absoluteElementTop = elementRect.top + this.window.pageYOffset;
      var middle = absoluteElementTop - this.window.innerHeight / 2;

      this.window.scrollTo(0, middle);
    }

    /**
     * Brings the element to middle of the view port if not in view
     * @private
     */

  }, {
    key: 'bringInView',
    value: function bringInView() {
      if (this.isInView()) {
        return;
      }

      // If browser does not support scrollIntoView
      if (!this.node.scrollIntoView) {
        this.scrollManually();
        return;
      }

      try {
        this.node.scrollIntoView(this.options.scrollIntoViewOptions || {
          behavior: 'instant',
          block: 'center'
        });
      } catch (e) {
        // `block` option is not allowed in older versions of firefox, scroll manually
        this.scrollManually();
      }
    }

    /**
     * Gets the calculated position on screen, around which
     * we need to draw
     * @public
     * @return {Position}
     */

  }, {
    key: 'getCalculatedPosition',
    value: function getCalculatedPosition() {
      var body = this.document.body;
      var documentElement = this.document.documentElement;
      var window = this.window;

      var scrollTop = this.window.pageYOffset || documentElement.scrollTop || body.scrollTop;
      var scrollLeft = window.pageXOffset || documentElement.scrollLeft || body.scrollLeft;
      var elementRect = this.node.getBoundingClientRect();

      return new _position2.default({
        top: elementRect.top + scrollTop,
        left: elementRect.left + scrollLeft,
        right: elementRect.left + scrollLeft + elementRect.width,
        bottom: elementRect.top + scrollTop + elementRect.height
      });
    }

    /**
     * Gets the popover for the current element if any
     * @returns {Popover|*}
     * @public
     */

  }, {
    key: 'getPopover',
    value: function getPopover() {
      return this.popover;
    }

    /**
     * Is called when element is about to be deselected
     * i.e. when moving the focus to next element of closing
     * @public
     */

  }, {
    key: 'onDeselected',
    value: function onDeselected() {
      var hideStage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

      this.hidePopover();

      if (hideStage) {
        this.hideStage();
      }

      this.removeHighlightClasses();

      // If there was any animation in progress, cancel that
      this.window.clearTimeout(this.animationTimeout);

      if (this.options.onDeselected) {
        this.options.onDeselected(this);
      }
    }

    /**
     * Checks if the given element is same as the current element
     * @param {Element} element
     * @returns {boolean}
     * @public
     */

  }, {
    key: 'isSame',
    value: function isSame(element) {
      if (!element || !element.node) {
        return false;
      }

      return element.node === this.node;
    }

    /**
     * Is called when the element is about to be highlighted
     * @public
     */

  }, {
    key: 'onHighlightStarted',
    value: function onHighlightStarted() {
      if (this.options.onHighlightStarted) {
        this.options.onHighlightStarted(this);
      }
    }

    /**
     * Is called when the element has been successfully highlighted
     * @public
     */

  }, {
    key: 'onHighlighted',
    value: function onHighlighted() {
      this.showPopover();
      this.showStage();

      this.addHighlightClasses();

      var highlightedElement = this;
      var popoverElement = this.popover;

      if (popoverElement && !popoverElement.isInView()) {
        popoverElement.bringInView();
      }

      if (!highlightedElement.isInView()) {
        highlightedElement.bringInView();
      }

      if (this.options.onHighlighted) {
        this.options.onHighlighted(this);
      }
    }

    /**
     * Removes the stacking context fix classes and the highlighter classes
     * @private
     */

  }, {
    key: 'removeHighlightClasses',
    value: function removeHighlightClasses() {
      this.node.classList.remove(_constants.CLASS_DRIVER_HIGHLIGHTED_ELEMENT);
      this.node.classList.remove(_constants.CLASS_POSITION_RELATIVE);

      var stackFixes = this.document.querySelectorAll('.' + _constants.CLASS_FIX_STACKING_CONTEXT);
      for (var counter = 0; counter < stackFixes.length; counter++) {
        stackFixes[counter].classList.remove(_constants.CLASS_FIX_STACKING_CONTEXT);
      }
    }

    /**
     * Adds the highlight class on the current element and "fixes"
     * the parent nodes if they
     * @private
     */

  }, {
    key: 'addHighlightClasses',
    value: function addHighlightClasses() {
      this.node.classList.add(_constants.CLASS_DRIVER_HIGHLIGHTED_ELEMENT);

      // Don't make relative if element already has some position set
      if (this.canMakeRelative()) {
        this.node.classList.add(_constants.CLASS_POSITION_RELATIVE);
      }

      // Check and re-define the stacking context
      this.fixStackingContext();
    }

    /**
     * Walks through the parents of the current element and fixes
     * the stacking context
     * @private
     */

  }, {
    key: 'fixStackingContext',
    value: function fixStackingContext() {
      var parentNode = this.node.parentNode;
      while (parentNode) {
        if (!parentNode.tagName || parentNode.tagName.toLowerCase() === 'body') {
          break;
        }

        var zIndex = (0, _utils.getStyleProperty)(parentNode, 'z-index');
        var opacity = parseFloat((0, _utils.getStyleProperty)(parentNode, 'opacity'));
        var transform = (0, _utils.getStyleProperty)(parentNode, 'transform', true);
        var transformStyle = (0, _utils.getStyleProperty)(parentNode, 'transform-style', true);
        var transformBox = (0, _utils.getStyleProperty)(parentNode, 'transform-box', true);
        var filter = (0, _utils.getStyleProperty)(parentNode, 'filter', true);
        var perspective = (0, _utils.getStyleProperty)(parentNode, 'perspective', true);

        // Stacking context gets disturbed if
        // - Parent has z-index
        // - Opacity is below 0
        // - Filter/transform or perspective is applied
        if (/[0-9]+/.test(zIndex) || opacity < 1 || transform && transform !== 'none' || transformStyle && transformStyle !== 'flat' || transformBox && transformBox !== 'border-box' || filter && filter !== 'none' || perspective && perspective !== 'none') {
          parentNode.classList.add(_constants.CLASS_FIX_STACKING_CONTEXT);
        }

        parentNode = parentNode.parentNode;
      }
    }

    /**
     * Checks if we can make the current element relative or not
     * @return {boolean}
     * @private
     */

  }, {
    key: 'canMakeRelative',
    value: function canMakeRelative() {
      var currentPosition = this.getStyleProperty('position');
      var avoidPositionsList = ['absolute', 'fixed', 'relative'];

      // Because if the element has any of these positions, making it
      // relative will break the UI
      return avoidPositionsList.indexOf(currentPosition) === -1;
    }

    /**
     * Get current element's CSS attribute value
     * @param {string} property
     * @returns string
     * @private
     */

  }, {
    key: 'getStyleProperty',
    value: function getStyleProperty(property) {
      return (0, _utils.getStyleProperty)(this.node, property);
    }

    /**
     * Shows the stage behind the element
     * @public
     */

  }, {
    key: 'showStage',
    value: function showStage() {
      this.stage.show(this.getCalculatedPosition(), this.options.useCircleStage);
      this.mask && this.mask.show(this.getCalculatedPosition());
    }

    /**
     * Gets the DOM Element behind this element
     * @returns {Node|HTMLElement|*}
     * @public
     */

  }, {
    key: 'getNode',
    value: function getNode() {
      return this.node;
    }

    /**
     * Hides the stage
     * @public
     */

  }, {
    key: 'hideStage',
    value: function hideStage() {
      this.stage.hide();
      this.mask && this.mask.hide();
    }

    /**
     * Hides the popover if possible
     * @public
     */

  }, {
    key: 'hidePopover',
    value: function hidePopover() {
      if (!this.popover) {
        return;
      }

      this.popover.hide();
    }

    /**
     * Shows the popover on the current element
     * @public
     */

  }, {
    key: 'showPopover',
    value: function showPopover() {
      var _this = this;

      if (!this.popover) {
        return;
      }

      var showAtPosition = this.getCalculatedPosition();

      // For first highlight, show it immediately because there won't be any animation
      var showAfterMs = _constants.ANIMATION_DURATION_MS;
      // If animation is disabled or  if it is the first display, show it immediately
      if (!this.options.animate || !this.overlay.lastHighlightedElement) {
        showAfterMs = 0;
      }

      this.animationTimeout = this.window.setTimeout(function () {
        _this.popover.show(showAtPosition);
      }, showAfterMs);
    }

    /**
     * @returns {{height: number, width: number}}
     * @public
     */

  }, {
    key: 'getFullPageSize',
    value: function getFullPageSize() {
      // eslint-disable-next-line prefer-destructuring
      var body = this.document.body;
      var html = this.document.documentElement;

      return {
        height: Math.max(body.scrollHeight, body.offsetHeight, html.scrollHeight, html.offsetHeight),
        width: Math.max(body.scrollWidth, body.offsetWidth, html.scrollWidth, html.offsetWidth)
      };
    }

    /**
     * Gets the size for popover
     * @returns {{height: number, width: number}}
     * @public
     */

  }, {
    key: 'getSize',
    value: function getSize() {
      return {
        height: Math.max(this.node.scrollHeight, this.node.offsetHeight),
        width: Math.max(this.node.scrollWidth, this.node.offsetWidth)
      };
    }
  }]);
  return Element;
}();

exports.default = Element;

/***/ }),
/* 396 */,
/* 397 */,
/* 398 */,
/* 399 */,
/* 400 */,
/* 401 */,
/* 402 */,
/* 403 */,
/* 404 */,
/* 405 */,
/* 406 */,
/* 407 */,
/* 408 */,
/* 409 */,
/* 410 */,
/* 411 */,
/* 412 */,
/* 413 */,
/* 414 */,
/* 415 */,
/* 416 */,
/* 417 */,
/* 418 */,
/* 419 */,
/* 420 */,
/* 421 */,
/* 422 */,
/* 423 */,
/* 424 */,
/* 425 */,
/* 426 */,
/* 427 */,
/* 428 */,
/* 429 */,
/* 430 */,
/* 431 */,
/* 432 */,
/* 433 */,
/* 434 */,
/* 435 */,
/* 436 */,
/* 437 */,
/* 438 */,
/* 439 */,
/* 440 */,
/* 441 */,
/* 442 */,
/* 443 */,
/* 444 */,
/* 445 */,
/* 446 */,
/* 447 */,
/* 448 */,
/* 449 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.slaFail = exports.slaSuccess = exports.removeLogs = exports.collectLog = undefined;

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(99);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

exports.fillTags = fillTags;

var _storage = __webpack_require__(1324);

var _logger9 = __webpack_require__(712);

var _type = __webpack_require__(539);

var _middlewares = __webpack_require__(1326);

var _metrics = __webpack_require__(1327);

var _metrics2 = _interopRequireDefault(_metrics);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _networkHelper = __webpack_require__(113);

var _mentionHelper = __webpack_require__(570);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var storage = void 0;
var logger = void 0;
var deviceBackupKey = Date.now().toString();
var validKeyPrefix = ['ee.docs.sheet', 'ee.docs.doc', 'ee.docs.bitable', 'ee.suite'];
var metrics = new _metrics2.default({
    url: function url() {
        var userInfo = window.User;
        var deviceId = userInfo ? userInfo.id.substr(0, 11) : deviceBackupKey.substr(0, 11);
        return 'https://api.zjurl.cn/log/collect?aid=1161&device_id=' + deviceId + '&rdn=' + Math.random();
    },
    logType: 'docs_log',
    validKeyPrefix: validKeyPrefix,
    onUpload: function onUpload() {
        logger.clearAllCache();
    }
});
var sla = new _metrics.Sla(new _metrics2.default({
    url: 'https://api.zjurl.cn/log/collect',
    header: function () {
        var userInfo = window.User;
        var deviceId = userInfo && userInfo.id ? userInfo.id.substr(0, 11) : deviceBackupKey.substr(0, 11);
        return { device_id: deviceId, os: 'suite', ov_version: '0.9' };
    }()
}));
function isProduction() {
    return (0, _networkHelper.isProdEnv)();
}
var createLogger = function createLogger() {
    var userInfo = window.User;
    var userId = userInfo ? userInfo.id : '__DEFAULT__';
    storage = new _storage.MoiraeStorage(userId);
    logger = new _logger9.Logger();
    logger.use(_middlewares.tryCatch, _middlewares.productionOnly, _middlewares.pcOnly);
    logger.setWriter(function (context) {
        var params = context.params,
            method = context.method;

        if (method === _type.LogMethod.MEAN) {
            if (params.length >= 3) {
                var tags = params.length > 3 ? params[2] : {};
                fillTags(tags);
                metrics.mean(params[0], params[1], tags);
            }
        } else if (method === _type.LogMethod.COUNT) {
            if (params.length >= 2) {
                var _tags = params.length > 2 ? params[1] : {};
                fillTags(_tags);
                metrics.count(params[0], _tags);
            }
        } else {
            storage.saveLog(context);
        }
    });
};
function fillTags(tags) {
    tags = tags || {};
    if (_browserHelper2.default.isMobile) {
        tags.platform = 'mobile';
    } else if (_browserHelper2.default.isLark) {
        tags.platform = 'lark';
    } else if (_browserHelper2.default.isFeed) {
        tags.platform = 'feed';
    } else {
        tags.platform = 'pc';
    }
    tags['scm'] = window.scm ? (window.scm.version || '') + '-' + (window.scm.branch || '') : '';
    var host = window.location.host;

    var pattern = '^(https?://)?' + host + '/(' + _mentionHelper.mentionTypeReg + ')/([a-zA-Z0-9]{22})/?' + '(\\?[;&a-zA-Z\\d%_.~+=-]*)?' // query string
    + '(\\#[-a-zA-Z\\d_]*)?$'; // fragment locator
    var reg = new RegExp(pattern);
    var result = reg.exec(window.location.href);
    if (!result || result.length < 4) {
        return tags;
    }
    tags.type = result[2];
    return tags;
}
var debug = function debug() {
    var _logger;

    (_logger = logger).debug.apply(_logger, arguments);
};
var info = function info() {
    var _logger2;

    (_logger2 = logger).info.apply(_logger2, arguments);
};
var warn = function warn() {
    var _logger3;

    (_logger3 = logger).warn.apply(_logger3, arguments);
};
var error = function error() {
    var _logger4;

    (_logger4 = logger).error.apply(_logger4, arguments);
};
var time = function time(key) {
    logger.time(key);
};
var timeEnd = function timeEnd(key) {
    var _logger5;

    for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        params[_key - 1] = arguments[_key];
    }

    (_logger5 = logger).timeEnd.apply(_logger5, [key].concat(params));
};
var count = function count(key) {
    var _logger6;

    for (var _len2 = arguments.length, params = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        params[_key2 - 1] = arguments[_key2];
    }

    (_logger6 = logger).count.apply(_logger6, [key].concat(params));
};
var mean = function mean(key, value) {
    for (var _len3 = arguments.length, params = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {
        params[_key3 - 2] = arguments[_key3];
    }

    var _logger7;

    (_logger7 = logger).mean.apply(_logger7, [key, value].concat(params));
};
var teaLog = function teaLog() {
    var _logger8;

    (_logger8 = logger).teaLog.apply(_logger8, arguments);
};
var ravenCatch = function ravenCatch(ex, ravenTag) {
    logger.ravenCatch(ex, ravenTag);
};
var collectLog = exports.collectLog = function () {
    var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
        return _regenerator2.default.wrap(function _callee$(_context) {
            while (1) {
                switch (_context.prev = _context.next) {
                    case 0:
                        _context.next = 2;
                        return storage.collectLog();

                    case 2:
                        return _context.abrupt('return', _context.sent);

                    case 3:
                    case 'end':
                        return _context.stop();
                }
            }
        }, _callee, undefined);
    }));

    return function collectLog() {
        return _ref.apply(this, arguments);
    };
}();
var removeLogs = exports.removeLogs = function () {
    var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {
        return _regenerator2.default.wrap(function _callee2$(_context2) {
            while (1) {
                switch (_context2.prev = _context2.next) {
                    case 0:
                        _context2.next = 2;
                        return storage.removeLogs();

                    case 2:
                        return _context2.abrupt('return', _context2.sent);

                    case 3:
                    case 'end':
                        return _context2.stop();
                }
            }
        }, _callee2, undefined);
    }));

    return function removeLogs() {
        return _ref2.apply(this, arguments);
    };
}();
var slaSuccess = exports.slaSuccess = function slaSuccess() {
    if (!isProduction()) {
        return;
    }
    var tags = fillTags();
    sla.success('bear_fe.http.all', tags.type);
};
var slaFail = exports.slaFail = function slaFail() {
    if (!isProduction()) {
        return;
    }
    var tags = fillTags();
    sla.fail('bear_fe.http.all', tags.type);
};
var moirae = {
    debug: debug,
    info: info,
    warn: warn,
    error: error,
    time: time,
    timeEnd: timeEnd,
    count: count,
    mean: mean,
    teaLog: teaLog,
    ravenCatch: ravenCatch,
    slaFail: slaFail,
    slaSuccess: slaSuccess,
    collectLog: collectLog,
    removeLogs: removeLogs
};
createLogger();
exports.default = moirae;

/***/ }),
/* 450 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.logHelper = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

exports.default = teaLogger;
exports.advancedTeaLogger = advancedTeaLogger;
exports.reportEvent = reportEvent;
exports.getFileInfoObjByFile = getFileInfoObjByFile;

var _tea = __webpack_require__(42);

var _tea2 = _interopRequireDefault(_tea);

var _store = __webpack_require__(64);

var _store2 = _interopRequireDefault(_store);

var _omit = __webpack_require__(763);

var _omit2 = _interopRequireDefault(_omit);

var _common = __webpack_require__(19);

var _apiField = __webpack_require__(653);

var _suite = __webpack_require__(84);

var _explorer = __webpack_require__(48);

var _user = __webpack_require__(72);

var _getFileInfo = __webpack_require__(472);

var _routeHelper = __webpack_require__(67);

var _timeHelper = __webpack_require__(464);

var _encryption = __webpack_require__(164);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* ================== 字段类配置 =================== */

/* selectors */
var fieldsNeedToEncrypted = ['create_uid', 'owner_id', 'file_id', 'copy_file_id', 'loc_file_id', 'file_tenant_id', 'collaborate_id'];
/* helpers & constants */

var OPTION_KEY_SHOULD_WITH_FILE_INFO = 'withFileInfo';
/* ================== 字段类配置结束 =================== */
/**
 * Encrypt fields if necessary.
 * @param {Array} fieldsNeedToEncrypted
 * @param {Object} params
 */
var encryptFieldsInParams = function encryptFieldsInParams(fieldsNeedToEncrypted, params) {
    fieldsNeedToEncrypted.forEach(function (key) {
        if (key in params) {
            params[key] = (0, _encryption.encryptTea)(params[key]);
        }
    });
};
/**
 * Merge file info into params if includes
 * @param {Object} params
 */
var mergeFileInfoIntoParams = function mergeFileInfoIntoParams(flagStr, params) {
    /* 如果传了 withFileInfo, 就会执行下面的merge操作 */
    // if (!params[flagStr]) return params;
    var fileInfo = (0, _getFileInfo.getFileInfoObj)();
    // 保证用户主动传入的params不被覆盖
    return Object.assign({
        file_type: fileInfo.file_type,
        file_id: fileInfo.file_id,
        file_is_cross_tenant: fileInfo.file_is_cross_tenant,
        file_tenant_id: fileInfo.file_tenant_id
    }, (0, _omit2.default)(params, [flagStr]));
};
function teaLogger(getEventName, getParams) {
    /*
    * @param {function} target: the class that the member is on.
     * @param {String} name: the name of the member in the class.
     * @param {Object} descriptor: object would have been passed to Object.defineProperty.
     * @author liaowenhao
     *
     * if need to judge event type, ex:
     *    @teaLogger(
     *    ({ context }, originFuncArgument) => {
     *      return originFuncArgument ? 'event_A' : 'event_B';
     *    },
     *    function () {
     *      // you can use this(context) here
     *      console.log(this);
     *      return {
     *        eventData...
     *      };
     *    },
     *  )
     *
     */
    return function (target, name, descriptor) {
        var originFunc = descriptor.value;
        descriptor.value = function () {
            // wrapped function call.
            var result = void 0;

            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                args[_key] = arguments[_key];
            }

            try {
                result = originFunc.apply(this, args);
            } finally {
                var params = typeof getParams === 'function' ? getParams.apply(this, [{ context: this, store: _store2.default }].concat(args)) : getParams;
                var eventName = typeof getEventName === 'function' ? getEventName.apply(this, [{ context: this, store: _store2.default }].concat(args)) : getEventName;
                if (eventName && params) {
                    params = mergeFileInfoIntoParams(OPTION_KEY_SHOULD_WITH_FILE_INFO, params);
                    encryptFieldsInParams(fieldsNeedToEncrypted, params);
                    (0, _tea2.default)(eventName, Object.assign({}, params));
                }
            }
            return result;
        };
        return descriptor;
    };
}

var LogHelper = function () {
    function LogHelper() {
        (0, _classCallCheck3.default)(this, LogHelper);
    }

    (0, _createClass3.default)(LogHelper, [{
        key: 'isInShareFiles',
        value: function isInShareFiles() {
            var nodes = (0, _explorer.selectFileEntities)(this.state);
            var currentPath = (0, _explorer.selectCurrentPath)(this.state).toJS();
            var rst = currentPath.some(function (token) {
                var isShareRoot = token === _apiField.FAKE_SHARE_FOLDER_TOKEN;
                if (isShareRoot) {
                    return true;
                }
                var hasSpaceId = nodes.getIn([token, 'space_id']);
                return !!hasSpaceId;
            });
            return rst;
        }
        /**
         * 根据 token 从 redux 里面拿到文档的 type
         * 跟 mapTypeNumToFileType 不太一样的地方在于
         * 它会根据 spaceId 判断是否为共享文件夹
         */

    }, {
        key: 'getTypeStringByToken',
        value: function getTypeStringByToken(token) {
            var entity = this.getNodeEntity(token);
            return this.getTypeStringByEntity(entity);
        }
    }, {
        key: 'getTypeStringByEntity',
        value: function getTypeStringByEntity(entity) {
            var spaceId = entity.get('space_id');
            if (typeof spaceId === 'string' && spaceId.length > 0) {
                return 'share_folder';
            }
            var type = entity.get('type');
            return _common.mapTypeNumToFileType[type];
        }
    }, {
        key: 'getFileInfoByToken',
        value: function getFileInfoByToken(token, type) {
            // obj
            if (type && _common.NUM_SUITE_TYPE[type]) {
                return this.getObjInfoByTokenAndType(token, type);
            }
            // node
            var entity = this.getNodeEntity(token);
            return this.getFileInfoByEntity(entity);
        }
    }, {
        key: 'getObjInfoByTokenAndType',
        value: function getObjInfoByTokenAndType(token, type) {
            var entity = this.getObjEntity(token, type);
            return this.getFileInfoByEntity(entity);
        }
    }, {
        key: 'getModuleByEntity',
        value: function getModuleByEntity(entity) {
            var spaceId = entity.get('space_id');
            if (typeof spaceId === 'string' && spaceId.length > 0) {
                return 'sharetome';
            }
            return;
        }
    }, {
        key: 'getFileInfoByEntity',
        value: function getFileInfoByEntity(entity) {
            var fileId = void 0;
            if (!entity) {
                return {};
            }
            if (entity.get('obj_token') && entity.get('obj_token') !== '') {
                fileId = entity.get('obj_token');
            } else {
                fileId = entity.get('token');
            }
            var fileExtraInfo = getFileInfoObjByFile(entity);
            return Object.assign({
                file_type: this.getTypeStringByEntity(entity),
                file_id: fileId
            }, fileExtraInfo);
        }
    }, {
        key: 'getCurrentFileType',
        value: function getCurrentFileType() {
            if ((0, _routeHelper.isUnderFileListView)()) return null;
            return _common.mapTypeNumToFileType[(0, _suite.selectCurrentSuiteType)(this.state)];
        }
    }, {
        key: 'getCurrentFileToken',
        value: function getCurrentFileToken() {
            if ((0, _routeHelper.isUnderFileListView)()) return null;
            return (0, _suite.selectCurrentSuiteToken)(this.state);
        }
    }, {
        key: 'getNodeEntity',
        value: function getNodeEntity(token) {
            return (0, _explorer.selectFileEntities)(this.state).get(token);
        }
    }, {
        key: 'getObjEntity',
        value: function getObjEntity(token, type) {
            return (0, _explorer.selectObjEntities)(this.state).get(type + ':' + token);
        }
    }, {
        key: 'getCurrentUser',
        value: function getCurrentUser() {
            return (0, _user.selectCurrentUser)(this.state);
        }
    }, {
        key: 'getCurrentPath',
        value: function getCurrentPath() {
            return (0, _explorer.selectCurrentPath)(this.state).toJS();
        }
    }, {
        key: 'getCreateDate',
        value: function getCreateDate(createTime) {
            return (0, _timeHelper.getDateStr)(parseInt(createTime, 10));
        }
    }, {
        key: 'getDaysFromCreateDate',
        value: function getDaysFromCreateDate(timestamp) {
            var now = new Date().getTime();
            var delta = now - parseInt(timestamp, 10) * 1000;
            var days = parseInt(delta / 1000 / 60 / 60 / 24, 10);
            return days;
        }
    }, {
        key: 'isOwner',
        value: function isOwner(ownerId) {
            return (0, _user.selectCurrentUser)(this.state).get('suid') === ownerId;
        }
    }, {
        key: 'getSelectedFileMeta',
        value: function getSelectedFileMeta() {
            return (0, _explorer.selectSelectedFileMetas)(this.state).first();
        }
    }, {
        key: 'state',
        get: function get() {
            return _store2.default.getState();
        }
    }]);
    return LogHelper;
}();

var logHelper = exports.logHelper = new LogHelper();
function advancedTeaLogger(eventName, getParams) {
    return function (target, name, descriptor) {
        var originFunc = descriptor.value;
        descriptor.value = function () {
            for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                args[_key2] = arguments[_key2];
            }

            // wrapped function call.
            // 即使打点失败，也要让函数继续跑
            try {
                var params = getParams.call(this, {
                    context: this,
                    args: args,
                    helpers: logHelper,
                    reduxStore: _store2.default
                });
                // 需要加密的字段
                if (params) {
                    encryptFieldsInParams(fieldsNeedToEncrypted, params);
                    (0, _tea2.default)(eventName, Object.assign({}, params));
                }
            } catch (e) {
                console.error(e);
            }
            return originFunc.apply(this, args);
        };
        return descriptor;
    };
}
function reportEvent(eventName, params) {
    encryptFieldsInParams(fieldsNeedToEncrypted, params);
    (0, _tea2.default)(eventName, Object.assign({}, params));
}
var getUserInfoByUserId = function getUserInfoByUserId(userId) {
    var state = _store2.default.getState();
    var users = (0, _user.selectUserEntities)(state);
    var user = users && users.get(userId);
    return user;
};
function getFileInfoObjByFile(file) {
    var fileInfo = {
        file_tenant_id: '',
        file_is_cross_tenant: ''
    };
    if (typeof file === 'undefined') {
        return fileInfo;
    }
    var state = _store2.default.getState();
    var fileOwnerId = file.get('owner_id');
    var fileOwnerInfo = getUserInfoByUserId(fileOwnerId);
    var fileOwnerTenantId = fileOwnerInfo && fileOwnerInfo.get('tenant_id');
    var currentUserTenantId = (0, _user.selectCurrentUser)(state).get('tenant_id') || '';
    fileInfo.file_tenant_id = fileOwnerTenantId;
    fileInfo.file_is_cross_tenant = String(!(currentUserTenantId === fileOwnerTenantId));
    return fileInfo;
}

/***/ }),
/* 451 */,
/* 452 */,
/* 453 */,
/* 454 */,
/* 455 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.selectMobileLocalUserGuide = exports.selectIsNewDocUser = exports.selectSuiteHistoryIsDone = exports.selectUserProfile = exports.selectUserGuide = undefined;

var _onboarding = __webpack_require__(130);

var CREATE_DOC_COUNT_THRESHOLD = 5;
var selectUserGuide = exports.selectUserGuide = function selectUserGuide(state) {
    return state.appState.userGuide.get(_onboarding.DATA_FIELD.GUIDES);
};
var selectUserProfile = exports.selectUserProfile = function selectUserProfile(state) {
    return state.appState.userGuide.get(_onboarding.DATA_FIELD.PROFILE);
};
var selectSuiteHistoryIsDone = exports.selectSuiteHistoryIsDone = function selectSuiteHistoryIsDone(state) {
    return selectUserGuide(state).getIn([_onboarding.STEP_TYPES.suite_history, _onboarding.STEP_STATE.DONE]);
};
var selectIsNewDocUser = exports.selectIsNewDocUser = function selectIsNewDocUser(state) {
    // return true; // 调试开关
    var createDocCount = selectUserProfile(state).getIn(['user', 'docs_acc_create_doc_count']);
    return createDocCount > -1 && createDocCount < CREATE_DOC_COUNT_THRESHOLD;
};
var selectMobileLocalUserGuide = exports.selectMobileLocalUserGuide = function selectMobileLocalUserGuide(state) {
    return state.appState.userGuide.get(_onboarding.DATA_FIELD.MOBILE_LOCAL_GUIDES);
};

/***/ }),
/* 456 */,
/* 457 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.generateRequestId = undefined;

var _string = __webpack_require__(163);

var generateRequestId = exports.generateRequestId = function generateRequestId() {
  return (0, _string.generateRandomString)(12) + '-' + window.User.id;
};

/***/ }),
/* 458 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.collectLoadPerformance = exports.commandPerformanceData = exports.transformPerformanceData = undefined;

var _isString2 = __webpack_require__(576);

var _isString3 = _interopRequireDefault(_isString2);

var _isObject2 = __webpack_require__(74);

var _isObject3 = _interopRequireDefault(_isObject2);

var _tea = __webpack_require__(42);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 拦截api，进行打点，统计，计入Tea
 * 其中url中存在token值的需要单独处理统计
 * @param {*} response
 */
var transformPerformanceData = exports.transformPerformanceData = function transformPerformanceData(_ref) {
    var url = _ref.url,
        data = _ref.data;

    if (!performance.getEntriesByType) return;
    if (url.indexOf('/api/') >= 0) {
        var urlData = performance.getEntriesByType('resource').filter(function (item) {
            return item.name.includes(url);
        });
        if (urlData && urlData.length) {
            if (url.includes('?')) {
                url = url.substr(0, url.lastIndexOf('?'));
            }
            if ((url.indexOf('/api/sheet/') >= 0 || url.indexOf('/api/doc/') >= 0 || url.indexOf('/api/parser/import/') >= 0) && url.endsWith('/')) {
                url = url.substr(0, url.lastIndexOf('/', url.lastIndexOf('/') - 1) + 1);
            } else if (url.indexOf('/api/sheet/histories/') >= 0) {
                url = url.substr(0, url.lastIndexOf('/') + 1);
            }
            var item = urlData[urlData.length - 1];
            var secureConnectionStart = item.secureConnectionStart;
            if (!secureConnectionStart) {
                secureConnectionStart = item.connectEnd;
            }
            var type = '';
            if (url === '' + _$constants.apiUrls.POST_RCE_MESSAGE && data) {
                var requestData = data.data;
                if ((0, _isObject3.default)(requestData) && requestData.type) {
                    type = '/' + requestData.type;
                } else if ((0, _isString3.default)(requestData)) {
                    requestData = JSON.parse(requestData);
                    type = '/' + (requestData && requestData.data && requestData.data.type);
                }
            }
            var performanceData = {
                url: url + type,
                stalled_queueing_time: Math.round((item.requestStart - item.connectEnd) * 100) / 100,
                dns_lookup_time: Math.round((item.domainLookupEnd - item.domainLookupStart) * 100) / 100,
                initial_connection_time: Math.round((secureConnectionStart - item.connectStart) * 100) / 100,
                ssl_connect_time: Math.round((item.connectEnd - secureConnectionStart) * 100) / 100,
                waiting_time: Math.round((item.responseStart - item.requestStart) * 100) / 100,
                content_download_time: Math.round((item.responseEnd - item.responseStart) * 100) / 100,
                api_duration: Math.round(item.duration * 100) / 100,
                request_id: data.request_id,
                code: data.code
            };
            (0, _tea.collectSuiteEvent)('client_performance_api_url', performanceData);
        }
    }
};
/**
 * command操作打点记录
 */
var commandPerformanceData = exports.commandPerformanceData = function commandPerformanceData(args) {
    var sheet = args.sheet;
    var rowCount = 0;
    var colCount = 0;
    var selectedCellCount = 0;
    if (sheet) {
        var selection = sheet.getSelections();
        rowCount = sheet.getRowCount();
        colCount = sheet.getColumnCount();
        if (Array.isArray(selection)) {
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = selection.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var value = _step.value;

                    selectedCellCount += value.rowCount * value.colCount;
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }
        }
    }
    var performanceData = {
        time_cost: args.rangeTime,
        command_name: args.commandName,
        row_count: rowCount,
        column_count: colCount,
        cell_count: rowCount * colCount,
        selected_cell_count: selectedCellCount,
        changeset_count: args.changesets.length
    };
    (0, _tea.collectSuiteEvent)('client_performance_command', performanceData);
};
/**
 * 页面加载性能打点
 */
var loadPerformanceData = function loadPerformanceData() {
    var isSsd = 1;
    var loadStartTime = 0;
    var blockCount = 0;
    return {
        setIsSsd: function setIsSsd() {
            isSsd = 0;
        },
        setLoadStartTime: function setLoadStartTime() {
            loadStartTime = +new Date();
        },
        setBlockCount: function setBlockCount(snapshot) {
            blockCount = 0;
            if (!snapshot) return;
            var sheets = snapshot.sheets || {};
            var _iteratorNormalCompletion2 = true;
            var _didIteratorError2 = false;
            var _iteratorError2 = undefined;

            try {
                for (var _iterator2 = Object.values(sheets)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                    var value = _step2.value;

                    var blocks = value.blocks || [];
                    blockCount += blocks.length;
                }
            } catch (err) {
                _didIteratorError2 = true;
                _iteratorError2 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion2 && _iterator2.return) {
                        _iterator2.return();
                    }
                } finally {
                    if (_didIteratorError2) {
                        throw _iteratorError2;
                    }
                }
            }
        },
        collectData: function collectData(spread, name) {
            var sheet = spread.getActiveSheet();
            if (sheet) {
                var rowCount = sheet.getRowCount();
                var colCount = sheet.getColumnCount();
                var time = loadStartTime;
                if (isSsd) {
                    time = performance.timing.navigationStart;
                    if (!time) {
                        return;
                    }
                }
                var performanceData = {
                    time_cost: +new Date() - time,
                    row_count: rowCount,
                    column_count: colCount,
                    cell_count: rowCount * colCount,
                    is_ssd: isSsd,
                    block_count: blockCount
                };
                (0, _tea.collectSuiteEvent)(name, performanceData);
            }
        }
    };
};
var collectLoadPerformance = exports.collectLoadPerformance = loadPerformanceData();

/***/ }),
/* 459 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var getEnvHeader = exports.getEnvHeader = function getEnvHeader() {
  if (window._env === 'preview') {
    return 'Pre_release';
  }
};

/***/ }),
/* 460 */,
/* 461 */,
/* 462 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.flattenObj = exports.snakelize = exports.camelize = exports.transformCase = undefined;

var _isFunction2 = __webpack_require__(303);

var _isFunction3 = _interopRequireDefault(_isFunction2);

var _isPlainObject2 = __webpack_require__(391);

var _isPlainObject3 = _interopRequireDefault(_isPlainObject2);

var _reduce2 = __webpack_require__(230);

var _reduce3 = _interopRequireDefault(_reduce2);

var _isRegExp2 = __webpack_require__(1127);

var _isRegExp3 = _interopRequireDefault(_isRegExp2);

var _isDate2 = __webpack_require__(1129);

var _isDate3 = _interopRequireDefault(_isDate2);

var _isObject2 = __webpack_require__(74);

var _isObject3 = _interopRequireDefault(_isObject2);

exports.isPromiseLike = isPromiseLike;
exports.plainObjectCopy = plainObjectCopy;
exports.omit = omit;

var _string = __webpack_require__(163);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var transformCase = exports.transformCase = function transformCase(_transformCase) {
    function transformObject(target) {
        if (!(0, _isObject3.default)(target) || (0, _isDate3.default)(target) || (0, _isRegExp3.default)(target)) return target;
        if (Array.isArray(target)) return target.map(transformObject);
        return (0, _reduce3.default)(target, function (prev, value, key) {
            prev[_transformCase(key)] = transformObject(value);
            return prev;
        }, {});
    }
    return transformObject;
};
/**
 * 传入一个object(可嵌套)，将key转化为camelCase
 */
var camelize = exports.camelize = transformCase(_string.camelCase);
/**
 * 传入一个object(可嵌套)，将key转化为snakeCase
 */
var snakelize = exports.snakelize = transformCase(_string.snakeCase);
var flattenObj = exports.flattenObj = function flattenObj(obj) {
    if (!(0, _isPlainObject3.default)(obj)) throw Error('please offer a plain obj as parameter');
    var rstMap = {};
    var _flatten = function _flatten(obj) {
        for (var key in obj) {
            if ((0, _isPlainObject3.default)(obj[key])) {
                _flatten(obj[key]);
            } else {
                rstMap[key] = obj[key];
            }
        }
    };
    _flatten(obj);
    return rstMap;
};
function isPromiseLike(val) {
    return val && (0, _isFunction3.default)(val.then);
}
function plainObjectCopy(obj) {
    return JSON.parse(JSON.stringify(obj));
}
function omit(obj, fields) {
    var shallowCopy = Object.assign({}, obj);
    for (var i = 0; i < fields.length; i++) {
        var key = fields[i];
        delete shallowCopy[key];
    }
    return shallowCopy;
}

/***/ }),
/* 463 */,
/* 464 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getDateStr = getDateStr;
exports.getFullDateStr = getFullDateStr;
exports.getDayFromDate = getDayFromDate;
exports.compensateTimeDigit = compensateTimeDigit;
exports.compensateServerTime = compensateServerTime;
exports.forceTimePast = forceTimePast;
exports.getZhDay = getZhDay;
var TIME_COMPENSATION = 1;
var NORMAL_TIME_DIGITS = 13;
/**
 * 用于获取接口中create_time等时间字段的日期字符串，如20180310
 * @param {Number} time
 */
function getDateStr(time) {
  return getFullDateStr(time * 1000); // 后端传回的时间都是以秒为单位
}

function getFullDateStr(time) {
  if (!time) return '';
  var dateObj = new Date(time);
  return dateObj.toJSON().split('T')[0].split('-').join('');
}

/**
 * 用于获取距离某个时间戳的天数
 * @param {Number} sTime 创建时间
 * @param {Number} eTime 发送事件时间
 * @return {int}
 */
function getDayFromDate(sTime, eTime) {
  var date = new Date(new Date(sTime).setHours(0, 0, 0, 0)).getTime(); // 获取零点时间戳
  return parseInt((eTime - date) / 86400000);
}

function compensateTimeDigit(time) {
  time = parseInt(time, 10);
  if (Number.isNaN(time)) {
    console.error('time must be a number, but received: ' + time);
    return;
  }
  return time * Math.pow(10, Math.abs((time + '').length - NORMAL_TIME_DIGITS));
}
/**
 * @慎用 补偿服务器时间与本地时间
 * 如果服务器时间大于本地时间，则返回本地时间 + 1s 补偿
 * 用于不会出现“将来时”的场景，防止出现“一会儿”后的逻辑。
 * @param {number} serverTime
 * @param {number} time
 */
function compensateServerTime(serverTime) {
  var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Date.now();

  var serverTimeInSecond = compensateTimeDigit(serverTime);
  return time < serverTimeInSecond ? time + TIME_COMPENSATION : serverTimeInSecond;
}

/**
 * 保证对比时间一定不会大于基准时间
 * 基准时间一般为本地时间
 * @param {number} compare
 * @param {number} base
 */
function forceTimePast(compare) {
  var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Date.now();

  compare = compensateTimeDigit(compare);
  return compare > base ? base - 1000 : compare;
}

/**
 * 获取中国读取的星期数，每周从周一开始，起始值为0
 * @param {number} time
 * @returns {number} day
 */
function getZhDay(time) {
  var date = new Date(time);
  var day = date.getDay() - 1;
  return day === -1 ? 6 : day;
}

/***/ }),
/* 465 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getDocCommentType = exports.isTabVisible = exports.findUrls = exports.parseReplyId = exports.formatReplyId = exports.makeGlobalCommentItem = exports.makeReplyItem = exports.getCommentErrorText = exports.isDocComment = exports.isGlobalComment = exports.isNewComment = undefined;

var _slicedToArray2 = __webpack_require__(111);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _uniqueId2 = __webpack_require__(350);

var _uniqueId3 = _interopRequireDefault(_uniqueId2);

var _get2 = __webpack_require__(83);

var _get3 = _interopRequireDefault(_get2);

var _$store = __webpack_require__(64);

var _$store2 = _interopRequireDefault(_$store);

var _error = __webpack_require__(348);

var _user = __webpack_require__(72);

var _common = __webpack_require__(19);

var _userHelper = __webpack_require__(65);

var _immutable = __webpack_require__(31);

var _string = __webpack_require__(163);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var isNewComment = exports.isNewComment = function isNewComment() {
  var comment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var commentList = comment.comment_list;


  return commentList && commentList.length <= 0;
};

var isGlobalComment = exports.isGlobalComment = function isGlobalComment() {
  var comment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  return comment.is_whole;
};

var isDocComment = exports.isDocComment = function isDocComment() {
  var comment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  return !comment.is_whole;
};

var DEFAULT_FETCH_COMMENT_ERROR_MSG = t('etherpad.commet_failed');

var getCommentErrorText = exports.getCommentErrorText = function getCommentErrorText(code) {
  var text = void 0;
  if (_error.ERROR_CODE_MAP[code]) {
    text = (0, _get3.default)(_error.ERROR_CODE_MAP[code], 'warningText');
  }
  return text || DEFAULT_FETCH_COMMENT_ERROR_MSG;
};

var makeReplyItem = exports.makeReplyItem = function makeReplyItem(content, replyId) {
  var extra = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

  var user = extra.user || (0, _user.selectCurrentUser)(_$store2.default.getState());
  var name = (0, _immutable.isImmutable)(user) ? user.get('name') : (0, _userHelper.getUserName)(user.user_id);
  var avatarUrl = (0, _immutable.isImmutable)(user) ? user.get('avatar_url') : user.avatar_url;
  var userId = (0, _immutable.isImmutable)(user) ? user.get('id') : user.suid;
  var createDate = Math.floor(Date.now() / 1000);
  return Object.assign({
    uuid: (0, _string.UUIDv4)(),
    content: content,
    name: name,
    avatar_url: avatarUrl,
    reply_id: replyId || String((0, _uniqueId3.default)()),
    create_timestamp: createDate,
    update_timestamp: createDate,
    type: 'reply',
    sending: true,
    error: null,
    user_id: userId
  }, extra);
};

var makeGlobalCommentItem = exports.makeGlobalCommentItem = function makeGlobalCommentItem(content, commentId, replyId) {
  var extra = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

  return Object.assign({
    uuid: (0, _string.UUIDv4)(),
    comment_id: commentId || String((0, _uniqueId3.default)())
  }, makeReplyItem(content, replyId, extra), extra);
};

var formatReplyId = exports.formatReplyId = function formatReplyId(commentId, replyId) {
  return commentId + ':' + replyId;
};

var parseReplyId = exports.parseReplyId = function parseReplyId() {
  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

  var _id$split = id.split(':'),
      _id$split2 = (0, _slicedToArray3.default)(_id$split, 2),
      commentId = _id$split2[0],
      replyId = _id$split2[1];

  return { commentId: commentId, replyId: replyId };
};

var findUrls = exports.findUrls = function findUrls(text) {
  var regex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _common.LINK_REG;

  regex.lastIndex = 0;

  var urls = [];
  var matched = regex.exec(text);
  while (matched) {
    var startIndex = matched.index;
    var url = matched[0];
    var endIndex = startIndex + url.length;
    urls.push({
      startIndex: startIndex,
      endIndex: endIndex,
      url: url
    });
    matched = regex.exec(text);
  }

  return urls;
};

var isTabVisible = exports.isTabVisible = function isTabVisible() {
  return document.visibilityState === 'visible';
};

var getDocCommentType = exports.getDocCommentType = function getDocCommentType(objType) {
  return {
    isDocComment: objType === _common.COMMENT_TYPE_MAP.DOC_COMMENT,
    isGlobalComment: objType === _common.COMMENT_TYPE_MAP.GLOBAL_COMMENT
  };
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 466 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setMessageShowState = exports.removeMobileComments = exports.resetMessageMobileList = exports.updateMessageMobileNum = exports.setMessageMobileRead = exports.setLocalMessageMobileRead = exports.updateMessageMobileListData = exports.fetchMessageMobileListData = exports.setAllMessageRead = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// 设置所有消息已读
var setAllMessageRead = exports.setAllMessageRead = function setAllMessageRead(data) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.pageMessage.SET_ALL_MESSAGE_READ
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_SET_ALL_MESSAGE_READ,
        method: _$constants.apiUrls.METHOD.POST,
        data: data
    });
};
// lark消息 mobile端
var fetchMessageMobileListData = exports.fetchMessageMobileListData = function fetchMessageMobileListData(token, user, options) {
    var type = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _common.NUM_SUITE_TYPE.DOC;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.pageMessage.FETCH_MOBILE_MESSAGE_LIST
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_GET_MESSAGE_LIST,
        method: _$constants.apiUrls.METHOD.POST,
        serverFirst: options && options.serverFirst,
        data: { token: token, obj_type: type },
        options: {
            transformResponse: function transformResponse(response) {
                return Object.assign({}, response, { user: user });
            }
        }
    });
};
var updateMessageMobileListData = exports.updateMessageMobileListData = function updateMessageMobileListData(data) {
    return {
        type: _$constants.actionTypes.pageMessage.UPDATE_MOBILE_MESSAGE,
        payload: { data: data }
    };
};
var setLocalMessageMobileRead = exports.setLocalMessageMobileRead = function setLocalMessageMobileRead(data) {
    return {
        type: _$constants.actionTypes.pageMessage.SET_LOCAL_MESSAGE_MOBILE_READ,
        payload: data
    };
};
var setMessageMobileRead = exports.setMessageMobileRead = function setMessageMobileRead(data) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.pageMessage.SET_MESSAGE_MOBILE_READ,
        payload: data
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_SET_MESSAGE_READ,
        method: _$constants.apiUrls.METHOD.POST,
        noStore: true,
        data: data
    });
};
/**
 * 更新新消息数量（小红点）
 */
var updateMessageMobileNum = exports.updateMessageMobileNum = function updateMessageMobileNum(num) {
    return {
        type: _$constants.actionTypes.pageMessage.UPDATE_MOBILE_MESSAGE_NUM,
        payload: {
            num: num
        }
    };
};
var resetMessageMobileList = exports.resetMessageMobileList = function resetMessageMobileList() {
    return {
        type: _$constants.actionTypes.pageMessage.RESET_MOBILE_MESSAGE_LIST
    };
};
var removeMobileComments = exports.removeMobileComments = function removeMobileComments(commentId) {
    return {
        type: _$constants.actionTypes.pageMessage.REMOVE_MOBILE_COMMENTS,
        payload: commentId
    };
};
var setMessageShowState = exports.setMessageShowState = function setMessageShowState(showing) {
    return {
        /**
         * 移动端展示文档feed流
         */
        type: _$constants.actionTypes.pageMessage.SET_MESSAGE_SHOW_STATE,
        payload: {
            showing: showing
        }
    };
};

/***/ }),
/* 467 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.openLink = openLink;
exports.completeURLProtocol = completeURLProtocol;
exports.isDataURL = isDataURL;

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _history = __webpack_require__(192);

var _history2 = _interopRequireDefault(_history);

var _common = __webpack_require__(19);

var _sdkCompatibleHelper = __webpack_require__(45);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function openLink(_ref) {
  var url = _ref.url,
      title = _ref.title;
  var forceNewWindow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  var forceLarkNewWindow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

  if (!_browserHelper2.default.isLark && forceNewWindow) {
    window.open(url);
  } else if ((0, _sdkCompatibleHelper.isSupportIOSRender)()) {
    // ios 历史记录问题
    window.location.href = url;
  } else {
    _history2.default.push(url);
  }
}

function completeURLProtocol() {
  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

  var isEmail = new RegExp(_common.LENGTH_LIMITED_EMAIL_REG).test(url);
  var hasProtocol = /^https?:|mailto:|ftp:/.test(url);

  if (hasProtocol) {
    return url;
  }

  if (isEmail) {
    return 'mailto:' + url;
  }

  // 补充协议头
  if (!url.startsWith('http')) {
    url = 'http://' + url;
  }

  return url;
}

function isDataURL() {
  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

  return (/^data:/.test(url)
  );
}

/***/ }),
/* 468 */,
/* 469 */,
/* 470 */,
/* 471 */,
/* 472 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getFileInfoObj = getFileInfoObj;

var _store = __webpack_require__(64);

var _store2 = _interopRequireDefault(_store);

var _suite = __webpack_require__(84);

var _explorer = __webpack_require__(48);

var _user = __webpack_require__(72);

var _routeHelper = __webpack_require__(67);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* 用来处理app还未init成功，接口未加载时的token获取 */

/* helpers & constants */

/* selectors */
function getFileToken() {
    var href = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.href;

    var tokenRegExp = /(doc|sheet|folder)\/([A-Za-z0-9_]*)/.exec(href); // 增加_, 适配离线创建文档的token, 例fake_2222222
    return tokenRegExp && tokenRegExp[2] ? tokenRegExp[2] : '';
}
/**
 * 以路由为级别的fileInfo的生成
 * 判定界限为： isUnderFileListView
 * 所以对于在fileListView下需要操作suiteType的情况，务必去调用logger的地方覆盖传入参数.
 * 比如: file_type, file_id等...
 */
function getFileInfoObj() {
    var fileInfo = {
        file_type: '',
        file_id: '',
        file_tenant_id: '',
        file_is_cross_tenant: ''
    };
    var ownerId = '';
    /* sources */
    var state = _store2.default.getState();
    var _isUnderFileListView = (0, _routeHelper.isUnderFileListView)();
    var currentUserTenantId = (0, _user.selectCurrentUser)(state).get('tenant_id') || '';
    var userEntities = (0, _user.selectUserEntities)(state);
    if (_isUnderFileListView) {
        /* case sources */
        var takeFirstOneIdx = 0;
        var selectedFiles = (0, _explorer.selectSelectedFiles)(state);
        /* 如果有选中的file */
        if ((0, _explorer.selectSelectedFiles)(state).first()) {
            var fileOwnerId = selectedFiles.getIn([takeFirstOneIdx, 'owner_id'], '');
            /* assign */
            ownerId = fileOwnerId;
            fileInfo.file_type = _common.mapTypeNumToFileType[selectedFiles.getIn([takeFirstOneIdx, 'type'], '')];
            // @TODO: star 和 pin 用的是 obj_token 或者 token, 需求在调用打点的地方处理.
            fileInfo.file_id = selectedFiles.getIn([takeFirstOneIdx, 'token'], '');
        } else {
            fileInfo.file_id = getFileToken();
            fileInfo.file_type = (0, _routeHelper.getFileTypeStr)();
        }
    } else {
        /* case sources */
        var currentSuiteEntity = (0, _suite.selectCurrentSuiteByObjToken)(state);
        var currentSuiteOwnerId = currentSuiteEntity ? currentSuiteEntity.get('owner_id') : '';
        /* assign */
        ownerId = currentSuiteOwnerId;
        fileInfo.file_type = currentSuiteEntity ? _common.mapTypeNumToFileType[currentSuiteEntity.get('type')] : '';
        fileInfo.file_id = currentSuiteEntity ? currentSuiteEntity.get('obj_token') : '';
    }
    var fileTenantId = userEntities.getIn([ownerId, 'tenant_id'], '');
    var isFileCrossTenant = String(currentUserTenantId !== fileTenantId);
    /* final assign */
    fileInfo.file_tenant_id = fileTenantId;
    fileInfo.file_is_cross_tenant = isFileCrossTenant;
    return fileInfo;
}

/***/ }),
/* 473 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getGlobalVar = undefined;
exports.default = globalVarInit;

var _$constants = __webpack_require__(5);

// @TODO: 移除 统一事件管理

function globalVarInit() {
  window[_$constants.common.PROJECT_GLOBAL] = { utils: utils };
  if (!('getGlobalVar' in window)) {
    window.getGlobalVar = getGlobalVar;
    console.log('GlobalVars initialized');
  }
}

var utils = {
  chainedFunc: function _chainedFunc(previous) {
    function _noop() {}
    return function (next) {
      if (typeof previous === 'undefined') {
        previous = _noop;
      }
      return function () {
        previous();
        next && next();
        return _chainedFunc;
      };
    };
  }
};

var getGlobalVar = exports.getGlobalVar = function getGlobalVar() {
  return window[_$constants.common.PROJECT_GLOBAL];
};

/***/ }),
/* 474 */,
/* 475 */,
/* 476 */,
/* 477 */,
/* 478 */,
/* 479 */,
/* 480 */,
/* 481 */,
/* 482 */,
/* 483 */,
/* 484 */,
/* 485 */,
/* 486 */,
/* 487 */,
/* 488 */,
/* 489 */,
/* 490 */,
/* 491 */,
/* 492 */,
/* 493 */,
/* 494 */,
/* 495 */,
/* 496 */,
/* 497 */,
/* 498 */,
/* 499 */,
/* 500 */,
/* 501 */,
/* 502 */,
/* 503 */,
/* 504 */,
/* 505 */,
/* 506 */,
/* 507 */,
/* 508 */,
/* 509 */,
/* 510 */,
/* 511 */,
/* 512 */,
/* 513 */,
/* 514 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.routeList = exports.RouteType = exports.URL = exports.PATH = undefined;

var _common = __webpack_require__(19);

var common = _interopRequireWildcard(_common);

var _networkHelper = __webpack_require__(113);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var PATH = exports.PATH = {
    HOME: '/home/',
    HOME_RECENTS: '/home/recents/',
    HOME_STAR: '/home/star/',
    HOME_SHARE_FILES: '/home/share/files/',
    DOC: '/doc/:token?',
    SHEET: '/sheet/:token?',
    LIKELIST: '/like-list/:token',
    MINDNOTE: '/mindnote/:token?',
    SLIDE: '/slide/:token?',
    BITABLE: '/bitable/:token?',
    EXPLORER: '/folder/',
    FOLDER: '/folder/:token?',
    TRASH: '/trash/',
    SHARE: '/share/',
    SHARE_FILES: '/share/files/',
    SHARE_FOLDERS: '/share/folders/',
    RECENTS: '/recents/',
    DEFAULT: '/default/',
    IMPORT: '/import/:token?',
    BLANK: '/blank/'
};
var URL = exports.URL = {
    HOME: '/home/',
    HOME_RECENTS: '/home/recents/',
    HOME_STAR: '/home/star/',
    HOME_SHARE_FILES: '/home/share/files/',
    DOC: '/doc/',
    SHEET: '/sheet/',
    LIKELIST: '/like-list/',
    BITABLE: 'bitable/',
    MINDNOTE: '/mindnote/',
    FOLDER: '/folder/',
    TRASH: '/trash/',
    SHARE: '/share/',
    SHARE_FILES: '/share/files/',
    SHARE_FOLDERS: '/share/folders/',
    RECENTS: '/recents/',
    DEFAULT: '/default/',
    IMPORT: '/import/',
    BLANK: '/blank/',
    SLIDE: '/slide/'
};
if (_networkHelper.pathPrefix) {
    for (var key in PATH) {
        PATH[key] = _networkHelper.pathPrefix + PATH[key];
    }
    for (var _key in URL) {
        URL[_key] = _networkHelper.pathPrefix + URL[_key];
    }
}
var RouteType = exports.RouteType = undefined;
(function (RouteType) {
    RouteType["FILELIST"] = "file_list";
    RouteType["SUITE"] = "suite";
})(RouteType || (exports.RouteType = RouteType = {}));
var routeList = exports.routeList = [{
    routeName: 'explorer',
    url: URL.FOLDER,
    query: false,
    rootType: common.NUM_ROOT_META.EXPLORER,
    isSuite: false,
    path: PATH.EXPLORER,
    module: 'personal',
    canOpen: true,
    type: RouteType.FILELIST
}, {
    url: URL.HOME,
    query: false,
    rootType: common.NUM_ROOT_META.HOME,
    isSuite: false,
    path: PATH.HOME,
    module: 'home',
    subModule: 'recent',
    canOpen: true,
    type: RouteType.FILELIST
}, {
    url: URL.HOME_RECENTS,
    query: false,
    rootType: common.NUM_ROOT_META.HOME,
    isSuite: false,
    path: PATH.HOME,
    module: 'home',
    subModule: 'recent',
    canOpen: true,
    type: RouteType.FILELIST
}, {
    url: URL.HOME_SHARE_FILES,
    query: false,
    rootType: common.NUM_ROOT_META.HOME,
    isSuite: false,
    path: PATH.HOME,
    module: 'home',
    subModule: 'file',
    canOpen: true,
    type: RouteType.FILELIST
}, {
    url: URL.HOME_STAR,
    query: false,
    rootType: common.NUM_ROOT_META.HOME,
    isSuite: false,
    path: PATH.HOME,
    module: 'home',
    subModule: 'star',
    canOpen: true,
    type: RouteType.FILELIST
}, {
    url: URL.FOLDER,
    query: true,
    isSuite: false,
    path: PATH.FOLDER,
    module: 'personal',
    canOpen: true,
    type: RouteType.FILELIST
}, {
    url: URL.SHARE,
    query: false,
    rootType: common.NUM_ROOT_META.SHARE,
    isSuite: false,
    path: PATH.SHARE,
    module: 'sharetome',
    canOpen: true,
    type: RouteType.FILELIST
}, {
    // routeName: 'shareFiles',
    url: URL.SHARE_FILES,
    query: false,
    rootType: common.NUM_ROOT_META.SHARE_FILES,
    isSuite: false,
    path: PATH.SHARE,
    module: 'sharetome',
    subModule: 'file',
    canOpen: true,
    type: RouteType.FILELIST
}, {
    // routeName: 'shareFolders',
    url: URL.SHARE_FOLDERS,
    query: false,
    rootType: common.NUM_ROOT_META.SHARE_FOLDERS,
    isSuite: false,
    path: PATH.SHARE_FOLDERS,
    module: 'sharetome',
    subModule: 'folder',
    canOpen: true,
    type: RouteType.FILELIST
}, {
    url: URL.TRASH,
    query: false,
    rootType: common.NUM_ROOT_META.TRASH,
    isSuite: false,
    path: PATH.TRASH,
    module: 'trash',
    canOpen: false,
    type: RouteType.FILELIST
}, {
    url: URL.DOC,
    query: true,
    suiteType: common.NUM_FILE_TYPE.DOC,
    isSuite: true,
    path: PATH.DOC,
    module: 'doc',
    type: RouteType.SUITE
}, {
    url: URL.SHEET,
    query: true,
    suiteType: common.NUM_FILE_TYPE.SHEET,
    isSuite: true,
    path: PATH.SHEET,
    module: 'sheet',
    type: RouteType.SUITE
}, {
    url: URL.LIKELIST,
    query: true,
    suiteType: common.NUM_FILE_TYPE.DOC,
    isSuite: true,
    path: PATH.LIKELIST,
    module: 'LikeList',
    type: RouteType.SUITE
}, {
    url: URL.BITABLE,
    query: true,
    // TODO: bitable suiteType 确认后需要调整
    suiteType: common.NUM_FILE_TYPE.BITABLE,
    module: 'bitable',
    isSuite: true,
    path: PATH.BITABLE
}, {
    url: URL.MINDNOTE,
    query: true,
    suiteType: common.NUM_FILE_TYPE.MINDNOTE,
    isSuite: true,
    path: PATH.MINDNOTE,
    module: 'mindnote',
    type: RouteType.SUITE
}, {
    url: URL.SLIDE,
    query: true,
    suiteType: common.NUM_FILE_TYPE.MINDNOTE,
    isSuite: true,
    path: PATH.SLIDE,
    module: 'slide',
    type: RouteType.SUITE
}, {
    url: URL.RECENTS,
    query: false,
    isSuite: false,
    path: PATH.RECENTS,
    module: 'recent',
    type: RouteType.FILELIST
}, {
    url: URL.DEFAULT,
    query: false,
    isSuite: false,
    path: PATH.DEFAULT,
    module: 'default'
}, {
    url: URL.IMPORT,
    query: true,
    isSuite: false,
    path: PATH.IMPORT,
    module: ''
}, {
    url: URL.BLANK,
    query: false,
    isSuite: false,
    path: PATH.BLANK,
    module: 'blank'
}];

/***/ }),
/* 515 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BEST_PRACTICE_GUIDE_DOC = exports.NULL_SECRET = exports.NEW_FEATURE_GUIDE_DOC = exports.ENV_TYPE = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _NEW_FEATURE_GUIDE_DO, _NULL_SECRET, _BEST_PRACTICE_GUIDE_;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PROD = 'prod';
var STAGING = 'staging';
var TEST = 'test';
var ENV_TYPE = exports.ENV_TYPE = { PROD: PROD, STAGING: STAGING, TEST: TEST };
var NEW_FEATURE_GUIDE_DOC = exports.NEW_FEATURE_GUIDE_DOC = (_NEW_FEATURE_GUIDE_DO = {}, (0, _defineProperty3.default)(_NEW_FEATURE_GUIDE_DO, PROD, 'ijXpwodRxd5Xlkc2ZPFjZc'), (0, _defineProperty3.default)(_NEW_FEATURE_GUIDE_DO, STAGING, '4jwbcgRY0ZIkhdW00zTJVd'), (0, _defineProperty3.default)(_NEW_FEATURE_GUIDE_DO, TEST, 'rXff6ddTnlqBUNyha3Xi5b'), _NEW_FEATURE_GUIDE_DO);
var NULL_SECRET = exports.NULL_SECRET = (_NULL_SECRET = {}, (0, _defineProperty3.default)(_NULL_SECRET, PROD, '4f5a6965f9988e8fe757bc68ba7ad3a7'), (0, _defineProperty3.default)(_NULL_SECRET, STAGING, '4c6ad794909459e358c959d830fe7940'), (0, _defineProperty3.default)(_NULL_SECRET, TEST, '4c6ad794909459e358c959d830fe7940'), _NULL_SECRET);
var BEST_PRACTICE_GUIDE_DOC = exports.BEST_PRACTICE_GUIDE_DOC = (_BEST_PRACTICE_GUIDE_ = {}, (0, _defineProperty3.default)(_BEST_PRACTICE_GUIDE_, PROD, 'V8Zc2nv7Lk7qSUbIWyZkjf'), (0, _defineProperty3.default)(_BEST_PRACTICE_GUIDE_, STAGING, 'ibQxc3IFX4eBbksR0Pmqle'), (0, _defineProperty3.default)(_BEST_PRACTICE_GUIDE_, TEST, 'mfm56tEXIRgtPuXq3HWjRd'), _BEST_PRACTICE_GUIDE_);

/***/ }),
/* 516 */,
/* 517 */,
/* 518 */,
/* 519 */,
/* 520 */,
/* 521 */,
/* 522 */,
/* 523 */,
/* 524 */,
/* 525 */,
/* 526 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.globalLikeInitialState = exports.LikeCtor = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions;

var _immutable = __webpack_require__(31);

var _redux = __webpack_require__(66);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _likeHelper = __webpack_require__(361);

var _like = __webpack_require__(388);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var LikeCtor = exports.LikeCtor = (0, _immutable.Record)({
    id: '0',
    userId: '0',
    referType: _like.LikeReferType.DOC,
    likeType: _like.LikeType.COMMON,
    createTime: 0,
    userName: '',
    userAvatarUrl: ''
}, 'Like');
var LikeDetailCtor = (0, _immutable.Record)({
    isOpen: false,
    hasMore: false,
    likes: (0, _immutable.List)()
}, 'LikeDetail');
var GlobalLikeStateCtor = (0, _immutable.Record)({
    count: 0,
    likeId: null,
    detail: new LikeDetailCtor(),
    // 从服务端拿到列表前，默认认为是可以继续拉取的
    recentHasMore: true,
    recentLikes: (0, _immutable.List)(),
    hasLikedFromLocal: null
}, 'TargetLikeState');
var globalLikeInitialState = exports.globalLikeInitialState = new GlobalLikeStateCtor();
function makeNewLikesList(ids, likes, users) {
    var newLikes = ids.filter(function (id) {
        var like = likes[id];
        return like && users[like.user_id];
    }).map(function (id) {
        var like = likes[id];
        var user = users[like.user_id];
        return new LikeCtor({
            id: like.id,
            userId: like.user_id,
            referType: like.refer_type,
            likeType: like.like_type,
            createTime: like.create_time,
            userName: user.name,
            userAvatarUrl: user.avatar_url
        });
    });
    return (0, _immutable.List)(newLikes);
}
var globalLike = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.FETCH_GLOBAL_LIKE_LIST_SUCCESS, function (state, action) {
    if (!state.detail.isOpen) return state;
    var _action$payload = action.payload,
        hasMore = _action$payload.has_more,
        ids = _action$payload.ids,
        likes = _action$payload.likes,
        users = _action$payload.users;

    var newLikes = makeNewLikesList(ids, likes, users);
    return state.merge({
        detail: state.detail.merge({
            hasMore: hasMore,
            likes: state.detail.likes.concat(newLikes)
        })
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.OPEN_GLOBAL_LIKE_DETAIL, function (state, action) {
    return state.merge({
        detail: state.detail.merge({
            isOpen: true,
            // 打开时 hasMore 使用 recentHasMore 的值
            hasMore: state.recentHasMore,
            // 打开时从 recentLikes 复制一份作为 likes 的第一页数据
            likes: state.recentLikes
        })
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.CLOSE_GLOBAL_LIKE_DETAIL, function (state, action) {
    return state.merge({ detail: state.detail.clear() });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.FETCH_RECENT_GLOBAL_LIKE_LIST_SUCCESS, function (state, action) {
    var _action$payload2 = action.payload,
        recentHasMore = _action$payload2.has_more,
        ids = _action$payload2.ids,
        likes = _action$payload2.likes,
        users = _action$payload2.users;

    var newRecentLikes = makeNewLikesList(ids, likes, users);
    return state.merge({
        recentHasMore: recentHasMore,
        // .slice 是为了保证 newRecentLikes 里没有但 prevRecentLikes 有的 likes 不被 merge 进去
        recentLikes: state.recentLikes.slice(0, newRecentLikes.size).mergeDeep(newRecentLikes)
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.FETCH_GLOBAL_LIKE_COUNT_SUCCESS, function (state, action) {
    var _action$payload3 = action.payload,
        count = _action$payload3.count,
        like_id = _action$payload3.like_id;

    return state.merge({
        count: count,
        // like_id 为空字符串则表示没有点赞
        likeId: like_id === '' ? null : like_id
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.SYNC_GLOBAL_LIKE, function (state, action) {
    var recentLikes = state.recentLikes;
    var payload = action.payload;
    /** 当前用户是否点了赞 */

    var hasCurUserLiked = state.likeId !== null;
    /** 是否是当前用户的点赞/取消点赞操作 */
    var isPayloadByCurUser = payload.like.userId === payload.curUserId;
    /** 不包含操作者的点赞列表 */
    var recentLikesWithoutPayloadLikeUser = recentLikes.filterNot(function (like) {
        return like.userId === payload.like.userId;
    });
    /** 原来的列表是否包含操作者 */
    var isRecentLikesIncludingPayloadLikeUser = recentLikes.size !== recentLikesWithoutPayloadLikeUser.size;
    var newState = {};
    if (payload.action === _like.SyncGlobalLikeCountAction.INCREASE) {
        // 或运算的第一个条件表示：如果点赞的用户是当前用户，且当前用户点了赞，则不能 +1
        // 或运算的第二个条件表示：之前的最近点赞列表存在点赞的用户，也不能 +1。
        //                     这是因为来了某人的两个点赞时，第二个点赞把第一个点赞覆盖掉，数量还是不变
        var shouldNotIncrease = isPayloadByCurUser && hasCurUserLiked || isRecentLikesIncludingPayloadLikeUser;
        // bad case：点赞的用户已经点了赞，但不在最近点赞列表里，如果后端推送说他点了赞，则会盲目 +1
        if (!shouldNotIncrease) {
            newState.count = state.count + 1;
        }
        // 这里可能会出现：来了某人的两个点赞，第二个点赞把第一个点赞覆盖掉
        var newLike = payload.like;
        // reverse 是为了得到倒序，大 id 在前面
        newState.recentLikes = recentLikesWithoutPayloadLikeUser.unshift(newLike).sortBy(function (like) {
            return like.id;
        }).reverse();
        // 如果是当前用户的点赞，则更新一下 likeId
        if (isPayloadByCurUser) {
            newState.likeId = payload.like.id;
        }
    } else if (payload.action === _like.SyncGlobalLikeCountAction.DECREASE) {
        /** 取消点赞后的点赞列表 */
        var recentLikesWithoutPayloadLike = recentLikes.filterNot(function (like) {
            return like.id === payload.like.id;
        });
        /** 原来的列表是否包含操作者取消的点赞 */
        var isRecentLikesIncludingPayloadLike = recentLikes.size !== recentLikesWithoutPayloadLike.size;
        // 如果取消点赞的用户在列表中，而且取消的不是列表中的点赞（即取消的是被覆盖的点赞），也不能 -1
        // 这是因为来了某人的两个点赞时，第二个点赞会把第一个点赞覆盖掉，所以取消时，要忽略取消第一个点赞的带来的 -1
        var isDanglingDislike = isRecentLikesIncludingPayloadLikeUser && !isRecentLikesIncludingPayloadLike;
        // 或运算的第一个条件表示：如果取消点赞的用户是当前用户，且当前用户没点赞，则不能 -1
        var shouldNotDecrease = isPayloadByCurUser && !hasCurUserLiked || isDanglingDislike;
        // bad case：取消点赞的用户本来也没点赞，如果后端推送说他取消了点赞，则会盲目 -1
        if (!shouldNotDecrease) {
            newState.count = Math.max(0, state.count - 1);
        }
        // 如果不包含操作者要取消的点赞，则 recentLikes 应该是不变的
        newState.recentLikes = isRecentLikesIncludingPayloadLike ? recentLikesWithoutPayloadLike : recentLikes;
        // 如果是当前用户的取消点赞，则置空 likeId
        if (isPayloadByCurUser && !isDanglingDislike) {
            newState.likeId = null;
        }
    }
    return state.merge(newState);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.CLEAR_GLOBAL_LIKE_STATE, function (state, action) {
    return state.clear();
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.POST_GLOBAL_LIKE_SUCCESS, function (state, action) {
    /** 当前用户是否点了赞 */
    var hasCurUserLiked = state.likeId !== null;
    if (hasCurUserLiked) {
        return state;
    }
    var recentLikes = state.recentLikes;
    var payload = action.payload;
    var id = payload.id,
        refer_type = payload.refer_type,
        curUserId = payload.curUserId,
        userName = payload.userName,
        userAvatarUrl = payload.userAvatarUrl;

    var newState = {};
    newState.count = state.count + 1;
    var newLike = new LikeCtor({
        id: id,
        userId: curUserId,
        referType: refer_type,
        likeType: _like.LikeType.COMMON,
        createTime: (0, _likeHelper.getCurrentCreateTime)(),
        userName: userName,
        userAvatarUrl: userAvatarUrl
    });
    newState.recentLikes = recentLikes.unshift(newLike).sortBy(function (like) {
        return like.id;
    }).reverse();
    newState.likeId = id;
    return state.merge(newState);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.POST_GLOBAL_DISLIKE_SUCCESS, function (state, action) {
    if (state.likeId === null) {
        return state;
    }
    var recentLikes = state.recentLikes;
    var payload = action.payload;

    var newState = {};
    /** 不包含自己的点赞列表 */
    var recentLikesWithoutCurUser = recentLikes.filterNot(function (like) {
        return like.userId === payload.curUserId;
    });
    newState.count = Math.max(0, state.count - 1);
    newState.recentLikes = recentLikesWithoutCurUser;
    newState.likeId = null;
    return state.merge(newState);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.like.globalLike.SET_HAS_LIKED_FROM_LOCAL, function (state, action) {
    return state.merge({ hasLikedFromLocal: action.payload });
}), _handleActions), globalLikeInitialState);
exports.default = (0, _redux.combineReducers)({
    globalLike: globalLike
});

/***/ }),
/* 527 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.InstanceChainMap = undefined;

var _DecoratorConfig = __webpack_require__(1097);

Object.keys(_DecoratorConfig).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _DecoratorConfig[key];
    }
  });
});

var _DecoratorFactory = __webpack_require__(1098);

Object.keys(_DecoratorFactory).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _DecoratorFactory[key];
    }
  });
});

var _utils = __webpack_require__(208);

var InstanceChainMap = exports.InstanceChainMap = new _utils.CompositeKeyWeakMap();

/***/ }),
/* 528 */,
/* 529 */,
/* 530 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var selectBackUrlMap = exports.selectBackUrlMap = function selectBackUrlMap(state) {
  return state.appState.backUrlMap;
};
var selectBackUrl = exports.selectBackUrl = function selectBackUrl(state) {
  return selectBackUrlMap(state)[location.pathname];
};

/***/ }),
/* 531 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.createCancelToastAction = undefined;
exports.isSuccessAction = isSuccessAction;
exports.isFailAction = isFailAction;

var _$constants = __webpack_require__(5);

var noop = function noop() {
    return undefined;
};
var isFail = new RegExp(/_FAIL$/);
var isSuccess = new RegExp(/_SUCCESS$/);
var createCancelToastAction = exports.createCancelToastAction = function createCancelToastAction() {
    var content = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : t('action.successfully_redo');
    var onCancel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;
    return {
        type: _$constants.actionTypes.toast.TOAST_SHOW,
        toastConfig: {
            type: 'success',
            content: content
        }
    };
};
function isSuccessAction(action) {
    if (typeof action === 'function') return false;
    return isSuccess.test(action.type);
}
function isFailAction(action) {
    if (typeof action === 'function') return false;
    return isFail.test(action.type);
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 532 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.divider = exports.obj = exports.node = undefined;

var _typings = __webpack_require__(392);

var uid = {
    create_uid: '',
    owner_id: '',
    edit_uid: ''
};
var time = {
    create_time: 0,
    edit_time: 0,
    add_time: 0,
    pin_time: 0
};
var flag = {
    is_pined: false,
    is_stared: false
};
var trashExclusive = {
    expire_time: 0
};
var recentExclusive = {
    open_time: 0
};
var sharedExclusive = {
    /** 所属共享根文件夹的虚拟空间id */
    space_id: '',
    share_desc: ''
};
var nodeObjSharedPropsForExplorerIterate = {
    name: '',
    title: '',
    token: '',
    obj_token: '',
    type: null,
    /* for entity merge use */
    /* 同时也来自<suite>/:token接口 */
    edit_user_name: '',
    owner_user_name: '',
    create_user_name: ''
};
var nodeObjShared = Object.assign({}, uid, time, flag, trashExclusive, recentExclusive, sharedExclusive, nodeObjSharedPropsForExplorerIterate);
var sharedRootFolderExclusive = {
    /** 当值为1时，此文件夹为共享根虚拟空间 */
    share_root: _typings.IsSharedRootFolder.no,
    link_token: undefined,
    share_creator: ''
};
var node = exports.node = Object.assign({}, nodeObjShared, sharedRootFolderExclusive);
var obj = exports.obj = Object.assign({}, nodeObjShared, {
    delete_flag: 0,
    revision: 0,
    create_date: '',
    share_time: '',
    has_copied: false,
    is_external: false,
    tenant_id: 0,
    url: ''
});
var divider = exports.divider = {
    divider: true,
    key: 'key',
    title: ''
};

/***/ }),
/* 533 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.selectCurrentMember = exports.selectCurrentSuiteMembers = exports.selectCurrentMemberId = exports.selectMembers = undefined;

var _suite = __webpack_require__(84);

var _reselect = __webpack_require__(131);

var _modelHelper = __webpack_require__(209);

var emptyMemberList = [];

var selectMembers = exports.selectMembers = function selectMembers(state) {
  return state.appState.members;
};

var selectCurrentMemberId = exports.selectCurrentMemberId = function selectCurrentMemberId(state) {
  return state.appState.currentMemberId;
};

var selectCurrentSuiteMembers = exports.selectCurrentSuiteMembers = (0, _reselect.createSelector)(selectMembers, _suite.selectCurrentSuiteToken, _suite.selectCurrentSuiteType, function (membersMap, currentSuiteToken, currentSuiteType) {
  var suiteKey = (0, _modelHelper.getTypePrefixedToken)(currentSuiteType, currentSuiteToken);
  return membersMap[suiteKey] || emptyMemberList;
});

var selectCurrentMember = exports.selectCurrentMember = (0, _reselect.createSelector)(selectCurrentMemberId, selectCurrentSuiteMembers, function (currentMemberId, memberList) {
  return memberList.find(function (member) {
    return member.member_id === currentMemberId;
  });
});

/***/ }),
/* 534 */,
/* 535 */,
/* 536 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getCookie = getCookie;
exports.setCookie = setCookie;
function getCookie(name) {
  var matches = document.cookie.match(new RegExp('(?:^|;)\\s*' + name + '=([^;]+)'));
  return window.decodeURIComponent(matches ? matches[1] : '');
}

function setCookie(name, value, days) {
  var expires = '';
  if (days) {
    var date = new Date();
    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
    expires = '; expires=' + date.toUTCString();
  }
  document.cookie = name + '=' + (value || '') + expires + '; path=/';
}

/***/ }),
/* 537 */,
/* 538 */,
/* 539 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var LogLevel = exports.LogLevel = undefined;
(function (LogLevel) {
    LogLevel[LogLevel["DEBUG"] = 1] = "DEBUG";
    LogLevel[LogLevel["INFO"] = 2] = "INFO";
    LogLevel[LogLevel["WARN"] = 3] = "WARN";
    LogLevel[LogLevel["ERROR"] = 4] = "ERROR";
    LogLevel[LogLevel["OFF"] = 5] = "OFF";
})(LogLevel || (exports.LogLevel = LogLevel = {}));
var LogMethod = exports.LogMethod = undefined;
(function (LogMethod) {
    LogMethod[LogMethod["DEBUG"] = 1] = "DEBUG";
    LogMethod[LogMethod["INFO"] = 2] = "INFO";
    LogMethod[LogMethod["WARN"] = 3] = "WARN";
    LogMethod[LogMethod["ERROR"] = 4] = "ERROR";
    LogMethod[LogMethod["OFF"] = 5] = "OFF";
    LogMethod[LogMethod["COUNT"] = 6] = "COUNT";
    LogMethod[LogMethod["TIME"] = 7] = "TIME";
    LogMethod[LogMethod["MEAN"] = 8] = "MEAN";
})(LogMethod || (exports.LogMethod = LogMethod = {}));

/***/ }),
/* 540 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.fetchLastestGuideWatcher = fetchLastestGuideWatcher;
exports.fetchLatestGuideSaga = fetchLatestGuideSaga;
exports.fetchLatestPinListSaga = fetchLatestPinListSaga;
exports.updateGuideSuccessWatcher = updateGuideSuccessWatcher;

var _effects = __webpack_require__(17);

var _explorer = __webpack_require__(56);

var _guide = __webpack_require__(310);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(85);

var _onboarding = __webpack_require__(314);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchLastestGuideWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchLatestGuideSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(fetchLatestPinListSaga),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(updateGuideSuccessWatcher),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(updateGuideSuccessSaga);

function fetchLastestGuideWatcher() {
    return _regenerator2.default.wrap(function fetchLastestGuideWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.onboarding.FETCH_LATEST_GUIDE], fetchLatestGuideSaga, false);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchLatestGuideSaga() {
    var shouldWait = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
    var status;
    return _regenerator2.default.wrap(function fetchLatestGuideSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.select)((0, _common.selectFetchStatus)('userGuide'));

                case 2:
                    status = _context2.sent;

                    if (!(status !== _$constants.common.StatusMap.loading)) {
                        _context2.next = 8;
                        break;
                    }

                    _context2.next = 6;
                    return _effects.put.resolve((0, _guide.fetchUserGuide)());

                case 6:
                    _context2.next = 11;
                    break;

                case 8:
                    if (!shouldWait) {
                        _context2.next = 11;
                        break;
                    }

                    _context2.next = 11;
                    return (0, _effects.take)(_$constants.actionTypes.guide.FETCH_USER_GUIDE_SUCCESS);

                case 11:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function fetchLatestPinListSaga() {
    var shouldWait = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
    var status;
    return _regenerator2.default.wrap(function fetchLatestPinListSaga$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.select)((0, _common.selectFetchStatus)('pinList'));

                case 2:
                    status = _context3.sent;

                    if (!(status !== _$constants.common.StatusMap.loading)) {
                        _context3.next = 8;
                        break;
                    }

                    _context3.next = 6;
                    return _effects.put.resolve((0, _explorer.fetchPinList)());

                case 6:
                    _context3.next = 11;
                    break;

                case 8:
                    if (!shouldWait) {
                        _context3.next = 11;
                        break;
                    }

                    _context3.next = 11;
                    return (0, _effects.take)(_$constants.actionTypes.explorer.FETCH_PIN_LIST_SUCCESS);

                case 11:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function updateGuideSuccessWatcher() {
    return _regenerator2.default.wrap(function updateGuideSuccessWatcher$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    _context4.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.guide.UPDATE_USER_GUIDE_SUCCESS, _$constants.actionTypes.guide.CLOSE_USER_GUIDE_SUCCESS], updateGuideSuccessSaga);

                case 2:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}
function updateGuideSuccessSaga() {
    return _regenerator2.default.wrap(function updateGuideSuccessSaga$(_context5) {
        while (1) {
            switch (_context5.prev = _context5.next) {
                case 0:
                    (0, _onboarding.scanSteps)();

                case 1:
                case 'end':
                    return _context5.stop();
            }
        }
    }, _marked5, this);
}

/***/ }),
/* 541 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _isString2 = __webpack_require__(232);

var _isString3 = _interopRequireDefault(_isString2);

exports.isGuideGroupDoneSaga = isGuideGroupDoneSaga;
exports.isGuideTypeDoneSaga = isGuideTypeDoneSaga;
exports.getGuideTypeContextSaga = getGuideTypeContextSaga;
exports.getUserProfileAttrSaga = getUserProfileAttrSaga;

var _effects = __webpack_require__(17);

var _guide = __webpack_require__(455);

var _onboarding = __webpack_require__(314);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(isGuideGroupDoneSaga),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(isGuideTypeDoneSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(getGuideTypeContextSaga),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(getUserProfileAttrSaga);

function isGuideGroupDoneSaga(groupType) {
    var userGuide;
    return _regenerator2.default.wrap(function isGuideGroupDoneSaga$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.select)(_guide.selectUserGuide);

                case 2:
                    userGuide = _context.sent;
                    return _context.abrupt('return', (0, _onboarding.isGuideGroupDone)(userGuide, groupType));

                case 4:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function isGuideTypeDoneSaga(guideType) {
    var userGuide;
    return _regenerator2.default.wrap(function isGuideTypeDoneSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.select)(_guide.selectUserGuide);

                case 2:
                    userGuide = _context2.sent;
                    return _context2.abrupt('return', (0, _onboarding.isGuideTypeDone)(userGuide, guideType));

                case 4:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function getGuideTypeContextSaga(guideType) {
    var userGuide, context;
    return _regenerator2.default.wrap(function getGuideTypeContextSaga$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.select)(_guide.selectUserGuide);

                case 2:
                    userGuide = _context3.sent;
                    context = (0, _onboarding.getGuideTypeContext)(userGuide, guideType);

                    if (!(0, _isString3.default)(context)) {
                        _context3.next = 12;
                        break;
                    }

                    _context3.prev = 5;
                    return _context3.abrupt('return', JSON.parse(context));

                case 9:
                    _context3.prev = 9;
                    _context3.t0 = _context3['catch'](5);
                    return _context3.abrupt('return', context);

                case 12:
                    return _context3.abrupt('return', context);

                case 13:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this, [[5, 9]]);
}
function getUserProfileAttrSaga(attrGroup, attrType) {
    var userProfile;
    return _regenerator2.default.wrap(function getUserProfileAttrSaga$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    _context4.next = 2;
                    return (0, _effects.select)(_guide.selectUserProfile);

                case 2:
                    userProfile = _context4.sent;
                    return _context4.abrupt('return', (0, _onboarding.getUserProfileAttr)(userProfile, attrGroup, attrType));

                case 4:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}

/***/ }),
/* 542 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.keepPrev = keepPrev;
exports.keepNext = keepNext;
/* merger functions */
// /**
//  * Keep previous(old) value first
//  */
// export function keepPrev(prev: any, next: any, key: string) {
//   return prev || next;
// }
// /**
//  * Keep next(new) value first
//  */
// export function keepNext(prev: any, next: any, key: string) {
//   return next || prev;
// }
/* merger functions */
/**
 * Keep previous(old) value first
 */
function keepPrev(prev, next, key) {
    return getPreferredVal({
        key: key,
        preferred: prev,
        backup: next
    });
}
/**
 * Keep next(new) value first
 */
function keepNext(prev, next, key) {
    return getPreferredVal({
        key: key,
        preferred: next,
        backup: prev
    });
}
/**
 * PITFALL HERE !!!
 *   prev: { delete_flag: 2 }
 *   next: { delete_flag: 0 }
 *   return next || prev  => return 0 || 2;
 * So result is 2, which expected to be 0;
 *
 * If you reveal more corner & tricky cases, feel free to fix it and leave comment as below. :)
 * To deal with more specific case, using [key] to write your own special handler inside switch case
 * EXP:
 *   if (key === 'delete_flag') {
 *     return typeof next !== 'undefined' ? next : prev;
 *   }
 */
function getPreferredVal(_ref) {
    var key = _ref.key,
        preferred = _ref.preferred,
        backup = _ref.backup;

    switch (key) {
        case 'delete_flag':
            /* value of the right type always meaningful. */
            return typeof preferred === 'number' ? preferred : backup;
        case 'link_token':
            return typeof preferred === 'undefined' ? backup : preferred;
        default:
            break;
    }
    if (typeof preferred === 'boolean') {
        return preferred;
    }
    return preferred || backup;
}

/***/ }),
/* 543 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.isOverSea = isOverSea;
function isOverSea() {
    var oversea = parseInt(navigator.isOversea, 10);
    return oversea === 1;
}

/***/ }),
/* 544 */,
/* 545 */,
/* 546 */,
/* 547 */,
/* 548 */,
/* 549 */,
/* 550 */,
/* 551 */,
/* 552 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

// Proviedes a require'able version of jQuery without leaking $ and jQuery;
__webpack_require__(1214);

var jq = window.$.noConflict(true);
window.jQuery = window.$ = jq;
jq.expr.cacheLength = 1;

exports.jQuery = jq;
exports.$ = jq;

/***/ }),
/* 553 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Throttle = exports.Debounce = exports.Bind = undefined;

var _bind = __webpack_require__(1096);

var _bind2 = _interopRequireDefault(_bind);

var _debounce = __webpack_require__(1122);

var _debounce2 = _interopRequireDefault(_debounce);

var _throttle = __webpack_require__(1123);

var _throttle2 = _interopRequireDefault(_throttle);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.Bind = _bind2.default;
exports.Debounce = _debounce2.default;
exports.Throttle = _throttle2.default;

/***/ }),
/* 554 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__(47);

var _reactDom2 = _interopRequireDefault(_reactDom);

var _toast_wrap = __webpack_require__(1133);

var _toast_wrap2 = _interopRequireDefault(_toast_wrap);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var div = document.createElement('div');
document.body.appendChild(div);
var instance = _reactDom2.default.render(_react2.default.createElement(_toast_wrap2.default, null), div);

exports.default = {
  show: function show(toast) {
    instance.show(toast);
  },
  success: function success(toast) {
    instance.show(Object.assign({}, toast, { type: 'success' }));
  },
  error: function error(toast) {
    instance.show(Object.assign({}, toast, { type: 'error' }));
  },
  remove: function remove(key) {
    instance.remove(key);
  },
  removeAll: function removeAll() {
    instance.removeAll();
  },
  destroy: function destroy() {
    _reactDom2.default.unmountComponentAtNode(div);
    document.body.removeChild(div);
  }
};

/***/ }),
/* 555 */,
/* 556 */,
/* 557 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.isOldDomain = undefined;

var _get2 = __webpack_require__(14);

var _get3 = _interopRequireDefault(_get2);

exports.getWindowProperty = getWindowProperty;
exports.isLocalhostDomain = isLocalhostDomain;
exports.isNewDomain = isNewDomain;
exports.prependAPI = prependAPI;
exports.PcPrependAPI = PcPrependAPI;
exports.getAPIPrefix = getAPIPrefix;
exports.prependSpace = prependSpace;
exports.isProductionDomain = isProductionDomain;
exports.isStagingEnv = isStagingEnv;
exports.isOverseaDomain = isOverseaDomain;
exports.isOverseaDomainUrl = isOverseaDomainUrl;
exports.isFeishuDomain = isFeishuDomain;
exports.isFeishuStagingDomain = isFeishuStagingDomain;
exports.isDomesticDomain = isDomesticDomain;
exports.isOldLink = isOldLink;
exports.replaceImageDataSrc = replaceImageDataSrc;
exports.getPublicDocs = getPublicDocs;
exports.isDocUrl = isDocUrl;
exports.isStagingEnvUrl = isStagingEnvUrl;
exports.isSameEnvUrl = isSameEnvUrl;
exports.domainPatch = domainPatch;

var _urlHelper = __webpack_require__(128);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mainDomains = {
    feishu: 'feishu.cn',
    larksuite: 'larksuite.com',
    'feishu-staging': 'feishu-staging.cn'
};
var stagingDomains = ['docs-staging.bytedance.net', 'feishu-staging.cn'];
var feishuDomains = ['feishu.cn', 'feishu-staging.cn'];
// 识别环境
function getEnv() {
    if (isLocalhostDomain()) {
        return 'localhost';
    }
    if (isStagingEnv()) {
        if (isFeishuDomain()) {
            return 'feishu-staging';
        }
        return 'docs-staging';
    }
    if (isOverseaDomain()) {
        return 'larksuite';
    }
    return 'feishu';
}
function getWindowProperty(propertyPath, defaultValue) {
    if (typeof window !== 'undefined') {
        if (!propertyPath) {
            return window;
        }
        return (0, _get3.default)(window, propertyPath, defaultValue);
    }
    return '';
}
var isOldDomain = exports.isOldDomain = /(bytedance\.net)/g.test(location.origin);
var withOverseaParams = false;
try {
    var url = window ? window.location.href : '';
    var params = (0, _urlHelper.parseQuery)(url);
    if (params.oversea === 'true') {
        withOverseaParams = true;
    }
} catch (e) {
    // empty catch
}
function isLocalhostDomain() {
    if (getWindowProperty('User.localhost')) {
        return true;
    }
    var hostname = getWindowProperty('location.hostname', '');
    return hostname.indexOf('localhost') > -1;
}
var devEnv = "production" === 'development';
var defaultAPIHost = '';
if (isStagingEnv()) {
    defaultAPIHost = 'https://internal-api.feishu-staging.cn';
} else {
    defaultAPIHost = 'https://internal-api.feishu.cn';
}
if (isOverseaDomain()) {
    if (isStagingEnv()) {
        defaultAPIHost = 'https://docs-staging.bytedance.net';
    } else {
        defaultAPIHost = 'https://internal-api.larksuite.com';
    }
}
if (isLocalhostDomain()) {
    defaultAPIHost = window && window.location ? window.location.origin : '';
}
defaultAPIHost = window.User.apiHost || defaultAPIHost;
var defaultProduct = window.User.product || 'space';
var domains = ['docs.bytedance.net', 'feishu.cn', 'larksuite.com'];
function isNewDomain() {
    return isOverseaDomain() || isFeishuDomain() || isFeishuStagingDomain();
}
function prependAPI(path) {
    if (/^(https|http)\:/.test(path) || !window || !window.location) {
        return path;
    }
    var baseUrl = isNewDomain() ? defaultAPIHost + '/' + defaultProduct : window.location.origin;
    if (/^\//.test(path)) {
        return '' + baseUrl + path;
    }
    return baseUrl + '/' + path;
}
function PcPrependAPI(path, subDomain) {
    if (/^(https|http)\:/.test(path)) {
        return path;
    }
    var baseUrl = '';
    if (subDomain) {
        var mainDomain = mainDomains[getEnv()] || mainDomains['feishu'];
        baseUrl = 'https://' + subDomain + '.' + mainDomain;
    } else {
        baseUrl = isNewDomain() ? defaultAPIHost + '/' + defaultProduct : getWindowProperty('location.origin', '');
    }
    if (/^\//.test(path)) {
        return '' + baseUrl + path;
    }
    return baseUrl + '/' + path;
}
/**
 * 获取 api url 前缀
 */
function getAPIPrefix() {
    return isNewDomain() ? defaultAPIHost + '/' + defaultProduct : window.location.origin;
}
function prependSpace(path) {
    var spaceRep = new RegExp('^/' + defaultProduct);
    // 在lark feed里面，旧域名下会push有space的新域名
    // 如果当前是旧域名的时候，push进来有space的新域名，要把space新域名去掉
    if (!isNewDomain() && spaceRep.test(path)) {
        return path.replace(/space\//, '');
    }
    if (!isNewDomain() || spaceRep.test(path)) {
        return path;
    }
    if (/^\//.test(path)) {
        return '/' + defaultProduct + path;
    }
    return '/' + defaultProduct + '/' + path;
}
function isProductionDomain() {
    if (!getWindowProperty() || devEnv) {
        return false;
    }
    return domains.some(function (d) {
        return getWindowProperty('location.hostname', '').indexOf(d) > -1;
    });
}
function isStagingEnv() {
    if (!getWindowProperty()) {
        return false;
    }
    var domain = getWindowProperty('User.domain');
    if (domain && isStagingEnvUrl(domain)) return true;
    if (devEnv) return false;
    return stagingDomains.some(function (d) {
        return getWindowProperty('location.hostname', '').indexOf(d) > -1;
    });
}
function isOverseaDomain() {
    if ((isLocalhostDomain() || isStagingEnv()) && withOverseaParams) {
        return true;
    }
    if (window && window.User.oversea === true) {
        return true;
    }
    return Boolean(window && window.location.hostname && window.location.hostname.indexOf('larksuite.com') > -1);
}
function isOverseaDomainUrl(url) {
    return url.indexOf('larksuite.com') > -1;
}
function isFeishuDomain() {
    if (getWindowProperty('User.feishu') === true) {
        return true;
    }
    return feishuDomains.some(function (d) {
        return getWindowProperty('location.hostname', '').indexOf(d) > -1;
    });
}
function isFeishuStagingDomain() {
    return !!(window.location.hostname.indexOf('feishu-staging.cn') > -1);
}
function isDomesticDomain() {
    return isFeishuDomain() || isOldDomain;
}
function isOldLink(link) {
    return (/bytedance\.net/.test(link)
    );
}
function replaceImageDataSrc(src) {
    var newDomainAndOldSrc = isNewDomain() && isOldLink(src);
    if (newDomainAndOldSrc) {
        var _parseOriginUrl = (0, _urlHelper.parseOriginUrl)(src),
            pathname = _parseOriginUrl.pathname,
            search = _parseOriginUrl.search,
            hash = _parseOriginUrl.hash;

        var path = prependSpace('/api' + pathname + search + hash);
        return '' + defaultAPIHost + path;
    }
    return src;
}
function getPublicDocs(type) {
    var baseUrl = prependSpace('/');
    return baseUrl + 'help/' + type;
}
function isDocUrl(url) {
    var rep = /((^(http|https):\/\/)?((docs|docs-staging)\.bytedance\.net)|(feishu\.cn\/space)|(larksuite\.com\/space))\/?/;
    return rep.test(url);
}
function isStagingEnvUrl(url) {
    return stagingDomains.some(function (d) {
        return url.indexOf(d) > -1;
    });
}
function isSameEnvUrl(url) {
    if (!isDocUrl(url)) return false;
    if (isOverseaDomain()) {
        return isOverseaDomainUrl(url);
    }
    if (isStagingEnv()) {
        return isStagingEnvUrl(url);
    }
    return true;
}
/* istanbul ignore next */
function domainPatch() {
    var _window$location = window.location,
        search = _window$location.search,
        hash = _window$location.hash,
        pathname = _window$location.pathname;
    // 开发环境下注入product或pathname不以/space/开头, 则跳过重定向逻辑

    if (window.User.product || !/^\/space/.test(pathname)) return;
    // 新域名功能未上线时，如果路由包含space开头，则重定向到旧域名，去掉space
    window.location.replace('https://docs.bytedance.net/' + pathname.replace(/^\/space\//, '') + search + hash);
}

/***/ }),
/* 558 */,
/* 559 */,
/* 560 */,
/* 561 */,
/* 562 */,
/* 563 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var selectEtherPad = exports.selectEtherPad = function selectEtherPad(state) {
  return state.appState.etherpad;
};

var selectClientVars = exports.selectClientVars = function selectClientVars(state) {
  return selectEtherPad(state).clientVars;
};

var selectEditor = exports.selectEditor = function selectEditor(state) {
  return selectEtherPad(state).editor;
};

var selectEditorReady = exports.selectEditorReady = function selectEditorReady(state) {
  return !!selectEditor(state);
};

/***/ }),
/* 564 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.showDate = showDate;
exports.getDaysRemain = getDaysRemain;
exports.forcePastShowDate = forcePastShowDate;
exports.getGroupFromDate = getGroupFromDate;

var _moment = __webpack_require__(312);

var _moment2 = _interopRequireDefault(_moment);

__webpack_require__(715);

var _momentHelper = __webpack_require__(1371);

var _isNumber = __webpack_require__(582);

var _isNumber2 = _interopRequireDefault(_isNumber);

var _timeHelper = __webpack_require__(464);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @author: fangwufeng
 */
/**
 * 时间展示逻辑
 *
 * base          2017-03-24 09:45:35
 * date 的展示逻辑为
 * 60s以内    -   2017-03-24 09:44:36 -> 刚刚
 * 60min以内  -   2017-03-24 09:45:36 -> 59分钟前
 * 今天       -   2017-03-24 04:32:49 -> 4:32
 * 昨天       -   2017-03-23 09:45:35 -> 昨天 9:45
 * 前天       -   2017-03-22 09:45:35 -> 03-22 9:45
 * 本周       -   2017-03-20 09:45:35 -> 03-22 9:45
 * 今年之内    -   2017-02-20 09:45:35 -> 2-20 9:45
 * 去年及以前  -   2016-01-20 09:45:35 -> 16-1-20 9:45
 *
 * @param {Date|Number} d 被对比的日期, *单位为秒*
 * @param {Date|Number} b 用来对比的日期, *单位为秒*
 */
function showDate(d) {
    var b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Math.round(new Date().getTime());

    if (!(0, _isNumber2.default)(d)) {
        return '';
    }
    // TODO(tyler): 去掉下面这行，没必要兼容不同的unix timestamp
    d = d < 1e12 ? d * 1000 : d;
    var date = (0, _moment2.default)(d);
    var base = (0, _moment2.default)(b);
    if (!d || date.isSame(base, 'day')) {
        return date.from(base);
    }
    var yesterday = base.clone().subtract(1, 'day');
    if (date.isSame(yesterday, 'day')) {
        return date.format(_momentHelper.DATE_FORMAT.YESTERDAY);
    }
    if (date.isSame(base, 'year')) {
        return date.format(_momentHelper.DATE_FORMAT.SAME_YEAR);
    }
    return date.format(_momentHelper.DATE_FORMAT.BEFORE_YEAR);
}
/**
 * @param {Number} dateNum 被对比的日期, *单位为秒*
 */
function getDaysRemain(dateNum) {
    return _moment2.default.duration(dateNum * 1000).humanize();
}
function forcePastShowDate(compareTime) {
    if (!compareTime || typeof compareTime !== 'number') {
        return '';
    }
    var pastEnsuredTime = (0, _timeHelper.forceTimePast)(compareTime);
    return showDate(pastEnsuredTime);
}
function getGroupFromDate(value) {
    value = value < 1e12 ? value * 1000 : value;
    var date = (0, _moment2.default)(value);
    var base = (0, _moment2.default)(new Date().getTime());
    if (date.isSame(base, 'day')) {
        return 'today';
    }
    var yesterday = base.clone().subtract(1, 'day');
    if (date.isSame(yesterday, 'day')) {
        return 'yesterday';
    }
    return 'earlier';
}

/***/ }),
/* 565 */,
/* 566 */,
/* 567 */,
/* 568 */,
/* 569 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _isFunction2 = __webpack_require__(76);

var _isFunction3 = _interopRequireDefault(_isFunction2);

exports.isPromise = isPromise;
exports.sleep = sleep;
exports.AsyncThrottle = AsyncThrottle;
exports.AsyncRetry = AsyncRetry;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function isPromise(payment) {
    return payment && typeof payment.then === 'function';
}
function sleep() {
    var milliseconds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;

    return new Promise(function (resolve) {
        return window.setTimeout(resolve, milliseconds);
    });
}
function AsyncThrottle(defaultKey) {
    return function (target, name, descriptor) {
        var get = descriptor.get,
            set = descriptor.set,
            writable = descriptor.writable,
            method = descriptor.value,
            ables = (0, _objectWithoutProperties3.default)(descriptor, ['get', 'set', 'writable', 'value']);

        if (!(0, _isFunction3.default)(method)) {
            return descriptor;
        }
        var runningMap = new Map();
        return Object.assign({}, ables, {
            value: function value() {
                for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                    args[_key] = arguments[_key];
                }

                var key = args[0] || defaultKey;
                var running = runningMap.get(key);
                if (running) return;
                var promise = method.call.apply(method, [this].concat((0, _toConsumableArray3.default)(args)));
                if (!isPromise(promise)) {
                    return console.error('should return an Promise');
                }
                runningMap.set(key, true);
                return promise.then(function (data) {
                    runningMap.delete(key);
                    return data;
                }).catch(function (e) {
                    runningMap.delete(key);
                    return Promise.reject(e);
                });
            }
        });
    };
}
function AsyncRetry(retryTimes, defaultKey) {
    return function (target, name, descriptor) {
        var get = descriptor.get,
            set = descriptor.set,
            writable = descriptor.writable,
            method = descriptor.value,
            ables = (0, _objectWithoutProperties3.default)(descriptor, ['get', 'set', 'writable', 'value']);

        if (!(0, _isFunction3.default)(method)) {
            return descriptor;
        }
        var retryMap = new Map();
        return Object.assign({}, ables, {
            value: function retry() {
                var _this = this;

                for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                    args[_key2] = arguments[_key2];
                }

                var promise = method.call.apply(method, [this].concat(args));
                if (!isPromise(promise)) {
                    return console.error('should return an Promise');
                }
                var key = args[0] || defaultKey;
                return promise.then(function (data) {
                    retryMap.delete(key);
                    return data;
                }).catch(function (e) {
                    var retriedTimes = retryMap.get(key) || 0;
                    if (retriedTimes < retryTimes) {
                        retryMap.set(key, retriedTimes + 1);
                        return retry.call.apply(retry, [_this].concat(args));
                    }
                    retryMap.delete(key);
                    return Promise.reject(e);
                });
            }
        });
    };
}

/***/ }),
/* 570 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
// 添加type
var MENTION_TYPES = exports.MENTION_TYPES = {
    doc: 1,
    sheet: 3,
    bitable: 8,
    mindnote: 11,
    file: 12,
    slide: 15
};
var mentionTypeReg = exports.mentionTypeReg = Object.keys(MENTION_TYPES).join('|');

/***/ }),
/* 571 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var MESSAGE_UNREAD = exports.MESSAGE_UNREAD = 1;
var MESSAGE_READ = exports.MESSAGE_READ = 2;
var MESSAGE_COMMENT_TYPE = exports.MESSAGE_COMMENT_TYPE = 'MESSAGE_DOC_COMMENT';
var MESSAGE_MENTION_TYPE = exports.MESSAGE_MENTION_TYPE = 'MESSAGE_DOC_MENTION';
var MESSAGE_SHARE_TYPE = exports.MESSAGE_SHARE_TYPE = 'MESSAGE_DOC_SHARE';
var COMMENT_MENTION_ID = exports.COMMENT_MENTION_ID = '1111111111111111';

/***/ }),
/* 572 */,
/* 573 */,
/* 574 */,
/* 575 */,
/* 576 */,
/* 577 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LazyRender = exports.ContainerRender = undefined;

var _container_render = __webpack_require__(1058);

var _container_render2 = _interopRequireDefault(_container_render);

var _lazy_render = __webpack_require__(1070);

var _lazy_render2 = _interopRequireDefault(_lazy_render);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.ContainerRender = _container_render2.default;
exports.LazyRender = _lazy_render2.default;

/***/ }),
/* 578 */,
/* 579 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createSupportOfflineRequest = exports.createNormalRequest = undefined;

var _axios = __webpack_require__(351);

var _$constants = __webpack_require__(5);

var _reduxSaga = __webpack_require__(240);

var _offlineEditHelper = __webpack_require__(220);

function createNormalRequest(axiosInstance) {
  return axiosFetch(axiosInstance);
}

function createSupportOfflineRequest() {
  return mobileFetch();
}

function axiosFetch(axiosInstance) {
  return function (requestConfig) {
    var source = _axios.CancelToken.source();
    var request = axiosInstance.request(Object.assign({}, requestConfig, { cancelToken: source.token })).then(function (response) {
      return response;
    }, handleError);
    request[_reduxSaga.CANCEL] = function () {
      return source.cancel('task canceled');
    };
    return request;
  };
}

function mobileFetch() {
  return function () {
    var requestConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    var request = (0, _offlineEditHelper.compatibleAxiosFetch)(Object.assign({}, requestConfig)).then(function (response) {
      return response;
    }, handleError);
    return request;
  };
}

function handleError(error) {
  var errorObject = error;
  if (error.code === _$constants.error.STATUS_CODE.LOGIN_REQUIRED) {
    window.location.reload();
  }

  // @TODO: refactor
  // 防止出现reject的是一个response的写法
  if (error.response) {
    // 服务端错误such as 404/500
    errorObject = {
      code: error.response.status,
      msg: error.response.statusText
    };
  } else if (error.code) {
    errorObject = error;
  } else if (error.message) {
    errorObject = {
      code: _$constants.error.STATUS_CODE.CONNECT_ERROR,
      msg: error.message
    };
  } else if (error.data) {
    // @TODO: refactor
    // 防止出现reject的是一个response的写法
    errorObject = {
      code: error.data.code,
      msg: error.data.msg
    };
  }

  // console.log(errorObject, requestConfig);
  return Promise.reject(errorObject);
}

exports.createNormalRequest = createNormalRequest;
exports.createSupportOfflineRequest = createSupportOfflineRequest;

/***/ }),
/* 580 */,
/* 581 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var MESSAGE_UNREAD = exports.MESSAGE_UNREAD = 1;
var MESSAGE_READED = exports.MESSAGE_READED = 2;
var MESSAGE_ERROR_TOAST = exports.MESSAGE_ERROR_TOAST = 'MESSAGE_ERROR_TOAST';

/***/ }),
/* 582 */,
/* 583 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.isTableEntryDefaultOpen = exports.isConvertShareType = exports.canConvertAnyLinkToIframe = exports.getABParameters = exports.getABVersionName = exports.getABVersion = undefined;

var _abTest = __webpack_require__(1419);

var getABTestConfig = function getABTestConfig() {
    return window.User.abTest;
};
var getABVersion = exports.getABVersion = function getABVersion() {
    var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

    var abConfig = getABTestConfig();
    if (abConfig && abConfig.versions) {
        return abConfig.versions[index];
    }
    return null;
};
var getABVersionName = exports.getABVersionName = function getABVersionName() {
    var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

    var _ref = getABVersion(index) || {},
        _ref$version_name = _ref.version_name,
        versionName = _ref$version_name === undefined ? '' : _ref$version_name;

    return versionName;
};
var getABParameters = exports.getABParameters = function getABParameters() {
    var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

    var _ref2 = getABVersion(index) || {},
        _ref2$parameters = _ref2.parameters,
        parameters = _ref2$parameters === undefined ? '' : _ref2$parameters;

    var params = void 0;
    try {
        params = JSON.parse(parameters.replace(/&quot;/gi, '"'));
    } catch (e) {
        params = {};
    }
    return params;
};
var canConvertAnyLinkToIframe = exports.canConvertAnyLinkToIframe = function canConvertAnyLinkToIframe() {
    var _getABParameters = getABParameters(),
        _getABParameters$link = _getABParameters.link_insert_with_iframe,
        link_insert_with_iframe = _getABParameters$link === undefined ? {} : _getABParameters$link;

    return link_insert_with_iframe.state === true;
};
var isConvertShareType = exports.isConvertShareType = function isConvertShareType(type) {
    var _getABParameters2 = getABParameters(),
        _getABParameters2$con = _getABParameters2.convert_share,
        convertShare = _getABParameters2$con === undefined ? {} : _getABParameters2$con;

    switch (convertShare.type) {
        case _abTest.ConvertShareType.panelOpen:
        case _abTest.ConvertShareType.panelCallout:
            return convertShare.type === type;
        default:
            return _abTest.ConvertShareType.toast === type;
    }
};
var isTableEntryDefaultOpen = exports.isTableEntryDefaultOpen = function isTableEntryDefaultOpen() {
    var _getABParameters3 = getABParameters(),
        _getABParameters3$tab = _getABParameters3.table,
        table = _getABParameters3$tab === undefined ? {} : _getABParameters3$tab;

    return table.defaultOpen;
};

/***/ }),
/* 584 */,
/* 585 */,
/* 586 */,
/* 587 */,
/* 588 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _modal_wrap = __webpack_require__(655);

var _modal_wrap2 = _interopRequireDefault(_modal_wrap);

var _newModal = __webpack_require__(1080);

var _newModal2 = _interopRequireDefault(_newModal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_modal_wrap2.default.show = _newModal2.default.show.bind(_newModal2.default);
exports.default = _modal_wrap2.default;

/***/ }),
/* 589 */,
/* 590 */,
/* 591 */,
/* 592 */,
/* 593 */,
/* 594 */,
/* 595 */,
/* 596 */,
/* 597 */,
/* 598 */,
/* 599 */,
/* 600 */,
/* 601 */,
/* 602 */,
/* 603 */,
/* 604 */,
/* 605 */,
/* 606 */,
/* 607 */,
/* 608 */,
/* 609 */,
/* 610 */,
/* 611 */,
/* 612 */,
/* 613 */,
/* 614 */,
/* 615 */,
/* 616 */,
/* 617 */,
/* 618 */,
/* 619 */,
/* 620 */,
/* 621 */,
/* 622 */,
/* 623 */,
/* 624 */,
/* 625 */,
/* 626 */,
/* 627 */,
/* 628 */,
/* 629 */,
/* 630 */,
/* 631 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.classifiedActionTypes = exports.actionTypes = undefined;

var _doc = __webpack_require__(632);

var _doc2 = _interopRequireDefault(_doc);

var _sheet = __webpack_require__(382);

var sheet = _interopRequireWildcard(_sheet);

var _classifiedTypes = __webpack_require__(1026);

var classifiedActionTypes = _interopRequireWildcard(_classifiedTypes);

var _ui = __webpack_require__(1027);

var _ui2 = _interopRequireDefault(_ui);

var _update = __webpack_require__(1028);

var _update2 = _interopRequireDefault(_update);

var _initialization = __webpack_require__(1029);

var _initialization2 = _interopRequireDefault(_initialization);

var _onboarding = __webpack_require__(1030);

var _onboarding2 = _interopRequireDefault(_onboarding);

var _intermediate = __webpack_require__(1031);

var intermediate = _interopRequireWildcard(_intermediate);

var _request = __webpack_require__(1032);

var _request2 = _interopRequireDefault(_request);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var actionTypes = Object.assign({
    initialization: _initialization2.default
}, _doc2.default, {
    onboarding: _onboarding2.default,
    sheet: sheet,
    ui: _ui2.default,
    update: _update2.default,
    request: _request2.default,
    intermediate: intermediate
});
exports.actionTypes = actionTypes;
exports.classifiedActionTypes = classifiedActionTypes;

/***/ }),
/* 632 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _util = __webpack_require__(254);

var _common = __webpack_require__(19);

var docActionTypes = {
    prefix: {
        FETCH: 'FETCH_'
    },
    suffix: _util.SUFFIX,
    user: Object.assign({}, (0, _util.decorateActionType)('CURRENT_USER'), (0, _util.decorateActionType)('USER_DETAIL'), {
        DELETE_CURRENT_USER: 'DELETE_CURRENT_USER'
    }),
    guide: Object.assign({}, (0, _util.decorateActionType)('USER_GUIDE'), (0, _util.decorateActionType)('UPDATE_USER_GUIDE', false), (0, _util.decorateActionType)('CLOSE_USER_GUIDE', false), {
        UPDATE_LOCAL_USER_GUIDE: 'UPDATE_LOCAL_USER_GUIDE',
        SET_LOCAL_USER_GUIDE: 'SET_LOCAL_USER_GUIDE'
    }),
    permission: Object.assign({}, (0, _util.decorateActionType)('BULK_SET_PERM', false), (0, _util.decorateActionType)('SET_USER_PERMISSION', false), (0, _util.decorateActionType)('AUTHORIZED_MEMBERS'), (0, _util.decorateActionType)('ALL_PERMISSION_INFO'), (0, _util.decorateActionType)('SUITE_PUBLIC_PERMISSION'), (0, _util.decorateActionType)('USER_PERMISSION_ON_SUITE'), (0, _util.decorateActionType)('SET_SUITE_PUBLIC_PERMISSION', false), (0, _util.decorateActionType)('REMOVE_AUTHORIZED_MEMBERS', false), (0, _util.decorateActionType)('SEND_SUITE_PERMISSION_REQUEST', false), (0, _util.decorateActionType)('TRANSFER_SUITE_OWNER', false), {
        UPDATE_AUTHORIZED_MEMBERS: 'UPDATE_AUTHORIZED_MEMBERS',
        UNIVERSAL_TRANSFER_OWNER: 'UNIVERSAL_TRANSFER_OWNER'
    }, (0, _util.decorateActionType)('SEND_FOLDER_PERMISSION_REQUEST', false), {
        COPY_TEXT_FAIL: 'COPY_TEXT_FAIL'
    }),
    suite: Object.assign({
        OPEN_FOLDER_OR_FILE: 'OPEN_FOLDER_OR_FILE',
        SET_CURRENT_SUITE_TOKEN: 'SET_CURRENT_SUITE_TOKEN',
        SYNC_NOTE_META: 'SYNC_NOTE_META',
        SYNC_TAB_TITLE: 'SYNC_TAB_TITLE',
        UPDATE_DOC_TITLE: 'UPDATE_DOC_TITLE',
        UPDATE_HAS_COPIED: 'UPDATE_HAS_COPIED'
    }, (0, _util.decorateActionType)('COPY_FILE_BY_OBJ_TOKEN', false), (0, _util.decorateActionType)('TOKEN_INFO'), (0, _util.decorateActionType)('CURRENT_SUITE'), (0, _util.decorateActionType)('UPDATE_TITLE', false), (0, _util.decorateActionType)('COPY_SUITE', false), {
        UPDATE_SUITE_EXTERNAL_START: 'UPDATE_SUITE_EXTERNAL_START',
        UPDATE_SUITE_EXTERNAL_SUCCESS: 'UPDATE_SUITE_EXTERNAL_SUCCESS',
        SET_SHOULD_PRINT: 'SET_SHOULD_PRINT'
    }),
    member: {
        ADD_SUITE_MEMBERS: 'ADD_SUITE_MEMBERS',
        UPDATE_SUITE_MEMBER: 'UPDATE_SUITE_MEMBER',
        REMOVE_SUITE_MEMBERS: 'REMOVE_SUITE_MEMBERS',
        RESET_SUITE_MEMBERS: 'RESET_SUITE_MEMBERS',
        SET_CURRENT_MEMBER_ID: 'SET_CURRENT_MEMBER_ID'
    },
    search: Object.assign({}, (0, _util.decorateActionType)('SEARCH_SUITE'), (0, _util.decorateActionType)('SEARCH_USER')),
    etherpad: Object.assign({}, (0, _util.decorateActionType)('CLIENT_VARS'), {
        RESET_CLIENT_VARS: 'RESET_CLIENT_VARS',
        SET_CLIENT_VARS: 'SET_CLIENT_VARS',
        CHANGE_TOKEN: 'CHANGE_TOKEN',
        SET_EDITOR: 'SET_EDITOR'
    }),
    comment: Object.assign({
        globalComment: Object.assign({}, (0, _util.decorateActionType)('GLOBAL_COMMENT_LIST'), (0, _util.decorateActionType)('NEW_GLOBAL_COMMENT'), (0, _util.decorateActionType)('ADD_NEW_GLOBAL_COMMENT', false), {
            ADD_NEW_GLOBAL_COMMENT_TO_LOCAL: 'ADD_NEW_GLOBAL_COMMENT_TO_LOCAL'
        }, (0, _util.decorateActionType)('UPDATE_GLOBAL_COMMENT', false), (0, _util.decorateActionType)('DELETE_GLOBAL_COMMENT', false), (0, _util.decorateActionType)('RESOLVE_GLOBAL_COMMENT', false), {
            SET_GLOBAL_COMMENT_VERSION: 'SET_GLOBAL_COMMENT_VERSION',
            REMOVE_GLOBAL_COMMENT: 'REMOVE_GLOBAL_COMMENT',
            REOPEN_GLOBAL_COMMENT: 'REOPEN_GLOBAL_COMMENT',
            MERGE_GLOBAL_COMMENT_MESSAGE_STATUSES: 'MERGE_GLOBAL_COMMENT_MESSAGE_STATUSES',
            RESET_GLOBAL_COMMENT: 'RESET_GLOBAL_COMMENT',
            SET_LOCAL_GLOBAL_COMMENT_READ: 'SET_LOCAL_GLOBAL_COMMENT_READ',
            SET_MOBILE_OFELINE_COMMENT_FAIL: 'SET_MOBILE_OFELINE_COMMENT_FAIL',
            MERGE_GLOBAL_COMMENT_REACTION: 'MERGE_GLOBAL_COMMENT_REACTION'
        }),
        docComment: Object.assign({
            INIT_COMMENTS: 'INIT_COMMENTS',
            INIT_MOBILE_COMMENTS: 'INIT_MOBILE_COMMENTS',
            MERGE_COMMENT_MESSAGE_STATUSES: 'MERGE_COMMENT_MESSAGE_STATUSES',
            SET_COMMENT_VERSION: 'SET_COMMENT_VERSION'
        }, (0, _util.decorateActionType)('COMMENT_LIST'), (0, _util.decorateActionType)('RESOLVE_COMMENT', false), {
            RESOLVE_COMMENT_ANIMATED: 'RESOLVE_COMMENT_ANIMATED'
        }, (0, _util.decorateActionType)('POST_COMMENT', false), {
            POST_COMMENT_TO_LOCAL: 'POST_COMMENT_TO_LOCAL'
        }, (0, _util.decorateActionType)('REPLY_COMMENT', false), (0, _util.decorateActionType)('UPDATE_REPLY_COMMENT', false), (0, _util.decorateActionType)('DELETE_REPLY_COMMENT', false), {
            UPDATE_REPLY_COMMENT: 'UPDATE_REPLY_COMMENT',
            REOPEN_COMMENT: 'REOPEN_COMMENT',
            START_NEW_COMMENT: 'START_NEW_COMMENT',
            LINK_COMMENT_TO_DOC: 'LINK_COMMENT_TO_DOC',
            LINK_COMMENT_TO_DOC_OK: 'LINK_COMMENT_TO_DOC_OK',
            LINK_COMMENT_TO_DOC_ERROR: 'LINK_COMMENT_TO_DOC_ERROR',
            REMOVE_COMMENTS: 'REMOVE_COMMENTS',
            UPDATE_COMMENTS: 'UPDATE_COMMENTS',
            RESET_COMMENTS: 'RESET_COMMENTS',
            SET_LOCAL_DOC_COMMENT_READ: 'SET_LOCAL_DOC_COMMENT_READ'
        })
    }, (0, _util.decorateActionType)('SET_COMMENT_MESSAGE_READ', false), {
        SET_COLLAB_DOC_MESSAGE_READ: 'SET_COLLAB_DOC_MESSAGE_READ'
    }),
    pageMessage: Object.assign({}, (0, _util.decorateActionType)('PC_INIT_MESSAGE_LIST'), (0, _util.decorateActionType)('PC_MESSAGE_LIST'), {
        UPDATE_PC_MESSAGE: 'UPDATE_PC_MESSAGE'
    }, (0, _util.decorateActionType)('MESSAGE_LIST'), {
        UPDATE_MESSAGE: 'UPDATE_MESSAGE'
    }, (0, _util.decorateActionType)('MOBILE_MESSAGE_LIST'), {
        UPDATE_MOBILE_MESSAGE: 'UPDATE_MOBILE_MESSAGE',
        RESET_MOBILE_MESSAGE_LIST: 'RESET_MOBILE_MESSAGE_LIST',
        UPDATE_MOBILE_MESSAGE_NUM: 'UPDATE_MOBILE_MESSAGE_NUM',
        REMOVE_MOBILE_COMMENTS: 'REMOVE_MOBILE_COMMENTS',
        UPDATE_MESSAGE_POSITION: 'UPDATE_MESSAGE_POSITION',
        SET_MESSAGE_READ: 'SET_MESSAGE_READ',
        SET_MESSAGE_STATUS: 'SET_MESSAGE_STATUS',
        SET_LOCAL_MESSAGE_MOBILE_READ: 'SET_LOCAL_MESSAGE_MOBILE_READ'
    }, (0, _util.decorateActionType)('SET_MESSAGE_MOBILE_READ', false), (0, _util.decorateActionType)('SET_ALL_MESSAGE_READ', false), {
        START_NEW_COMMENT: 'START_NEW_COMMENT_IN_LARK'
    }, (0, _util.decorateActionType)('COMMENT_LIST'), (0, _util.decorateActionType)('LARK_RESOLVE_COMMENT', false), (0, _util.decorateActionType)('LARK_POST_MESSAGE_COMMENT', false), (0, _util.decorateActionType)('LARK_REPLY_COMMENT', false), {
        UPDATE_REPLY_COMMENT: 'LARK_UPDATE_REPLY_COMMENT',
        REOPEN_COMMENT: 'LARK_REOPEN_COMMENT',
        LINK_COMMENT_TO_DOC: 'LARK_LINK_COMMENT_TO_DOC',
        LINK_COMMENT_TO_DOC_OK: 'LARK_LINK_COMMENT_TO_DOC_OK',
        LINK_COMMENT_TO_DOC_ERROR: 'LARK_LINK_COMMENT_TO_DOC_ERROR',
        REMOVE_COMMENTS: 'LARK_REMOVE_COMMENTS',
        UPDATE_COMMENTS: 'LARK_UPDATE_COMMENTS',
        RESET_MESSAGES: 'RESET_MESSAGES',
        SET_MESSAGE_SHOW_STATE: 'SET_MESSAGE_SHOW_STATE'
    }),
    history: {
        commentHistory: Object.assign({}, (0, _util.decorateActionType)('COMMENT_HISTORY_LIST'), (0, _util.decorateActionType)('REOPEN_HISTORY_COMMENT', false), {
            FILTER_COMMENT_HISTORY_LIST: 'FILTER_COMMENT_HISTORY_LIST'
        }),
        docHistory: Object.assign({}, (0, _util.decorateActionType)('DOC_HISTORY_LIST'), {
            CLEAR_DOC_HISTORY_LIST: 'CLEAR_DOC_HISTORY_LIST',
            UPDATE_DOC_HISTORY_LIST: 'UPDATE_DOC_HISTORY_LIST'
        })
    },
    explorer: Object.assign({
        mobile: Object.assign({}, (0, _util.decorateActionType)('MY_ROOT_META'), (0, _util.decorateActionType)('SHARED_ROOT_META'))
    }, (0, _util.decorateActionType)('ROOT_SHARE_FOLDER'), (0, _util.decorateActionType)('SHOW_SHARE_FOLDER', false), (0, _util.decorateActionType)('HIDE_SHARE_FOLDER', false), {
        SET_HAS_SHARE_FOLDER: 'SET_HAS_SHARE_FOLDER',
        SET_ROOT_TOKEN: 'SET_ROOT_TOKEN',
        CHECK_ROOT_META: 'CHECK_ROOT_META',
        SET_ROOT_META: 'SET_ROOT_META',
        SET_TR_CLICKED: 'SET_TR_CLICKED',
        SET_SHOULD_LOAD_SHARE: 'SET_SHOULD_LOAD_SHARE',
        SET_CURRENT_SUITE_TOKEN: 'SET_CURRENT_SUITE_TOKEN',
        SET_CURRENT_FOLDER_DATA: 'SET_CURRENT_FOLDER_DATA',
        SET_SELECTED_FILE_METAS: 'SET_SELECTED_FILE_METAS',
        FETCH_EXPLORER_FOLDER_LIST: 'FETCH_EXPLORER_FOLDER_LIST',
        FETCH_SELECTED_FILE_DATA: 'FETCH_SELECTED_FILE_DATA',
        SET_PATH: 'SET_PATH',
        SET_RECENT_OBJ_TOKENS: 'SET_RECENT_OBJ_TOKENS',
        REMOVE_FILES_SHARED_INFO: 'REMOVE_FILES_SHARED_INFO',
        REMOVE_FROM_FILE_TOKENS: 'REMOVE_FROM_FILE_TOKENS',
        SET_EXPLORER_LIST_LOADING_STATUS: 'SET_EXPLORER_LIST_LOADING_STATUS',
        SET_LOADING_STATUS: 'SET_LOADING_STATUS',
        LOAD_PERSISTED_ROOT_TOKEN_MAP: 'LOAD_PERSISTED_ROOT_TOKEN_MAP'
    }, (0, _util.decorateActionType)('ADD_MEMBERS_TO_FOLDER', false), (0, _util.decorateActionType)('REMOVE_MEMBER_FROM_FOLDER', false), (0, _util.decorateActionType)('MEMBERS_OF_SHARE_FOLDER'), (0, _util.decorateActionType)('DISMISS_SHARE_FOLDER', false), (0, _util.decorateActionType)('BECOME_SHARE_FOLDER', false), (0, _util.decorateActionType)('CREATE_SHARE_FOLDER', false), (0, _util.decorateActionType)('DELETE_OBJECT', false), (0, _util.decorateActionType)('EXPLORER_ROOT_TOKEN_MAP'), (0, _util.decorateActionType)('FOLDER_TREE'), (0, _util.decorateActionType)('FILE_META'), (0, _util.decorateActionType)('SHARE_OBJECTS'), (0, _util.decorateActionType)('TREE_FILE_META'), (0, _util.decorateActionType)('TREE_ROOT_META'), (0, _util.decorateActionType)('ROOT_META'), (0, _util.decorateActionType)('SHARE_HOME'), (0, _util.decorateActionType)('RECENT_OBJS'), (0, _util.decorateActionType)('RENAME_FILE', false), (0, _util.decorateActionType)('CREATE_FILE', false), (0, _util.decorateActionType)('MOVE_FILE', false), (0, _util.decorateActionType)('REMOVE_FILE', false), (0, _util.decorateActionType)('RESTORE_REMOVED_FILE', false), (0, _util.decorateActionType)('DELETE_REMOVED_FILE', false), (0, _util.decorateActionType)('COPY_SHARE_FILES_TO_PERSONAL_FOLDER', false), (0, _util.decorateActionType)('COPY_', false), (0, _util.decorateActionType)('TRANSFER_SHARE_FOLDER_OWNER', false), (0, _util.decorateActionType)('PIN_LIST'), (0, _util.decorateActionType)('ADD_PIN', false), (0, _util.decorateActionType)('ADD_PIN_SILENTLY', false), (0, _util.decorateActionType)('REMOVE_PIN', false), (0, _util.decorateActionType)('ADD_HELP', false), (0, _util.decorateActionType)('STAR_LIST'), (0, _util.decorateActionType)('ADD_STAR', false), (0, _util.decorateActionType)('REMOVE_STAR', false), (0, _util.decorateActionType)('UPDATE_SHARE_FOLDER_DESC', false), {
        CLICK_STAR_START: 'CLICK_STAR_START'
    }),
    sidebar: {
        SHOULD_OPEN_SIDEBAR: 'SHOULD_OPEN_SIDEBAR'
    },
    lark: Object.assign({}, (0, _util.decorateActionType)('LARK_CHAT_INFO'), (0, _util.decorateActionType)('LARK_CHAT_ID'), (0, _util.decorateActionType)('DOCS_CUSTOMER_SERVICE_CHAT_ID'), (0, _util.decorateActionType)('JOIN_LARK_CHAT', false)),
    toast: {
        TOAST_SHOW: 'TOAST_SHOW',
        TOAST_CLOSE: 'TOAST_CLOSE'
    },
    toastMobile: {
        TOAST_MOBILE_SHOW: 'TOAST_MOBILE_SHOW',
        TOAST_MOBILE_CLOSE: 'TOAST_MOBILE_CLOSE'
    },
    websocket: {
        SYNC_CONNECTED: _common.ACTION_NAMESPACE.WEBSOCKET + '/SYNC_CONNECTED',
        SYNC_CLOSED: _common.ACTION_NAMESPACE.WEBSOCKET + '/SYNC_CLOSED'
    },
    route: {
        LOCATION_CHANGE: '@@router/LOCATION_CHANGE',
        SET_BACK_URL: '@@path/SET_BACK_URL'
    },
    service: {
        SET_FAILED_SERVICES: 'SET_FAILED_SERVICES',
        CLEAR_FAILED_SERVICES: 'CLEAR_FAILED_SERVICES'
    },
    labs: Object.assign({}, (0, _util.decorateActionType)('FETCH_OPEN_LABS', false), (0, _util.decorateActionType)('UPDATE_LABS', false)),
    header: {
        TOGGLE_HEADER_SHOWN: 'TOGGLE_HEADER_SHOWN',
        STORE_LARK_TITLE: 'STORE_LARK_TITLE'
    },
    fetchResponse: {
        FETCH_SUCC: 'FETCH_SUCC',
        FETCH_FAIL: 'FETCH_FAIL'
    },
    export: {
        FETCH_EXPORT_TICKET: 'FETCH_EXPORT_TICKET',
        FETCH_EXPORT_RESULT: 'FETCH_EXPORT_RESULT',
        FETCH_EXPORT_STATUS: 'FETCH_EXPORT_STATUS'
    },
    network: {
        SET_NETWORK_STATE: 'SET_NETWORK_STATE'
    },
    nps: {
        FETCH_NPS_QUESTIONAIRE: 'FETCH_NPS_QUESTIONAIRE',
        APPEAR_NPS_QUESTIONAIRE: 'APPEAR_NPS_QUESTIONAIRE',
        CLOSE_NPS_QUESTIONAIRE: 'CLOSE_NPS_QUESTIONAIRE',
        SUBMIT_NPS_QUESTIONAIRE: 'SUBMIT_NPS_QUESTIONAIRE',
        SUBMIT_ANSWER: 'SUBMIT_ANSWER'
    },
    like: {
        globalLike: Object.assign({}, (0, _util.decorateActionType)('GLOBAL_LIKE_LIST'), {
            OPEN_GLOBAL_LIKE_DETAIL: 'OPEN_GLOBAL_LIKE_DETAIL',
            CLOSE_GLOBAL_LIKE_DETAIL: 'CLOSE_GLOBAL_LIKE_DETAIL'
        }, (0, _util.decorateActionType)('RECENT_GLOBAL_LIKE_LIST'), (0, _util.decorateActionType)('GLOBAL_LIKE_COUNT'), {
            SYNC_GLOBAL_LIKE: 'SYNC_GLOBAL_LIKE'
        }, (0, _util.decorateActionType)('POST_GLOBAL_LIKE', false), (0, _util.decorateActionType)('POST_GLOBAL_DISLIKE', false), {
            SET_HAS_LIKED_FROM_LOCAL: 'SET_HAS_LIKED_FROM_LOCAL',
            CLEAR_GLOBAL_LIKE_STATE: 'CLEAR_GLOBAL_LIKE_STATE'
        })
    },
    translate: Object.assign({
        TOGGLE_TRANSLATE: 'TOGGLE_TRANSLATE',
        SET_CLIENTVARS: 'SET_CLIENTVARS',
        UPDATE_TRANSLATE_STATUS: 'UPDATE_TRANSLATE_STATUS',
        UPDATE_PAGE_POSITION: 'UPDATE_PAGE_POSITION'
    }, (0, _util.decorateActionType)('TRANSLATION'), (0, _util.decorateActionType)('GET_TRANSLATE_CONFIG', false))
};
exports.default = docActionTypes;

/***/ }),
/* 633 */,
/* 634 */,
/* 635 */,
/* 636 */,
/* 637 */,
/* 638 */,
/* 639 */,
/* 640 */,
/* 641 */,
/* 642 */,
/* 643 */,
/* 644 */,
/* 645 */,
/* 646 */,
/* 647 */,
/* 648 */,
/* 649 */,
/* 650 */,
/* 651 */,
/* 652 */,
/* 653 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var FAKE_SHARE_FOLDER_TOKEN = exports.FAKE_SHARE_FOLDER_TOKEN = 'share-folders';
var SHARE_ROOT = exports.SHARE_ROOT = 'share_root';

/***/ }),
/* 654 */,
/* 655 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ModalProps = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _render = __webpack_require__(577);

var _modal = __webpack_require__(1071);

var _modal2 = _interopRequireDefault(_modal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function noop() {}

var ModalWrap = function (_Component) {
    (0, _inherits3.default)(ModalWrap, _Component);

    function ModalWrap() {
        (0, _classCallCheck3.default)(this, ModalWrap);

        var _this = (0, _possibleConstructorReturn3.default)(this, (ModalWrap.__proto__ || Object.getPrototypeOf(ModalWrap)).apply(this, arguments));

        _this.setContainerRender = function (containerRender) {
            _this.containerRender = containerRender;
        };
        _this.getComponent = function (props) {
            return _react2.default.createElement(_modal2.default, Object.assign({}, _this.props, props));
        };
        return _this;
    }

    (0, _createClass3.default)(ModalWrap, [{
        key: 'componentWillUnmount',
        value: function componentWillUnmount() {
            if (this.props.visible) {
                var containerRender = this.containerRender;
                // 在 Modal 可见时被 unmount 也保证会执行完动画。
                // 此时 onClose 不该被调用

                containerRender.renderComponent({
                    afterClose: containerRender.removeContainer.bind(containerRender),
                    onClose: noop,
                    visible: false
                });
            } else {
                this.containerRender.removeContainer();
            }
        }
    }, {
        key: 'render',
        value: function render() {
            return _react2.default.createElement(_render.ContainerRender, { ref: this.setContainerRender, visible: this.props.visible, getComponent: this.getComponent, autoDestroy: false });
        }
    }]);
    return ModalWrap;
}(_react.Component);

exports.ModalProps = _modal.ModalProps;
exports.default = ModalWrap;

/***/ }),
/* 656 */,
/* 657 */,
/* 658 */,
/* 659 */,
/* 660 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createChainedFunction;
/**
 * Safe chained function
 *
 * Will only create a new function if needed,
 * otherwise will pass back existing functions or null.
 *
 * @returns {function|null}
 */
function createChainedFunction() {
  var args = [].slice.call(arguments, 0);
  if (args.length === 1) {
    return args[0];
  }

  return function chainedFunction() {
    for (var i = 0; i < args.length; i++) {
      if (args[i] && args[i].apply) {
        args[i].apply(this, arguments);
      }
    }
  };
}

/***/ }),
/* 661 */,
/* 662 */,
/* 663 */,
/* 664 */,
/* 665 */,
/* 666 */,
/* 667 */,
/* 668 */,
/* 669 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _isObject2 = __webpack_require__(75);

var _isObject3 = _interopRequireDefault(_isObject2);

var _attempt2 = __webpack_require__(806);

var _attempt3 = _interopRequireDefault(_attempt2);

var _without2 = __webpack_require__(1103);

var _without3 = _interopRequireDefault(_without2);

exports.assignAll = assignAll;
exports.assignProperty = assignProperty;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Assigns all properties from an object to another object including non enumerable
 * properties.
 * @export
 * @template T
 * @template U
 * @param {T} to
 * @param {U} from
 * @param {string[]} [excludes=[]]
 * @returns {T}
 */
function assignAll(to, from) {
    var excludes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

    var properties = _without3.default.apply(undefined, [Object.getOwnPropertyNames(from)].concat((0, _toConsumableArray3.default)(excludes)));
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
        for (var _iterator = properties[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var prop = _step.value;

            (0, _attempt3.default)(assignProperty, to, from, prop);
        }
    } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
    } finally {
        try {
            if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
            }
        } finally {
            if (_didIteratorError) {
                throw _iteratorError;
            }
        }
    }

    return to;
}
/**
 * Assigns a property from one object to another while retaining descriptor properties.
 * @export
 * @template T
 * @template U
 * @param {T} to
 * @param {U} from
 * @param {string} prop
 */
function assignProperty(to, from, prop) {
    var descriptor = Object.getOwnPropertyDescriptor(to, prop);
    if (!descriptor || descriptor.configurable) {
        var srcDescriptor = Object.getOwnPropertyDescriptor(from, prop);
        if ((0, _isObject3.default)(srcDescriptor)) {
            Object.defineProperty(to, prop, srcDescriptor);
        } else {
            to[prop] = from[prop];
        }
    }
}

/***/ }),
/* 670 */,
/* 671 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _forOwn2 = __webpack_require__(2259);

var _forOwn3 = _interopRequireDefault(_forOwn2);

exports.copyMetadata = copyMetadata;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Used to copy over meta data from function to function.
 * If meta data is attached to a function. This can get lost
 * when wrapping functions. This tries to persist that.
 * @private
 */
function copyMetadata(to, from) {
  (0, _forOwn3.default)(from, function (value, key) {
    return to[key] = value;
  });
  return to;
}

/***/ }),
/* 672 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.log = log;
/**
 * Creates a log message.
 * @private
 * @export
 * @param {string} [message='']
 * @returns {string}
 */
function log() {
  var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

  return 'lodash-decorators -> ' + message;
}

/***/ }),
/* 673 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _Applicator = __webpack_require__(118);

Object.keys(_Applicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _Applicator[key];
    }
  });
});

var _BindApplicator = __webpack_require__(1112);

Object.keys(_BindApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _BindApplicator[key];
    }
  });
});

var _ComposeApplicator = __webpack_require__(1113);

Object.keys(_ComposeApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _ComposeApplicator[key];
    }
  });
});

var _InvokeApplicator = __webpack_require__(1114);

Object.keys(_InvokeApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _InvokeApplicator[key];
    }
  });
});

var _MemoizeApplicator = __webpack_require__(1115);

Object.keys(_MemoizeApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _MemoizeApplicator[key];
    }
  });
});

var _PartialApplicator = __webpack_require__(1116);

Object.keys(_PartialApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _PartialApplicator[key];
    }
  });
});

var _PartialedApplicator = __webpack_require__(1117);

Object.keys(_PartialedApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _PartialedApplicator[key];
    }
  });
});

var _PartialValueApplicator = __webpack_require__(1118);

Object.keys(_PartialValueApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _PartialValueApplicator[key];
    }
  });
});

var _PostValueApplicator = __webpack_require__(1119);

Object.keys(_PostValueApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _PostValueApplicator[key];
    }
  });
});

var _PreValueApplicator = __webpack_require__(1120);

Object.keys(_PreValueApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _PreValueApplicator[key];
    }
  });
});

var _WrapApplicator = __webpack_require__(1121);

Object.keys(_WrapApplicator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _WrapApplicator[key];
    }
  });
});

/***/ }),
/* 674 */,
/* 675 */,
/* 676 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.NETWORK_TYPE_DESC = exports.NETWORK_TYPE = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _NETWORK_TYPE_DESC;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 网络状态
 * window.NETWORK_STATE = {
 *  type: NETWORK_TYPE, //网络类型
 *  connected: bool, //是否连接网络
 * }
 */
var NETWORK_TYPE = exports.NETWORK_TYPE = {
    FRONTEND: 0,
    WIFY: 1,
    FOURTH_G: 2,
    THIRD_G: 3,
    SECOND_G: 4,
    MOBILE: 5,
    NONE: 6
};
var NETWORK_TYPE_DESC = exports.NETWORK_TYPE_DESC = (_NETWORK_TYPE_DESC = {}, (0, _defineProperty3.default)(_NETWORK_TYPE_DESC, NETWORK_TYPE.FRONTEND, navigator.connection && navigator.connection.type || 'unknow'), (0, _defineProperty3.default)(_NETWORK_TYPE_DESC, NETWORK_TYPE.WIFY, 'wifi'), (0, _defineProperty3.default)(_NETWORK_TYPE_DESC, NETWORK_TYPE.FOURTH_G, '4g'), (0, _defineProperty3.default)(_NETWORK_TYPE_DESC, NETWORK_TYPE.THIRD_G, '3g'), (0, _defineProperty3.default)(_NETWORK_TYPE_DESC, NETWORK_TYPE.SECOND_G, '2g'), (0, _defineProperty3.default)(_NETWORK_TYPE_DESC, NETWORK_TYPE.MOBILE, 'unknow'), (0, _defineProperty3.default)(_NETWORK_TYPE_DESC, NETWORK_TYPE.NONE, 'offline'), _NETWORK_TYPE_DESC);

/***/ }),
/* 677 */,
/* 678 */,
/* 679 */,
/* 680 */,
/* 681 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Node = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _get2 = __webpack_require__(349);

var _get3 = _interopRequireDefault(_get2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _immutable = __webpack_require__(31);

var _baseProps = __webpack_require__(532);

var BaseProps = _interopRequireWildcard(_baseProps);

var _typings = __webpack_require__(392);

var _utils = __webpack_require__(682);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Node = exports.Node = function (_Record) {
    (0, _inherits3.default)(Node, _Record);

    function Node(params) {
        (0, _classCallCheck3.default)(this, Node);
        return (0, _possibleConstructorReturn3.default)(this, (Node.__proto__ || Object.getPrototypeOf(Node)).call(this, params));
    }

    (0, _createClass3.default)(Node, [{
        key: 'get',
        value: function get(value) {
            return (0, _get3.default)(Node.prototype.__proto__ || Object.getPrototypeOf(Node.prototype), 'get', this).call(this, value);
        }
        /**
         * Will keep new value first if it's not a empty value;
         * @example ({ a: 1, b: 2, c: 3, }).mergeNext({ a: 2, b: 3, c: '' }) => { a: 2, b: 3, c: 3 }
         * @param target plain object | Map | Record
         */

    }, {
        key: 'mergeNext',
        value: function mergeNext(target) {
            return this.mergeWith(function (prev, next) {
                return next || prev;
            }, target);
        }
        /**
         * Will keep old value first if it's not a empty value;
         * @example ({ a: 1, b: 2, c: '' }).mergeNext({ a: 2, b: 3, c: 3 }) => { a: 1, b: 2, c: 3 }
         * @param target
         */

    }, {
        key: 'mergePrev',
        value: function mergePrev(target) {
            return this.mergeWith(function (prev, next) {
                return prev || next;
            }, target);
        }
    }, {
        key: 'name',
        get: function get() {
            if (this.get('name')) {
                return this.get('name');
            } else if (this.type && this.obj_token) {
                return (0, _utils.getFallbackDefaultName)(this.type);
            }
            return '';
        }
    }, {
        key: 'isPureNode',
        get: function get() {
            return this.get('obj_token') === '';
        }
    }, {
        key: 'isShareFolder',
        get: function get() {
            return this.link_token !== '' && typeof this.link_token !== 'undefined';
        }
    }, {
        key: 'isShareRoot',
        get: function get() {
            return this.share_root === _typings.IsSharedRootFolder.yes;
        }
    }]);
    return Node;
}((0, _immutable.Record)(BaseProps.node, 'Node: base data unit of explorer system'));

/***/ }),
/* 682 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getFallbackDefaultName = getFallbackDefaultName;

var _common = __webpack_require__(19);

function getFallbackDefaultName(type) {
    return _common.folderType.indexOf(type) < 0 ? _common.suiteType2UnnamedTitle[type] : '';
}

/***/ }),
/* 683 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Obj = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _get2 = __webpack_require__(349);

var _get3 = _interopRequireDefault(_get2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _immutable = __webpack_require__(31);

var _baseProps = __webpack_require__(532);

var BaseProps = _interopRequireWildcard(_baseProps);

var _typings = __webpack_require__(392);

var _utils = __webpack_require__(682);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Obj = exports.Obj = function (_Record) {
    (0, _inherits3.default)(Obj, _Record);

    function Obj(params) {
        var _this, _this;

        (0, _classCallCheck3.default)(this, Obj);

        params ? (_this = (0, _possibleConstructorReturn3.default)(this, (Obj.__proto__ || Object.getPrototypeOf(Obj)).call(this, params)), _this) : (_this = (0, _possibleConstructorReturn3.default)(this, (Obj.__proto__ || Object.getPrototypeOf(Obj)).call(this)), _this);
        return (0, _possibleConstructorReturn3.default)(_this);
    }

    (0, _createClass3.default)(Obj, [{
        key: 'get',
        value: function get(value) {
            return (0, _get3.default)(Obj.prototype.__proto__ || Object.getPrototypeOf(Obj.prototype), 'get', this).call(this, value);
        }
    }, {
        key: 'name',
        get: function get() {
            var name = this.get('title');
            if (!name && this.obj_token) {
                return (0, _utils.getFallbackDefaultName)(this.type);
            }
            return name;
        }
    }, {
        key: 'isDeleted',
        get: function get() {
            return this.get('delete_flag') === _typings.IsDeleted.no;
        }
    }]);
    return Obj;
}((0, _immutable.Record)(BaseProps.obj, 'Obj: base data unit of suite system'));

/***/ }),
/* 684 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.User = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _get2 = __webpack_require__(349);

var _get3 = _interopRequireDefault(_get2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _immutable = __webpack_require__(31);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var defaultUserProp = {
    avatar_url: '',
    cn_name: '',
    email: '',
    en_name: '',
    id: '',
    mobile: '',
    name: '',
    suid: '',
    tenant_id: '',
    tenant_name: '',
    department_id: '',
    can_cross: false
};

var User = exports.User = function (_Record) {
    (0, _inherits3.default)(User, _Record);

    function User(params) {
        var _this, _this;

        (0, _classCallCheck3.default)(this, User);

        params ? (_this = (0, _possibleConstructorReturn3.default)(this, (User.__proto__ || Object.getPrototypeOf(User)).call(this, params)), _this) : (_this = (0, _possibleConstructorReturn3.default)(this, (User.__proto__ || Object.getPrototypeOf(User)).call(this)), _this);
        return (0, _possibleConstructorReturn3.default)(_this);
    }

    (0, _createClass3.default)(User, [{
        key: 'get',
        value: function get(value) {
            return (0, _get3.default)(User.prototype.__proto__ || Object.getPrototypeOf(User.prototype), 'get', this).call(this, value);
        }
    }]);
    return User;
}((0, _immutable.Record)(defaultUserProp));

/***/ }),
/* 685 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.showToast = undefined;

var _$constants = __webpack_require__(5);

var showToast = exports.showToast = function showToast(toastConfig) {
    return {
        type: _$constants.actionTypes.toast.TOAST_SHOW,
        toastConfig: toastConfig
    };
};

/***/ }),
/* 686 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getPresetDataFromQuery = exports.QUERY_FIELDS = undefined;
exports.isUnderShareQueryMode = isUnderShareQueryMode;
exports.resetPathNameIfShareQueryExist = resetPathNameIfShareQueryExist;
exports.validatePermission = validatePermission;

var _urlHelper = __webpack_require__(128);

var _history = __webpack_require__(192);

var _history2 = _interopRequireDefault(_history);

var _values = __webpack_require__(562);

var _values2 = _interopRequireDefault(_values);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var QUERY_FIELDS = exports.QUERY_FIELDS = undefined;
(function (QUERY_FIELDS) {
    QUERY_FIELDS["FROM_IMPORT"] = "fromImport";
    QUERY_FIELDS["SHARE_OPEN"] = "shareOpen";
    QUERY_FIELDS["SUITE_SETTING_OPEN"] = "suiteSettingOpen";
    QUERY_FIELDS["PERMISSION"] = "permission";
    QUERY_FIELDS["MEMBER_NAME"] = "memberName";
    QUERY_FIELDS["MEMBER_ID"] = "memberId";
    QUERY_FIELDS["MEMBER_TYPE"] = "memberType";
})(QUERY_FIELDS || (exports.QUERY_FIELDS = QUERY_FIELDS = {}));
var QUERY_MODE_FIELDS = [QUERY_FIELDS.SHARE_OPEN, QUERY_FIELDS.SUITE_SETTING_OPEN];
/**
 * 判断是否处于query参数预设模式
 */
function isUnderShareQueryMode() {
    var _parseUrl = (0, _urlHelper.parseUrl)(window.location.href),
        search = _parseUrl.search;

    return Object.keys((0, _urlHelper.parseQuery)(search)).some(function (key) {
        return QUERY_MODE_FIELDS.indexOf(key) > -1;
    });
}
/**
 * 用于防止用户操作完毕后，刷新页面再次进入预设模式。
 * @param {Array} preserveQuery 刷新后需要保留的query，比如版本号v
 */
function resetPathNameIfShareQueryExist() {
    var preserveQuerys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

    if (!isUnderShareQueryMode()) return;
    var pathname = window.location.pathname;
    if (pathname === '/') return;
    if (preserveQuerys.length > 0) {
        var search = window.location.search;
        var currentQuerys = (0, _urlHelper.parseQuery)(search);
        var url = preserveQuerys.reduce(function (pre, cur) {
            if (currentQuerys[cur]) {
                return pre + cur + '=' + currentQuerys[cur];
            } else {
                return pre;
            }
        }, '?');
        _history2.default.push(url.length > 1 ? url : pathname);
    }
    _history2.default.push(pathname);
}
function validatePermission(permission) {
    var permNum = parseInt(permission, 10);
    var isValid = _common.USER_PERMISSIONS.indexOf(permNum) > -1;
    return isValid ? permNum : _common.DEFAULT_ADD_MEMBERS_PERMISSION;
}
/**
 * 获取 query 中的预设 data
 */
var getPresetDataFromQuery = exports.getPresetDataFromQuery = {
    /**
     * 权限候选人
     * @param query 根据url parse 得到的 query object
     */
    candidate: function candidate(query) {
        var candidates = {
            owner_id: query.get('memberId'),
            owner_name: query.get('memberName'),
            owner_type: parseInt(query.get('memberType'), 10)
        };
        var isValueMissing = (0, _values2.default)(candidates).some(function (val) {
            return typeof val === 'undefined';
        });
        return isValueMissing ? null : candidates;
    },

    /**
     * 是否是由导入页跳转
     * @param query query object
     */
    isFromImport: function isFromImport(query) {
        return query.get(QUERY_FIELDS.FROM_IMPORT) === '1';
    },

    /**
     * 分享面板的打开与否
     * @param query query object
     */
    isShareOpen: function isShareOpen(query) {
        return query.get(QUERY_FIELDS.SHARE_OPEN) === '1';
    },

    /**
     * 文档公共权限设置面板的打开与否
     * @param query query object
     */
    isSuiteSettingOpen: function isSuiteSettingOpen(query) {
        return query.get(QUERY_FIELDS.SUITE_SETTING_OPEN) === '1';
    },

    /**
     * 候选人权限
     * @param query
     */
    candidatePermission: function candidatePermission(query) {
        var permStr = query.get(QUERY_FIELDS.PERMISSION);
        return validatePermission(permStr);
    }
};

/***/ }),
/* 687 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.retryableDocAPI = undefined;

var _request = __webpack_require__(1190);

var _request2 = _interopRequireDefault(_request);

var _retryable = __webpack_require__(688);

var _retryable2 = _interopRequireDefault(_retryable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _request2.default;
exports.retryableDocAPI = _retryable2.default;

/***/ }),
/* 688 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = retryableAPI;

var _reduxSaga = __webpack_require__(240);

var _effects = __webpack_require__(17);

var _api = __webpack_require__(150);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(retryableAPI);

var DEFAULT_RETRY_TIMES = 5;
var DEFAULT_RETRY_DELAY = 1000;
function retryableAPI(requestConfig) {
    var retryConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var retryTimes, retryDelay, error, i, response;
    return _regenerator2.default.wrap(function retryableAPI$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    retryTimes = retryConfig.retryTimes || DEFAULT_RETRY_TIMES;
                    retryDelay = retryConfig.retryDelay || DEFAULT_RETRY_DELAY;
                    // timeout 已在 fetchDoc 的 instance 上配置了 默认五秒

                    error = void 0;
                    i = 0;

                case 4:
                    if (!(i < retryTimes)) {
                        _context.next = 25;
                        break;
                    }

                    _context.prev = 5;
                    _context.next = 8;
                    return (0, _effects.call)(_api.fetchDoc, requestConfig);

                case 8:
                    response = _context.sent;
                    return _context.abrupt('return', response);

                case 12:
                    _context.prev = 12;
                    _context.t0 = _context['catch'](5);

                    if (!(_context.t0 && _context.t0.code !== 'ECONNABORTED')) {
                        _context.next = 16;
                        break;
                    }

                    throw _context.t0;

                case 16:
                    if (!(i < retryTimes - 1)) {
                        _context.next = 21;
                        break;
                    }

                    _context.next = 19;
                    return (0, _effects.call)(_reduxSaga.delay, retryDelay);

                case 19:
                    _context.next = 22;
                    break;

                case 21:
                    error = _context.t0;

                case 22:
                    i++;
                    _context.next = 4;
                    break;

                case 25:
                    throw error;

                case 26:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this, [[5, 12]]);
}

/***/ }),
/* 689 */,
/* 690 */,
/* 691 */,
/* 692 */,
/* 693 */,
/* 694 */,
/* 695 */,
/* 696 */,
/* 697 */,
/* 698 */,
/* 699 */,
/* 700 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(99);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @fileoverview 封装一发localStorage操作
 * 注意这里不捕获异常
 * 如果不支持localStorage的异常处理需要业务自己处理
 */

var Storage = {
  /**
   * 获取一个 key 对应 string value
   * @param  {string}  key  example: 'bytedance_storage.user.name'
   * @return {Promise<string|null>}
   */
  getItem: function getItem(key) {
    var _this = this;

    return (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
      return _regenerator2.default.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", window.localStorage.getItem(key));

            case 1:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, _this);
    }))();
  },

  /**
   * 设置一个 key 对应的 string value
   * @param {string}  key   example: 'bytedance_storage.user.name'
   * @param {string}  data  example: 'jinlei'
   */
  setItem: function setItem(key, data) {
    var _this2 = this;

    return (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {
      return _regenerator2.default.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", window.localStorage.setItem(key, data));

            case 1:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, _this2);
    }))();
  },

  /**
   * 删除一个key
   * @param {string} key
   */
  removeItem: function removeItem(key) {
    var _this3 = this;

    return (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3() {
      return _regenerator2.default.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              return _context3.abrupt("return", window.localStorage.removeItem(key));

            case 1:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, _this3);
    }))();
  },


  clear: function clear() {
    return new Promise(function (resolve, reject) {
      try {
        localStorage.clear();
      } catch (e) {
        // EMPTY_CATCH_LABEL
      }
    });
  },

  length: function length() {
    return localStorage.length;
  },
  key: function key(index) {
    return localStorage.key(index);
  }
};

exports.default = Storage;

/***/ }),
/* 701 */,
/* 702 */,
/* 703 */,
/* 704 */,
/* 705 */,
/* 706 */,
/* 707 */,
/* 708 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getHeaders = getHeaders;

var _envHeaderHelper = __webpack_require__(459);

var _generateHeadersHelper = __webpack_require__(347);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function getHeaders(request) {
    // 业务要求生成的字段&值 =>  { [key]: value }
    // Example: { request-id: generateRequestId(request) }
    var needToBeMergedHeaderObj = (0, _generateHeadersHelper.generateHeaders)(request);
    var headers = Object.assign({}, needToBeMergedHeaderObj, request.headers);
    if (_browserHelper2.default.isIE) {
        headers['Cache-Control'] = 'no-cache';
        headers['Pragma'] = 'no-cache';
    }
    var envHeader = (0, _envHeaderHelper.getEnvHeader)();
    if (envHeader) {
        headers['Env'] = envHeader;
    }
    return headers;
}

/***/ }),
/* 709 */,
/* 710 */,
/* 711 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var selectCurrentModals = exports.selectCurrentModals = function selectCurrentModals(state) {
  return state.appState.ui.currentModals;
};

/***/ }),
/* 712 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Logger = exports.writeToConsole = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _type = __webpack_require__(539);

var _tea = __webpack_require__(42);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var COUNT_PREFIX = '_count_';
var TIME_PREFIX = '_time_';
var MEAN_PREFIX = '_mean_';
var writeToConsole = exports.writeToConsole = function writeToConsole(context) {
    var level = context.level;

    var prefix = 'logger ' + name + ':';
    var params = [prefix].concat((0, _toConsumableArray3.default)(context.params));
    if (level === _type.LogLevel.DEBUG) {
        var _console;

        (_console = console).debug.apply(_console, (0, _toConsumableArray3.default)(params));
    } else if (level === _type.LogLevel.INFO) {
        var _console2;

        (_console2 = console).info.apply(_console2, (0, _toConsumableArray3.default)(params));
    } else if (level === _type.LogLevel.WARN) {
        var _console3;

        (_console3 = console).warn.apply(_console3, (0, _toConsumableArray3.default)(params));
    } else if (level === _type.LogLevel.ERROR) {
        var _console4;

        (_console4 = console).error.apply(_console4, (0, _toConsumableArray3.default)(params));
    }
};

var Logger = exports.Logger = function () {
    function Logger() {
        var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '__DEFAULT__';
        var writeData = arguments[1];
        (0, _classCallCheck3.default)(this, Logger);

        this.name = name;
        this.cache = new Map();
        this.level = _type.LogLevel.INFO;
        this.writeData = writeData || writeToConsole;
        this.middlewares = [this.createLevelChecker(), this.createDataWritter()];
    }

    (0, _createClass3.default)(Logger, [{
        key: 'setLevel',
        value: function setLevel(level) {
            this.level = level;
        }
    }, {
        key: 'setWriter',
        value: function setWriter(writeData) {
            this.writeData = writeData;
        }
    }, {
        key: 'use',
        value: function use() {
            for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {
                middlewares[_key] = arguments[_key];
            }

            this.middlewares = [this.createLevelChecker()].concat(middlewares, [this.createDataWritter()]);
        }
    }, {
        key: 'debug',
        value: function debug() {
            for (var _len2 = arguments.length, params = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                params[_key2] = arguments[_key2];
            }

            this.invokeByLevel(_type.LogMethod.DEBUG, _type.LogLevel.DEBUG, params);
        }
    }, {
        key: 'info',
        value: function info() {
            for (var _len3 = arguments.length, params = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
                params[_key3] = arguments[_key3];
            }

            this.invokeByLevel(_type.LogMethod.INFO, _type.LogLevel.INFO, params);
        }
    }, {
        key: 'warn',
        value: function warn() {
            for (var _len4 = arguments.length, params = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
                params[_key4] = arguments[_key4];
            }

            this.invokeByLevel(_type.LogMethod.WARN, _type.LogLevel.WARN, params);
        }
    }, {
        key: 'error',
        value: function error() {
            for (var _len5 = arguments.length, params = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
                params[_key5] = arguments[_key5];
            }

            this.invokeByLevel(_type.LogMethod.ERROR, _type.LogLevel.ERROR, params);
        }
    }, {
        key: 'teaLog',
        value: function teaLog() {
            for (var _len6 = arguments.length, params = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
                params[_key6] = arguments[_key6];
            }

            params.forEach(function (item) {
                if (item.key) {
                    (0, _tea.collectSuiteEvent)(item.key, item);
                }
            });
            this.info(params);
        }
    }, {
        key: 'ravenCatch',
        value: function ravenCatch(ex, ravenTag) {
            // Console
            console.error(ex.message || ex.toString());
            console.error(ex.stack || ex.toString());
            // Raven上报
            window.Raven && window.Raven.captureException(ex, ravenTag);
        }
    }, {
        key: 'count',
        value: function count(key) {
            var prefixKey = COUNT_PREFIX + key;
            var v = this.cache.get(prefixKey);
            if (v === undefined) {
                v = 0;
            }
            if (typeof v !== 'number') {
                console.error('counter key: ' + key + ' is used by others.');
                return;
            }
            v++;
            this.cache.set(prefixKey, v);

            for (var _len7 = arguments.length, params = Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {
                params[_key7 - 1] = arguments[_key7];
            }

            this.invokeByLevel(_type.LogMethod.COUNT, _type.LogLevel.INFO, [key].concat(params, [v]));
        }
    }, {
        key: 'clearCounter',
        value: function clearCounter(key) {
            var prefixKey = COUNT_PREFIX + key;
            this.clearCache(prefixKey);
        }
    }, {
        key: 'mean',
        value: function mean(key) {
            for (var _len8 = arguments.length, params = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {
                params[_key8 - 1] = arguments[_key8];
            }

            if (params.length < 1) {
                return;
            }
            var value = params[0];
            if (typeof value !== 'number') {
                return;
            }
            var prefixKey = MEAN_PREFIX + key;
            var v = this.cache.get(prefixKey);
            if (v === undefined) {
                v = [];
            }
            if (!Array.isArray(v)) {
                console.error('mean key: ' + key + ' is used by others.');
                return;
            }
            v.push(value);
            var sum = v.reduce(function (accumulator, currentValue) {
                return accumulator + currentValue;
            }, 0);
            this.cache.set(prefixKey, v);
            this.invokeByLevel(_type.LogMethod.MEAN, _type.LogLevel.INFO, [key].concat(params, [sum / v.length]));
        }
    }, {
        key: 'clearMean',
        value: function clearMean(key) {
            var prefixKey = MEAN_PREFIX + key;
            this.clearCache(prefixKey);
        }
    }, {
        key: 'clearAllCache',
        value: function clearAllCache() {
            this.cache.clear();
        }
    }, {
        key: 'time',
        value: function time(key) {
            var now = Date.now();
            var prefixKey = TIME_PREFIX + key;
            var v = this.cache.get(prefixKey);
            if (v !== undefined) {
                console.error('timer key: ' + key + ' is used by others.');
                return;
            }
            v = now;
            this.cache.set(prefixKey, v);
        }
    }, {
        key: 'timeEnd',
        value: function timeEnd(key) {
            var now = Date.now();
            var prefixKey = TIME_PREFIX + key;
            var v = this.cache.get(prefixKey);
            if (v === undefined) {
                console.error('timer key: ' + key + ' is not defined.');
                return;
            }
            v = now - v;
            this.cache.delete(prefixKey);

            for (var _len9 = arguments.length, params = Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {
                params[_key9 - 1] = arguments[_key9];
            }

            this.invokeByLevel(_type.LogMethod.TIME, _type.LogLevel.INFO, [key].concat(params, [v]));
        }
    }, {
        key: 'clearCache',
        value: function clearCache(prefixKey) {
            var v = this.cache.get(prefixKey);
            if (v === undefined) {
                return;
            }
            this.cache.delete(prefixKey);
        }
    }, {
        key: 'invokeByLevel',
        value: function invokeByLevel(method, level, params) {
            this.invoke(this.createContext(method, level, params || []));
        }
    }, {
        key: 'createContext',
        value: function createContext(method, level, params) {
            var name = this.name;

            return {
                method: method,
                name: name,
                level: level,
                params: params,
                logger: this
            };
        }
    }, {
        key: 'invoke',
        value: function invoke(context) {
            var _this = this;

            var curIndex = 0;
            var createNext = function createNext(index) {
                return function () {
                    if (index !== curIndex) {
                        return;
                    }
                    var f = _this.middlewares[curIndex];
                    curIndex++;
                    var next = createNext(curIndex);
                    f && f(context, next);
                };
            };
            var next = createNext(curIndex);
            next();
        }
    }, {
        key: 'createLevelChecker',
        value: function createLevelChecker() {
            var _this2 = this;

            return function (context, next) {
                if (_this2.level > context.level) {
                    return;
                }
                next();
            };
        }
    }, {
        key: 'createDataWritter',
        value: function createDataWritter() {
            var _this3 = this;

            return function (context, next) {
                _this3.writeData(context);
            };
        }
    }]);
    return Logger;
}();

/***/ }),
/* 713 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setBackUrl = undefined;

var _$constants = __webpack_require__(5);

var setBackUrl = exports.setBackUrl = function setBackUrl(back) {
    var current = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : location.pathname;
    return {
        type: _$constants.actionTypes.route.SET_BACK_URL,
        payload: { current: current, back: back }
    };
};

/***/ }),
/* 714 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.mapKey = exports.userActionStepList = exports.mindmapStepList = undefined;

var _invert2 = __webpack_require__(1567);

var _invert3 = _interopRequireDefault(_invert2);

exports.guideIsOpen = guideIsOpen;

var _onboarding = __webpack_require__(130);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mindmapStepList = exports.mindmapStepList = [_onboarding.STEP_TYPES.mindmap_docs, _onboarding.STEP_TYPES.mindmap_double_click, _onboarding.STEP_TYPES.mindmap_create_heading];
var userActionStepList = exports.userActionStepList = [_onboarding.STEP_TYPES.suite_history];
var keyTransformToRemoteMap = {
    suite_create: 'doc_create',
    suite_share: 'doc_share'
};
var keyTransformToLocalMap = (0, _invert3.default)(keyTransformToRemoteMap);
var mapKey = exports.mapKey = function mapKey(key) {
    var isToLocal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    return (isToLocal ? keyTransformToLocalMap[key] : keyTransformToRemoteMap[key]) || key;
};
function guideIsOpen(userGuide, guideName) {
    return userGuide && userGuide.has(guideName) && userGuide.get(guideName).has('is_done') && !userGuide.get(guideName).get('is_done');
}

/***/ }),
/* 715 */,
/* 716 */,
/* 717 */,
/* 718 */,
/* 719 */,
/* 720 */,
/* 721 */,
/* 722 */,
/* 723 */,
/* 724 */,
/* 725 */,
/* 726 */,
/* 727 */,
/* 728 */,
/* 729 */,
/* 730 */,
/* 731 */,
/* 732 */,
/* 733 */,
/* 734 */,
/* 735 */,
/* 736 */,
/* 737 */,
/* 738 */,
/* 739 */,
/* 740 */,
/* 741 */,
/* 742 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MENTION_CALLBACK_OP = exports.JOIN_CHAT_ERROR_MSG = exports.SEARCH_ERROR_MSG = exports.BLACK_LIST_IN_TABLE = exports.GUIDE_TYPE = exports.AUTHORIZE_DELAY = exports.NOTIFY_DELAY = exports.DRIVE_TYPE = exports.SUCCESS_RESPONSE_CODE = exports.NATIVE_COMMENT_STATUS = exports.AT_POSITION = exports.AT_HOLDER_DOM = exports.LARK_CHAT_SCHEMA = exports.HOLD_WHEN_REPLACE = exports.CHAT_JOIN_STATUS = exports.CAN_SELECTED_ASIDE_INDEX = exports.MENTION_ASIDE = exports.NOTIFICATION_WHITE_LIST = exports.INIT_TYPES = exports.DOM_POSITION = exports.AT_HOLDER_PREFIX = exports.TARGET_ENUM = exports.SOURCE_ENUM = exports.TYPE_ENUM = exports.KEYS = undefined;

var _userHelper = __webpack_require__(65);

var _bytedXBlock = __webpack_require__(740);

// 按键
var KEYS = exports.KEYS = {
  RETURN: 13,
  LEFT: 37,
  UP: 38,
  RIGHT: 39,
  DOWN: 40,
  SPACE: 32,
  ESC: 27,
  BACKSPACE: 8,
  TAB: 9,
  AT: 50,
  DELETE: 46,
  FAKE_CODE: 229
};
var TYPE_ENUM = exports.TYPE_ENUM = {
  USER: 0, // 用户
  FILE: 1, // 文档
  FOLDER: 2, // 文档路径
  SHEET: 3, // sheet
  SHEET_DOC: 4, // sheet + docs 不要再继续使用
  CHAT: 5, // 群卡片
  GROUP: 6, // 群
  BLOCK: 7,
  BITABLE: 8,
  TABLE: 9, // 这个谁加的,似乎没有用到
  INLINE_BLOCK: 10,
  MINDNOTE: 11, // 思维笔记
  BOX: 12,
  SLIDE: 15
};

// 从哪里发起的@@
var SOURCE_ENUM = exports.SOURCE_ENUM = {
  DOC: 0, // 文档中
  DOC_COMMENT: 1, // 评论中
  SHEET: 2, // sheet中
  SHEET_COMMENT: 3, // sheet的评论中
  // BITABLE: 4, // bitable中
  // BITABLE_COMMENT: 5, // bitable的评论中
  // OPEN_DOC: 6, // open_doc里面
  // OPEN_DOC_COMMENT: 7, // open_doc里面
  // BOX: 8 // box中
  // BOX_COMMENT: 9, // 在box的评论中
  MINDNOTE: 10, // 思维笔记
  MINDNOTE_COMMENT: 11, // 思维笔记评论
  SLIDE: 12, // slide
  SLIDE_COMMENT: 13 // slide评论
};

var TARGET_ENUM = exports.TARGET_ENUM = {
  LARK: 0
};
var AT_HOLDER_PREFIX = exports.AT_HOLDER_PREFIX = 'at-uuid_'; // 两个dom的相对位置关系

var DOM_POSITION = exports.DOM_POSITION = {
  PREV: 4,
  AFTER: 2
};

var INIT_TYPES = exports.INIT_TYPES = {
  NOT_SELECTABLE_TYPE: 'no-select',
  USER: 'USER',
  SHEET_DOC: 'SHEET_DOC',
  ALL: 'USER-SHEET_DOC',
  CHAT: 'CHAT',
  GROUP: 'GROUP',
  USER_GROUP: 'USER-GROUP',
  DRIVE: 'DRIVE',
  UPLOAD: 'UPLOAD',

  UPLOADER_FILE: 'UPLOADER_FILE',
  REACTION_BLOCK: 'REACTION_BLOCK',
  INSERT_SHEET: 'INSERT_SHEET',
  INSERT_TABLE: 'INSERT_TABLE',
  POLL_BLOCK: _bytedXBlock.BlockType.POLL_BLOCK,
  IFRAME_BLOCK: 'IFRAME_BLOCK'
};

var NOTIFICATION_WHITE_LIST = exports.NOTIFICATION_WHITE_LIST = {
  ASIDE: [INIT_TYPES.USER, INIT_TYPES.SHEET_DOC, INIT_TYPES.ALL, INIT_TYPES.GROUP, INIT_TYPES.CHAT, INIT_TYPES.USER_GROUP],
  TYPE: [TYPE_ENUM.USER, TYPE_ENUM.GROUP]
};

// 宽度
var NORMAL_WRAPPER_SIZE = 424;
var SMALL_WRAPPER_SIZE = 313;
var DEFAULT_ASIDE_SIZE = 116;

// mention 类型
var ASIDE_MENTION_TYPES = [{
  type: INIT_TYPES.ALL,
  content: t('doc.search.filter.all'),
  boxSize: NORMAL_WRAPPER_SIZE,
  asideSize: DEFAULT_ASIDE_SIZE
}, {
  type: INIT_TYPES.SHEET_DOC,
  content: t('common.doc'),
  boxSize: NORMAL_WRAPPER_SIZE,
  asideSize: DEFAULT_ASIDE_SIZE
}, {
  type: INIT_TYPES.USER,
  content: t('common.people'),
  boxSize: NORMAL_WRAPPER_SIZE,
  asideSize: DEFAULT_ASIDE_SIZE
}];
// insert 类型
var ASIDE_INSERT_TYPES = [{
  type: INIT_TYPES.CHAT,
  content: t('etherpad.lark.group.card'),
  boxSize: NORMAL_WRAPPER_SIZE,
  asideSize: DEFAULT_ASIDE_SIZE
}, {
  type: INIT_TYPES.INSERT_TABLE,
  content: t('common.table'),
  boxSize: SMALL_WRAPPER_SIZE,
  asideSize: DEFAULT_ASIDE_SIZE,
  noList: true // 非列表结构
}, {
  type: INIT_TYPES.INSERT_SHEET,
  content: t('common.sheet'),
  boxSize: SMALL_WRAPPER_SIZE,
  asideSize: DEFAULT_ASIDE_SIZE,
  noList: true // 非列表结构
  // }, {
  //   type: INIT_TYPES.POLL_BLOCK,
  //   content: t('block.poll'),
  //   boxSize: NORMAL_WRAPPER_SIZE,
  //   asideSize: DEFAULT_ASIDE_SIZE,
  //   noList: true,
  //   noRequest: true,
  // }, {
  //   type: INIT_TYPES.REACTION_BLOCK,
  //   content: t('etherpad.reaction'),
  //   boxSize: NORMAL_WRAPPER_SIZE,
  //   asideSize: DEFAULT_ASIDE_SIZE,
  //   noList: true,
  //   noRequest: true,
}, {
  type: INIT_TYPES.POLL_BLOCK,
  content: t('block.poll'),
  boxSize: NORMAL_WRAPPER_SIZE,
  asideSize: DEFAULT_ASIDE_SIZE,
  noList: true,
  noRequest: true,
  isAlpha: true
  // }, {
  //   type: INIT_TYPES.REACTION_BLOCK,
  //   content: t('etherpad.reaction'),
  //   boxSize: NORMAL_WRAPPER_SIZE,
  //   asideSize: DEFAULT_ASIDE_SIZE,
  //   noList: true,
  //   noRequest: true,
}, {
  type: INIT_TYPES.IFRAME_BLOCK,
  content: t('block.iframe_add_embeds'),
  boxSize: NORMAL_WRAPPER_SIZE,
  asideSize: DEFAULT_ASIDE_SIZE,
  noList: true,
  noRequest: true
}];
// 多租户设置, byteUser才展示drive入口
if (_userHelper.isBytedanceUser) {
  ASIDE_INSERT_TYPES.unshift({
    type: INIT_TYPES.DRIVE,
    content: t('etherpad.Drive'),
    boxSize: NORMAL_WRAPPER_SIZE,
    asideSize: DEFAULT_ASIDE_SIZE
  });
}
var MENTION_ASIDE = exports.MENTION_ASIDE = [{
  type: INIT_TYPES.NOT_SELECTABLE_TYPE,
  content: t('etherpad.memtioned')
}].concat(ASIDE_MENTION_TYPES, [{
  type: INIT_TYPES.NOT_SELECTABLE_TYPE,
  content: t('etherpad.insert')
}], ASIDE_INSERT_TYPES);

var CAN_SELECTED_ASIDE_INDEX = exports.CAN_SELECTED_ASIDE_INDEX = [];
MENTION_ASIDE.forEach(function (aside, index) {
  aside.type !== INIT_TYPES.NOT_SELECTABLE_TYPE && CAN_SELECTED_ASIDE_INDEX.push(index);
});

var CHAT_JOIN_STATUS = exports.CHAT_JOIN_STATUS = {
  joined: t('etherpad.initiate_conversation'),
  unjoined: t('etherpad.join_group_chat')
};
var HOLD_WHEN_REPLACE = exports.HOLD_WHEN_REPLACE = 'hold-when-replace'; // line替换的时候保持改内容不被替换

var LARK_CHAT_SCHEMA = exports.LARK_CHAT_SCHEMA = 'lark://client/chat/';

var AT_HOLDER_DOM = exports.AT_HOLDER_DOM = 1;
var AT_POSITION = exports.AT_POSITION = {
  DOC: 0,
  COMMENT: 1,
  WHOLE_COMMENT: 2
};

var NATIVE_COMMENT_STATUS = exports.NATIVE_COMMENT_STATUS = {
  HIDE: 0,
  SHOW: 1
};

var SUCCESS_RESPONSE_CODE = exports.SUCCESS_RESPONSE_CODE = 0;
var DRIVE_TYPE = exports.DRIVE_TYPE = 'DRIVE';

var NOTIFY_DELAY = exports.NOTIFY_DELAY = 5000;
var AUTHORIZE_DELAY = exports.AUTHORIZE_DELAY = 8000;
var GUIDE_TYPE = exports.GUIDE_TYPE = {
  MENTION_BOX: 'mention_box',
  MENTION_USER: 'mention_user',
  MENTION_GROUP: 'mention_group',
  MENTION_INSERT_SHEET: 'mention_insert_sheet',
  MENTION_SHEET_DOC: 'mention_sheet_doc',
  MENTION_CHAT: 'mention_chat',
  MENTION_FILE: 'mention_file'
};

var BLACK_LIST_IN_TABLE = exports.BLACK_LIST_IN_TABLE = [INIT_TYPES.INSERT_TABLE, INIT_TYPES.INSERT_SHEET];

var SEARCH_ERROR_MSG = exports.SEARCH_ERROR_MSG = {
  '1': t('etherpad.server_abnormal'),
  '2': t('error.args_error'),
  '3': t('error.object_not_found'),
  '4': t('error.no_permission'),
  '5': t('warn.login_required_tips'),
  '6': t('error.request_timeout')
};

var JOIN_CHAT_ERROR_MSG = exports.JOIN_CHAT_ERROR_MSG = {
  '4013': t('etherpad.join_group_failed_limited'),
  '4014': t('etherpad.join_group_failed_invitation'),
  '4015': t('etherpad.join_group_failed_forbidden'),
  '4017': t('etherpad.join_group_failed_organization'),
  '4018': t('etherpad.join_group_failed_dissolved'),
  '4019': t('etherpad.join_group_failed_no_found')
};

var MENTION_CALLBACK_OP = exports.MENTION_CALLBACK_OP = {
  'CANCEL': 3,
  'CONFIRM': 4
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 743 */,
/* 744 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.SHEET_BORDER = exports.WORD_WRAP_TYPE = exports.MENTION_TYPE = exports.EXPORT_FILE_TYPE = exports.COMMAND_SOURCE = exports.KeyCode = exports.Commands = exports.DEFAULT_ROW_COUNT = exports.CELL_LIMIT_COMMA = exports.CELL_LIMIT = exports.DefaultFontFamily = exports.DefaultFontSize = exports.MAX_ZOOM = exports.MIN_ZOOM = exports.INITIAL_SCALE = exports.Direction = exports.RangeChangedAction = exports.Events = exports.InvalidOperationType = exports.AutoFitType = exports.ImeMode = exports.CopyToOptions = exports.CopyPasteHeaderOptions = exports.ClipboardPasteOptions = exports.TextDecorationType = exports.VerticalAlign = exports.HorizontalAlign = exports.TimeoutType = exports.Timeout = exports.SheetArea = undefined;

var _keyCode = __webpack_require__(765);

var SheetArea = exports.SheetArea = undefined;
(function (SheetArea) {
    SheetArea[SheetArea["corner"] = 0] = "corner";
    SheetArea[SheetArea["colHeader"] = 1] = "colHeader";
    SheetArea[SheetArea["rowHeader"] = 2] = "rowHeader";
    SheetArea[SheetArea["viewport"] = 3] = "viewport";
})(SheetArea || (exports.SheetArea = SheetArea = {}));
var Timeout = exports.Timeout = undefined;
(function (Timeout) {
    Timeout[Timeout["dblClickEdit"] = 200] = "dblClickEdit";
    Timeout[Timeout["mentionClickJump"] = 300] = "mentionClickJump";
    Timeout[Timeout["linkClickJump"] = 300] = "linkClickJump";
    Timeout[Timeout["commentCardShow"] = 400] = "commentCardShow";
})(Timeout || (exports.Timeout = Timeout = {}));
var TimeoutType = exports.TimeoutType = undefined;
(function (TimeoutType) {
    TimeoutType[TimeoutType["cellClickHandler"] = 1] = "cellClickHandler";
})(TimeoutType || (exports.TimeoutType = TimeoutType = {}));
var HorizontalAlign = exports.HorizontalAlign = undefined;
(function (HorizontalAlign) {
    /**
     *  Indicates that the cell content is left-aligned.
     */
    HorizontalAlign[HorizontalAlign["Left"] = 0] = "Left";
    /**
     *  Indicates that the cell content is centered.
     */
    HorizontalAlign[HorizontalAlign["Center"] = 1] = "Center";
    /**
     *  Indicates that the cell content is right-aligned.
     */
    HorizontalAlign[HorizontalAlign["Right"] = 2] = "Right";
    /**
     *  Indicates that the horizontal alignment is based on the value type.
     */
    HorizontalAlign[HorizontalAlign["General"] = 3] = "General";
})(HorizontalAlign || (exports.HorizontalAlign = HorizontalAlign = {}));
var VerticalAlign = exports.VerticalAlign = undefined;
(function (VerticalAlign) {
    /**
     *  Indicates that the cell content is top-aligned.
     */
    VerticalAlign[VerticalAlign["Top"] = 0] = "Top";
    /**
     *  Indicates that the cell content is centered.
     */
    VerticalAlign[VerticalAlign["Center"] = 1] = "Center";
    /**
     *  Indicates that the cell content is bottom-aligned.
     */
    VerticalAlign[VerticalAlign["Bottom"] = 2] = "Bottom";
})(VerticalAlign || (exports.VerticalAlign = VerticalAlign = {}));
var TextDecorationType = exports.TextDecorationType = undefined;
(function (TextDecorationType) {
    /** Specifies to display a line below the text.
     */
    TextDecorationType[TextDecorationType["underline"] = 1] = "underline";
    /** Specifies to display a line through the text.
     */
    TextDecorationType[TextDecorationType["lineThrough"] = 2] = "lineThrough";
    /** Specifies to display a line above the text.
     */
    TextDecorationType[TextDecorationType["overline"] = 4] = "overline";
    /** Specifies normal text.
     */
    TextDecorationType[TextDecorationType["none"] = 0] = "none";
})(TextDecorationType || (exports.TextDecorationType = TextDecorationType = {}));
var ClipboardPasteOptions = exports.ClipboardPasteOptions = undefined;
(function (ClipboardPasteOptions) {
    ClipboardPasteOptions[ClipboardPasteOptions["all"] = 0] = "all";
    ClipboardPasteOptions[ClipboardPasteOptions["values"] = 1] = "values";
    ClipboardPasteOptions[ClipboardPasteOptions["formatting"] = 2] = "formatting";
    ClipboardPasteOptions[ClipboardPasteOptions["formulas"] = 3] = "formulas";
})(ClipboardPasteOptions || (exports.ClipboardPasteOptions = ClipboardPasteOptions = {}));
var CopyPasteHeaderOptions = exports.CopyPasteHeaderOptions = undefined;
(function (CopyPasteHeaderOptions) {
    CopyPasteHeaderOptions[CopyPasteHeaderOptions["noHeaders"] = 0] = "noHeaders";
    CopyPasteHeaderOptions[CopyPasteHeaderOptions["rowHeaders"] = 1] = "rowHeaders";
    CopyPasteHeaderOptions[CopyPasteHeaderOptions["columnHeaders"] = 2] = "columnHeaders";
    CopyPasteHeaderOptions[CopyPasteHeaderOptions["allHeaders"] = 3] = "allHeaders";
})(CopyPasteHeaderOptions || (exports.CopyPasteHeaderOptions = CopyPasteHeaderOptions = {}));
var CopyToOptions = exports.CopyToOptions = undefined;
(function (CopyToOptions) {
    CopyToOptions[CopyToOptions["value"] = 1] = "value";
    CopyToOptions[CopyToOptions["formula"] = 2] = "formula";
    CopyToOptions[CopyToOptions["comment"] = 4] = "comment";
    CopyToOptions[CopyToOptions["outline"] = 8] = "outline";
    CopyToOptions[CopyToOptions["sparkline"] = 16] = "sparkline";
    CopyToOptions[CopyToOptions["span"] = 32] = "span";
    CopyToOptions[CopyToOptions["style"] = 64] = "style";
    CopyToOptions[CopyToOptions["tag"] = 128] = "tag";
    CopyToOptions[CopyToOptions["bindingPath"] = 256] = "bindingPath";
    CopyToOptions[CopyToOptions["conditionalFormat"] = 512] = "conditionalFormat";
    CopyToOptions[CopyToOptions["all"] = 1023] = "all";
})(CopyToOptions || (exports.CopyToOptions = CopyToOptions = {}));
var ImeMode = exports.ImeMode = undefined;
(function (ImeMode) {
    ImeMode[ImeMode["auto"] = 1] = "auto";
    ImeMode[ImeMode["active"] = 2] = "active";
    ImeMode[ImeMode["inactive"] = 4] = "inactive";
    ImeMode[ImeMode["disabled"] = 0] = "disabled";
})(ImeMode || (exports.ImeMode = ImeMode = {}));
var AutoFitType = exports.AutoFitType = undefined;
(function (AutoFitType) {
    AutoFitType[AutoFitType["cell"] = 0] = "cell";
    AutoFitType[AutoFitType["cellWithHeader"] = 1] = "cellWithHeader";
})(AutoFitType || (exports.AutoFitType = AutoFitType = {}));
var InvalidOperationType = exports.InvalidOperationType = undefined;
(function (InvalidOperationType) {
    InvalidOperationType[InvalidOperationType["setFormula"] = 0] = "setFormula";
    InvalidOperationType[InvalidOperationType["copyPaste"] = 1] = "copyPaste";
    InvalidOperationType[InvalidOperationType["dragFill"] = 2] = "dragFill";
    InvalidOperationType[InvalidOperationType["dragDrop"] = 3] = "dragDrop";
    InvalidOperationType[InvalidOperationType["changePartOfArrayFormula"] = 4] = "changePartOfArrayFormula";
    InvalidOperationType[InvalidOperationType["invalidSheetName"] = 5] = "invalidSheetName";
    InvalidOperationType[InvalidOperationType["cellLimitExceed"] = 6] = "cellLimitExceed";
    InvalidOperationType[InvalidOperationType["exportFile"] = 7] = "exportFile";
})(InvalidOperationType || (exports.InvalidOperationType = InvalidOperationType = {}));
var Events = exports.Events = undefined;
(function (Events) {
    Events["ValidationError"] = "ValidationError";
    Events["CellPress"] = "CellPress";
    Events["CellClick"] = "CellClick";
    Events["CellDoubleClick"] = "CellDoubleClick";
    Events["EnterCell"] = "EnterCell";
    Events["LeaveCell"] = "LeaveCell";
    Events["ValueChanged"] = "ValueChanged";
    Events["TopPosChanged"] = "TopPosChanged";
    Events["TopRowChanged"] = "TopRowChanged";
    Events["LeftPosChanged"] = "LeftPosChanged";
    Events["LeftColumnChanged"] = "LeftColumnChanged";
    Events["InvalidOperation"] = "InvalidOperation";
    Events["RangeFiltering"] = "RangeFiltering";
    Events["RangeFiltered"] = "RangeFiltered";
    Events["TableFiltering"] = "TableFiltering";
    Events["TableFiltered"] = "TableFiltered";
    Events["RangeSorting"] = "RangeSorting";
    Events["RangeSorted"] = "RangeSorted";
    Events["ClipboardChanging"] = "ClipboardChanging";
    Events["ClipboardChanged"] = "ClipboardChanged";
    Events["ClipboardPasting"] = "ClipboardPasting";
    Events["ClipboardPasted"] = "ClipboardPasted";
    Events["ColumnWidthChanging"] = "ColumnWidthChanging";
    Events["ColumnWidthChanged"] = "ColumnWidthChanged";
    Events["RowHeightChanging"] = "RowHeightChanging";
    Events["RowHeightChanged"] = "RowHeightChanged";
    Events["DragDropBlock"] = "DragDropBlock";
    Events["DragDropBlockCompleted"] = "DragDropBlockCompleted";
    Events["DragFillBlock"] = "DragFillBlock";
    Events["DragFillBlockCompleted"] = "DragFillBlockCompleted";
    Events["EditStarting"] = "EditStarting";
    Events["EditStarted"] = "EditStarted";
    Events["EditChange"] = "EditChange";
    Events["EditEnding"] = "EditEnding";
    Events["EditEnd"] = "EditEnd";
    Events["EditEnded"] = "EditEnded";
    Events["RangeGroupStateChanging"] = "RangeGroupStateChanging";
    Events["RangeGroupStateChanged"] = "RangeGroupStateChanged";
    Events["SelectionChanging"] = "SelectionChanging";
    Events["SelectionChanged"] = "SelectionChanged";
    Events["SheetTabClick"] = "SheetTabClick";
    Events["SheetTabRepaint"] = "SheetTabRepaint";
    Events["ChangeFocusHolder"] = "ChangeFocusHolder";
    Events["SheetNameChanging"] = "SheetNameChanging";
    Events["SheetNameChanged"] = "SheetNameChanged";
    Events["UserZooming"] = "UserZooming";
    Events["UserFormulaEntered"] = "UserFormulaEntered";
    Events["CellChanged"] = "CellChanged";
    Events["ColumnChanged"] = "ColumnChanged";
    Events["RowChanged"] = "RowChanged";
    Events["ActiveSheetChanging"] = "ActiveSheetChanging";
    Events["ActiveSheetChanged"] = "ActiveSheetChanged";
    Events["SparklineChanged"] = "SparklineChanged";
    Events["RangeChanged"] = "RangeChanged";
    Events["ButtonClicked"] = "ButtonClicked";
    Events["EditorStatusChanged"] = "EditorStatusChanged";
    Events["FloatingObjectChanged"] = "FloatingObjectChanged";
    Events["FloatingObjectSelectionChanged"] = "FloatingObjectSelectionChanged";
    Events["PictureChanged"] = "PictureChanged";
    Events["FloatingObjectRemoving"] = "FloatingObjectRemoving";
    Events["FloatingObjectRemoved"] = "FloatingObjectRemoved";
    Events["PictureSelectionChanged"] = "PictureSelectionChanged";
    Events["FloatingObjectLoaded"] = "FloatingObjectLoaded";
    Events["TouchToolStripOpening"] = "TouchToolStripOpening";
    /****** 注销 Spread 评论事件 ********
    CommentChanged = 'CommentChanged',
    CommentRemoving = 'CommentRemoving',
    CommentRemoved = 'CommentRemoved',
    ***********************************/
    Events["CommentHotkeyPress"] = "CommentHotkeyPress";
    Events["SetComments"] = "SetComments";
    Events["SlicerChanged"] = "SlicerChanged";
    Events["ResetBinding"] = "ResetBinding";
    Events["InitBinding"] = "InitBinding";
    Events["BeforeDragDrop"] = "BeforeDragDrop";
    Events["FormulatextboxActiveSheetChanging"] = "FormulatextboxActiveSheetChanging";
    Events["FormulatextboxActiveSheetChanged"] = "FormulatextboxActiveSheetChanged";
    Events["FormulatextboxEditStarted"] = "FormulatextboxEditStarted";
    Events["FormulatextboxEnterCell"] = "FormulatextboxEnterCell";
    Events["FormulatextboxEditEnded"] = "FormulatextboxEditEnded";
    Events["FormulatextboxRangeChanged"] = "FormulatextboxRangeChanged";
    Events["SetSpans"] = "SetSpans";
    Events["Sort"] = "Sort";
    Events["CommandExecuting"] = "CommandExecuting";
    Events["CommandExecuted"] = "CommandExecuted";
    Events["OptionChanged"] = "OptionChanged";
    Events["SegClick"] = "SegClick";
    Events["SegHover"] = "SegHover";
    Events["ShowDropdown"] = "ShowDropdown";
    Events["ShowFilter"] = "ShowFilter";
    Events["HideDropdown"] = "HideDropdown";
    Events["Focus"] = "Focus";
    Events["LoseFocus"] = "LoseFocus";
    Events["CutSheet"] = "CutSheet";
    /**
     * 添加 hoverChanged 事件
     */
    Events["HoverCellChanged"] = "HoverCellChanged";
    Events["DistrictCursorChanged"] = "DistrictCursorChanged";
    /**
     * 冻结行列区域事件
     */
    Events["FrozenChanged"] = "FrozenChanged";
    /**
     * Faster 右键菜单事件
     */
    Events["FCornerContextMenu"] = "FCornerContextMenu";
    Events["FRowHeaderContextMenu"] = "FRowHeaderContextMenu";
    Events["FColHeaderContextMenu"] = "FColHeaderContextMenu";
    Events["FCellContextMenu"] = "FCellContextMenu";
    /**
     * Faster cell hover
     */
    Events["FCellHover"] = "FCellHover";
    /**
     * Faster cell active
     */
    Events["ActiveCellChanged"] = "ActiveCellChanged";
    // Doc插Sheet 请求进入全屏模式
    Events["EmbedSheetRequireFullScreen"] = "EmbedSheetRequireFullScreen";
    // Doc插Sheet 进入全屏模式
    Events["EmbedSheetFullScreenModeEntered"] = "EmbedSheetFullScreenModeEntered";
    Events["HideHeaderBubble"] = "HideHeaderBubble";
    /**
     * sheet插入图片事件
     */
    Events["ShowImageUploader"] = "ShowImageUploader";
    Events["StartPaste"] = "StartPaste";
    Events["OpenImgFullScreen"] = "OpenImgFullScreen";
    /**
     * sheet显示选择性粘贴
     */
    Events["ToggleOptionalPasteIcon"] = "ToggleOptionalPasteIcon";
    /**
     * 气泡菜单点击添加评论
     */
    Events["AddComment"] = "AddComment";
})(Events || (exports.Events = Events = {}));
var RangeChangedAction = exports.RangeChangedAction = undefined;
(function (RangeChangedAction) {
    RangeChangedAction[RangeChangedAction["dragDrop"] = 0] = "dragDrop";
    RangeChangedAction[RangeChangedAction["dragFill"] = 1] = "dragFill";
    RangeChangedAction[RangeChangedAction["clear"] = 2] = "clear";
    RangeChangedAction[RangeChangedAction["paste"] = 3] = "paste";
    RangeChangedAction[RangeChangedAction["sort"] = 4] = "sort";
    RangeChangedAction[RangeChangedAction["setArrayFormula"] = 5] = "setArrayFormula";
    RangeChangedAction[RangeChangedAction["evaluateFormula"] = 6] = "evaluateFormula";
})(RangeChangedAction || (exports.RangeChangedAction = RangeChangedAction = {}));
var Direction = exports.Direction = undefined;
(function (Direction) {
    Direction[Direction["Up"] = 0] = "Up";
    Direction[Direction["Left"] = 1] = "Left";
    Direction[Direction["Right"] = 2] = "Right";
    Direction[Direction["Down"] = 3] = "Down";
})(Direction || (exports.Direction = Direction = {}));
var INITIAL_SCALE = exports.INITIAL_SCALE = 0.75;
var MIN_ZOOM = exports.MIN_ZOOM = Number((0.25 * INITIAL_SCALE).toFixed(2));
var MAX_ZOOM = exports.MAX_ZOOM = Number((2 * INITIAL_SCALE).toFixed(2));
var DefaultFontSize = exports.DefaultFontSize = '10pt';
var DefaultFontFamily = exports.DefaultFontFamily = 'Arial';
var CELL_LIMIT = exports.CELL_LIMIT = 500000; // 单张表最大格子数量
var CELL_LIMIT_COMMA = exports.CELL_LIMIT_COMMA = CELL_LIMIT.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
var DEFAULT_ROW_COUNT = exports.DEFAULT_ROW_COUNT = 200; // 默认的表格行数
var Commands = exports.Commands = undefined;
(function (Commands) {
    Commands["SELECT_ROW"] = "selectRow";
    Commands["SELECT_COLUMN"] = "selectColumn";
    Commands["BOLD"] = "bold";
    Commands["UNDERLINE"] = "underline";
    Commands["LINE_THROUGH"] = "lineThrough";
    Commands["ITALIC"] = "italic";
    Commands["H_ALIGN_LEFT"] = "hAlign.left";
    Commands["H_ALIGN_CENTER"] = "hAlign.center";
    Commands["H_ALIGN_RIGHT"] = "hAlign.right";
    Commands["HORIZONTAL_FILL"] = "horizontalFill";
    Commands["VERTICAL_FILL"] = "verticalFill";
    Commands["PREVIOUS_SHEET"] = "previousSheet";
    Commands["NEXT_SHEET"] = "nextSheet";
    Commands["MOVE_HEAD"] = "moveHead";
    Commands["MOVE_END"] = "moveEnd";
    Commands["MOVE_ACTIVE"] = "moveActive";
    Commands["FIND"] = "find";
    Commands["SELECT_ALL"] = "selectAll";
    Commands["PASTE_VALUE"] = "pasteValue";
    Commands["NAVIGATION_HOME_2"] = "navigationHome2";
    Commands["NAVIGATION_END_2"] = "navigationEnd2";
    Commands["NAVIGATION_TOP"] = "navigationTop";
    Commands["NAVIGATION_BOTTOM"] = "navigationBottom";
    Commands["PREVENT_SAVE"] = "preventSave";
    Commands["UNDO"] = "undo";
    Commands["REDO"] = "redo";
    Commands["PASTE"] = "paste";
    Commands["REDO_2"] = "redo2";
    Commands["COPY"] = "copy";
    Commands["CUT"] = "cut";
    Commands["SET_COMMENTS"] = "setComments";
    Commands["COMMENT"] = "comment";
    // 发送 changeset 的 Command
    Commands["SET_RANGE_VALUE"] = "setRangeValue";
    Commands["SET_STYLE_FONT"] = "setStyleFont";
    Commands["SET_FORMATTER"] = "setFormatter";
    Commands["SET_TEXT_DECORATION"] = "setTextDecoration";
    Commands["MERGE_CELLS"] = "mergeCells";
    Commands["SET_ROW_COL_CHANGE"] = "setRowColChange";
    Commands["SET_ROW_COL_VISIBLE"] = "setRowColVisible";
    Commands["DO_CLEAR"] = "doClear";
    Commands["SORT_RANGE"] = "sortRange";
    Commands["AUTO_FIT_ROW"] = "autoFitRow";
    Commands["AUTO_FIT_COLUMN"] = "autoFitColumn";
    Commands["ADD_SHEET"] = "addSheet";
    Commands["MOVE_SHEET"] = "moveSheet";
    Commands["DELETE_SHEET"] = "deleteSheet";
    Commands["RENAME_SHEET"] = "renameSheet";
    Commands["COPY_SHEET"] = "copySheet";
    Commands["RESIZE_ROW"] = "resizeRow";
    Commands["RESIZE_COLUMN"] = "resizeColumn";
    Commands["EDIT_CELL"] = "editCell";
    Commands["DRAG_DROP"] = "dragDrop";
    Commands["FILL"] = "fill";
    Commands["CLIPBOARD_PASTE"] = "clipboardPaste";
    Commands["CLEAR_VALUES"] = "clearValues";
    Commands["SET_FILTER"] = "setFilter";
    Commands["FREEZE_SHEET"] = "freezeSheet";
    Commands["FORMAT_PAINTER"] = "formatPainter";
    Commands["REPLACE"] = "replace";
    Commands["SET_DROPDOWN"] = "setDropdown";
    Commands["SET_DROPDOWN_VALID"] = "setDropdownValid";
    Commands["CONVERT_LINK"] = "convertLink";
})(Commands || (exports.Commands = Commands = {}));
/**
 * 添加请按 keyCode 排序
 */
exports.KeyCode = _keyCode.KeyCode;
// sheet 执行 command 的来源, 如菜单, 快捷键

var COMMAND_SOURCE = exports.COMMAND_SOURCE = undefined;
(function (COMMAND_SOURCE) {
    COMMAND_SOURCE["CONTEXT_MENU"] = "CONTEXT_MENU";
})(COMMAND_SOURCE || (exports.COMMAND_SOURCE = COMMAND_SOURCE = {}));
var EXPORT_FILE_TYPE = exports.EXPORT_FILE_TYPE = undefined;
(function (EXPORT_FILE_TYPE) {
    EXPORT_FILE_TYPE["CSV"] = "CSV";
})(EXPORT_FILE_TYPE || (exports.EXPORT_FILE_TYPE = EXPORT_FILE_TYPE = {}));
var MENTION_TYPE = exports.MENTION_TYPE = undefined;
(function (MENTION_TYPE) {
    MENTION_TYPE[MENTION_TYPE["USER"] = 0] = "USER";
    MENTION_TYPE[MENTION_TYPE["DOC"] = 1] = "DOC";
    MENTION_TYPE[MENTION_TYPE["SHEET"] = 3] = "SHEET";
})(MENTION_TYPE || (exports.MENTION_TYPE = MENTION_TYPE = {}));
var WORD_WRAP_TYPE = exports.WORD_WRAP_TYPE = undefined;
(function (WORD_WRAP_TYPE) {
    WORD_WRAP_TYPE[WORD_WRAP_TYPE["OVERFLOW"] = 0] = "OVERFLOW";
    WORD_WRAP_TYPE[WORD_WRAP_TYPE["AUTOWRAP"] = 1] = "AUTOWRAP";
    WORD_WRAP_TYPE[WORD_WRAP_TYPE["WORDCLIP"] = 2] = "WORDCLIP";
})(WORD_WRAP_TYPE || (exports.WORD_WRAP_TYPE = WORD_WRAP_TYPE = {}));
var SHEET_BORDER = exports.SHEET_BORDER = undefined;
(function (SHEET_BORDER) {
    SHEET_BORDER["FULL_BORDER"] = "fullborder";
    SHEET_BORDER["NO_BORDER"] = "noborder";
    SHEET_BORDER["OUTER_BORDER"] = "outerborder";
    SHEET_BORDER["INNER_BORDER"] = "innerborder";
    SHEET_BORDER["LEFT_BORDER"] = "leftborder";
    SHEET_BORDER["RIGHT_BORDER"] = "rightborder";
    SHEET_BORDER["TOP_BORDER"] = "topborder";
    SHEET_BORDER["BOTTOM_BORDER"] = "bottomborder";
})(SHEET_BORDER || (exports.SHEET_BORDER = SHEET_BORDER = {}));

/***/ }),
/* 745 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.changeSheetLookedStatus = exports.setChart = exports.initChart = exports.clearActiveChart = exports.setActiveChart = exports.delChart = exports.resetSheetClientVars = exports.setSheetClientVars = exports.exportFile = exports.resetSpreadState = exports.snapshotLoading = exports.snapshotLoaded = exports.loadRowData = exports.snapshotMeta = exports.toggleHistory = exports.hideHistory = exports.showHistory = exports.cleanComment = exports.toggleCommentMask = exports.reopenSheetComment = exports.deleteCommentData = exports.deleteReplyComment = exports.updateSheetReplyComment = exports.resolveSheetComment = exports.addSheetCommentReply = exports.pullSheetComment = exports.addSheetComment = exports.updateCommentData = exports.toggleCommentPanel = exports.hideDropdownMenu = exports.showDropdownMenu = exports.focusFindbar = exports.showFilterMenu = exports.setEmbedAllowComment = exports.changeChartOptions = exports.showChartSettingPanel = exports.hideChartSettingPanel = exports.hideFindbar = exports.showFindbar = exports.channelOffline = exports.channelOnline = exports.freezeSheetToggle = exports.formatPainterToggle = exports.hideHyperlinkEditor = exports.toggleNavBar = exports.showHyperlinkEditor = exports.setActiveSheetId = exports.setSheetPermissions = exports.updateSheetStatus = exports.hideFormulaList = exports.showFormulaList = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _sheet = __webpack_require__(382);

var actionTypes = _interopRequireWildcard(_sheet);

var _$constants = __webpack_require__(5);

var _reduxActions = __webpack_require__(29);

var _common = __webpack_require__(19);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var showFormulaList = exports.showFormulaList = function showFormulaList() {
    return { type: actionTypes.SHOW_FORMULA_LIST };
};
var hideFormulaList = exports.hideFormulaList = function hideFormulaList() {
    return { type: actionTypes.HIDE_FORMULA_LIST };
};
var updateSheetStatus = exports.updateSheetStatus = function updateSheetStatus(status) {
    return {
        type: actionTypes.UPDATE_SHEET_STATUS,
        payload: status
    };
};
var setSheetPermissions = exports.setSheetPermissions = function setSheetPermissions(permissions) {
    return {
        type: actionTypes.SET_SHEET_PERMISSIONS,
        payload: permissions
    };
};
var setActiveSheetId = exports.setActiveSheetId = function setActiveSheetId(sheetId) {
    return {
        type: actionTypes.SET_ACTIVE_SHEETID,
        payload: sheetId
    };
};
var showHyperlinkEditor = exports.showHyperlinkEditor = function showHyperlinkEditor(row, col, sheetId, from) {
    return {
        type: actionTypes.SHOW_HYPER_LINK_EDITOR,
        payload: { row: row, col: col, sheetId: sheetId, from: from }
    };
};
var toggleNavBar = exports.toggleNavBar = function toggleNavBar(pickup, isClickByUser) {
    return {
        type: actionTypes.TOGGLE_NAV_BAR,
        payload: {
            pickup: pickup,
            isClickByUser: isClickByUser
        }
    };
};
var hideHyperlinkEditor = exports.hideHyperlinkEditor = function hideHyperlinkEditor() {
    return { type: actionTypes.HIDE_HYPER_LINK_EDITOR };
};
var formatPainterToggle = exports.formatPainterToggle = function formatPainterToggle(painterFormatting) {
    return {
        type: actionTypes.FORMAT_PAINTER_TOGGLE,
        payload: painterFormatting
    };
};
var freezeSheetToggle = exports.freezeSheetToggle = (0, _reduxActions.createAction)(actionTypes.FREEZE_SPREAD_TOGGLE);
var channelOnline = exports.channelOnline = (0, _reduxActions.createAction)(actionTypes.CHANNEL_ONLINE);
var channelOffline = exports.channelOffline = (0, _reduxActions.createAction)(actionTypes.CHANNEL_OFFLINE);
var showFindbar = exports.showFindbar = function showFindbar(replaceVisible) {
    return {
        type: actionTypes.SHOW_FINDBAR,
        payload: replaceVisible
    };
};
var hideFindbar = exports.hideFindbar = function hideFindbar() {
    return { type: actionTypes.HIDE_FINDBAR };
};
var hideChartSettingPanel = exports.hideChartSettingPanel = function hideChartSettingPanel(payload) {
    return {
        type: actionTypes.HIDE_CHART_PANEL,
        payload: payload
    };
};
var showChartSettingPanel = exports.showChartSettingPanel = function showChartSettingPanel(payload) {
    return {
        type: actionTypes.SHOW_CHART_PANEL,
        payload: payload
    };
};
var changeChartOptions = exports.changeChartOptions = function changeChartOptions(payload) {
    return {
        type: actionTypes.CHANGE_CHART_OPTIONS,
        payload: payload
    };
};
var setEmbedAllowComment = exports.setEmbedAllowComment = function setEmbedAllowComment(commentable) {
    return {
        type: actionTypes.SET_EMBED_SHEET_ALLOW_COMMENT,
        payload: commentable
    };
};
var showFilterMenu = exports.showFilterMenu = (0, _reduxActions.createAction)(actionTypes.SHOW_FILTER_MENU);
var focusFindbar = exports.focusFindbar = function focusFindbar(isFocus) {
    return {
        type: actionTypes.FOCUS_FINDBAR,
        payload: isFocus
    };
};
var showDropdownMenu = exports.showDropdownMenu = (0, _reduxActions.createAction)(actionTypes.SHOW_DROPDOWN_MENU);
var hideDropdownMenu = exports.hideDropdownMenu = (0, _reduxActions.createAction)(actionTypes.HIDE_DROPDOWN_MENU);
var toggleCommentPanel = exports.toggleCommentPanel = function toggleCommentPanel(toggle, target) {
    return {
        type: actionTypes.TOGGLE_COMMENT_PANEL,
        payload: {
            toggle: toggle,
            target: target
        }
    };
};
var updateCommentData = exports.updateCommentData = function updateCommentData(payload) {
    return {
        type: actionTypes.UPDATE_COMMENT_DATA,
        payload: payload
    };
};
var addSheetComment = exports.addSheetComment = function addSheetComment(token, content, quote, isWhole) {
    return (0, _defineProperty3.default)({
        type: actionTypes.ADD_SHEET_COMMENT
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_ADD_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        noStore: true,
        data: {
            // sheet 默认字段
            obj_type: 3,
            token: token,
            content: content,
            quote: quote,
            isWhole: isWhole
        }
    });
};
var pullSheetComment = exports.pullSheetComment = function pullSheetComment(token, commentId) {
    return (0, _defineProperty3.default)({
        type: actionTypes.PULL_SHEET_COMMENT
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_GET_COMMENT_LIST,
        method: _$constants.apiUrls.METHOD.POST,
        data: {
            // sheet 默认字段
            obj_type: 3,
            token: token,
            comment_id: commentId
        }
    });
};
var addSheetCommentReply = exports.addSheetCommentReply = function addSheetCommentReply(token, commentId, content) {
    return (0, _defineProperty3.default)({
        type: actionTypes.ADD_SHEET_COMMENT_REPLY
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_REPLY_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        noStore: true,
        data: {
            // sheet 默认字段
            obj_type: 3,
            token: token,
            comment_id: commentId,
            content: content
        }
    });
};
var resolveSheetComment = exports.resolveSheetComment = function resolveSheetComment(token, commentId) {
    return (0, _defineProperty3.default)({
        type: actionTypes.RESOLVE_SHEET_COMMENT
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_UPDATE_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        noStore: true,
        data: {
            // sheet 默认字段
            obj_type: 3,
            // 默认解决
            finish: 1,
            token: token,
            comment_id: commentId
        }
    });
};
var updateSheetReplyComment = exports.updateSheetReplyComment = function updateSheetReplyComment(_ref5) {
    var token = _ref5.token,
        commentId = _ref5.commentId,
        content = _ref5.content,
        replyId = _ref5.replyId;
    return (0, _defineProperty3.default)({
        type: actionTypes.UPDATE_SHEET_REPLY_COMMENT,
        payload: { commentId: commentId, replyId: replyId }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_UPDATE_REPLY_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        noStore: true,
        data: { obj_type: 3, token: token, content: content, comment_id: commentId, reply_id: replyId }
    });
};
var deleteReplyComment = exports.deleteReplyComment = function deleteReplyComment(commentId, token, replyId) {
    return (0, _defineProperty3.default)({
        type: actionTypes.DELETE_SHEET_REPLY_COMMENT,
        payload: { commentId: commentId, replyId: replyId }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_DELETE_REPLY_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        noStore: true,
        data: { token: token, reply_id: replyId, obj_type: 3 }
    });
};
var deleteCommentData = exports.deleteCommentData = function deleteCommentData(payload) {
    return {
        type: actionTypes.DELETE_SHEET_COMMENT,
        payload: payload
    };
};
var reopenSheetComment = exports.reopenSheetComment = function reopenSheetComment(payload) {
    return {
        type: actionTypes.REOPEN_SHEET_COMMENT,
        payload: payload
    };
};
var toggleCommentMask = exports.toggleCommentMask = function toggleCommentMask(payload) {
    return {
        type: actionTypes.TOGGLE_COMMENT_MASK,
        payload: payload
    };
};
var cleanComment = exports.cleanComment = function cleanComment() {
    return {
        type: actionTypes.CLEAN_COMMENT
    };
};
var showHistory = exports.showHistory = function showHistory(localVisible) {
    return {
        type: actionTypes.SHOW_HISTORY,
        payload: localVisible
    };
};
var hideHistory = exports.hideHistory = function hideHistory() {
    return { type: actionTypes.HIDE_HISTORY };
};
var toggleHistory = exports.toggleHistory = function toggleHistory() {
    return { type: actionTypes.TOGGLE_HISTORY };
};
var snapshotMeta = exports.snapshotMeta = function snapshotMeta(activeSheetId, initialRows, snapshot) {
    return {
        type: actionTypes.SNAPSHOT_META,
        payload: { activeSheetId: activeSheetId, initialRows: initialRows, snapshot: snapshot }
    };
};
var loadRowData = exports.loadRowData = function loadRowData(sheetId, loadedRow) {
    return {
        type: actionTypes.LOAD_ROW_DATA,
        payload: { sheetId: sheetId, loadedRow: loadedRow }
    };
};
// 分片加载灰度临时用
var snapshotLoaded = exports.snapshotLoaded = function snapshotLoaded() {
    return { type: actionTypes.SNAPSHOT_LOADED };
};
var snapshotLoading = exports.snapshotLoading = function snapshotLoading() {
    return { type: actionTypes.SNAPSHOT_LOADING };
};
var resetSpreadState = exports.resetSpreadState = function resetSpreadState() {
    return { type: actionTypes.RESET_SPREAD_STATE };
};
var exportFile = exports.exportFile = function exportFile(_ref8) {
    var isExport = _ref8.isExport,
        fileType = _ref8.fileType;
    return {
        type: actionTypes.EXPORT_FILE,
        payload: {
            isExport: isExport,
            fileType: fileType
        }
    };
};
var setSheetClientVars = exports.setSheetClientVars = function setSheetClientVars(data) {
    return {
        type: actionTypes.SET_SHEET_CLIENT_VARS,
        payload: data
    };
};
var resetSheetClientVars = exports.resetSheetClientVars = function resetSheetClientVars() {
    return {
        type: actionTypes.RESET_SHEET_CLIENT_VARS
    };
};
var delChart = exports.delChart = function delChart(sheetId, chartId) {
    return {
        type: actionTypes.DEL_SHEET_CHART,
        payload: {
            sheetId: sheetId,
            chartId: chartId
        }
    };
};
var setActiveChart = exports.setActiveChart = function setActiveChart(sheetId, chartId) {
    return {
        type: actionTypes.SET_ACTIVE_CHART,
        payload: {
            sheetId: sheetId,
            chartId: chartId
        }
    };
};
var clearActiveChart = exports.clearActiveChart = function clearActiveChart() {
    return {
        type: actionTypes.CLEAR_ACTIVE_CHART
    };
};
var initChart = exports.initChart = function initChart(chartBlocks) {
    return {
        type: actionTypes.INIT_SHEET_CHART,
        payload: chartBlocks
    };
};
var setChart = exports.setChart = function setChart(chartBlock, forceUpdate) {
    return {
        type: actionTypes.SET_SHEET_CHART,
        payload: { chartBlock: chartBlock, forceUpdate: forceUpdate }
    };
};
var changeSheetLookedStatus = exports.changeSheetLookedStatus = function changeSheetLookedStatus(lockedPermissionInfo) {
    return {
        type: actionTypes.CHANGE_SHEET_LOCKED_STATUS,
        payload: {
            lockedPermissionInfo: lockedPermissionInfo
        }
    };
};

/***/ }),
/* 746 */,
/* 747 */,
/* 748 */,
/* 749 */,
/* 750 */,
/* 751 */,
/* 752 */,
/* 753 */,
/* 754 */,
/* 755 */,
/* 756 */,
/* 757 */,
/* 758 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.isMyMention = exports.isCommentMention = exports.isDefaultRead = exports.handleNewMessage = exports.handleMessage = exports.makeNewDocCommentItem = exports.mobileFilterMessage = undefined;

var _uniqBy2 = __webpack_require__(460);

var _uniqBy3 = _interopRequireDefault(_uniqBy2);

var _groupBy2 = __webpack_require__(822);

var _groupBy3 = _interopRequireDefault(_groupBy2);

var _reduce2 = __webpack_require__(230);

var _reduce3 = _interopRequireDefault(_reduce2);

exports.firstNewMessage = firstNewMessage;
exports.hasNewMessages = hasNewMessages;
exports.getNewMessageNum = getNewMessageNum;
exports.isSupportMessage = isSupportMessage;

var _$store = __webpack_require__(64);

var _$store2 = _interopRequireDefault(_$store);

var _message = __webpack_require__(466);

var _constant = __webpack_require__(571);

var _suiteHelper = __webpack_require__(52);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _sdkCompatibleHelper = __webpack_require__(45);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mobileFilterMessage = exports.mobileFilterMessage = function mobileFilterMessage(msgs, user, comments) {
    var _comments = comments;
    var userId = user && user.id || window.User.id;
    return (msgs || []).filter(function (_ref, index) {
        var msgUserId = _ref.user_id,
            related = _ref.related,
            comment_id = _ref.comment_id;

        if (msgUserId === userId) {
            return false;
        }
        if (related !== undefined && !related) {
            return false;
        }
        // // 过滤已解决的评论
        // const commentObj = _comments[comment_id];
        // if (commentObj && commentObj.finish) {
        //   return false;
        // }
        return true;
    });
};
function firstNewMessage(messages) {
    if (messages === undefined) {
        return 0;
    }
    var i = void 0;
    for (i = 0; i < messages.length; i++) {
        var m = messages[i];
        if (m.status === _constant.MESSAGE_UNREAD) {
            return i;
        }
    }
    return i;
}
function hasNewMessages(messages) {
    return firstNewMessage(messages) < messages.length;
}
function getNewMessageNum(messages) {
    if (messages === undefined) {
        return 0;
    }
    var num = 0;
    for (var i = 0; i < messages.length; i++) {
        var m = messages[i];
        if (m.status === _constant.MESSAGE_UNREAD) {
            num++;
        }
    }
    return num;
}
var makeNewDocCommentItem = exports.makeNewDocCommentItem = function makeNewDocCommentItem(commentId) {
    var replyItems = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
    var extra = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    return Object.assign({
        type: 'MESSAGE_DOC_COMMENT',
        comment_id: commentId,
        comment_list: replyItems
    }, extra);
};
var handleMessage = exports.handleMessage = function handleMessage(_ref2) {
    var comment = _ref2.comment,
        message = _ref2.message,
        user = _ref2.user;
    var userId = user.user_id,
        memberId = user.member_id;

    var groupMessage = (0, _groupBy3.default)(message, function (m) {
        return m.comment_id;
    });
    var commentMessage = (0, _reduce3.default)(comment, function (memo, commentValue, commentId) {
        var messageValue = groupMessage[commentId];
        var isNew = false;
        var related = false;
        if (messageValue) {
            messageValue.forEach(function (message) {
                commentValue.comment_list.forEach(function (reply) {
                    if (reply.reply_id === message.reply_id) {
                        reply.message_id = message.message_id;
                        reply.status = message.status;
                        if (message.status === 1 && message.related) isNew = true;
                        if (message.related) related = true;
                    }
                });
            });
        }
        var type = commentValue.is_whole ? 'MESSAGE_WHOLE_COMMENT' : 'MESSAGE_DOC_COMMENT';
        var createTime = commentValue.comment_list[commentValue.comment_list.length - 1].create_timestamp;
        memo.push(Object.assign({ type: type, isNew: isNew, related: related, create_time: createTime, comment_id: commentId }, commentValue));
        return memo;
    }, []);
    var otherMessage = (0, _uniqBy3.default)((0, _reduce3.default)(message, function (memo, item) {
        if (item.type === 'MESSAGE_DOC_MENTION') {
            var isNew = false;
            if (item.status === 1) isNew = true;
            var commentMention = isCommentMention(item, memberId);
            var myMention = isMyMention(item, userId, memberId);
            if (!commentMention && !myMention) {
                // 评论里面的@和自己@的这两种情况不展示
                memo.push(Object.assign({}, item, { isNew: isNew }));
            }
        }
        if (item.type === 'MESSAGE_DOC_SHARE' && item.status === 1) {
            _$store2.default.dispatch((0, _message.setMessageRead)({ member_id: memberId, msg_id: [item.message_id] }));
        }
        return memo;
    }, []), 'message_id');
    var allMessage = [].concat(commentMessage, otherMessage);
    return allMessage;
};
var handleNewMessage = exports.handleNewMessage = function handleNewMessage(_ref3, user, isCreater) {
    var comment = _ref3.comment,
        message = _ref3.message,
        version = _ref3.version;
    var userId = user.user_id,
        memberId = user.member_id;

    var related = false;
    var isNew = false;
    if (message.comment_id && message.reply_id) {
        var commentId = message.comment_id;
        var replyId = message.reply_id;
        var commentList = comment[commentId].comment_list.filter(function (item) {
            // 是否是新消息，之前的消息的userID跟本人有关系，且未读
            if (item.user_id === userId || isCreater) {
                related = true;
                if (message.status === 1) isNew = true;
            }
            if (item.reply_id === replyId) {
                // 来的是评论那条的最新消息
                item.message_id = message.message_id;
                item.status = message.status;
                item.create_timestamp = new Date(item.create_time).getTime() / 1000;
                var defaultRead = isDefaultRead(item, userId, memberId);
                if (defaultRead) {
                    item.status = 2;
                    isNew = false;
                    related = false;
                }
                return true;
            }
            return false;
        });
        message.comment_list = commentList;
        var type = comment[commentId].is_whole ? 'MESSAGE_WHOLE_COMMENT' : 'MESSAGE_DOC_COMMENT';
        var quote = comment[commentId].quote;
        return Object.assign({}, message, { isNew: isNew, quote: quote, related: related, type: type, version: version });
    } else {
        if (message.user_id === userId) {
            related = true;
            if (message.status === 1) isNew = true;
        }
        return Object.assign({}, message, { related: related, isNew: isNew, version: version });
    }
};
var isDefaultRead = exports.isDefaultRead = function isDefaultRead(commentItem, userId, memberId) {
    if (commentItem.user_id === userId) {
        var messageId = commentItem.message_id;
        _$store2.default.dispatch((0, _message.setMessageRead)({ member_id: memberId, msg_id: [messageId] }));
        return true;
    }
    return false;
};
var isCommentMention = exports.isCommentMention = function isCommentMention(mentionItem, memberId) {
    // 在评论的@不显示
    if (mentionItem.mention_id === _constant.COMMENT_MENTION_ID) {
        if (mentionItem.status === _constant.MESSAGE_UNREAD) {
            // 未读的情况设置已读
            var messageId = mentionItem.message_id;
            _$store2.default.dispatch((0, _message.setMessageRead)({ member_id: memberId, msg_id: [messageId] }));
        }
        return true;
    }
    return false;
};
var isMyMention = exports.isMyMention = function isMyMention(mentionItem, userId, memberId) {
    // 自己@的自己不展示
    if (mentionItem.user_id === userId) {
        if (mentionItem.status === _constant.MESSAGE_UNREAD) {
            // 未读的情况设置已读
            var messageId = mentionItem.message_id;
            _$store2.default.dispatch((0, _message.setMessageRead)({ member_id: memberId, msg_id: [messageId] }));
        }
        return true;
    }
    return false;
};
function isSupportMessage() {
    return _browserHelper2.default.isLark && (0, _sdkCompatibleHelper.isSupportNativeFeed)() && ((0, _suiteHelper.isDoc)() || (0, _suiteHelper.isMindNote)());
}

/***/ }),
/* 759 */,
/* 760 */,
/* 761 */,
/* 762 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

exports.default = request;
exports.requestPromise = requestPromise;

var _$rjquery = __webpack_require__(552);

var _envHeaderHelper = __webpack_require__(459);

var _cookie = __webpack_require__(536);

var _tea = __webpack_require__(42);

var _generateRequestIdHelper = __webpack_require__(457);

var _generateHeadersHelper = __webpack_require__(347);

var _apiUrls = __webpack_require__(307);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 需要针对imageuploader单独设置一份header，因为图片上传是自己发起请求
 */

var requestConfig = function requestConfig(requestId) {
  return {
    headers: {
      'Request-Id': requestId,
      'X-CSRFToken': (0, _cookie.getCookie)('_csrf_token') || '',
      'F-Version': window && window.rv_rev || '',
      Context: 'request_id=' + requestId + ';' + ('os=' + (0, _tea.getOSNameByBrowser)() + ';app_version=' + (0, _tea.getAppVersion)() + ';') + ('os_version=' + (0, _tea.getOSVersionByBrowser)() + ';platform=' + (0, _tea.getPlatForm)()),
      Env: (0, _envHeaderHelper.getEnvHeader)()
    },
    // 数据成功返回
    dataFilter: function dataFilter(data, type) {
      return data;
    }
  };
};

function request(opts) {
  var requestId = opts.headers && opts.headers['Request-Id'] || (0, _generateRequestIdHelper.generateRequestId)();

  var headerFromUserOpts = opts.headers,
      noHeadersUserOpts = (0, _objectWithoutProperties3.default)(opts, ['headers']);

  var _requestConfig = requestConfig(requestId),
      generatedHeaders = _requestConfig.headers,
      restGeneratedOptions = (0, _objectWithoutProperties3.default)(_requestConfig, ['headers']);

  var mergedHeaders = Object.assign({}, (0, _generateHeadersHelper.generateHeaders)(opts), generatedHeaders, headerFromUserOpts);

  // user option 应该放在最后，以获得最高优先级，防止被覆盖.
  var mergedOptions = Object.assign({}, restGeneratedOptions, noHeadersUserOpts);

  var options = Object.assign({}, { headers: mergedHeaders, xhrFields: { withCredentials: true } }, mergedOptions);

  // 域名替换，由于部分老代码调用没有经过paramsFixMiddleware处理，而直接调用request，所以这里额外做一次url前缀处理
  if (_apiUrls.API_PREFIX && options.url.indexOf('/api/') === 0) {
    options.url = _apiUrls.API_PREFIX + options.url;
  }

  return _$rjquery.$.ajax(options);
}

function requestPromise(opt) {
  return new Promise(function (resolve, reject) {
    request(opt).then(function (res) {
      if (res.code) {
        reject(res);
        return;
      }

      resolve(res.data);
    }).fail(reject);
  });
}

/***/ }),
/* 763 */,
/* 764 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var selectTranslate = exports.selectTranslate = function selectTranslate(state) {
  return state.appState.translate;
};
var selectTranslateStatus = exports.selectTranslateStatus = function selectTranslateStatus(state) {
  return selectTranslate(state).status;
};

/***/ }),
/* 765 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CopyPasteKeysEnum = exports.ArrowKeysEnum = exports.KeyCode = undefined;
exports.isCopyCutPasteKey = isCopyCutPasteKey;
exports.isAccelKey = isAccelKey;

var _bowser = __webpack_require__(73);

var _bowser2 = _interopRequireDefault(_bowser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var isMac = _bowser2.default.mac;
/**
 * 添加请按 keyCode 排序
 */
var KeyCode = exports.KeyCode = undefined;
(function (KeyCode) {
    KeyCode[KeyCode["BackSpace"] = 8] = "BackSpace";
    KeyCode[KeyCode["Tab"] = 9] = "Tab";
    KeyCode[KeyCode["Clear"] = 12] = "Clear";
    KeyCode[KeyCode["Enter"] = 13] = "Enter";
    KeyCode[KeyCode["Shift"] = 16] = "Shift";
    KeyCode[KeyCode["Ctrl"] = 17] = "Ctrl";
    KeyCode[KeyCode["Alt"] = 18] = "Alt";
    KeyCode[KeyCode["Esc"] = 27] = "Esc";
    KeyCode[KeyCode["Space"] = 32] = "Space";
    KeyCode[KeyCode["PageUp"] = 33] = "PageUp";
    KeyCode[KeyCode["PageDown"] = 34] = "PageDown";
    KeyCode[KeyCode["End"] = 35] = "End";
    KeyCode[KeyCode["Home"] = 36] = "Home";
    KeyCode[KeyCode["Left"] = 37] = "Left";
    KeyCode[KeyCode["Up"] = 38] = "Up";
    KeyCode[KeyCode["Right"] = 39] = "Right";
    KeyCode[KeyCode["Down"] = 40] = "Down";
    KeyCode[KeyCode["Delete"] = 46] = "Delete";
    KeyCode[KeyCode["Digit0"] = 48] = "Digit0";
    KeyCode[KeyCode["Digit9"] = 57] = "Digit9";
    KeyCode[KeyCode["A"] = 65] = "A";
    KeyCode[KeyCode["B"] = 66] = "B";
    KeyCode[KeyCode["C"] = 67] = "C";
    KeyCode[KeyCode["D"] = 68] = "D";
    KeyCode[KeyCode["E"] = 69] = "E";
    KeyCode[KeyCode["F"] = 70] = "F";
    KeyCode[KeyCode["G"] = 71] = "G";
    KeyCode[KeyCode["H"] = 72] = "H";
    KeyCode[KeyCode["I"] = 73] = "I";
    KeyCode[KeyCode["J"] = 74] = "J";
    KeyCode[KeyCode["K"] = 75] = "K";
    KeyCode[KeyCode["L"] = 76] = "L";
    KeyCode[KeyCode["M"] = 77] = "M";
    KeyCode[KeyCode["N"] = 78] = "N";
    KeyCode[KeyCode["O"] = 79] = "O";
    KeyCode[KeyCode["P"] = 80] = "P";
    KeyCode[KeyCode["Q"] = 81] = "Q";
    KeyCode[KeyCode["R"] = 82] = "R";
    KeyCode[KeyCode["S"] = 83] = "S";
    KeyCode[KeyCode["T"] = 84] = "T";
    KeyCode[KeyCode["U"] = 85] = "U";
    KeyCode[KeyCode["V"] = 86] = "V";
    KeyCode[KeyCode["W"] = 87] = "W";
    KeyCode[KeyCode["X"] = 88] = "X";
    KeyCode[KeyCode["Y"] = 89] = "Y";
    KeyCode[KeyCode["Z"] = 90] = "Z";
    KeyCode[KeyCode["Meta"] = 91] = "Meta";
    KeyCode[KeyCode["RightMeta"] = 92] = "RightMeta";
    KeyCode[KeyCode["Numpad0"] = 96] = "Numpad0";
    KeyCode[KeyCode["Numpad9"] = 105] = "Numpad9";
    KeyCode[KeyCode["F11"] = 122] = "F11";
    KeyCode[KeyCode["/"] = 191] = "/";
    KeyCode[KeyCode["\\"] = 220] = "\\";
    KeyCode[KeyCode["Ime"] = 229] = "Ime";
})(KeyCode || (exports.KeyCode = KeyCode = {}));
var ArrowKeysEnum = exports.ArrowKeysEnum = [KeyCode.Up, KeyCode.Down, KeyCode.Left, KeyCode.Right];
var CopyPasteKeysEnum = exports.CopyPasteKeysEnum = [KeyCode.C, KeyCode.V, KeyCode.X];
function isCopyCutPasteKey(e) {
    return isAccelKey(e) && CopyPasteKeysEnum.indexOf(e.keyCode) !== -1;
}
function isAccelKey(e) {
    return isMac ? e.metaKey && !e.altKey : e.ctrlKey && !e.altKey;
}

/***/ }),
/* 766 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getUserNameFromMembers = exports.handleMembersMessage = exports.handleResetMembers = exports.handleUserUpdate = exports.handleUserLeave = exports.handleUserNewInfo = exports.handleSetUser = exports.deleteSuiteMembers = exports.setSuiteMembers = exports.getSuiteMembers = exports.genSuiteMembersKey = undefined;

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _$store = __webpack_require__(64);

var _$store2 = _interopRequireDefault(_$store);

var _userHelper = __webpack_require__(65);

var _member = __webpack_require__(533);

var _member2 = __webpack_require__(1413);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var genSuiteMembersKey = exports.genSuiteMembersKey = function genSuiteMembersKey(type, token) {
  var suiteType = _common.mapFileType2TypeNum[type.toLowerCase()];
  return suiteType + ':' + token;
};

/**
 * 请勿使用！
 * 请勿在reducer里通过store去访问state！
 * @param {*} type
 * @param {*} token
 */
var getSuiteMembers = exports.getSuiteMembers = function getSuiteMembers(type, token) {
  var members = (0, _member.selectMembers)(_$store2.default.getState());
  var suiteKey = genSuiteMembersKey(type, token);
  return members[suiteKey] || [];
};

var setSuiteMembers = exports.setSuiteMembers = function setSuiteMembers(state, _ref) {
  var type = _ref.type,
      token = _ref.token,
      members = _ref.members;

  var suiteKey = genSuiteMembersKey(type, token);
  state[suiteKey] = members;
};

var deleteSuiteMembers = exports.deleteSuiteMembers = function deleteSuiteMembers(state, _ref2) {
  var type = _ref2.type,
      token = _ref2.token;

  var suiteKey = genSuiteMembersKey(type, token);
  delete state[suiteKey];
};

var handleSetUser = exports.handleSetUser = function handleSetUser(type, _ref3) {
  var token = _ref3.token,
      members = _ref3.members;

  _$store2.default.dispatch((0, _member2.addSuiteMembers)({ type: type, token: token, members: members || [] }));
};

var handleUserNewInfo = function handleUserNewInfo(type, data) {
  var token = data.token,
      version = data.version,
      messageType = data.type,
      memberInfo = (0, _objectWithoutProperties3.default)(data, ['token', 'version', 'type']);

  if (!memberInfo) return;

  _$store2.default.dispatch((0, _member2.updateSuiteMember)({ type: type, token: token, memberInfo: memberInfo }));
};

exports.handleUserNewInfo = handleUserNewInfo;
var handleUserLeave = exports.handleUserLeave = function handleUserLeave(type, _ref4) {
  var token = _ref4.token,
      memberIds = _ref4.member_id;

  if (!memberIds) return;

  _$store2.default.dispatch((0, _member2.removeSuiteMembers)({ type: type, token: token, memberIds: [].concat(memberIds) }));
};

var handleUserUpdate = function handleUserUpdate(type, _ref5) {
  var token = _ref5.token,
      memberInfo = (0, _objectWithoutProperties3.default)(_ref5, ['token']);

  if (!memberInfo) return;

  _$store2.default.dispatch((0, _member2.updateSuiteMember)({ type: type, token: token, memberInfo: memberInfo }));
};

exports.handleUserUpdate = handleUserUpdate;
var handleResetMembers = exports.handleResetMembers = function handleResetMembers(type, token) {
  _$store2.default.dispatch((0, _member2.resetSuiteMembers)({ type: type, token: token }));
};

var handleMembersMessage = exports.handleMembersMessage = function handleMembersMessage(type, _ref6) {
  var token = _ref6.token,
      members = _ref6.members;

  if (!members) return;

  _$store2.default.dispatch((0, _member2.resetSuiteMembers)({ type: type, token: token }));
  _$store2.default.dispatch((0, _member2.addSuiteMembers)({ type: type, token: token, members: members }));
};

var getUserNameFromMembers = exports.getUserNameFromMembers = function getUserNameFromMembers(id, type, token) {
  var defaultName = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';

  if (!_$store2.default) return '';
  if (!token) return '';

  var state = _$store2.default.getState();
  var appState = state.appState;

  if (!appState) return defaultName;

  var members = appState.members;

  if (!members) return defaultName;

  var users = members[genSuiteMembersKey(type, token)];
  if (!users) return defaultName;

  var user = users.find(function (_user) {
    var _userId = _user.suid || _user.user_id;
    return _userId === id;
  });

  return (0, _userHelper.getLocaleName)(user, defaultName);
};

/***/ }),
/* 767 */,
/* 768 */,
/* 769 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.LogFlow = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _teaLogger = __webpack_require__(450);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var LogContext = function () {
    function LogContext(eventName) {
        (0, _classCallCheck3.default)(this, LogContext);

        this.eventName = eventName;
        this.content = new Object();
    }
    /**
     * 先把一些字段存到 context 里面
     * 以待以后可以和之前的 context 一并提交
     */


    (0, _createClass3.default)(LogContext, [{
        key: 'push',
        value: function push(content) {
            this.content = Object.assign({}, this.content, content);
        }
        /**
         * 报告事件
         */

    }, {
        key: 'report',
        value: function report(content) {
            this.content = Object.assign({}, this.content, content);
            (0, _teaLogger.reportEvent)(this.eventName, this.content);
            this.clear();
        }
        /**
         * 清除 context
         */

    }, {
        key: 'clear',
        value: function clear() {
            this.content = new Object();
        }
    }, {
        key: 'get',
        value: function get() {
            return this.content;
        }
    }]);
    return LogContext;
}();

var LogFlowGenerator = function LogFlowGenerator() {
    var map = new Map();
    return function (name) {
        if (map.has(name)) return map.get(name);
        var context = new LogContext(name);
        map.set(name, context);
        return context;
    };
};
var LogFlow = exports.LogFlow = LogFlowGenerator();

/***/ }),
/* 770 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setMobileOfflineCommentFail = exports.setLocalGlobalCommentRead = exports.setLocalDocCommentRead = exports.setCollabDocMessageRead = exports.setCommentMessageRead = exports.resetComments = exports.updateComments = exports.removeComments = exports.startNewComment = exports.linkCommentToDocError = exports.linkCommentToDocOK = exports.linkCommentToDoc = exports.postCommentToLocal = exports.postComment = exports.reopenComment = exports.deleteLastReplyComment = exports.deleteReplyComment = exports.updateReplyComment = exports.replyComment = exports.resolveCommentAnimated = exports.resolveComment = exports.fetchComments = exports.mergeCommentMessageStatuses = exports.initMobileComments = exports.initComments = exports.setCommentVersion = exports.mergeCommentReaction = exports.mergeGlobalCommentMessageStatuses = exports.resetGlobalComment = exports.removeGlobalComment = exports.addGlobalCommentToLocal = exports.addGlobalComment = exports.fetchGlobalComment = exports.deleteGlobalComment = exports.updateGlobalComment = exports.reopenGlobalComment = exports.resolveGlobalComment = exports.fetchGlobalComments = exports.setGlobalCommentVersion = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _get2 = __webpack_require__(83);

var _get3 = _interopRequireDefault(_get2);

var _reduce2 = __webpack_require__(230);

var _reduce3 = _interopRequireDefault(_reduce2);

exports.sendToGlobalCommentCollabs = sendToGlobalCommentCollabs;
exports.sendToCommentCollabs = sendToCommentCollabs;
exports.syncMessageVersion = syncMessageVersion;

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

var _watchRequestHelper = __webpack_require__(1323);

var _suiteHelper = __webpack_require__(52);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// 全局评论
var setGlobalCommentVersion = exports.setGlobalCommentVersion = function setGlobalCommentVersion(version) {
    return {
        type: _$constants.actionTypes.comment.globalComment.SET_GLOBAL_COMMENT_VERSION,
        payload: version
    };
};
var fetchGlobalComments = exports.fetchGlobalComments = function fetchGlobalComments(token) {
    var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
    var version = arguments[2];
    var replaceAll = arguments[3];
    var editor = arguments[4];
    var options = arguments[5];
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.globalComment.FETCH_GLOBAL_COMMENT_LIST,
        payload: { token: token }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_GET_GLOBAL_COMMENT_LIST,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, page: page },
        serverFirst: options && options.serverFirst,
        options: { transformResponse: function transformResponse(response) {
                return Object.assign({}, response, { token: token, version: version, replaceAll: replaceAll });
            } }
    });
};
var resolveGlobalComment = exports.resolveGlobalComment = function resolveGlobalComment(token, commentId, version, editor) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.globalComment.RESOLVE_GLOBAL_COMMENT,
        payload: { editor: editor }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_UPDATE_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, finish: 1, comment_id: commentId },
        serverFirst: true,
        noStore: true,
        retryCount: 0,
        options: { transformResponse: function transformResponse(response) {
                return Object.assign({}, response, { version: version, replyId: response.reply_id });
            } }
    });
};
var reopenGlobalComment = exports.reopenGlobalComment = function reopenGlobalComment(comment, editor) {
    var replyId = (0, _get3.default)(comment, 'comment_list[0].reply_id');
    var dataList = [{ reply_id: replyId, action: 'update' }];
    sendToGlobalCommentCollabs(dataList, editor);
    return {
        type: _$constants.actionTypes.comment.globalComment.REOPEN_GLOBAL_COMMENT,
        serverFirst: true,
        noStore: true,
        retryCount: 0,
        payload: { comment: comment }
    };
};
var updateGlobalComment = exports.updateGlobalComment = function updateGlobalComment(_ref3, editor) {
    var token = _ref3.token,
        commentId = _ref3.commentId,
        content = _ref3.content,
        replyId = _ref3.replyId,
        extra = _ref3.extra;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.globalComment.UPDATE_GLOBAL_COMMENT,
        payload: { commentId: commentId, replyId: replyId, editor: editor }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_UPDATE_GLOBAL_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        serverFirst: true,
        noStore: true,
        retryCount: 0,
        data: { token: token, content: content, comment_id: commentId, reply_id: replyId, extra: extra }
    });
};
var deleteGlobalComment = exports.deleteGlobalComment = function deleteGlobalComment(commentId, token, replyId, editor) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.globalComment.DELETE_GLOBAL_COMMENT,
        payload: { commentId: commentId, replyId: replyId, editor: editor }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_DELETE_GLOBAL_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        serverFirst: true,
        noStore: true,
        retryCount: 0,
        data: { token: token, reply_id: replyId }
    });
};
var fetchGlobalComment = exports.fetchGlobalComment = function fetchGlobalComment(data, version, options) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.globalComment.FETCH_NEW_GLOBAL_COMMENT,
        payload: { token: (0, _suiteHelper.getToken)() }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_GET_NEW_GLOBAL_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        data: Object.assign({ token: (0, _suiteHelper.getToken)() }, data),
        serverFirst: options && options.serverFirst,
        options: { transformResponse: function transformResponse(response) {
                return Object.assign({}, response, { version: version });
            } }
    });
};
var addGlobalComment = exports.addGlobalComment = function addGlobalComment(content, commentItem, editor, extra, options) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.globalComment.ADD_NEW_GLOBAL_COMMENT,
        payload: { commentItem: commentItem, editor: editor }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_ADD_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        serverFirst: options && options.serverFirst,
        noStore: true,
        retryCount: 0,
        data: { token: (0, _suiteHelper.getToken)(), uuid: commentItem.uuid, extra: extra, content: content, is_whole: 1 }
    });
};
/**
 * 将待发到服务端的全局评论先加到本地的列表
 */
var addGlobalCommentToLocal = exports.addGlobalCommentToLocal = function addGlobalCommentToLocal(commentItem) {
    return {
        type: _$constants.actionTypes.comment.globalComment.ADD_NEW_GLOBAL_COMMENT_TO_LOCAL,
        payload: { commentItem: commentItem }
    };
};
var removeGlobalComment = exports.removeGlobalComment = function removeGlobalComment(ids, version, options) {
    return {
        type: _$constants.actionTypes.comment.globalComment.REMOVE_GLOBAL_COMMENT,
        payload: { ids: ids },
        serverFirst: options && options.serverFirst,
        options: { transformResponse: function transformResponse(response) {
                return Object.assign({}, response, { version: version });
            } }
    };
};
var resetGlobalComment = exports.resetGlobalComment = function resetGlobalComment() {
    return {
        type: _$constants.actionTypes.comment.globalComment.RESET_GLOBAL_COMMENT
    };
};
// 这不是一个redux action 注意不要用dispatch包裹
function sendToGlobalCommentCollabs(data, editor) {
    editor.plugins.client.sendMessage({
        type: 'DOC_COMMENT',
        data_str: JSON.stringify(data)
    });
}
function sendToCommentCollabs(commentId, editor) {
    editor.plugins.client && editor.plugins.client.sendMessage({
        comment_id: commentId,
        type: 'USER_COMMENT'
    });
}
function syncMessageVersion(version, editor) {
    editor.plugins.sync && editor.plugins.sync.syncBaseRev('message_channel', version);
}
var mergeGlobalCommentMessageStatuses = exports.mergeGlobalCommentMessageStatuses = function mergeGlobalCommentMessageStatuses(messageStatuses) {
    return {
        type: _$constants.actionTypes.comment.globalComment.MERGE_GLOBAL_COMMENT_MESSAGE_STATUSES,
        payload: messageStatuses
    };
};
var mergeCommentReaction = exports.mergeCommentReaction = function mergeCommentReaction(data) {
    return {
        type: _$constants.actionTypes.comment.globalComment.MERGE_GLOBAL_COMMENT_REACTION,
        payload: data
    };
};
// suite内评论
var setCommentVersion = exports.setCommentVersion = function setCommentVersion(version) {
    return {
        type: _$constants.actionTypes.comment.docComment.SET_COMMENT_VERSION,
        payload: version
    };
};
var initComments = exports.initComments = function initComments(allComments, token) {
    return {
        type: _$constants.actionTypes.comment.docComment.INIT_COMMENTS,
        payload: { allComments: allComments, token: token }
    };
};
var initMobileComments = exports.initMobileComments = function initMobileComments(allComments) {
    return {
        type: _$constants.actionTypes.comment.docComment.INIT_MOBILE_COMMENTS,
        payload: allComments
    };
};
var mergeCommentMessageStatuses = exports.mergeCommentMessageStatuses = function mergeCommentMessageStatuses(messageStatuses) {
    return {
        type: _$constants.actionTypes.comment.docComment.MERGE_COMMENT_MESSAGE_STATUSES,
        payload: messageStatuses
    };
};
var fetchComments = exports.fetchComments = (0, _watchRequestHelper.watchRequest)(function (token, ids, version, extra, editor) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.docComment.FETCH_COMMENT_LIST,
        payload: { token: token }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_GET_COMMENT_LIST,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, comment_id: ids },
        options: {
            transformResponse: function transformResponse(response) {
                var fetchedComments = (0, _reduce3.default)(response, function (memo, comment, commentId) {
                    if (comment.finish) {
                        editor.call('resolveCommentSilently', commentId);
                    } else {
                        memo[commentId] = comment;
                    }
                    return memo;
                }, {});
                return Object.assign({ fetchedComments: fetchedComments, version: version }, extra);
            }
        }
    });
}, 10);
var resolveComment = exports.resolveComment = function resolveComment(token, commentId, version) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.docComment.RESOLVE_COMMENT
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_UPDATE_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, comment_id: commentId, finish: 1 },
        options: { transformResponse: function transformResponse(response) {
                return Object.assign({}, response, { version: version });
            } }
    });
};
var resolveCommentAnimated = exports.resolveCommentAnimated = function resolveCommentAnimated(commentId) {
    return {
        type: _$constants.actionTypes.comment.docComment.RESOLVE_COMMENT_ANIMATED,
        payload: { comment_id: commentId }
    };
};
var replyComment = exports.replyComment = function replyComment(_ref10, replyItem, editor) {
    var token = _ref10.token,
        commentId = _ref10.commentId,
        content = _ref10.content;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.docComment.REPLY_COMMENT,
        payload: { replyItem: replyItem, commentId: commentId, editor: editor }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_REPLY_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, content: content, uuid: replyItem.uuid, comment_id: commentId }
    });
};
var updateReplyComment = exports.updateReplyComment = function updateReplyComment(_ref12, replyItem, editor) {
    var token = _ref12.token,
        commentId = _ref12.commentId,
        content = _ref12.content,
        replyId = _ref12.replyId;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.docComment.UPDATE_REPLY_COMMENT,
        payload: { replyItem: replyItem, commentId: commentId, replyId: replyId, editor: editor }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_UPDATE_REPLY_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, content: content, comment_id: commentId, reply_id: replyId }
    });
};
var deleteReplyComment = exports.deleteReplyComment = function deleteReplyComment(commentId, token, replyId, editor) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.docComment.DELETE_REPLY_COMMENT,
        payload: { commentId: commentId, replyId: replyId, editor: editor }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_DELETE_REPLY_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, reply_id: replyId }
    });
};
var deleteLastReplyComment = exports.deleteLastReplyComment = function deleteLastReplyComment(commentId, token, replyId, editor) {
    return {
        type: _$constants.actionTypes.comment.docComment.DELETE_REPLY_COMMENT_SUCCESS,
        payload: { commentId: commentId, replyId: replyId, editor: editor }
    };
};
var reopenComment = exports.reopenComment = function reopenComment(comment, editor) {
    return new Promise(function (resolve) {
        editor && editor.call('reopenComment', {
            comment: comment,
            onComplete: function onComplete(insertIndex, insertComment) {
                resolve({
                    type: _$constants.actionTypes.comment.docComment.REOPEN_COMMENT,
                    payload: { insertIndex: insertIndex, insertComment: insertComment }
                });
            }
        });
    });
};
var postComment = exports.postComment = function postComment(_ref15, replyItem) {
    var token = _ref15.token,
        commentId = _ref15.commentId,
        content = _ref15.content,
        quote = _ref15.quote;
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.docComment.POST_COMMENT,
        payload: { replyItem: replyItem, commentId: commentId, quote: quote }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_ADD_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, content: content, quote: quote }
    });
};
/**
 * 将待发到服务端的侧边评论先加到本地的列表
 */
var postCommentToLocal = exports.postCommentToLocal = function postCommentToLocal(_ref17, replyItem) {
    var commentId = _ref17.commentId,
        quote = _ref17.quote;
    return {
        type: _$constants.actionTypes.comment.docComment.POST_COMMENT_TO_LOCAL,
        payload: { replyItem: replyItem, commentId: commentId, quote: quote }
    };
};
var linkCommentToDoc = exports.linkCommentToDoc = function linkCommentToDoc(_ref18) {
    var commentId = _ref18.commentId,
        newCommentId = _ref18.newCommentId,
        replyId = _ref18.replyId;
    return {
        type: _$constants.actionTypes.comment.docComment.LINK_COMMENT_TO_DOC,
        payload: { commentId: commentId, replyId: replyId }
    };
};
var linkCommentToDocOK = exports.linkCommentToDocOK = function linkCommentToDocOK(_ref19) {
    var commentId = _ref19.commentId,
        newCommentId = _ref19.newCommentId,
        replyId = _ref19.replyId;
    return {
        type: _$constants.actionTypes.comment.docComment.LINK_COMMENT_TO_DOC_OK,
        payload: { commentId: commentId, newCommentId: newCommentId, replyId: replyId }
    };
};
var linkCommentToDocError = exports.linkCommentToDocError = function linkCommentToDocError(_ref20) {
    var commentId = _ref20.commentId,
        replyId = _ref20.replyId,
        error = _ref20.error;
    return {
        type: _$constants.actionTypes.comment.docComment.LINK_COMMENT_TO_DOC_ERROR,
        payload: { commentId: commentId, replyId: replyId, error: error }
    };
};
var startNewComment = exports.startNewComment = function startNewComment(data) {
    return {
        type: _$constants.actionTypes.comment.docComment.START_NEW_COMMENT,
        payload: data
    };
};
var removeComments = exports.removeComments = function removeComments(commentIds) {
    return {
        type: _$constants.actionTypes.comment.docComment.REMOVE_COMMENTS,
        payload: commentIds
    };
};
var updateComments = exports.updateComments = function updateComments(allComments) {
    return {
        type: _$constants.actionTypes.comment.docComment.UPDATE_COMMENTS,
        payload: allComments
    };
};
var resetComments = exports.resetComments = function resetComments() {
    return {
        type: _$constants.actionTypes.comment.docComment.RESET_COMMENTS
    };
};
var setCommentMessageRead = exports.setCommentMessageRead = function setCommentMessageRead(data, type) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.comment.SET_COMMENT_MESSAGE_READ,
        payload: Object.assign({}, data, { type: type })
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_SET_MESSAGE_READ,
        method: _$constants.apiUrls.METHOD.POST,
        data: data
    });
};
var setCollabDocMessageRead = exports.setCollabDocMessageRead = function setCollabDocMessageRead(data) {
    return {
        type: _$constants.actionTypes.comment.SET_COLLAB_DOC_MESSAGE_READ,
        payload: data
    };
};
var setLocalDocCommentRead = exports.setLocalDocCommentRead = function setLocalDocCommentRead(data) {
    return {
        type: _$constants.actionTypes.comment.docComment.SET_LOCAL_DOC_COMMENT_READ,
        payload: data
    };
};
var setLocalGlobalCommentRead = exports.setLocalGlobalCommentRead = function setLocalGlobalCommentRead(data) {
    return {
        type: _$constants.actionTypes.comment.globalComment.SET_LOCAL_GLOBAL_COMMENT_READ,
        payload: data
    };
};
/* 移动端离线状态下发送评论，提示失败的action */
var setMobileOfflineCommentFail = exports.setMobileOfflineCommentFail = function setMobileOfflineCommentFail() {
    return {
        type: _$constants.actionTypes.comment.globalComment.SET_MOBILE_OFELINE_COMMENT_FAIL
    };
};

/***/ }),
/* 771 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.sub = sub;
exports.pub = pub;
exports.unsub = unsub;
var __message = {};
function sub(type, fn) {
  if (typeof __message[type] === 'undefined') {
    __message[type] = [fn];
  } else {
    __message[type].push(fn);
  }
};

function pub(type) {
  if (!__message[type]) {
    return;
  }

  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }

  var events = args;
  var i = 0;
  var len = __message[type].length;
  for (; i < len; i++) {
    __message[type][i].apply(this, events);
  }
};

function unsub(type, fn) {
  if (__message[type] instanceof Array) {
    var i = __message[type].length - 1;
    for (; i >= 0; i--) {
      if (__message[type][i] === fn) {
        __message[type].splice(i, 1);
      }
    }
  }
};

exports.default = {
  sub: sub,
  pub: pub,
  unsub: unsub
};

/***/ }),
/* 772 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.updatePagePosition = exports.fetchTranslateConfig = exports.fetchTranslation = exports.updateTranslateStatus = exports.setOriginClientVars = exports.toggleTranslate = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var toggleTranslate = exports.toggleTranslate = function toggleTranslate(status) {
    return {
        type: _$constants.actionTypes.translate.TOGGLE_TRANSLATE,
        payload: { status: status }
    };
};
var setOriginClientVars = exports.setOriginClientVars = function setOriginClientVars(clientVars) {
    return {
        type: _$constants.actionTypes.translate.SET_CLIENTVARS,
        payload: { clientVars: clientVars }
    };
};
var updateTranslateStatus = exports.updateTranslateStatus = function updateTranslateStatus(payload) {
    return {
        type: _$constants.actionTypes.translate.UPDATE_TRANSLATE_STATUS,
        payload: payload
    };
};
var fetchTranslation = exports.fetchTranslation = function fetchTranslation(data) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.translate.FETCH_TRANSLATION
    }, _common.REQUEST, {
        url: _$constants.apiUrls.FETCH_TRANSLATION,
        method: _$constants.apiUrls.METHOD.POST,
        noStore: true,
        headers: {
            'Content-Type': 'multipart/form-data'
        },
        data: data
    });
};
var fetchTranslateConfig = exports.fetchTranslateConfig = function fetchTranslateConfig(type, token) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.translate.GET_TRANSLATE_CONFIG
    }, _common.REQUEST, {
        url: _$constants.apiUrls.GET_TRANSLATE_CONFIG,
        method: _$constants.apiUrls.METHOD.GET,
        noStore: true,
        params: {
            obj_type: type,
            token: token
        }
    });
};
var updatePagePosition = exports.updatePagePosition = function updatePagePosition(payload) {
    return {
        type: _$constants.actionTypes.translate.UPDATE_PAGE_POSITION,
        payload: payload
    };
};

/***/ }),
/* 773 */,
/* 774 */,
/* 775 */,
/* 776 */,
/* 777 */,
/* 778 */,
/* 779 */,
/* 780 */,
/* 781 */,
/* 782 */,
/* 783 */,
/* 784 */,
/* 785 */,
/* 786 */,
/* 787 */,
/* 788 */,
/* 789 */,
/* 790 */,
/* 791 */,
/* 792 */,
/* 793 */,
/* 794 */,
/* 795 */,
/* 796 */,
/* 797 */,
/* 798 */,
/* 799 */,
/* 800 */,
/* 801 */,
/* 802 */,
/* 803 */,
/* 804 */,
/* 805 */,
/* 806 */,
/* 807 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.configureStore = configureStore;

var _redux = __webpack_require__(66);

var _reactRouterRedux = __webpack_require__(173);

var _history = __webpack_require__(192);

var _history2 = _interopRequireDefault(_history);

var _reduxSaga = __webpack_require__(240);

var _reduxSaga2 = _interopRequireDefault(_reduxSaga);

var _reduxThunk = __webpack_require__(1124);

var _reduxThunk2 = _interopRequireDefault(_reduxThunk);

var _exposedPromise = __webpack_require__(1125);

var _exposedPromise2 = _interopRequireDefault(_exposedPromise);

var _reduxPromise = __webpack_require__(1126);

var _reduxPromise2 = _interopRequireDefault(_reduxPromise);

var _dialog = __webpack_require__(1131);

var _dialog2 = _interopRequireDefault(_dialog);

var _toast = __webpack_require__(1132);

var _toast2 = _interopRequireDefault(_toast);

var _toastMobile = __webpack_require__(1137);

var _toastMobile2 = _interopRequireDefault(_toastMobile);

var _locationChange = __webpack_require__(1144);

var _locationChange2 = _interopRequireDefault(_locationChange);

var _swallowRequestAction = __webpack_require__(1145);

var _swallowRequestAction2 = _interopRequireDefault(_swallowRequestAction);

var _swallowPagingFetchAction = __webpack_require__(1146);

var _swallowPagingFetchAction2 = _interopRequireDefault(_swallowPagingFetchAction);

var _$sagas = __webpack_require__(1147);

var _$sagas2 = _interopRequireDefault(_$sagas);

var _root_reducer = __webpack_require__(1365);

var _root_reducer2 = _interopRequireDefault(_root_reducer);

var _global = __webpack_require__(473);

var _global2 = _interopRequireDefault(_global);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// reducers
// redux basic
(0, _global2.default)();

// global variable

// import perfMiddleware from '$middlewares/perf';

// sagas


// middleware


var sagaMiddleware = (0, _reduxSaga2.default)();

var router = (0, _reactRouterRedux.routerMiddleware)(_history2.default);

var middlewares = [
// perfMiddleware,
_exposedPromise2.default, sagaMiddleware, _swallowPagingFetchAction2.default, _swallowRequestAction2.default, _reduxThunk2.default, router, _reduxPromise2.default, _dialog2.default, _toast2.default, _toastMobile2.default, _locationChange2.default];

function configureStore() {
  var initialState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var rootReducer = (0, _root_reducer2.default)();
  var composeEnhancers = void 0;
  if (true) {
    composeEnhancers = _redux.compose;
  } else {}

  var store = (0, _redux.createStore)(rootReducer, initialState, composeEnhancers(_redux.applyMiddleware.apply(undefined, middlewares)));

  if (false) {}
  return store;
}

var store = configureStore(window.___INITIAL_STATE__);

sagaMiddleware.run(_$sagas2.default);

exports.default = store;

/***/ }),
/* 808 */,
/* 809 */,
/* 810 */,
/* 811 */,
/* 812 */,
/* 813 */,
/* 814 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.request = exports.fetch = undefined;

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

exports.setFetchConfig = setFetchConfig;
exports.compatibleAxiosFetch = compatibleAxiosFetch;

var _qs = __webpack_require__(353);

var _qs2 = _interopRequireDefault(_qs);

var _fetch = __webpack_require__(1211);

var _fetch2 = _interopRequireDefault(_fetch);

var _paramsFixMiddleware = __webpack_require__(1250);

var _paramsFixMiddleware2 = _interopRequireDefault(_paramsFixMiddleware);

var _mockMiddleware = __webpack_require__(1263);

var _mockMiddleware2 = _interopRequireDefault(_mockMiddleware);

var _onceMiddleware = __webpack_require__(1264);

var _onceMiddleware2 = _interopRequireDefault(_onceMiddleware);

var _serverFirstMiddleware = __webpack_require__(1265);

var _serverFirstMiddleware2 = _interopRequireDefault(_serverFirstMiddleware);

var _autoStorageMiddleware = __webpack_require__(1266);

var _autoStorageMiddleware2 = _interopRequireDefault(_autoStorageMiddleware);

var _errorReportMiddleware = __webpack_require__(1267);

var _errorReportMiddleware2 = _interopRequireDefault(_errorReportMiddleware);

var _pick2 = __webpack_require__(768);

var _pick3 = _interopRequireDefault(_pick2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var requestInstance = new _fetch2.default();
// request
requestInstance.interceptors.request.use(_paramsFixMiddleware2.default);
// response
requestInstance.interceptors.response.use(_autoStorageMiddleware2.default, rejectMiddleware);
requestInstance.interceptors.response.use(_onceMiddleware2.default, _onceMiddleware2.default);
requestInstance.interceptors.response.use(_serverFirstMiddleware2.default, _serverFirstMiddleware2.default);
requestInstance.interceptors.response.use(_mockMiddleware2.default, rejectMiddleware);
requestInstance.interceptors.response.use(undefined, _errorReportMiddleware2.default);
requestInstance.interceptors.response.use(function (context) {
    // 临时处理 res.data 为 null 时的报错
    var res = context.res;

    if (res && res.data === null) {
        res.data = {};
    }
    return res;
}, rejectMiddleware);
function setFetchConfig(cfg) {
    requestInstance.setFetchConfig(cfg);
}
function compatibleAxiosFetch(requestConfig) {
    var url = requestConfig.url,
        method = requestConfig.method,
        headers = requestConfig.headers,
        data = requestConfig.data,
        params = requestConfig.params,
        contentType = requestConfig.contentType,
        key = requestConfig.key,
        restConfig = (0, _objectWithoutProperties3.default)(requestConfig, ['url', 'method', 'headers', 'data', 'params', 'contentType', 'key']);

    var resolvedUrl = resolveURL(url, params);
    var rest = (0, _pick3.default)(restConfig, ['noStore', 'readStore', 'once', 'extraKey', 'serverFirst', 'ignoreForbidden', 'retryCount']);
    return requestInstance.fetch(resolvedUrl, Object.assign({
        body: data,
        method: (method || '').toUpperCase(),
        headers: headers,
        key: key || url,
        contentType: contentType
    }, rest));
}
var fetch = exports.fetch = requestInstance.fetch;
var request = exports.request = requestInstance;
function resolveURL(url, param) {
    if (url.indexOf('?') < 0 && param) {
        url += '?' + _qs2.default.stringify(param, { arrayFormat: 'repeat' });
    } else if (param) {
        url += '& ' + _qs2.default.stringify(param, { arrayFormat: 'repeat' }) + ' ';
    }
    return url;
}
function rejectMiddleware(context) {
    return Promise.reject(context.res || context);
}
exports.default = fetch;

/***/ }),
/* 815 */,
/* 816 */,
/* 817 */,
/* 818 */,
/* 819 */,
/* 820 */,
/* 821 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setPreference = setPreference;
exports.getPreference = getPreference;

var _sdkCompatibleHelper = __webpack_require__(45);

var _offlineStorageHelper = __webpack_require__(313);

var _store = __webpack_require__(393);

var _store2 = _interopRequireDefault(_store);

var _isEmpty2 = __webpack_require__(454);

var _isEmpty3 = _interopRequireDefault(_isEmpty2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 存储小型偏好数据，<1k
 */
/**
 * 目的：存储小型数据在客户端，数据仅在用户卸载App或从系统清除时被清除；Lark内的清除缓存功能不会清除这些数据。
 * 方法：setPreference/getPreference
 * 与setData/getData的主要区别：
 *    1. 目的不同
 *       setData/getData 客户端的本意是只用于实现文档的离线化功能；
 *       setPreference/getPreference 的目的是提供通用的偏好存储功能
 *    2. 方法参数不同
 *    3. 支持版本不同，lark 3.1版本开始支持
 */
function setPreference(param) {
    var value = param.value;

    value = Object.is(param.value, null) ? '' : value;
    var key = param.keyGened ? param.key : (0, _offlineStorageHelper.genKey)(param.key);
    if (_sdkCompatibleHelper.isSupportPreferenceStorage) {
        window.lark.biz.util.setPreference({
            key: key,
            value: JSON.stringify(value)
        });
    } else {
        _store2.default.setItem(key, JSON.stringify(value));
    }
}
/**
 * 获取存储的偏好数据
 */
function getPreference(param) {
    return new Promise(function (resolve, reject) {
        var key = param.keyGened ? param.key : (0, _offlineStorageHelper.genKey)(param.key);
        if (_sdkCompatibleHelper.isSupportPreferenceStorage) {
            window.lark.biz.util.getPreference({
                key: key,
                callback: function callback(res) {
                    resolve(res || '');
                }
            });
        } else {
            _store2.default.getItem(key).then(function (data) {
                var resData = JSON.parse(data);
                if ((0, _isEmpty3.default)(resData)) {
                    resData = '';
                }
                resolve(resData);
            });
        }
    });
}

/***/ }),
/* 822 */,
/* 823 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.triggerShake = triggerShake;
/**
 * 触发震动
 * @param grade 震动等级['light', 'medium', 'heavy']
 */
function triggerShake() {
    var grade = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'light';

    var shakeMap = {
        light: [10, 50],
        medium: [20, 100],
        heavy: [30, 200]
    };
    window.lark.biz.util.triggerShake({
        grade: grade,
        time: shakeMap[grade][0],
        strength: shakeMap[grade][1]
    });
}

/***/ }),
/* 824 */,
/* 825 */,
/* 826 */,
/* 827 */,
/* 828 */,
/* 829 */,
/* 830 */,
/* 831 */,
/* 832 */,
/* 833 */,
/* 834 */,
/* 835 */,
/* 836 */,
/* 837 */,
/* 838 */,
/* 839 */,
/* 840 */,
/* 841 */,
/* 842 */,
/* 843 */,
/* 844 */,
/* 845 */,
/* 846 */,
/* 847 */,
/* 848 */,
/* 849 */,
/* 850 */,
/* 851 */,
/* 852 */,
/* 853 */,
/* 854 */,
/* 855 */,
/* 856 */,
/* 857 */,
/* 858 */,
/* 859 */,
/* 860 */,
/* 861 */,
/* 862 */,
/* 863 */,
/* 864 */,
/* 865 */,
/* 866 */,
/* 867 */,
/* 868 */,
/* 869 */,
/* 870 */,
/* 871 */,
/* 872 */,
/* 873 */,
/* 874 */,
/* 875 */,
/* 876 */,
/* 877 */,
/* 878 */,
/* 879 */,
/* 880 */,
/* 881 */,
/* 882 */,
/* 883 */,
/* 884 */,
/* 885 */,
/* 886 */,
/* 887 */,
/* 888 */,
/* 889 */,
/* 890 */,
/* 891 */,
/* 892 */,
/* 893 */,
/* 894 */,
/* 895 */,
/* 896 */,
/* 897 */,
/* 898 */,
/* 899 */,
/* 900 */,
/* 901 */,
/* 902 */,
/* 903 */,
/* 904 */,
/* 905 */,
/* 906 */,
/* 907 */,
/* 908 */,
/* 909 */,
/* 910 */,
/* 911 */,
/* 912 */,
/* 913 */,
/* 914 */,
/* 915 */,
/* 916 */,
/* 917 */,
/* 918 */,
/* 919 */,
/* 920 */,
/* 921 */,
/* 922 */,
/* 923 */,
/* 924 */,
/* 925 */,
/* 926 */,
/* 927 */,
/* 928 */,
/* 929 */,
/* 930 */,
/* 931 */,
/* 932 */,
/* 933 */,
/* 934 */,
/* 935 */,
/* 936 */,
/* 937 */,
/* 938 */,
/* 939 */,
/* 940 */,
/* 941 */,
/* 942 */,
/* 943 */,
/* 944 */,
/* 945 */,
/* 946 */,
/* 947 */,
/* 948 */,
/* 949 */,
/* 950 */,
/* 951 */,
/* 952 */,
/* 953 */,
/* 954 */,
/* 955 */,
/* 956 */,
/* 957 */,
/* 958 */,
/* 959 */,
/* 960 */,
/* 961 */,
/* 962 */,
/* 963 */,
/* 964 */,
/* 965 */,
/* 966 */,
/* 967 */,
/* 968 */,
/* 969 */,
/* 970 */,
/* 971 */,
/* 972 */,
/* 973 */,
/* 974 */,
/* 975 */,
/* 976 */,
/* 977 */,
/* 978 */,
/* 979 */,
/* 980 */,
/* 981 */,
/* 982 */,
/* 983 */,
/* 984 */,
/* 985 */,
/* 986 */,
/* 987 */,
/* 988 */,
/* 989 */,
/* 990 */,
/* 991 */,
/* 992 */,
/* 993 */,
/* 994 */,
/* 995 */,
/* 996 */,
/* 997 */,
/* 998 */,
/* 999 */,
/* 1000 */,
/* 1001 */,
/* 1002 */,
/* 1003 */,
/* 1004 */,
/* 1005 */,
/* 1006 */,
/* 1007 */,
/* 1008 */,
/* 1009 */,
/* 1010 */,
/* 1011 */,
/* 1012 */,
/* 1013 */,
/* 1014 */,
/* 1015 */,
/* 1016 */,
/* 1017 */,
/* 1018 */,
/* 1019 */,
/* 1020 */,
/* 1021 */,
/* 1022 */,
/* 1023 */,
/* 1024 */,
/* 1025 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var ON_NEW_ENTRIES = exports.ON_NEW_ENTRIES = 'on_new_entries';
var ON_NEW_ACTIVE_GUID = exports.ON_NEW_ACTIVE_GUID = 'on_new_active_guid';
var ON_SCROLL_TO_ACTIVE_LINE = exports.ON_SCROLL_TO_ACTIVE_LINE = 'on_scroll_to_active_line';
var ON_RERENDER = exports.ON_RERENDER = 'on_rerender';
var ON_SHOWING_STATE_CHANGE = exports.ON_SHOWING_STATE_CHANGE = 'on_showing_state_change';
var ON_SIDEBAR_STATE_CHANGE = exports.ON_SIDEBAR_STATE_CHANGE = 'sidebar_state';

/***/ }),
/* 1026 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.shouldResetFetchStatus = undefined;

var _doc = __webpack_require__(632);

var _doc2 = _interopRequireDefault(_doc);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var shouldResetFetchStatus = exports.shouldResetFetchStatus = Object.assign({}, _doc2.default.permission, {
    SET_CURRENT_SUITE_TOKEN: _doc2.default.explorer.SET_CURRENT_SUITE_TOKEN,
    FETCH_CURRENT_SUITE: _doc2.default.suite.FETCH_CURRENT_SUITE
});

/***/ }),
/* 1027 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _common = __webpack_require__(19);

var _util = __webpack_require__(254);

var uiActionTypes = {
    OPEN_MODAL: 'OPEN_MODAL',
    CLOSE_MODAL: 'CLOSE_MODAL',
    CLICK_CONTEXTMENU_ITEM: 'CLICK_CONTEXTMENU_ITEM',
    CLICK_DROPDOWNMENU_ITEM: 'CLICK_DROPDOWNMENU_ITEM'
};
exports.default = (0, _util.bulkDecorateNameSpace)(uiActionTypes, _common.ACTION_NAMESPACE.UI);

/***/ }),
/* 1028 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _common = __webpack_require__(19);

var _util = __webpack_require__(254);

var updateActionTypes = {
    START_UPDATE_CHECKING_LOOP: 'START_UPDATE_CHECKING_LOOP',
    UPDATE_NOTIFIED: 'UPDATE_NOTIFIED',
    NEW_VERSION_NOTIFIED: 'NEW_VERSION_NOTIFIED'
};
exports.default = (0, _util.bulkDecorateNameSpace)(updateActionTypes, _common.ACTION_NAMESPACE.UPDATE);

/***/ }),
/* 1029 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _common = __webpack_require__(19);

var _util = __webpack_require__(254);

var initializeActionTypes = {
    APP_INITIALIZED: 'APP_INITIALIZED'
};
exports.default = (0, _util.bulkDecorateNameSpace)(initializeActionTypes, _common.ACTION_NAMESPACE.INITIALIZATION);

/***/ }),
/* 1030 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var onboardingActionTypes = {
    CREATE_DOC_GUIDE_PREPARE: 'CREATE_DOC_GUIDE_PREPARE',
    CREATE_DOC_GUIDE_READY: 'CREATE_DOC_GUIDE_READY',
    CREATE_DOC_CHECK_DONE: 'CREATE_DOC_CHECK_DONE',
    FETCH_LATEST_GUIDE: 'FETCH_LATEST_GUIDE',
    HOME_GUIDE_CANCEL: 'HOME_GUIDE_CANCEL',
    HOME_GUIDE_CLOSE: 'HOME_GUIDE_CLOSE',
    HOME_GUIDE_PREPARE: 'HOME_GUIDE_PREPARE',
    HOME_GUIDE_START: 'HOME_GUIDE_START',
    HOME_TUTORIAL_CHECK_STATE: 'HOME_TUTORIAL_CHECK_STATE',
    HOME_TUTORIAL_READY: 'HOME_TUTORIAL_READY',
    HOME_TUTORIAL_SET_STATE: 'HOME_TUTORIAL_SET_STATE',
    MENTION_GUIDE_READY: 'MENTION_GUIDE_READY',
    SHARED_DOC_GUIDE_PREPARE: 'SHARED_DOC_GUIDE_PREPARE',
    SHARED_DOC_GUIDE_READY: 'SHARED_DOC_GUIDE_READY',
    UNDO_REDO_GUIDE_CHECK_STATE: 'UNDO_REDO_GUIDE_CHECK_STATE',
    UNDO_REDO_GUIDE_SET_ON: 'UNDO_REDO_GUIDE_SET_ON'
};
exports.default = onboardingActionTypes;

/***/ }),
/* 1031 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var FETCH_PAGED_DATA = exports.FETCH_PAGED_DATA = 'FETCH_PAGED_DATA';

/***/ }),
/* 1032 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _common = __webpack_require__(19);

var _util = __webpack_require__(254);

var requestActionTypes = {
    FETCH_SUCC: 'FETCH_SUCC',
    FETCH_FAIL: 'FETCH_FAIL'
};
exports.default = (0, _util.bulkDecorateNameSpace)(requestActionTypes, _common.ACTION_NAMESPACE.REQUEST);

/***/ }),
/* 1033 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var IOS = exports.IOS = 'ios';
var ANDRORID = exports.ANDRORID = 'android';
var PC = exports.PC = 'pc';
var MAC = exports.MAC = 'mac';
var WINDOWS = exports.WINDOWS = 'windows';

/***/ }),
/* 1034 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var STORAGE_KEY = exports.STORAGE_KEY = {
    explorer: {
        EXPLORER_ROOT_TOKEN_MAP: 'EXPLORER_ROOT_TOKEN_MAP'
    }
};

/***/ }),
/* 1035 */,
/* 1036 */,
/* 1037 */,
/* 1038 */,
/* 1039 */,
/* 1040 */,
/* 1041 */,
/* 1042 */,
/* 1043 */,
/* 1044 */,
/* 1045 */,
/* 1046 */,
/* 1047 */,
/* 1048 */,
/* 1049 */,
/* 1050 */,
/* 1051 */,
/* 1052 */,
/* 1053 */,
/* 1054 */,
/* 1055 */,
/* 1056 */,
/* 1057 */,
/* 1058 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _temp;

var _react = __webpack_require__(1);

var _reactDom = __webpack_require__(47);

var _reactDom2 = _interopRequireDefault(_reactDom);

var _propTypes = __webpack_require__(2);

var _propTypes2 = _interopRequireDefault(_propTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ContainerRender = (_temp = _class = function (_PureComponent) {
  (0, _inherits3.default)(ContainerRender, _PureComponent);

  function ContainerRender() {
    (0, _classCallCheck3.default)(this, ContainerRender);
    return (0, _possibleConstructorReturn3.default)(this, (ContainerRender.__proto__ || Object.getPrototypeOf(ContainerRender)).apply(this, arguments));
  }

  (0, _createClass3.default)(ContainerRender, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      if (this.props.autoMount) {
        this.renderComponent();
      }
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate() {
      if (this.props.autoMount) {
        this.renderComponent();
      }
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      if (this.props.autoDestroy) {
        this.removeContainer();
      }
    }
  }, {
    key: 'renderComponent',
    value: function renderComponent(props, ready) {
      var _props = this.props,
          visible = _props.visible,
          getContainer = _props.getContainer,
          getComponent = _props.getComponent;

      if (!this.component && !visible) return;

      if (!this.container) {
        this.container = getContainer();
      }
      var component = getComponent(props);
      var self = this;
      _reactDom2.default.unstable_renderSubtreeIntoContainer(this, component, this.container, function () {
        self.component = this;
        if (ready) {
          ready.call(this);
        }
      });
    }
  }, {
    key: 'removeContainer',
    value: function removeContainer() {
      if (!this.container) return;

      var container = this.container;

      _reactDom2.default.unmountComponentAtNode(container);
      container.parentNode.removeChild(container);
      this.container = null;
    }
  }, {
    key: 'render',
    value: function render() {
      return this.props.children || null;
    }
  }]);
  return ContainerRender;
}(_react.PureComponent), _class.defaultProps = {
  autoMount: true,
  autoDestroy: true,
  getContainer: function getContainer() {
    var container = document.createElement('div');
    document.body.appendChild(container);
    return container;
  }
}, _temp);
exports.default = ContainerRender;

/***/ }),
/* 1059 */,
/* 1060 */,
/* 1061 */,
/* 1062 */,
/* 1063 */,
/* 1064 */,
/* 1065 */,
/* 1066 */,
/* 1067 */,
/* 1068 */,
/* 1069 */,
/* 1070 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = __webpack_require__(1);

var _propTypes = __webpack_require__(2);

var _propTypes2 = _interopRequireDefault(_propTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var LazyRender = function (_Component) {
  (0, _inherits3.default)(LazyRender, _Component);

  function LazyRender() {
    (0, _classCallCheck3.default)(this, LazyRender);
    return (0, _possibleConstructorReturn3.default)(this, (LazyRender.__proto__ || Object.getPrototypeOf(LazyRender)).apply(this, arguments));
  }

  (0, _createClass3.default)(LazyRender, [{
    key: 'shouldComponentUpdate',


    // 唯一的作用就是充当更新阀
    value: function shouldComponentUpdate(nextProps) {
      return !!(this.props.visible || nextProps.visible);
    }
  }, {
    key: 'render',
    value: function render() {
      return _react.Children.only(this.props.children);
    }
  }]);
  return LazyRender;
}(_react.Component);

exports.default = LazyRender;

/***/ }),
/* 1071 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _slicedToArray2 = __webpack_require__(111);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__(127);

var _classnames2 = _interopRequireDefault(_classnames);

var _reactMotion = __webpack_require__(658);

var _render = __webpack_require__(577);

__webpack_require__(1079);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var springConfig = { stiffness: 250, damping: 20 };
function getStyle(style) {
    if (!style) return {};
    return {
        transform: 'scale(' + style.style.scale + ')',
        opacity: style.style.scale
    };
}

var Modal = function (_Component) {
    (0, _inherits3.default)(Modal, _Component);

    function Modal() {
        (0, _classCallCheck3.default)(this, Modal);

        var _this = (0, _possibleConstructorReturn3.default)(this, (Modal.__proto__ || Object.getPrototypeOf(Modal)).apply(this, arguments));

        _this.mounted = false;
        _this.handleClose = function (e) {
            _this.props.onClose && _this.props.onClose(e);
        };
        _this.willEnter = function () {
            return { scale: 0 };
        };
        _this.willLeave = function () {
            return { scale: (0, _reactMotion.spring)(0, springConfig) };
        };
        _this.didLeave = function () {
            _this.props.afterClose && _this.props.afterClose();
        };
        _this.getContent = function (motion) {
            var _this$props = _this.props,
                className = _this$props.className,
                style = _this$props.style,
                closable = _this$props.closable,
                children = _this$props.children,
                getContent = _this$props.getContent;

            if (typeof getContent === 'function') {
                return getContent({
                    style: Object.assign({}, style, getStyle(motion)),
                    motion: false,
                    closable: closable,
                    handleClose: _this.handleClose
                });
            } else {
                return _react2.default.createElement("div", { className: (0, _classnames2.default)(className, 'modal', { modal_hidden: !motion }), style: Object.assign({}, style, getStyle(motion)) }, closable && _react2.default.createElement("button", { className: "modal__close", onClick: _this.handleClose }, _react2.default.createElement("span", { className: "n-icon-close" })), children);
            }
        };
        return _this;
    }

    (0, _createClass3.default)(Modal, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            // 触发初始 visible 的 Modal 的出现动画
            this.mounted = true;
            if (this.props.visible) {
                this.forceUpdate();
            }
        }
    }, {
        key: 'getMaskElement',
        value: function getMaskElement() {
            var _props = this.props,
                mask = _props.mask,
                maskClosable = _props.maskClosable,
                visible = _props.visible;

            if (!visible || !mask) return null;
            var events = {};
            if (maskClosable) {
                events.onClick = this.handleClose;
            }
            return _react2.default.createElement("div", Object.assign({ className: "modal-mask" }, events));
        }
    }, {
        key: 'getModalElement',
        value: function getModalElement() {
            var _this2 = this;

            var visible = this.props.visible;

            var styles = this.mounted && visible ? [{ key: 'o', style: { scale: (0, _reactMotion.spring)(1, springConfig) } }] : [];
            return _react2.default.createElement(_reactMotion.TransitionMotion, { willEnter: this.willEnter, willLeave: this.willLeave, didLeave: this.didLeave, styles: styles }, function (_ref) {
                var _ref2 = (0, _slicedToArray3.default)(_ref, 1),
                    _ref2$ = _ref2[0],
                    motion = _ref2$ === undefined ? null : _ref2$;

                return _react2.default.createElement(_render.LazyRender, { visible: !!motion }, _this2.getContent(motion));
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var wrapClassName = this.props.wrapClassName;

            return _react2.default.createElement("div", { className: (0, _classnames2.default)(wrapClassName, 'modal-wrap') }, this.getMaskElement(), this.getModalElement());
        }
    }]);
    return Modal;
}(_react.Component);

Modal.defaultProps = {
    closable: true,
    mask: true,
    maskClosable: true
};
exports.default = Modal;

/***/ }),
/* 1072 */,
/* 1073 */,
/* 1074 */,
/* 1075 */,
/* 1076 */,
/* 1077 */,
/* 1078 */,
/* 1079 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 1080 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _confirm2 = __webpack_require__(1081);

var _confirm3 = _interopRequireDefault(_confirm2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var noop = function noop() {
    return;
};
var newModal = {
    // 当前存在的Modal的level，如果传入的新Modal的level不小于此值，会覆盖掉当前Modal
    nowModalLevel: -1,
    // 存放屏幕中存在的弹窗的close函数
    close: function close() {
        return;
    },
    show: function show(args) {
        var _this = this;

        var _args$level = args.level,
            level = _args$level === undefined ? -1 : _args$level;
        var _args$onCancel = args.onCancel,
            onCancel = _args$onCancel === undefined ? noop : _args$onCancel,
            _args$onConfirm = args.onConfirm,
            onConfirm = _args$onConfirm === undefined ? noop : _args$onConfirm,
            innerArgs = (0, _objectWithoutProperties3.default)(args, ['onCancel', 'onConfirm']);
        // 容忍参数类型

        level = parseInt(level, 10);
        if (typeof level === 'number' && isNaN(level)) {
            level = -1;
        }
        var newOnCancel = function newOnCancel() {
            onCancel();
            // 用户手动点了x或者取消，那么优先级清空
            _this.nowModalLevel = -1;
        };
        var newOnConfirm = function newOnConfirm() {
            onConfirm();
            // 用户手动点了确定，那么优先级清空
            _this.nowModalLevel = -1;
        };
        // TODO: there're some issue in these codes, please fix it ASAP. @liaowenhao / @fangwufeng
        // 如果新来的modal优先级高的话，才处理
        if (level >= this.nowModalLevel) {
            this.nowModalLevel = level;
            // 关闭目前存在的弹窗，判断Level层级
            this.close();

            var _confirm = (0, _confirm3.default)(Object.assign({}, innerArgs, {
                onCancel: newOnCancel,
                onConfirm: newOnConfirm
            })),
                close = _confirm.close;

            this.close = close;
            return {
                close: close
            };
        }
        return {
            close: function close() {
                return;
            }
        };
    }
};
exports.default = newModal;

/***/ }),
/* 1081 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

exports.default = confirm;

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__(47);

var _reactDom2 = _interopRequireDefault(_reactDom);

var _classnames2 = __webpack_require__(127);

var _classnames3 = _interopRequireDefault(_classnames2);

var _isFunction = __webpack_require__(303);

var _isFunction2 = _interopRequireDefault(_isFunction);

var _createChainedFunction = __webpack_require__(660);

var _createChainedFunction2 = _interopRequireDefault(_createChainedFunction);

var _modal_wrap = __webpack_require__(655);

var _modal_wrap2 = _interopRequireDefault(_modal_wrap);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function sequenceChainFn(fn, next) {
    if (!fn) {
        return next;
    }
    return function sequence() {
        var ret = void 0;
        if (fn.length) {
            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                args[_key] = arguments[_key];
            }

            ret = fn.apply(undefined, [next].concat(args));
        } else {
            ret = fn();
            if (!ret) {
                next();
            }
        }
        if (ret && (0, _isFunction2.default)(ret.then)) {
            return ret.then(next);
        }
        return ret;
    };
}
function confirm(config) {
    var className = config.className,
        type = config.type,
        title = config.title,
        body = config.body,
        footer = config.footer,
        footerExtra = config.footerExtra,
        _config$hasCancel = config.hasCancel,
        hasCancel = _config$hasCancel === undefined ? true : _config$hasCancel,
        _config$hasConfirm = config.hasConfirm,
        hasConfirm = _config$hasConfirm === undefined ? true : _config$hasConfirm,
        _config$cancelText = config.cancelText,
        cancelText = _config$cancelText === undefined ? t('common.cancel') : _config$cancelText,
        _config$confirmText = config.confirmText,
        confirmText = _config$confirmText === undefined ? t('common.confirm') : _config$confirmText,
        onConfirm = config.onConfirm,
        onCancel = config.onCancel,
        extraButtons = config.extraButtons,
        other = (0, _objectWithoutProperties3.default)(config, ['className', 'type', 'title', 'body', 'footer', 'footerExtra', 'hasCancel', 'hasConfirm', 'cancelText', 'confirmText', 'onConfirm', 'onCancel', 'extraButtons']);

    var div = document.createElement('div');
    document.body.appendChild(div);
    function removeMountNode() {
        if (_reactDom2.default.unmountComponentAtNode(div) && div.parentNode) {
            div.parentNode.removeChild(div);
        }
    }
    var _footer = footer;
    if (_footer) {
        _footer = _react2.default.createElement("div", { className: "modal__footer" }, "footer");
    } else if (cancelText || confirmText || footerExtra) {
        _footer = _react2.default.createElement("div", { className: "modal__footer layout-row" }, _react2.default.createElement("div", { className: "modal__footer-extra flex" }, footerExtra), (cancelText || confirmText) && _react2.default.createElement("div", { className: "modal__actions" }, hasCancel && cancelText && _react2.default.createElement("button", { className: "modal__action modal__cancel", onClick: sequenceChainFn(onCancel, removeMountNode) }, cancelText), extraButtons || '', hasConfirm && confirmText && _react2.default.createElement("button", { className: "modal__action modal__confirm", onClick: sequenceChainFn(onConfirm, removeMountNode) }, confirmText)));
    }
    _reactDom2.default.render(_react2.default.createElement(_modal_wrap2.default, Object.assign({}, other, { className: (0, _classnames3.default)(className, (0, _defineProperty3.default)({}, 'modal_' + type, type)), visible: true, onClose: (0, _createChainedFunction2.default)(onCancel, removeMountNode) }), title && _react2.default.createElement("div", { className: "modal__header" }, title), _react2.default.createElement("div", { className: "modal__body" }, body), _footer), div);
    return {
        close: removeMountNode
    };
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1082 */,
/* 1083 */,
/* 1084 */,
/* 1085 */,
/* 1086 */,
/* 1087 */,
/* 1088 */,
/* 1089 */,
/* 1090 */,
/* 1091 */,
/* 1092 */,
/* 1093 */,
/* 1094 */,
/* 1095 */,
/* 1096 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.bind = exports.Bind = undefined;

var _bind2 = __webpack_require__(2258);

var _bind3 = _interopRequireDefault(_bind2);

var _factory = __webpack_require__(527);

var _applicators = __webpack_require__(673);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Bind = exports.Bind = _factory.DecoratorFactory.createInstanceDecorator(new _factory.DecoratorConfig(_bind3.default, new _applicators.BindApplicator(), {
    optionalParams: true
}));
exports.bind = Bind;
exports.default = Bind;

/***/ }),
/* 1097 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.DecoratorConfig = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DecoratorConfig = exports.DecoratorConfig = function () {
    function DecoratorConfig(execute, applicator) {
        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
        (0, _classCallCheck3.default)(this, DecoratorConfig);

        this.execute = execute;
        this.applicator = applicator;
        this.options = options;
    }

    (0, _createClass3.default)(DecoratorConfig, [{
        key: "bound",
        get: function get() {
            return this.options.bound != null ? this.options.bound : false;
        }
    }, {
        key: "setter",
        get: function get() {
            return this.options.setter != null ? this.options.setter : false;
        }
    }, {
        key: "getter",
        get: function get() {
            return this.options.getter != null ? this.options.getter : false;
        }
    }, {
        key: "property",
        get: function get() {
            return this.options.property != null ? this.options.property : false;
        }
    }, {
        key: "method",
        get: function get() {
            return this.options.method != null ? this.options.method : true;
        }
    }, {
        key: "optionalParams",
        get: function get() {
            return this.options.optionalParams != null ? this.options.optionalParams : false;
        }
    }]);
    return DecoratorConfig;
}();

/***/ }),
/* 1098 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.DecoratorFactory = exports.InternalDecoratorFactory = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _isFunction2 = __webpack_require__(76);

var _isFunction3 = _interopRequireDefault(_isFunction2);

var _ = __webpack_require__(527);

var _utils = __webpack_require__(208);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var InternalDecoratorFactory = exports.InternalDecoratorFactory = function () {
    function InternalDecoratorFactory() {
        (0, _classCallCheck3.default)(this, InternalDecoratorFactory);
    }

    (0, _createClass3.default)(InternalDecoratorFactory, [{
        key: 'createDecorator',
        value: function createDecorator(config) {
            var _this = this;

            var applicator = config.applicator,
                optionalParams = config.optionalParams;

            return function () {
                for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                    args[_key] = arguments[_key];
                }

                var params = args;
                var decorator = function decorator(target, name, _descriptor) {
                    var descriptor = _this._resolveDescriptor(target, name, _descriptor);
                    var value = descriptor.value,
                        get = descriptor.get,
                        set = descriptor.set;
                    // If this decorator is being applied after an instance decorator we simply ignore it
                    // as we can't apply it correctly.

                    if (!_.InstanceChainMap.has([target, name])) {
                        if ((0, _isFunction3.default)(value)) {
                            descriptor.value = (0, _utils.copyMetadata)(applicator.apply({ config: config, target: target, value: value, args: params }), value);
                        } else if ((0, _isFunction3.default)(get) && config.getter) {
                            descriptor.get = (0, _utils.copyMetadata)(applicator.apply({ config: config, target: target, value: get, args: params }), get);
                        } else if ((0, _isFunction3.default)(set) && config.setter) {
                            descriptor.set = (0, _utils.copyMetadata)(applicator.apply({ config: config, target: target, value: set, args: params }), set);
                        }
                    }
                    return descriptor;
                };
                if (optionalParams && _utils.isMethodOrPropertyDecoratorArgs.apply(undefined, args)) {
                    params = [];
                    return decorator(args[0], args[1], args[2]);
                }
                return decorator;
            };
        }
    }, {
        key: 'createInstanceDecorator',
        value: function createInstanceDecorator(config) {
            var _this2 = this;

            var applicator = config.applicator,
                bound = config.bound,
                optionalParams = config.optionalParams;

            return function () {
                for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                    args[_key2] = arguments[_key2];
                }

                var params = args;
                var decorator = function decorator(target, name, _descriptor) {
                    var descriptor = _this2._resolveDescriptor(target, name, _descriptor);
                    var value = descriptor.value,
                        writable = descriptor.writable,
                        enumerable = descriptor.enumerable,
                        configurable = descriptor.configurable,
                        get = descriptor.get,
                        set = descriptor.set;

                    var isFirstInstance = !_.InstanceChainMap.has([target, name]);
                    var chainData = _.InstanceChainMap.get([target, name]) || { fns: [], properties: [] };
                    var isGetter = isFirstInstance && (0, _isFunction3.default)(get);
                    var isSetter = isFirstInstance && (0, _isFunction3.default)(set);
                    var isMethod = isFirstInstance && (0, _isFunction3.default)(value);
                    var isProperty = isFirstInstance && !isGetter && !isSetter && !isMethod;
                    var baseValue = isGetter ? get : isMethod ? value : undefined;
                    chainData.properties.push(name);
                    chainData.fns.push(function (fn, instance, context) {
                        if (!_this2._isApplicable(context, config)) {
                            return fn;
                        }
                        if (bound) {
                            fn = (0, _utils.bind)(fn, instance);
                        }
                        return (0, _utils.copyMetadata)(applicator.apply({ args: params, target: target, instance: instance, value: fn, config: config }), fn);
                    });
                    _.InstanceChainMap.set([target, name], chainData);
                    if (!isFirstInstance) {
                        return descriptor;
                    }
                    chainData.isSetter = isSetter;
                    chainData.isGetter = isGetter;
                    chainData.isMethod = isMethod;
                    chainData.isProperty = isProperty;
                    var applyChain = function applyChain(fn, context, instance) {
                        return chainData.fns.reduce(function (result, next) {
                            return next(result, instance, context);
                        }, fn);
                    };
                    var applyDecorator = function applyDecorator(instance) {
                        var getter = get || undefined;
                        var setter = set || undefined;
                        if (isGetter || isSetter) {
                            // If we have a getter apply the decorators to the getter and assign it to the instance.
                            if (isGetter) {
                                getter = applyChain(get, { value: get, getter: true }, instance);
                            }
                            if (isSetter) {
                                setter = applyChain(set, { value: set, setter: true }, instance);
                            }
                            Object.defineProperty(instance, name, {
                                enumerable: enumerable,
                                configurable: configurable,
                                get: getter,
                                set: setter
                            });
                        } else if (isMethod || isProperty) {
                            var newFn = isMethod ? applyChain(value, { value: value, method: true }, instance) : applyChain(value, { value: value, property: true }, instance);
                            Object.defineProperty(instance, name, {
                                writable: writable,
                                enumerable: enumerable,
                                configurable: configurable,
                                value: newFn
                            });
                        }
                    };
                    if (isMethod || isProperty) {
                        delete descriptor.value;
                        delete descriptor.writable;
                    }
                    descriptor.get = function () {
                        // Check for direct access on the prototype.
                        // MyClass.prototype.fn <-- This should not apply the decorator.
                        if ((0, _utils.isPrototypeAccess)(this, target)) {
                            return baseValue;
                        }
                        applyDecorator(this);
                        var descriptor = Object.getOwnPropertyDescriptor(this, name);
                        if (descriptor.get) {
                            return descriptor.get.call(this);
                        }
                        return descriptor.value;
                    };
                    descriptor.set = function (value) {
                        applyDecorator(this);
                        var descriptor = Object.getOwnPropertyDescriptor(this, name);
                        if (descriptor.set) {
                            descriptor.set.call(this, value);
                        } else if (isProperty || isMethod) {
                            this[name] = value;
                        }
                    };
                    return descriptor;
                };
                if (optionalParams && _utils.isMethodOrPropertyDecoratorArgs.apply(undefined, args)) {
                    params = [];
                    return decorator(args[0], args[1], args[2]);
                }
                return decorator;
            };
        }
    }, {
        key: '_isApplicable',
        value: function _isApplicable(context, config) {
            return !Boolean(context.getter && !config.getter || context.setter && !config.setter || context.method && !config.method || context.property && !config.property);
        }
    }, {
        key: '_resolveDescriptor',
        value: function _resolveDescriptor(target, name, descriptor) {
            if (descriptor) {
                return descriptor;
            }
            return Object.getOwnPropertyDescriptor(target, name) || {};
        }
    }]);
    return InternalDecoratorFactory;
}();

var DecoratorFactory = exports.DecoratorFactory = new InternalDecoratorFactory();

/***/ }),
/* 1099 */,
/* 1100 */,
/* 1101 */,
/* 1102 */,
/* 1103 */,
/* 1104 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.bind = bind;

var _copyMetaData = __webpack_require__(671);

/**
 * Binds a function and copies metadata.
 * @private
 * @export
 * @param {Function} fn
 * @param {*} context
 * @returns {Function}
 */
function bind(fn, context) {
  return (0, _copyMetaData.copyMetadata)(fn.bind(context), fn);
}

/***/ }),
/* 1105 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CompositeKeyWeakMap = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _isUndefined2 = __webpack_require__(227);

var _isUndefined3 = _interopRequireDefault(_isUndefined2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * A map for weakly holding nested references.
 * @private
 * @export
 * @class CompositeKeyWeakMap
 * @template T
 */
var CompositeKeyWeakMap = exports.CompositeKeyWeakMap = function () {
    function CompositeKeyWeakMap() {
        (0, _classCallCheck3.default)(this, CompositeKeyWeakMap);

        this._weakMap = new WeakMap();
    }

    (0, _createClass3.default)(CompositeKeyWeakMap, [{
        key: 'set',
        value: function set(keys, value) {
            var map = this._weakMap;
            for (var i = 0, len = keys.length - 1; i < len; i++) {
                var key = keys[i];
                var next = map.get(key);
                if (!next) {
                    next = new Map();
                    map.set(key, next);
                }
                map = next;
            }
            map.set(keys[keys.length - 1], value);
        }
    }, {
        key: 'get',
        value: function get(keys) {
            var next = this._weakMap;
            for (var i = 0, len = keys.length; i < len; i++) {
                next = next.get(keys[i]);
                if ((0, _isUndefined3.default)(next)) {
                    break;
                }
            }
            return next;
        }
    }, {
        key: 'has',
        value: function has(keys) {
            return !(0, _isUndefined3.default)(this.get(keys));
        }
    }]);
    return CompositeKeyWeakMap;
}();

/***/ }),
/* 1106 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _isString2 = __webpack_require__(232);

var _isString3 = _interopRequireDefault(_isString2);

var _isFunction2 = __webpack_require__(76);

var _isFunction3 = _interopRequireDefault(_isFunction2);

var _isObject2 = __webpack_require__(75);

var _isObject3 = _interopRequireDefault(_isObject2);

exports.isMethodOrPropertyDecoratorArgs = isMethodOrPropertyDecoratorArgs;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function isMethodOrPropertyDecoratorArgs() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
    }

    return args.length >= 2 && (0, _isObject3.default)(args[0]) && (0, _isString3.default)(args[1]) && (0, _isFunction3.default)(args[0].constructor) && args[0].constructor.prototype === args[0];
}

/***/ }),
/* 1107 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isPrototypeAccess = isPrototypeAccess;
/**
 * 对于
 * ```ts
 * class A {
 *   @Decorate()
 *   aMethod() {
 *
 *   }
 * }
 *
 * class B extends A {}
 * ```
 *
 * 目前认为
 *
 * |access|isPrototypeAccess?|
 * |:----:|:----------------:|
 * | new A().aMethod     | false |
 * | A.prototype.aMethod | true  |
 * | new B().aMethod     | false |
 * | B.prototype.aMethod | false(!) |
 *
 * `B.prototype.aMethod` 返回 `false` 可能不合预期，有需要的话再改进8
 *
 */
function isPrototypeAccess(context, target) {
  return context === target;
}

/***/ }),
/* 1108 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _isString2 = __webpack_require__(232);

var _isString3 = _interopRequireDefault(_isString2);

var _isFunction2 = __webpack_require__(76);

var _isFunction3 = _interopRequireDefault(_isFunction2);

exports.resolveFunction = resolveFunction;

var _log = __webpack_require__(672);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Resolves a function on the current target object. It first will
 * try and resolve on the context object, then the target object,
 * then an error will be thrown if the method can not be resolved.
 * @private
 * @param {Function|string} method The method or method name.
 * @param {Object} [context] The context object to resolve from.
 * @param {Object} [target] The target object to resolve from.
 * @returns {Function} The resolved function.
 */
function resolveFunction(method, context, target) {
    var throwNotFound = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;

    if ((0, _isFunction3.default)(method)) {
        return method;
    } else if ((0, _isString3.default)(method)) {
        if (context && (0, _isFunction3.default)(context[method])) {
            return context[method];
        } else if (target && (0, _isFunction3.default)(target[method])) {
            return target[method];
        }
    }
    if (throwNotFound) {
        throw new ReferenceError((0, _log.log)('Can not resolve method ' + method + ' on any target Objects'));
    }
}

/***/ }),
/* 1109 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.returnAtIndex = returnAtIndex;
/**
 * Creates a function the returns the specific index.
 * @private
 * @export
 * @param {Function} fn
 * @param {number} index
 * @returns {Function}
 */
function returnAtIndex(fn, index) {
    return function () {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        fn.call.apply(fn, [this].concat(args));
        return args[index];
    };
}

/***/ }),
/* 1110 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.wrapConstructor = wrapConstructor;

var _assignAll = __webpack_require__(669);

var PROPERTY_EXCLUDES = ['length', 'name', 'arguments', 'called', 'prototype'];
/**
 * Wraps a constructor in a wrapper function and copies all static properties
 * and methods to the new constructor.
 * @export
 * @param {Function} Ctor
 * @param {(Ctor: Function, ...args: any[]) => any} wrapper
 * @returns {Function}
 */
function wrapConstructor(Ctor, wrapper) {
    function ConstructorWrapper() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return wrapper.call.apply(wrapper, [this, Ctor].concat(args));
    }
    ConstructorWrapper.prototype = Ctor.prototype;
    Object.defineProperty(ConstructorWrapper, 'name', {
        // These values should coincide with the default descriptor values for `name`.
        configurable: true,
        enumerable: false,
        value: Ctor.name,
        writable: false
    });
    return (0, _assignAll.assignAll)(ConstructorWrapper, Ctor, PROPERTY_EXCLUDES);
}

/***/ }),
/* 1111 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/***/ }),
/* 1112 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.BindApplicator = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _Applicator2 = __webpack_require__(118);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var BindApplicator = exports.BindApplicator = function (_Applicator) {
    (0, _inherits3.default)(BindApplicator, _Applicator);

    function BindApplicator() {
        (0, _classCallCheck3.default)(this, BindApplicator);
        return (0, _possibleConstructorReturn3.default)(this, (BindApplicator.__proto__ || Object.getPrototypeOf(BindApplicator)).apply(this, arguments));
    }

    (0, _createClass3.default)(BindApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var value = _ref.value,
                execute = _ref.config.execute,
                args = _ref.args,
                instance = _ref.instance,
                target = _ref.target;

            if (!instance) {
                return value;
            }
            return execute.apply(undefined, [value, instance].concat((0, _toConsumableArray3.default)(args)));
        }
    }]);
    return BindApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1113 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ComposeApplicator = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _identity2 = __webpack_require__(224);

var _identity3 = _interopRequireDefault(_identity2);

var _Applicator2 = __webpack_require__(118);

var _utils = __webpack_require__(208);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ComposeApplicator = exports.ComposeApplicator = function (_Applicator) {
    (0, _inherits3.default)(ComposeApplicator, _Applicator);

    function ComposeApplicator() {
        var _config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

        (0, _classCallCheck3.default)(this, ComposeApplicator);

        var _this = (0, _possibleConstructorReturn3.default)(this, (ComposeApplicator.__proto__ || Object.getPrototypeOf(ComposeApplicator)).call(this));

        _this._config = _config;
        return _this;
    }

    (0, _createClass3.default)(ComposeApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var execute = _ref.config.execute,
                _ref$value = _ref.value,
                value = _ref$value === undefined ? _identity3.default : _ref$value,
                args = _ref.args,
                target = _ref.target;

            var applicator = this;
            return function () {
                var _this2 = this;

                var _args = [].concat((0, _toConsumableArray3.default)(args.map(function (method) {
                    return (0, _utils.resolveFunction)(method, _this2, target);
                })));
                if (applicator.post) {
                    _args.push(value);
                } else {
                    _args.unshift(value);
                }

                for (var _len = arguments.length, invokeArgs = Array(_len), _key = 0; _key < _len; _key++) {
                    invokeArgs[_key] = arguments[_key];
                }

                return execute.apply(undefined, (0, _toConsumableArray3.default)(_args)).apply(this, invokeArgs);
            };
        }
    }, {
        key: 'post',
        get: function get() {
            return this._config.post === true;
        }
    }]);
    return ComposeApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1114 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.InvokeApplicator = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _Applicator2 = __webpack_require__(118);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var InvokeApplicator = exports.InvokeApplicator = function (_Applicator) {
    (0, _inherits3.default)(InvokeApplicator, _Applicator);

    function InvokeApplicator() {
        (0, _classCallCheck3.default)(this, InvokeApplicator);
        return (0, _possibleConstructorReturn3.default)(this, (InvokeApplicator.__proto__ || Object.getPrototypeOf(InvokeApplicator)).apply(this, arguments));
    }

    (0, _createClass3.default)(InvokeApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var args = _ref.args,
                target = _ref.target,
                execute = _ref.config.execute,
                value = _ref.value;

            return function () {
                for (var _len = arguments.length, invokeArgs = Array(_len), _key = 0; _key < _len; _key++) {
                    invokeArgs[_key] = arguments[_key];
                }

                return execute.apply(undefined, [value.bind(this)].concat(invokeArgs, (0, _toConsumableArray3.default)(args)));
            };
        }
    }]);
    return InvokeApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1115 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MemoizeApplicator = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _isObject2 = __webpack_require__(75);

var _isObject3 = _interopRequireDefault(_isObject2);

var _isFunction2 = __webpack_require__(76);

var _isFunction3 = _interopRequireDefault(_isFunction2);

var _Applicator2 = __webpack_require__(118);

var _utils = __webpack_require__(208);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var MemoizeApplicator = exports.MemoizeApplicator = function (_Applicator) {
    (0, _inherits3.default)(MemoizeApplicator, _Applicator);

    function MemoizeApplicator() {
        (0, _classCallCheck3.default)(this, MemoizeApplicator);
        return (0, _possibleConstructorReturn3.default)(this, (MemoizeApplicator.__proto__ || Object.getPrototypeOf(MemoizeApplicator)).apply(this, arguments));
    }

    (0, _createClass3.default)(MemoizeApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var value = _ref.value,
                instance = _ref.instance,
                execute = _ref.config.execute,
                args = _ref.args,
                target = _ref.target;

            var resolver = (0, _utils.resolveFunction)((0, _isFunction3.default)(args[0]) ? args[0] : (0, _isObject3.default)(args[0]) ? args[0].resolver : args[0], instance, target, false);
            if (resolver && instance) {
                resolver = resolver.bind(instance);
            }
            var memoized = resolver ? execute(value, resolver) : execute(value);
            if ((0, _isObject3.default)(args[0])) {
                var _args$ = args[0],
                    cache = _args$.cache,
                    type = _args$.type;

                if (cache) {
                    memoized.cache = cache;
                } else if ((0, _isFunction3.default)(type)) {
                    memoized.cache = new type();
                }
            }
            return memoized;
        }
    }]);
    return MemoizeApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1116 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.PartialApplicator = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _Applicator2 = __webpack_require__(118);

var _utils = __webpack_require__(208);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PartialApplicator = exports.PartialApplicator = function (_Applicator) {
    (0, _inherits3.default)(PartialApplicator, _Applicator);

    function PartialApplicator() {
        (0, _classCallCheck3.default)(this, PartialApplicator);
        return (0, _possibleConstructorReturn3.default)(this, (PartialApplicator.__proto__ || Object.getPrototypeOf(PartialApplicator)).apply(this, arguments));
    }

    (0, _createClass3.default)(PartialApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var args = _ref.args,
                target = _ref.target,
                execute = _ref.config.execute;

            return function () {
                for (var _len = arguments.length, invokeArgs = Array(_len), _key = 0; _key < _len; _key++) {
                    invokeArgs[_key] = arguments[_key];
                }

                return execute.apply(undefined, [(0, _utils.resolveFunction)(args[0], this, target)].concat((0, _toConsumableArray3.default)(args.slice(1)))).apply(this, invokeArgs);
            };
        }
    }]);
    return PartialApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1117 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.PartialedApplicator = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _partial2 = __webpack_require__(1954);

var _partial3 = _interopRequireDefault(_partial2);

var _Applicator2 = __webpack_require__(118);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PartialedApplicator = exports.PartialedApplicator = function (_Applicator) {
    (0, _inherits3.default)(PartialedApplicator, _Applicator);

    function PartialedApplicator() {
        (0, _classCallCheck3.default)(this, PartialedApplicator);
        return (0, _possibleConstructorReturn3.default)(this, (PartialedApplicator.__proto__ || Object.getPrototypeOf(PartialedApplicator)).apply(this, arguments));
    }

    (0, _createClass3.default)(PartialedApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var execute = _ref.config.execute,
                value = _ref.value,
                args = _ref.args;

            return _partial3.default.apply(undefined, [execute, value].concat((0, _toConsumableArray3.default)(args)));
        }
    }]);
    return PartialedApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1118 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.PartialValueApplicator = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _isFunction2 = __webpack_require__(76);

var _isFunction3 = _interopRequireDefault(_isFunction2);

var _Applicator2 = __webpack_require__(118);

var _utils = __webpack_require__(208);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PartialValueApplicator = exports.PartialValueApplicator = function (_Applicator) {
    (0, _inherits3.default)(PartialValueApplicator, _Applicator);

    function PartialValueApplicator() {
        (0, _classCallCheck3.default)(this, PartialValueApplicator);
        return (0, _possibleConstructorReturn3.default)(this, (PartialValueApplicator.__proto__ || Object.getPrototypeOf(PartialValueApplicator)).apply(this, arguments));
    }

    (0, _createClass3.default)(PartialValueApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var args = _ref.args,
                target = _ref.target,
                value = _ref.value,
                execute = _ref.config.execute;

            return function () {
                var fn = value;
                var argIndex = 0;
                if (!(0, _isFunction3.default)(fn)) {
                    fn = (0, _utils.resolveFunction)(args[0], this, target);
                    argIndex = 1;
                }

                for (var _len = arguments.length, invokeArgs = Array(_len), _key = 0; _key < _len; _key++) {
                    invokeArgs[_key] = arguments[_key];
                }

                return execute.apply(undefined, [fn].concat((0, _toConsumableArray3.default)(args.slice(argIndex)))).apply(this, invokeArgs);
            };
        }
    }]);
    return PartialValueApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1119 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.PostValueApplicator = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _Applicator2 = __webpack_require__(118);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PostValueApplicator = exports.PostValueApplicator = function (_Applicator) {
    (0, _inherits3.default)(PostValueApplicator, _Applicator);

    function PostValueApplicator() {
        (0, _classCallCheck3.default)(this, PostValueApplicator);
        return (0, _possibleConstructorReturn3.default)(this, (PostValueApplicator.__proto__ || Object.getPrototypeOf(PostValueApplicator)).apply(this, arguments));
    }

    (0, _createClass3.default)(PostValueApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var _ref$config = _ref.config,
                execute = _ref$config.execute,
                bound = _ref$config.bound,
                args = _ref.args,
                value = _ref.value;

            return execute.apply(undefined, (0, _toConsumableArray3.default)(args).concat([value]));
        }
    }]);
    return PostValueApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1120 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.PreValueApplicator = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _Applicator2 = __webpack_require__(118);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PreValueApplicator = exports.PreValueApplicator = function (_Applicator) {
    (0, _inherits3.default)(PreValueApplicator, _Applicator);

    function PreValueApplicator() {
        (0, _classCallCheck3.default)(this, PreValueApplicator);
        return (0, _possibleConstructorReturn3.default)(this, (PreValueApplicator.__proto__ || Object.getPrototypeOf(PreValueApplicator)).apply(this, arguments));
    }

    (0, _createClass3.default)(PreValueApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var value = _ref.value,
                execute = _ref.config.execute,
                args = _ref.args;

            return execute.apply(undefined, [value].concat((0, _toConsumableArray3.default)(args)));
        }
    }]);
    return PreValueApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1121 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.WrapApplicator = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _Applicator2 = __webpack_require__(118);

var _utils = __webpack_require__(208);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var WrapApplicator = exports.WrapApplicator = function (_Applicator) {
    (0, _inherits3.default)(WrapApplicator, _Applicator);

    function WrapApplicator() {
        (0, _classCallCheck3.default)(this, WrapApplicator);
        return (0, _possibleConstructorReturn3.default)(this, (WrapApplicator.__proto__ || Object.getPrototypeOf(WrapApplicator)).apply(this, arguments));
    }

    (0, _createClass3.default)(WrapApplicator, [{
        key: 'apply',
        value: function apply(_ref) {
            var args = _ref.args,
                execute = _ref.config.execute,
                target = _ref.target,
                value = _ref.value;

            return function () {
                for (var _len = arguments.length, invokeArgs = Array(_len), _key = 0; _key < _len; _key++) {
                    invokeArgs[_key] = arguments[_key];
                }

                return execute((0, _utils.resolveFunction)(args[0], this, target), value).apply(this, invokeArgs);
            };
        }
    }]);
    return WrapApplicator;
}(_Applicator2.Applicator);

/***/ }),
/* 1122 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.debounce = undefined;

var _debounce2 = __webpack_require__(226);

var _debounce3 = _interopRequireDefault(_debounce2);

exports.Debounce = Debounce;

var _factory = __webpack_require__(527);

var _applicators = __webpack_require__(673);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var decorator = _factory.DecoratorFactory.createInstanceDecorator(new _factory.DecoratorConfig(_debounce3.default, new _applicators.PreValueApplicator(), { setter: true }));
function Debounce(wait, options) {
    return decorator(wait, options);
}
exports.debounce = Debounce;
exports.default = decorator;

/***/ }),
/* 1123 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _isFunction2 = __webpack_require__(76);

var _isFunction3 = _interopRequireDefault(_isFunction2);

var _throttle2 = __webpack_require__(237);

var _throttle3 = _interopRequireDefault(_throttle2);

exports.Throttle = Throttle;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * lodash throttle 装饰器
 * @param wait 节流时间，毫秒
 * @param options lodash throttle 参数
 * @param options.leading 是否在周期开始时触发
 * @param options.trailing 是否在周期结束时触发
 */
function Throttle() {
    var wait = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    return function (target, name, descriptor) {
        var method = descriptor.value;

        if (!(0, _isFunction3.default)(method)) {
            return descriptor;
        }
        return Object.assign({}, descriptor, {
            value: (0, _throttle3.default)(method, wait, options)
        });
    };
}
exports.default = Throttle;

/***/ }),
/* 1124 */,
/* 1125 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _slicedToArray2 = __webpack_require__(111);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createExposedPromise() {
  var deferred = {};
  var promise = new Promise(function (resolve, reject) {
    deferred.resolve = resolve;
    deferred.reject = reject;
  });
  return [promise, deferred];
};

exports.default = function (store) {
  return function (next) {
    return function (action) {
      if (!action[_common.DEFERRED] && !action[_common.REQUEST]) {
        return next(action);
      }

      var _createExposedPromise = createExposedPromise(),
          _createExposedPromise2 = (0, _slicedToArray3.default)(_createExposedPromise, 2),
          promise = _createExposedPromise2[0],
          deferred = _createExposedPromise2[1];

      next(Object.assign({}, action, (0, _defineProperty3.default)({}, _common.DEFERRED, deferred)));
      return promise;
    };
  };
};

/***/ }),
/* 1126 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = promiseMiddleware;

var _isError = __webpack_require__(808);

var _isError2 = _interopRequireDefault(_isError);

var _object = __webpack_require__(462);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function promiseMiddleware(_ref) {
  var dispatch = _ref.dispatch;

  return function (next) {
    return function (action) {
      if (!action.payload || !(0, _object.isPromiseLike)(action.payload)) {
        return next(action);
      }

      var handleError = function handleError(payload) {
        if (payload.code === _$constants.error.STATUS_CODE.LOGIN_REQUIRED) {
          window.location.reload();
        }
        var newAction = Object.assign({}, action, {
          type: action.type + '_FAIL',
          payload: payload
        });
        dispatch(newAction);
        dispatch(Object.assign({}, newAction, {
          type: action.type + '_FINISH'
        }));
      };

      next(Object.assign({}, action, {
        type: action.type + '_START'
      }));

      return action.payload.then(
      // code一旦存在, 则代表出现错误
      // 具体逻辑详见: apis/config.js
      function (payload) {
        if (payload.code && payload.code !== _$constants.error.STATUS_CODE.SUCCESS) {
          handleError(payload);
          return;
        }
        var newAction = Object.assign({}, action, {
          payload: payload,
          type: action.type + '_SUCCESS'
        });
        dispatch(newAction);
        dispatch(Object.assign({}, newAction, {
          type: action.type + '_FINISH'
        }));
        return payload;
      }, function (error) {
        var _error$response = error.response,
            status = _error$response.status,
            statusText = _error$response.statusText;

        var newAction = Object.assign({}, action, {
          type: action.type + '_FAIL',
          payload: { code: status, msg: statusText }
        });
        if ((0, _isError2.default)(error)) {
          newAction.severError = true;
        }
        dispatch(newAction);
        dispatch(Object.assign({}, newAction, {
          type: action.type + '_FINISH'
        }));
      });
    };
  };
}

/***/ }),
/* 1127 */,
/* 1128 */,
/* 1129 */,
/* 1130 */,
/* 1131 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _modal = __webpack_require__(588);

var _modal2 = _interopRequireDefault(_modal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var dialogMiddleware = function dialogMiddleware(store) {
  return function (next) {
    return function (action) {
      if (action.payload && action.payload.confirm) {
        var _action$payload$confi = action.payload.confirm,
            title = _action$payload$confi.title,
            body = _action$payload$confi.body,
            confirmText = _action$payload$confi.confirmText,
            cancelText = _action$payload$confi.cancelText,
            onConfirm = _action$payload$confi.onConfirm,
            onCancel = _action$payload$confi.onCancel;

        _modal2.default.show({
          title: title,
          body: body,
          confirmText: confirmText,
          cancelText: cancelText,
          onConfirm: onConfirm,
          onCancel: onCancel
        });
      } else {
        next(action);
      }
    };
  };
};

exports.default = dialogMiddleware;

/***/ }),
/* 1132 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _toastHelper = __webpack_require__(301);

var _$constants = __webpack_require__(5);

// @TODO: cancel -> operation 更抽象，适用于多种情况.

// import Toast from '$components/toast';
var toastMiddleware = function toastMiddleware(store) {
  return function (next) {
    return function (action) {
      if (action.type === _$constants.actionTypes.toast.TOAST_SHOW) {
        var _action$toastConfig = action.toastConfig,
            key = _action$toastConfig.key,
            type = _action$toastConfig.type,
            content = _action$toastConfig.content,
            duration = _action$toastConfig.duration,
            closable = _action$toastConfig.closable,
            onClose = _action$toastConfig.onClose,
            cancelable = _action$toastConfig.cancelable,
            cancelText = _action$toastConfig.cancelText,
            onCancel = _action$toastConfig.onCancel;
        // web toast
        // Toast.show({
        //   key,
        //   type,
        //   content,
        //   duration,
        //   closable,
        //   onClose,
        //   cancelable,
        //   cancelText,
        //   onCancel,
        // });

        // 移动端优先使用客户端toast

        (0, _toastHelper.showToast)({
          key: key,
          type: [_$constants.common.TOAST_TYPE.success, _$constants.common.TOAST_TYPE.error].indexOf(type),
          message: content,
          duration: (duration || 1000) / 1000,
          closable: closable,
          onClose: onClose,
          cancelable: cancelable,
          cancelText: cancelText,
          onCancel: onCancel
        });
      } else if (action.type === _$constants.actionTypes.toast.TOAST_CLOSE) {
        var _key = action.toastConfig.key;
        // Toast.remove(key);

        (0, _toastHelper.hideToast)(false, _key);
      }
      next(action);
    };
  };
};

exports.default = toastMiddleware;

/***/ }),
/* 1133 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__(127);

var _classnames2 = _interopRequireDefault(_classnames);

var _reactMotion = __webpack_require__(658);

var _createChainedFunction = __webpack_require__(660);

var _createChainedFunction2 = _interopRequireDefault(_createChainedFunction);

var _toast = __webpack_require__(1134);

var _toast2 = _interopRequireDefault(_toast);

__webpack_require__(1136);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var seed = 0;
var springConfig = { stiffness: 250, damping: 20, precision: 0.5 };
var willEnter = function willEnter() {
    return { y: -100 };
};
var willLeave = function willLeave() {
    return { y: (0, _reactMotion.spring)(-100, springConfig) };
};
function generateKey() {
    return 'toast_' + Date.now() + '_' + seed++;
}

var ToastWrap = function (_PureComponent) {
    (0, _inherits3.default)(ToastWrap, _PureComponent);

    function ToastWrap() {
        (0, _classCallCheck3.default)(this, ToastWrap);

        var _this = (0, _possibleConstructorReturn3.default)(this, (ToastWrap.__proto__ || Object.getPrototypeOf(ToastWrap)).apply(this, arguments));

        _this.state = {
            toasts: []
        };
        _this.remove = function (key) {
            _this.setState(function (prevState) {
                return {
                    toasts: prevState.toasts.filter(function (toast) {
                        return toast.key !== key;
                    })
                };
            });
        };
        _this.removeAll = function () {
            _this.setState({
                toasts: []
            });
        };
        return _this;
    }

    (0, _createClass3.default)(ToastWrap, [{
        key: 'show',
        value: function show(toast) {
            var key = toast.key = toast.key || generateKey();
            this.setState(function (prevState) {
                return {
                    toasts: prevState.toasts.filter(function (item) {
                        return item.key !== key;
                    }).concat(toast)
                };
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this2 = this;

            var styles = this.state.toasts.map(function (toast) {
                return {
                    key: toast.key,
                    style: { y: (0, _reactMotion.spring)(0, springConfig) },
                    data: toast
                };
            });
            return _react2.default.createElement(_reactMotion.TransitionMotion, { styles: styles, willEnter: willEnter, willLeave: willLeave }, function (styles) {
                return _react2.default.createElement("div", Object.assign({}, _this2.props, { className: (0, _classnames2.default)('toast-wrap', _this2.props.className) }), styles.map(function (_ref) {
                    var y = _ref.style.y,
                        toast = _ref.data;
                    return toast && _react2.default.createElement(_toast2.default, Object.assign({}, toast, { style: Object.assign({}, toast.style, { transform: 'translateY(' + y + '%)', opacity: 1 + y / 100 }), onClose: (0, _createChainedFunction2.default)(toast.onClose, function () {
                            return _this2.remove(toast.key);
                        }) }), toast.content);
                }));
            });
        }
    }]);
    return ToastWrap;
}(_react.PureComponent);

exports.default = ToastWrap;

/***/ }),
/* 1134 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _classnames = __webpack_require__(127);

var _classnames2 = _interopRequireDefault(_classnames);

__webpack_require__(1135);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Toast = function (_PureComponent) {
    (0, _inherits3.default)(Toast, _PureComponent);

    function Toast() {
        (0, _classCallCheck3.default)(this, Toast);

        var _this = (0, _possibleConstructorReturn3.default)(this, (Toast.__proto__ || Object.getPrototypeOf(Toast)).apply(this, arguments));

        _this.close = function () {
            _this.clearCloseTimer();
            _this.props.onClose && _this.props.onClose();
        };
        return _this;
    }

    (0, _createClass3.default)(Toast, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            if (this.props.duration) {
                this.closeTimer = window.setTimeout(this.close, this.props.duration);
            }
        }
    }, {
        key: 'componentWillReceiveProps',
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.duration !== this.props.duration) {
                this.clearCloseTimer();
                if (nextProps.duration) {
                    this.closeTimer = window.setTimeout(this.close, nextProps.duration);
                }
            }
        }
    }, {
        key: 'componentDidUpdate',
        value: function componentDidUpdate() {
            if (!this.closeTimer && this.props.duration) {
                this.closeTimer = window.setTimeout(this.close, this.props.duration);
            }
        }
    }, {
        key: 'componentWillUnmount',
        value: function componentWillUnmount() {
            this.clearCloseTimer();
        }
    }, {
        key: 'clearCloseTimer',
        value: function clearCloseTimer() {
            if (this.closeTimer) {
                clearTimeout(this.closeTimer);
                this.closeTimer = null;
            }
        }
    }, {
        key: 'render',
        value: function render() {
            var props = this.props;
            var type = props.type;

            var toastClass = (0, _classnames2.default)(props.className, 'layout-row layout-cross-center toast', 'toast_' + type);
            return _react2.default.createElement("div", { className: toastClass, style: props.style }, _react2.default.createElement("span", { className: (0, _classnames2.default)('toast__icon', 'svg-icon_' + type) }), _react2.default.createElement("span", { className: "toast__content flex", style: { msFlex: '0 0 auto' } }, props.children), props.cancelable && _react2.default.createElement("span", { className: "toast__cancel", onClick: props.onCancel }, props.cancelText || t('common.undo')), props.closable && _react2.default.createElement("span", { className: "toast__close", onClick: this.close }));
        }
    }]);
    return Toast;
}(_react.PureComponent);

Toast.defaultProps = {
    closable: false,
    duration: 3000
};
exports.default = Toast;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1135 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 1136 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 1137 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _toast = __webpack_require__(809);

var _toast2 = _interopRequireDefault(_toast);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// @TODO: cancel -> operation 更抽象，适用于多种情况.

var toastMobileMiddleware = function toastMobileMiddleware(store) {
  return function (next) {
    return function (action) {
      if (action.type === _$constants.actionTypes.toastMobile.TOAST_MOBILE_SHOW) {
        var _action$toastConfig = action.toastConfig,
            content = _action$toastConfig.content,
            duration = _action$toastConfig.duration,
            onClose = _action$toastConfig.onClose,
            mask = _action$toastConfig.mask;

        _toast2.default.info(content, duration, onClose, mask);
      }
      next(action);
    };
  };
};

exports.default = toastMobileMiddleware;

/***/ }),
/* 1138 */,
/* 1139 */,
/* 1140 */,
/* 1141 */,
/* 1142 */,
/* 1143 */,
/* 1144 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = locationChangeMiddleware;

var _$constants = __webpack_require__(5);

var _global = __webpack_require__(473);

/**
 * 给locationchange这个action的payload中注入是否path变化的判定结果
 */
function locationChangeMiddleware(_ref) {
  var dispatch = _ref.dispatch;

  return function (next) {
    return function (action) {
      if (action.type !== _$constants.actionTypes.route.LOCATION_CHANGE) return next(action);
      var globalVaribale = (0, _global.getGlobalVar)();
      var previousPathname = globalVaribale.previousLocation ? globalVaribale.previousLocation.pathname : null;
      var isPathChanged = previousPathname !== action.payload.pathname;
      var newPayload = Object.assign({}, action.payload, { isPathChanged: isPathChanged });
      var newAction = Object.assign({}, action, { payload: newPayload });
      globalVaribale.previousLocation = action.payload;
      return next(newAction);
    };
  };
}

/***/ }),
/* 1145 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = swallowRequestAction;

var _common = __webpack_require__(19);

function swallowRequestAction(_ref) {
  var dispatch = _ref.dispatch;

  return function (next) {
    return function (action) {
      if (!action[_common.REQUEST]) {
        return next(action);
      }
    };
  };
};

/***/ }),
/* 1146 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _$constants = __webpack_require__(5);

function predicator(action) {
    return action.type === _$constants.actionTypes.intermediate.FETCH_PAGED_DATA;
}

exports.default = function (store) {
    return function (next) {
        return function (action) {
            if (!predicator(action)) {
                next(action);
            }
        };
    };
};

/***/ }),
/* 1147 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = rootSaga;

var _sagaHelper = __webpack_require__(333);

var _raven = __webpack_require__(389);

var _suite = __webpack_require__(1148);

var _suite2 = _interopRequireDefault(_suite);

var _toast = __webpack_require__(1176);

var _toast2 = _interopRequireDefault(_toast);

var _explorer = __webpack_require__(1179);

var _explorer2 = _interopRequireDefault(_explorer);

var _log = __webpack_require__(1307);

var _log2 = _interopRequireDefault(_log);

var _request = __webpack_require__(687);

var _request2 = _interopRequireDefault(_request);

var _share = __webpack_require__(1309);

var _share2 = _interopRequireDefault(_share);

var _comment = __webpack_require__(1322);

var _comment2 = _interopRequireDefault(_comment);

var _title = __webpack_require__(1332);

var _title2 = _interopRequireDefault(_title);

var _sidebar = __webpack_require__(1335);

var _sidebar2 = _interopRequireDefault(_sidebar);

var _history = __webpack_require__(1337);

var _history2 = _interopRequireDefault(_history);

var _update = __webpack_require__(1341);

var _update2 = _interopRequireDefault(_update);

var _openSuiteFromFolder = __webpack_require__(1343);

var _openSuiteFromFolder2 = _interopRequireDefault(_openSuiteFromFolder);

var _fetchPagedData = __webpack_require__(1344);

var _fetchPagedData2 = _interopRequireDefault(_fetchPagedData);

var _onboarding = __webpack_require__(1345);

var _onboarding2 = _interopRequireDefault(_onboarding);

var _translate = __webpack_require__(1364);

var _translate2 = _interopRequireDefault(_translate);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(rootSaga);
// import uiControlSaga from './ui-control';


function rootSaga() {
    var sagas = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [_toast2.default, _share2.default, _explorer2.default, _log2.default, _request2.default, _suite2.default, _title2.default, _comment2.default, _sidebar2.default, _update2.default, _history2.default,
    // uiControlSaga,
    _onboarding2.default, _openSuiteFromFolder2.default, _fetchPagedData2.default, _translate2.default];
    return _regenerator2.default.wrap(function rootSaga$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _sagaHelper.autoResume)(sagas, _raven.captureException);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}

/***/ }),
/* 1148 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = suiteSaga;

var _effects = __webpack_require__(17);

var _fetchCurrentSuite = __webpack_require__(1149);

var _copySuite = __webpack_require__(1151);

var _updateSuiteExternal = __webpack_require__(1175);

var _updateSuiteExternal2 = _interopRequireDefault(_updateSuiteExternal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(suiteSaga);

function suiteSaga() {
    return _regenerator2.default.wrap(function suiteSaga$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(_fetchCurrentSuite.fetchCurrentSuiteSuccessWatcher), (0, _effects.fork)(_fetchCurrentSuite.fetchCurrentSuiteFailedWatcher), (0, _effects.fork)(_copySuite.copySuiteSuccessWatcher), (0, _effects.fork)(_updateSuiteExternal2.default)]);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}

/***/ }),
/* 1149 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.fetchCurrentSuiteSuccessWatcher = fetchCurrentSuiteSuccessWatcher;
exports.fetchCurrentSuiteFailedWatcher = fetchCurrentSuiteFailedWatcher;

var _reduxSaga = __webpack_require__(240);

var _effects = __webpack_require__(17);

var _constants = __webpack_require__(5);

var _teaHelper = __webpack_require__(165);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchCurrentSuiteSuccessWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchCurrentSuiteSuccessSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(fetchCurrentSuiteFailedWatcher),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(fetchCurrentSuiteFailedSaga);

function fetchCurrentSuiteSuccessWatcher() {
    return _regenerator2.default.wrap(function fetchCurrentSuiteSuccessWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeLatest)(_constants.actionTypes.suite.FETCH_CURRENT_SUITE_SUCCESS, fetchCurrentSuiteSuccessSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchCurrentSuiteSuccessSaga(action) {
    return _regenerator2.default.wrap(function fetchCurrentSuiteSuccessSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    (0, _teaHelper.setTeaMapCreateInfo)(action.payload);
                    _context2.next = 3;
                    return (0, _effects.call)(_reduxSaga.delay, 1000);

                case 3:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function fetchCurrentSuiteFailedWatcher() {
    return _regenerator2.default.wrap(function fetchCurrentSuiteFailedWatcher$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.takeLatest)(_constants.actionTypes.suite.FETCH_CURRENT_SUITE_FAIL, fetchCurrentSuiteFailedSaga);

                case 2:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function fetchCurrentSuiteFailedSaga() {
    return _regenerator2.default.wrap(function fetchCurrentSuiteFailedSaga$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    _context4.next = 2;
                    return (0, _effects.call)(_reduxSaga.delay, 1000);

                case 2:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}

/***/ }),
/* 1150 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setNetworkState = undefined;

var _$constants = __webpack_require__(5);

/**
 * 设置网络状态
 */
var setNetworkState = exports.setNetworkState = function setNetworkState(data) {
    return {
        type: _$constants.actionTypes.network.SET_NETWORK_STATE,
        payload: {
            data: data
        }
    };
};

/***/ }),
/* 1151 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.copySuiteSuccessWatcher = copySuiteSuccessWatcher;

var _effects = __webpack_require__(17);

var _constants = __webpack_require__(5);

var _routeHelper = __webpack_require__(67);

var _explorer = __webpack_require__(48);

var _explorer2 = __webpack_require__(56);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(copySuiteSuccessWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(copySuccessSaga);

function copySuiteSuccessWatcher() {
    return _regenerator2.default.wrap(function copySuiteSuccessWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeLatest)(_constants.actionTypes.suite.COPY_SUITE_SUCCESS, copySuccessSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function copySuccessSaga(action) {
    var parentToken, state, currentFileToken, shouldRefreshCurrent, locateRouteResult, currentRoute, type, isRoot;
    return _regenerator2.default.wrap(function copySuccessSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    parentToken = action.payload.parentToken;
                    _context2.next = 3;
                    return (0, _effects.select)();

                case 3:
                    state = _context2.sent;
                    currentFileToken = (0, _explorer.selectCurrentFileToken)(state);
                    shouldRefreshCurrent = parentToken === currentFileToken;
                    locateRouteResult = (0, _routeHelper.locateRoute)();
                    currentRoute = Object.keys(locateRouteResult).find(function (key) {
                        return locateRouteResult[key] === true;
                    });
                    type = _$constants.common.ROOT_GET_TYPE_MAP[currentRoute];
                    isRoot = locateRouteResult.isExplorer;

                    if (shouldRefreshCurrent) {
                        _context2.next = 12;
                        break;
                    }

                    return _context2.abrupt('return');

                case 12:
                    if (!isRoot) {
                        _context2.next = 17;
                        break;
                    }

                    _context2.next = 15;
                    return (0, _effects.put)((0, _explorer2.fetchRootMeta)(type));

                case 15:
                    _context2.next = 19;
                    break;

                case 17:
                    _context2.next = 19;
                    return (0, _effects.put)((0, _explorer2.fetchFileMeta)(currentFileToken, 1));

                case 19:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}

/***/ }),
/* 1152 */,
/* 1153 */,
/* 1154 */,
/* 1155 */,
/* 1156 */,
/* 1157 */,
/* 1158 */,
/* 1159 */,
/* 1160 */,
/* 1161 */,
/* 1162 */,
/* 1163 */,
/* 1164 */,
/* 1165 */,
/* 1166 */,
/* 1167 */,
/* 1168 */,
/* 1169 */,
/* 1170 */,
/* 1171 */,
/* 1172 */,
/* 1173 */,
/* 1174 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Divider = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _get2 = __webpack_require__(349);

var _get3 = _interopRequireDefault(_get2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _immutable = __webpack_require__(31);

var _baseProps = __webpack_require__(532);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Divider = exports.Divider = function (_Record) {
    (0, _inherits3.default)(Divider, _Record);

    function Divider(params) {
        var _this, _this;

        (0, _classCallCheck3.default)(this, Divider);

        params ? (_this = (0, _possibleConstructorReturn3.default)(this, (Divider.__proto__ || Object.getPrototypeOf(Divider)).call(this, params)), _this) : (_this = (0, _possibleConstructorReturn3.default)(this, (Divider.__proto__ || Object.getPrototypeOf(Divider)).call(this)), _this);
        return (0, _possibleConstructorReturn3.default)(_this);
    }

    (0, _createClass3.default)(Divider, [{
        key: 'get',
        value: function get(value) {
            return (0, _get3.default)(Divider.prototype.__proto__ || Object.getPrototypeOf(Divider.prototype), 'get', this).call(this, value);
        }
    }]);
    return Divider;
}((0, _immutable.Record)(_baseProps.divider, 'Divider: List view divider'));

/***/ }),
/* 1175 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _constants = __webpack_require__(5);

var _suite = __webpack_require__(223);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(updateSuiteExternalWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(updateSuiteExternal);

function updateSuiteExternalWatcher() {
    return _regenerator2.default.wrap(function updateSuiteExternalWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeLatest)(_constants.actionTypes.suite.UPDATE_SUITE_EXTERNAL_START, updateSuiteExternal);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function updateSuiteExternal(action) {
    var payload, objToken, objType;
    return _regenerator2.default.wrap(function updateSuiteExternal$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    payload = action.payload;
                    objToken = payload.objToken, objType = payload.objType;
                    _context2.next = 4;
                    return _effects.put.resolve((0, _suite.fetchCurrentSuite)(objToken, objType));

                case 4:
                    _context2.next = 6;
                    return (0, _effects.put)({
                        type: _constants.actionTypes.suite.UPDATE_SUITE_EXTERNAL_SUCCESS
                    });

                case 6:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = updateSuiteExternalWatcher;

/***/ }),
/* 1176 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _toast = __webpack_require__(1177);

var _toast2 = _interopRequireDefault(_toast);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _toast2.default;

/***/ }),
/* 1177 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _toast = __webpack_require__(685);

var _actionHelper = __webpack_require__(531);

var _toastConfigMap = __webpack_require__(1178);

var _toastConfigMap2 = _interopRequireDefault(_toastConfigMap);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(toastWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(toastShowSaga);

function toastWatcher() {
    return _regenerator2.default.wrap(function toastWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_actionHelper.isSuccessAction, _actionHelper.isFailAction], toastShowSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function getToastType(action) {
    if ((0, _actionHelper.isSuccessAction)(action)) {
        return { type: _$constants.common.TOAST_TYPE.success };
    }
    if ((0, _actionHelper.isFailAction)(action)) {
        return { type: _$constants.common.TOAST_TYPE.error };
    }
    return null;
}
function getShouldShowToast(action) {
    return typeof _toastConfigMap2.default[action.type] !== 'undefined';
}
function toastShowSaga(action) {
    var config, typeConfig;
    return _regenerator2.default.wrap(function toastShowSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    if (getShouldShowToast(action)) {
                        _context2.next = 2;
                        break;
                    }

                    return _context2.abrupt('return');

                case 2:
                    config = _toastConfigMap2.default[action.type](action);

                    if (config) {
                        _context2.next = 5;
                        break;
                    }

                    return _context2.abrupt('return');

                case 5:
                    typeConfig = getToastType(action);
                    _context2.next = 8;
                    return (0, _effects.put)((0, _toast.showToast)(Object.assign({}, typeConfig, config)));

                case 8:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = toastWatcher;

/***/ }),
/* 1178 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _toastConfigMap;

var _$constants = __webpack_require__(5);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _userHelper = __webpack_require__(65);

var _networkStateHelper = __webpack_require__(129);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var MEMBER_UNSUPPORT_TOBE_INVITED_CODE = 870601;
var toastConfigMap = (_toastConfigMap = {}, (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.FETCH_ROOT_META_FAIL, function (action) {
    if (_browserHelper2.default.isMobile) return;
    return {
        content: t('explorer.fetch_file_fail')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.DISMISS_SHARE_FOLDER_FAIL, function (action) {
    return {
        content: t('permission.share_folder_dismiss_failed')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.CREATE_FILE_FAIL, function (action) {
    return {
        content: t('common.create_failed')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.CREATE_SHARE_FOLDER_FAIL, function (action) {
    return {
        content: t('explorer.create_share_folder_failed')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.RENAME_FILE_FAIL, function (action) {
    return {
        content: t('explorer.rename_failed')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.RESTORE_REMOVED_FILE_SUCCESS, function (action) {
    return {
        content: t('explorer.restored')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.RESTORE_REMOVED_FILE_FAIL, function (action) {
    return {
        content: t('explorer.restore_failed_retry')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_SUCCESS, function (action) {
    return {
        content: t('permission.invite_member_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.SET_SUITE_PUBLIC_PERMISSION_SUCCESS, function (action) {
    return {
        content: t('permission.set_public_permission_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.SET_SUITE_PUBLIC_PERMISSION_FAIL, function (action) {
    return {
        content: t('permission.set_public_permission_fail')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.SEND_SUITE_PERMISSION_REQUEST_SUCCESS, function (action) {
    return {
        content: t('permission.send_apply_permission_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.SEND_SUITE_PERMISSION_REQUEST_FAIL, function (action) {
    var deviceType = action.payload.deviceType;

    if (deviceType === 'mobile' && action.error.code === _$constants.error.STATUS_CODE.CONNECT_ERROR) {
        return {
            content: t('permission.network_error')
        };
    } else {
        return {
            content: t('permission.send_apply_permission_fail')
        };
    }
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_FAIL, function (action) {
    var shouldNotShowToastCodes = [_$constants.error.STATUS_CODE.FORBIDDEN, _$constants.error.STATUS_CODE.INVALID_PARAMETERS, _$constants.error.STATUS_CODE.NOT_FOUND];
    var shouldNotShowToast = !(0, _networkStateHelper.isOnLine)() || shouldNotShowToastCodes.some(function (val) {
        return val === action.error.code;
    });
    if (shouldNotShowToast) return;
    return { content: t('permission.fetch_share_data_failed') };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.SET_USER_PERMISSION_SUCCESS, function (action) {
    return {
        content: t('permission.set_user_permission_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.SET_USER_PERMISSION_FAIL, function (action) {
    return {
        content: t('permission.set_user_permission_fail')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.BULK_SET_PERM_SUCCESS, function (action) {
    return {
        content: t('permission.invite_member_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.BULK_SET_PERM_FAIL, function (action) {
    return {
        content: t('permission.invite_member_fail')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.FETCH_FILE_META_FAIL, function (action) {
    var ActionError = action.error;

    if (ActionError && ActionError.code === _$constants.error.STATUS_CODE.FORBIDDEN) {
        return;
    }
    return {
        content: action.error.msg
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.MOVE_FILE_SUCCESS, function (action) {
    var isInNav = action.payload.isInNav;

    if (!isInNav) return;
    return {
        content: t('explorer.move_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.MOVE_FILE_FAIL, function (action) {
    return {
        content: action.error.msg
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.COPY_SHARE_FILES_TO_PERSONAL_FOLDER_FAIL, function (action) {
    return {
        content: action.error.msg
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_FAIL, function (action) {
    var error = action.error;
    var code = error.code,
        msg = error.msg;

    if (code === MEMBER_UNSUPPORT_TOBE_INVITED_CODE) {
        var isCurrentUserToCuser = (0, _userHelper.getIsCurrentUserToCuser)();
        return {
            content: isCurrentUserToCuser ? t('permission.can_not_invite_ enterprise_users') : t('permission.can_not_invite_external_users')
        };
    }
    return {
        content: msg
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.CREATE_FILE_SUCCESS, function (action) {
    var type = action.payload.type;

    return type === _$constants.common.NUM_FILE_TYPE.FOLDER ? { content: t('explorer.create_success') } : undefined;
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.RESTORE_REMOVED_FILE_SUCCESS, function (action) {
    var _action$payload = action.payload,
        token = _action$payload.token,
        success_tokens = _action$payload.success_tokens;

    var isMulti = token.length > 1;
    var successAmount = success_tokens.length;
    return {
        content: isMulti ? successAmount + ' ' + t('explorer.n_item_been_restored') : t('explorer.restored')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.suite.FETCH_TOKEN_INFO_SUCCESS, function (action) {
    // 这个接口在移动端使用 Native 的 toast
    if (_browserHelper2.default.isMobile) return;
    var items = action.payload.items;

    if (items.length === 0) {
        return {
            type: _$constants.common.TOAST_TYPE.error,
            content: t('explorer.get_token_info_failed')
        };
    }
    return;
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.suite.COPY_FILE_BY_OBJTK_SUCCESS, function (action) {
    return {
        content: t('common.add_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.suite.COPY_FILE_BY_OBJTK_FAIL, function (action) {
    return {
        content: action.error.msg
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.COPY_SHARE_FILES_TO_PERSONAL_FOLDER_SUCCESS, function (action) {
    var _action$payload2 = action.payload,
        srcToken = _action$payload2.srcToken,
        success_tokens = _action$payload2.success_tokens,
        cancelable = _action$payload2.cancelable;

    if (cancelable) return;
    var isMulti = srcToken.length > 1;
    var successAmount = success_tokens.length;
    return {
        content: isMulti ? t('explorer.add_success') + ' ' + successAmount + ' ' + t('explorer.item') : t('common.add_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.DISMISS_SHARE_FOLDER_SUCCESS, function (action) {
    var _action$payload3 = action.payload,
        token = _action$payload3.token,
        success_tokens = _action$payload3.success_tokens;

    var isMulti = token.length > 1;
    // 兼容式写法，防止后端接口没有返回
    var isValidSuccessTokens = Array.isArray(success_tokens);
    return {
        content: isMulti && isValidSuccessTokens ? success_tokens.length + ' ' + t('explorer.n_shared_folder_been_dismissed') : t('explorer.dismiss_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.ADD_STAR_SUCCESS, function (action) {
    return {
        content: t('explorer.home.add_star_success_message')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.ADD_STAR_FAIL, function (action) {
    var code = action.error.code;
    // check it at ERROR_CODE_MAP in constants/error.ts

    if (code !== 4002) {
        return;
    }
    return { content: t('explorer.already_stared') };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.REMOVE_STAR_SUCCESS, function (action) {
    return {
        content: t('explorer.home.remove_star_success_message')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.ADD_PIN_SUCCESS, function (action) {
    return {
        content: t('explorer.home.add_pin_success_message')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.ADD_PIN_FAIL, function (action) {
    var code = action.error.code;

    if (code === 4002) {
        return { content: t('explore.already_pined') };
    }
    if (code === 4001) {
        return { content: t('explore.pin.out_of_limit') };
    }
    return;
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.explorer.REMOVE_PIN_SUCCESS, function (action) {
    return {
        content: t('explorer.home.remove_pin_success_message')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.comment.globalComment.SET_MOBILE_OFELINE_COMMENT_FAIL, function (action) {
    return {
        type: _$constants.common.TOAST_TYPE.error,
        content: t('common.operate_fail_and_try_again'),
        duration: 2000
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.SEND_FOLDER_PERMISSION_REQUEST_SUCCESS, function (action) {
    return {
        content: t('permission.send_apply_permission_success')
    };
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.SEND_FOLDER_PERMISSION_REQUEST_FAIL, function (action) {
    var deviceType = action.payload.deviceType;

    if (deviceType === 'mobile' && action.error.code === _$constants.error.STATUS_CODE.CONNECT_ERROR) {
        return {
            content: t('permission.network_error')
        };
    } else {
        return {
            content: t('permission.send_apply_permission_fail')
        };
    }
}), (0, _defineProperty3.default)(_toastConfigMap, _$constants.actionTypes.permission.COPY_TEXT_FAIL, function (action) {
    return {
        content: t('permission.copy_fail_without_permission')
    };
}), _toastConfigMap);
exports.default = toastConfigMap;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1179 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _fetchFileMeta = __webpack_require__(1180);

var _fetchFileMeta2 = _interopRequireDefault(_fetchFileMeta);

var _fetchRootMeta = __webpack_require__(1188);

var _fetchRootMeta2 = _interopRequireDefault(_fetchRootMeta);

var _fetchShareHome = __webpack_require__(1275);

var _fetchShareHome2 = _interopRequireDefault(_fetchShareHome);

var _removeFile = __webpack_require__(1276);

var _removeFile2 = _interopRequireDefault(_removeFile);

var _deleteRemovedFile = __webpack_require__(1277);

var _deleteRemovedFile2 = _interopRequireDefault(_deleteRemovedFile);

var _fetchFiles = __webpack_require__(1278);

var _fetchFiles2 = _interopRequireDefault(_fetchFiles);

var _createShareFolder = __webpack_require__(1279);

var _createShareFolder2 = _interopRequireDefault(_createShareFolder);

var _fetchExplorerFolderList = __webpack_require__(1295);

var _fetchExplorerFolderList2 = _interopRequireDefault(_fetchExplorerFolderList);

var _fetchSelectedFileData = __webpack_require__(1296);

var _fetchSelectedFileData2 = _interopRequireDefault(_fetchSelectedFileData);

var _setSelectedFileMetas = __webpack_require__(1297);

var _setSelectedFileMetas2 = _interopRequireDefault(_setSelectedFileMetas);

var _moveFile = __webpack_require__(1298);

var _moveFile2 = _interopRequireDefault(_moveFile);

var _afterRemoveFile = __webpack_require__(1299);

var _afterRemoveFile2 = _interopRequireDefault(_afterRemoveFile);

var _addMemberToUnSharedFolder = __webpack_require__(1300);

var _addMemberToUnSharedFolder2 = _interopRequireDefault(_addMemberToUnSharedFolder);

var _persistExplorerRootTokenMap = __webpack_require__(1301);

var _persistExplorerRootTokenMap2 = _interopRequireDefault(_persistExplorerRootTokenMap);

var _fetchExplorerRootTokenMap = __webpack_require__(1302);

var _fetchExplorerRootTokenMap2 = _interopRequireDefault(_fetchExplorerRootTokenMap);

var _dismissSharedFolder = __webpack_require__(1303);

var _dismissSharedFolder2 = _interopRequireDefault(_dismissSharedFolder);

var _switchRootTokenByCache = __webpack_require__(1304);

var _switchRootTokenByCache2 = _interopRequireDefault(_switchRootTokenByCache);

var _checkRootMeta = __webpack_require__(1305);

var _checkRootMeta2 = _interopRequireDefault(_checkRootMeta);

var _clearSelectedMetas = __webpack_require__(1306);

var _clearSelectedMetas2 = _interopRequireDefault(_clearSelectedMetas);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(explorerSaga);
// import fetchRootShareFolderWatcher from './fetchRootShareFolders';


function explorerSaga() {
    return _regenerator2.default.wrap(function explorerSaga$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(_switchRootTokenByCache2.default), (0, _effects.fork)(_fetchExplorerRootTokenMap2.default), (0, _effects.fork)(_persistExplorerRootTokenMap2.default), (0, _effects.fork)(_checkRootMeta2.default), (0, _effects.fork)(_fetchFileMeta2.default), (0, _effects.fork)(_fetchRootMeta2.default), (0, _effects.fork)(_fetchShareHome2.default), (0, _effects.fork)(_fetchFiles2.default), (0, _effects.fork)(_removeFile2.default), (0, _effects.fork)(_deleteRemovedFile2.default), (0, _effects.fork)(_createShareFolder2.default), (0, _effects.fork)(_fetchExplorerFolderList2.default), (0, _effects.fork)(_fetchSelectedFileData2.default), (0, _effects.fork)(_setSelectedFileMetas2.default), (0, _effects.fork)(_moveFile2.default), (0, _effects.fork)(_afterRemoveFile2.default), (0, _effects.fork)(_addMemberToUnSharedFolder2.default), (0, _effects.fork)(_dismissSharedFolder2.default), (0, _effects.fork)(_clearSelectedMetas2.default)]);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
exports.default = explorerSaga;

/***/ }),
/* 1180 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.fetchFileMetaWatcher = fetchFileMetaWatcher;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

var _explorer = __webpack_require__(56);

var _explorer2 = __webpack_require__(48);

var _explorerShare = __webpack_require__(1181);

var _ui = __webpack_require__(383);

var _modal = __webpack_require__(334);

var _urlHelper = __webpack_require__(128);

var _queryPresetHelper = __webpack_require__(686);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchFileMetaWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchFileMetaSuccessSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(fetchFileMetaFailSaga),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(openShareModalSaga);

function fetchFileMetaWatcher() {
    return _regenerator2.default.wrap(function fetchFileMetaWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.all)([(0, _effects.takeEvery)(_$constants.actionTypes.explorer.FETCH_FILE_META_SUCCESS, fetchFileMetaSuccessSaga), (0, _effects.takeEvery)(_$constants.actionTypes.explorer.FETCH_FILE_META_FAIL, fetchFileMetaFailSaga)]);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchFileMetaSuccessSaga(action) {
    var _action$payload, token, needPath, path, state, node, queryParams, currentPath, index;

    return _regenerator2.default.wrap(function fetchFileMetaSuccessSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, token = _action$payload.token, needPath = _action$payload.need_path, path = _action$payload.path;
                    _context2.next = 3;
                    return (0, _effects.select)();

                case 3:
                    state = _context2.sent;
                    node = (0, _explorer2.selectFileEntities)(state).get(token);

                    setTitle(node.get('name') + ' - ' + t('explorer._folder'));
                    _context2.next = 8;
                    return (0, _effects.put)((0, _explorer.setTrClicked)(false));

                case 8:
                    if (!(needPath === 1)) {
                        _context2.next = 22;
                        break;
                    }

                    // 打开邀请modal
                    queryParams = (0, _urlHelper.parseQuery)(window.location.href);

                    if (!canOpenShareModal(queryParams)) {
                        _context2.next = 13;
                        break;
                    }

                    _context2.next = 13;
                    return (0, _effects.fork)(openShareModalSaga, queryParams);

                case 13:
                    if (!(path.length === 0)) {
                        _context2.next = 18;
                        break;
                    }

                    _context2.next = 16;
                    return (0, _effects.put)((0, _explorer.setPath)(['share-folders']));

                case 16:
                    _context2.next = 20;
                    break;

                case 18:
                    _context2.next = 20;
                    return (0, _effects.put)((0, _explorer.setPath)(path));

                case 20:
                    _context2.next = 31;
                    break;

                case 22:
                    currentPath = (0, _explorer2.selectCurrentPath)(state).toJS();
                    index = currentPath.indexOf(token);

                    if (!(index < 0)) {
                        _context2.next = 29;
                        break;
                    }

                    _context2.next = 27;
                    return (0, _effects.put)((0, _explorer.setPath)([].concat((0, _toConsumableArray3.default)(currentPath), [token])));

                case 27:
                    _context2.next = 31;
                    break;

                case 29:
                    _context2.next = 31;
                    return (0, _effects.put)((0, _explorer.setPath)(currentPath.slice(0, index + 1)));

                case 31:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function fetchFileMetaFailSaga(action) {
    var error, token, state, node, linkToken;
    return _regenerator2.default.wrap(function fetchFileMetaFailSaga$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    error = action.error;
                    token = action.payload.token;
                    _context3.next = 4;
                    return (0, _effects.select)();

                case 4:
                    state = _context3.sent;
                    node = (0, _explorer2.selectFileEntities)(state).get(token);

                    if (!(error.code === _$constants.error.STATUS_CODE.FORBIDDEN)) {
                        _context3.next = 11;
                        break;
                    }

                    if (!(node && node.get('link_token'))) {
                        _context3.next = 11;
                        break;
                    }

                    linkToken = node.get('link_token');
                    _context3.next = 11;
                    return (0, _effects.put)((0, _explorer.removeFile)(linkToken, false, false, undefined, false));

                case 11:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function setTitle(title) {
    if (!title) title = 'Docs';
    document.title = title;
}
function canOpenShareModal() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    return params[_queryPresetHelper.QUERY_FIELDS.SHARE_OPEN] === '1' && params.memberId;
    // &&
    // params.memberName &&
    // params.memberType;
}
// url中存在shareopen时打开分享modal
function openShareModalSaga() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var currentShareFolder, isInShareFolder, currentMeta, currentFolder, token;
    return _regenerator2.default.wrap(function openShareModalSaga$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    _context4.next = 2;
                    return (0, _effects.select)(_explorerShare.selectCurrentShareRootFile);

                case 2:
                    currentShareFolder = _context4.sent;
                    isInShareFolder = !!currentShareFolder.space_id;
                    currentMeta = void 0;

                    if (!isInShareFolder) {
                        _context4.next = 9;
                        break;
                    }

                    // 共享文件夹
                    currentMeta = {
                        token: currentShareFolder.token,
                        obj_token: currentShareFolder.obj_token,
                        type: currentShareFolder.type
                    };
                    _context4.next = 16;
                    break;

                case 9:
                    _context4.next = 11;
                    return (0, _effects.select)(_explorer2.selectCurrentFile);

                case 11:
                    currentFolder = _context4.sent;
                    token = currentFolder.get('token');

                    if (token) {
                        _context4.next = 15;
                        break;
                    }

                    return _context4.abrupt('return');

                case 15:
                    currentMeta = {
                        token: token,
                        obj_token: '',
                        type: _common.NUM_FOLDER_TYPE.FOLDER
                    };

                case 16:
                    _context4.next = 18;
                    return (0, _effects.put)((0, _explorer.setSelectedFileMetas)([currentMeta]));

                case 18:
                    _context4.next = 20;
                    return (0, _effects.put)((0, _modal.openModal)(_ui.MODAL_TYPES.SHARE));

                case 20:
                    _context4.next = 22;
                    return (0, _effects.take)(_$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_START);

                case 22:
                    _context4.next = 24;
                    return (0, _queryPresetHelper.resetPathNameIfShareQueryExist)(['v']);

                case 24:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}
exports.default = fetchFileMetaWatcher;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1181 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.selectCurrentShareRootFile = exports.selectSelectedFolderData = undefined;

var _immutable = __webpack_require__(31);

var _reselect = __webpack_require__(131);

var _$constants = __webpack_require__(5);

var _share = __webpack_require__(342);

var _explorer = __webpack_require__(48);

// @FIXME: Not pure. Refactor it ASAP.
// @TODO: Not pure. Refactor it ASAP.
var selectSelectedFolderData = exports.selectSelectedFolderData = function selectSelectedFolderData(state) {
    var meta = (0, _explorer.selectSelectedFirstFileMeta)(state);
    if (!meta || meta.obj_token !== '') return null;
    var nodesMap = (0, _explorer.selectFileEntities)(state);
    var data = nodesMap.get(meta.token);
    // const data = state.appState.selectedFolderData;
    if (!data) return data;
    var spaceId = data.get('space_id');
    var folderAuthorizedMembers = void 0;
    if (spaceId) {
        var folderPermissionFields = (0, _share.selectShareFolderPermissions)(state);
        folderAuthorizedMembers = folderPermissionFields.getIn([spaceId, 'authorizedMembers']);
        if (typeof folderAuthorizedMembers === 'undefined') {
            folderAuthorizedMembers = (0, _immutable.fromJS)([]);
        }
    } else {
        // 如果没有 spaceId，则意味着这是一个私有文件夹
        // 所以 permissions 列表里面只有当前用户
        var user = state.appState.currentUser;
        folderAuthorizedMembers = (0, _immutable.fromJS)([{
            owner_id: user.get('id'),
            owner_type: 0,
            owner_name: user.get('name'),
            avatar_url: user.get('avatar_url'),
            is_owner: true
        }]);
    }
    var rst = (0, _immutable.fromJS)({}).merge(data).set('authorizedMembers', folderAuthorizedMembers);
    return rst;
};
var emptyMap = (0, _immutable.Map)({});
var selectCurrentShareRootFile = exports.selectCurrentShareRootFile = (0, _reselect.createSelector)(_explorer.selectFileEntities, _explorer.selectCurrentFileToken, _explorer.selectCurrentPath, function (nodeMap, currentFileToken, currentPath) {
    var currentFile = nodeMap.get(currentFileToken);
    var isCurrentShareRoot = currentFile && currentFile.get('share_root') === 1;
    if (isCurrentShareRoot) {
        return currentFile;
    }
    var isFirstShareFolder = currentPath && currentPath.first() === _$constants.apiField.FAKE_SHARE_FOLDER_TOKEN;
    if (isFirstShareFolder) {
        var rootSpaceToken = currentPath.get(1);
        var rootNode = nodeMap.get(rootSpaceToken);
        if (rootNode) {
            return rootNode;
        }
    }
    var shareRootPathIdx = currentPath.findIndex(function (path) {
        return nodeMap.getIn([path, 'share_root']) === 1;
    });
    if (shareRootPathIdx !== -1) {
        var rootPath = currentPath.get(shareRootPathIdx);
        return nodeMap.get(rootPath);
    }
    return emptyMap;
});

/***/ }),
/* 1182 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getCanCreateSheet = getCanCreateSheet;
exports.isSuiteDisabled = isSuiteDisabled;

var _get = __webpack_require__(83);

var _get2 = _interopRequireDefault(_get);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 特殊标识常量声明
 */
var CAN_CREATE_SHEET = '1';
/**
 * -- End ---
 */
function getCanCreateSheet() {
    var canCreateSheet = (0, _get2.default)(window, ['User', 'canCreateSheet']);
    /**
     * 兼容字段
     */
    if (typeof canCreateSheet === 'undefined' || canCreateSheet.indexOf('can_create_sheet') !== -1) {
        return true;
    }
    return canCreateSheet === CAN_CREATE_SHEET;
}
function isSuiteDisabled(suiteType) {
    // 如果有更多类型的判断，在这里添加，请将无关逻辑抽离至 rentalHelper 里，以保证代码的整洁，谢谢合作。
    // EXP: const isSlideForbidden = isSlide && !getCanUseSlide();
    // console.log({ suiteType, canCreateSheet: getCanCreateSheet(), user: get(window, ['User'])});
    return suiteType === _common.NUM_FILE_TYPE.SHEET && !getCanCreateSheet();
}

/***/ }),
/* 1183 */,
/* 1184 */,
/* 1185 */,
/* 1186 */,
/* 1187 */,
/* 1188 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.fetchRootMetaWatcher = fetchRootMetaWatcher;
exports.fetchRootMetaSaga = fetchRootMetaSaga;
exports.takeCareHasShare = takeCareHasShare;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _explorer = __webpack_require__(56);

var _common = __webpack_require__(19);

var _titleHelper = __webpack_require__(195);

var _utils = __webpack_require__(260);

var _request = __webpack_require__(687);

var _common2 = __webpack_require__(85);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchRootMetaWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchRootMetaSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(takeCareHasShare);

var isMobile = _browserHelper2.default.mobile;
function fetchRootMetaWatcher() {
    var takeEffect;
    return _regenerator2.default.wrap(function fetchRootMetaWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    /** 移动端会同时多个 rootMeta 同时fetch，需要放开限制 */
                    takeEffect = isMobile ? _effects.takeEvery : _effects.takeLatest;
                    _context.next = 3;
                    return takeEffect(_$constants.actionTypes.explorer.FETCH_ROOT_META, fetchRootMetaSaga);

                case 3:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
var getToken = function getToken(path) {
    return path[0] ? path[0] : 'share-folders';
};
function fetchRootMetaSaga(action) {
    var deferred, _action$payload, type, isContinuous, length, _ref, data, rest, path, has_share, token, transformedRes, successAction, routeObj, failAction;

    return _regenerator2.default.wrap(function fetchRootMetaSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    deferred = action[_common.DEFERRED];
                    _context2.prev = 1;
                    _action$payload = action.payload, type = _action$payload.type, isContinuous = _action$payload.isContinuous, length = _action$payload.length;
                    // console.time('=========fetchRootMetaSaga==============');
                    // window.performance.mark('fetchRootMetaSaga-action_start');

                    _context2.next = 5;
                    return (0, _effects.put)(_utils.requestActions.start(action));

                case 5:
                    if (!(type === _common.NUM_ROOT_META.SHARE_FILES)) {
                        _context2.next = 7;
                        break;
                    }

                    throw new Error('Deprecated! Please use fetchShareObjects');

                case 7:
                    _context2.next = 9;
                    return (0, _effects.call)(_request.retryableDocAPI, {
                        url: _$constants.apiUrls.POST_FETCH_ROOT_META,
                        method: _$constants.apiUrls.METHOD.POST,
                        data: { type: type, length: length }
                    });

                case 9:
                    _ref = _context2.sent;
                    data = _ref.data;
                    rest = (0, _objectWithoutProperties3.default)(_ref, ['data']);
                    path = data.path, has_share = data.has_share;
                    token = getToken(path);
                    transformedRes = Object.assign({}, data, rest, {
                        type: type,
                        isContinuous: isContinuous,
                        token: token
                    });
                    successAction = _utils.requestActions.success(action, transformedRes);
                    _context2.next = 18;
                    return (0, _effects.put)(successAction);

                case 18:
                    deferred && deferred.resolve(successAction);
                    _context2.next = 21;
                    return (0, _effects.select)(_common2.selectRoute);

                case 21:
                    routeObj = _context2.sent;

                    if (!(routeObj.get('path') !== _$constants.route.PATH.HOME)) {
                        _context2.next = 26;
                        break;
                    }

                    _context2.next = 25;
                    return (0, _effects.put)((0, _explorer.checkRootMeta)({ type: type, token: token }));

                case 25:
                    (0, _titleHelper.setTitle)(type);

                case 26:
                    _context2.next = 28;
                    return takeCareHasShare(type, has_share);

                case 28:
                    _context2.next = 30;
                    return (0, _effects.put)((0, _explorer.setTrClicked)(false));

                case 30:
                    _context2.next = 39;
                    break;

                case 32:
                    _context2.prev = 32;
                    _context2.t0 = _context2['catch'](1);

                    console.error(_context2.t0);
                    failAction = _utils.requestActions.fail(action, _context2.t0);

                    deferred && deferred.reject(failAction);
                    _context2.next = 39;
                    return (0, _effects.put)(failAction);

                case 39:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this, [[1, 32]]);
}
function takeCareHasShare(type, hasShare) {
    return _regenerator2.default.wrap(function takeCareHasShare$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.t0 = type;
                    _context3.next = _context3.t0 === _common.NUM_ROOT_META.SHARE_FILES ? 3 : _context3.t0 === _common.NUM_ROOT_META.SHARE_FOLDERS ? 6 : 9;
                    break;

                case 3:
                    _context3.next = 5;
                    return (0, _effects.put)((0, _explorer.setHasShareFolder)(hasShare));

                case 5:
                    return _context3.abrupt('break', 9);

                case 6:
                    _context3.next = 8;
                    return (0, _effects.put)((0, _explorer.setHasShareFolder)(true));

                case 8:
                    return _context3.abrupt('break', 9);

                case 9:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
exports.default = fetchRootMetaWatcher;

/***/ }),
/* 1189 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
// Request Saga action payload的默认配置参数
var returnRejectedPromiseOnError = exports.returnRejectedPromiseOnError = false;
var enableCamelCaseResponse = exports.enableCamelCaseResponse = false;
var enableSnakeCaseResponse = exports.enableSnakeCaseResponse = false;
var injectRequestData = exports.injectRequestData = false;

/***/ }),
/* 1190 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _reduxSaga = __webpack_require__(240);

var _effects = __webpack_require__(17);

var _retryable = __webpack_require__(688);

var _retryable2 = _interopRequireDefault(_retryable);

var _common = __webpack_require__(19);

var _utils = __webpack_require__(260);

var _$constants = __webpack_require__(5);

var _requestPreProcess = __webpack_require__(1274);

var _api = __webpack_require__(150);

var _sdkCompatibleHelper = __webpack_require__(45);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchRequest),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(cancelSendRequestOnAction),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(apiRequest),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(watchFetchResponse),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(watchFetchResponseSaga),
    _marked6 = /*#__PURE__*/_regenerator2.default.mark(requestSaga);

function watchRequest() {
    var lastTasks, action, _getActionOptions, takeLatest, abortOn, lastActionKey, activeTask, requestData, requestConfig, newTask;

    return _regenerator2.default.wrap(function watchRequest$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    lastTasks = {};

                case 1:
                    if (false) {}

                    _context.next = 4;
                    return (0, _effects.take)('*');

                case 4:
                    action = _context.sent;

                    if ((0, _utils.isRequestAction)(action)) {
                        _context.next = 7;
                        break;
                    }

                    return _context.abrupt('continue', 1);

                case 7:
                    _getActionOptions = (0, _utils.getActionOptions)(action), takeLatest = _getActionOptions.takeLatest;
                    abortOn = (0, _utils.getAbortOn)(action);
                    lastActionKey = action.type;

                    if (!takeLatest) {
                        _context.next = 15;
                        break;
                    }

                    activeTask = lastTasks[lastActionKey];

                    if (!activeTask) {
                        _context.next = 15;
                        break;
                    }

                    _context.next = 15;
                    return (0, _effects.cancel)(activeTask);

                case 15:
                    requestData = (0, _utils.getRequestData)(action);
                    // 合并默认axios请求设置

                    requestConfig = Object.assign({
                        method: _$constants.apiUrls.METHOD.GET
                    }, action[_$constants.common.REQUEST], {
                        abortOn: abortOn
                    });
                    _context.next = 19;
                    return (0, _effects.fork)(apiRequest, action, requestConfig, requestData);

                case 19:
                    newTask = _context.sent;

                    if (takeLatest) {
                        lastTasks[lastActionKey] = newTask;
                    }
                    _context.next = 23;
                    return (0, _effects.fork)(cancelSendRequestOnAction, abortOn, newTask);

                case 23:
                    _context.next = 1;
                    break;

                case 25:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function cancelSendRequestOnAction(abortOn, task) {
    var _ref, abortingAction;

    return _regenerator2.default.wrap(function cancelSendRequestOnAction$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.race)({
                        abortingAction: (0, _effects.take)(abortOn),
                        taskFinished: (0, _effects.join)(task),
                        timeout: (0, _effects.call)(_reduxSaga.delay, 10000)
                    });

                case 2:
                    _ref = _context2.sent;
                    abortingAction = _ref.abortingAction;

                    if (!abortingAction) {
                        _context2.next = 7;
                        break;
                    }

                    _context2.next = 7;
                    return (0, _effects.cancel)(task);

                case 7:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function apiRequest(action, requestConfig, requestData) {
    var deferred, response, successAction, failAction, cancelAction;
    return _regenerator2.default.wrap(function apiRequest$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    deferred = action[_common.DEFERRED];
                    _context3.prev = 1;
                    _context3.next = 4;
                    return (0, _effects.put)(_utils.requestActions.start(action));

                case 4:
                    if (!(0, _sdkCompatibleHelper.isSupportOfflineEdit)()) {
                        _context3.next = 8;
                        break;
                    }

                    (0, _api.fetchMobileDoc)(requestConfig).then(function (res) {
                        var successAction = _utils.requestActions.success(action, res);
                        window.store.dispatch((0, _requestPreProcess.createRequestPreResolved)(true)(action, res));
                        deferred && deferred.resolve(successAction);
                    }, function (err) {
                        window.store.dispatch((0, _requestPreProcess.createRequestPreResolved)(false)(action, err));
                        deferred && deferred.reject(JSON.stringify(err));
                    });
                    _context3.next = 15;
                    break;

                case 8:
                    _context3.next = 10;
                    return (0, _effects.call)(_retryable2.default, requestConfig);

                case 10:
                    response = _context3.sent;
                    successAction = _utils.requestActions.success(action, response);

                    deferred && deferred.resolve(successAction);
                    _context3.next = 15;
                    return (0, _effects.put)(successAction);

                case 15:
                    _context3.next = 23;
                    break;

                case 17:
                    _context3.prev = 17;
                    _context3.t0 = _context3['catch'](1);
                    failAction = _utils.requestActions.fail(action, _context3.t0);
                    _context3.next = 22;
                    return (0, _effects.put)(failAction);

                case 22:
                    deferred && deferred.reject(_context3.t0);

                case 23:
                    _context3.prev = 23;
                    _context3.next = 26;
                    return (0, _effects.cancelled)();

                case 26:
                    if (!_context3.sent) {
                        _context3.next = 30;
                        break;
                    }

                    cancelAction = _utils.requestActions.cancel(action);
                    _context3.next = 30;
                    return (0, _effects.put)(cancelAction);

                case 30:
                    return _context3.finish(23);

                case 31:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this, [[1, 17, 23, 31]]);
}
/* fetch response */
function watchFetchResponse() {
    return _regenerator2.default.wrap(function watchFetchResponse$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    _context4.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.request.FETCH_SUCC, _$constants.actionTypes.request.FETCH_FAIL], watchFetchResponseSaga);

                case 2:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}
function watchFetchResponseSaga(payloadAction) {
    var _payloadAction$payloa, action, response, successAction, failAction;

    return _regenerator2.default.wrap(function watchFetchResponseSaga$(_context5) {
        while (1) {
            switch (_context5.prev = _context5.next) {
                case 0:
                    _payloadAction$payloa = payloadAction.payload, action = _payloadAction$payloa.action, response = _payloadAction$payloa.response;

                    if (!(payloadAction.type === _$constants.actionTypes.request.FETCH_SUCC)) {
                        _context5.next = 7;
                        break;
                    }

                    successAction = _utils.requestActions.success(action, response);
                    _context5.next = 5;
                    return (0, _effects.put)(successAction);

                case 5:
                    _context5.next = 10;
                    break;

                case 7:
                    failAction = _utils.requestActions.fail(action, response);
                    _context5.next = 10;
                    return (0, _effects.put)(failAction);

                case 10:
                case 'end':
                    return _context5.stop();
            }
        }
    }, _marked5, this);
}
function requestSaga() {
    return _regenerator2.default.wrap(function requestSaga$(_context6) {
        while (1) {
            switch (_context6.prev = _context6.next) {
                case 0:
                    _context6.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(watchRequest), (0, _effects.fork)(watchFetchResponse)]);

                case 2:
                case 'end':
                    return _context6.stop();
            }
        }
    }, _marked6, this);
}
exports.default = requestSaga;

/***/ }),
/* 1191 */,
/* 1192 */,
/* 1193 */,
/* 1194 */,
/* 1195 */,
/* 1196 */,
/* 1197 */,
/* 1198 */,
/* 1199 */,
/* 1200 */,
/* 1201 */,
/* 1202 */,
/* 1203 */,
/* 1204 */,
/* 1205 */,
/* 1206 */,
/* 1207 */,
/* 1208 */,
/* 1209 */,
/* 1210 */,
/* 1211 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = exports.TYPE_FORM_DATA = exports.TYPE_APPLICATION_JSON = undefined;

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _typeof2 = __webpack_require__(82);

var _typeof3 = _interopRequireDefault(_typeof2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _then = __webpack_require__(1212);

var _then2 = _interopRequireDefault(_then);

var _request = __webpack_require__(762);

var _request2 = _interopRequireDefault(_request);

var _offlineStorageHelper = __webpack_require__(313);

var _logger = __webpack_require__(305);

var _logger2 = _interopRequireDefault(_logger);

var _finalResponseMiddleware = __webpack_require__(1249);

var _finalResponseMiddleware2 = _interopRequireDefault(_finalResponseMiddleware);

var _sdkCompatibleHelper = __webpack_require__(45);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _offline = __webpack_require__(148);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @fileoverview fetch module
 */
var TYPE_APPLICATION_JSON = exports.TYPE_APPLICATION_JSON = 'application/json';
var TYPE_FORM_DATA = exports.TYPE_FORM_DATA = 'application/x-www-form-urlencoded';

var Request = function Request() {
    var _this = this;

    (0, _classCallCheck3.default)(this, Request);

    this.request = function (param) {
        return new _then2.default(function (resolve, reject) {
            if (_browserHelper2.default.mobile && (!param.noStore || param.readStore)) {
                _this.requestLocal(param).then(resolve, reject);
            }
            if (_this.config.forbidden === true && !param.ignoreForbidden) return;
            _this.requestNetwork(param).then(resolve, reject);
        });
    };
    this.setFetchConfig = function (cfg) {
        _this.config = cfg;
    };
    this.requestLocal = function (param) {
        return (0, _offlineStorageHelper.getData)(param).then(function (res) {
            // console.info('requestLocal-getData:', res, param.key);
            if (res && (0, _typeof3.default)(res.data) === 'object') {
                res.data.from = _offline.CACHE;
            }
            if (!res.data) {
                console.info('local request success response:' + param.key + ' no data');
            } else {
                console.info('local request success response:' + param.key + ' ok');
            }
            return res.data;
        });
    };
    this.requestNetwork = function (param) {
        if ((0, _sdkCompatibleHelper.isSupportOfflineEdit)() && (0, _sdkCompatibleHelper.isSupportNativeFetch)()) {
            return _this.nativeRequest(param);
        } else {
            return _this.ajaxRequest(param.url, param);
        }
    };
    this.ajaxRequest = function (url, param) {
        var method = param.method,
            _param$headers = param.headers,
            headers = _param$headers === undefined ? {} : _param$headers,
            contentType = param.contentType;

        var type = contentType || headers['Content-Type'];
        var body = param.body;

        if (type === TYPE_APPLICATION_JSON && (typeof body === 'undefined' ? 'undefined' : (0, _typeof3.default)(body)) === 'object') {
            body = JSON.stringify(body);
        }
        return new Promise(function (resolve, reject) {
            delete headers['Accept-Encoding']; // 浏览器阻止设置这个head
            (0, _request2.default)({
                url: url,
                data: body,
                method: method,
                contentType: type,
                headers: headers
            }).then(function (res) {
                if ((typeof res === 'undefined' ? 'undefined' : (0, _typeof3.default)(res)) === 'object') {
                    res.from = _offline.NETWORK;
                }
                resolve(res);
                console.info('ajax request success response ' + url);
            }, function (res) {
                // console.log('fail response:', res);
                // res.then not a valid fail response
                if (!res.then) {
                    // reject
                    reject(res);
                } else {
                    reject({ code: _offline.NETWORK_ERROR, message: 'xhr request error' });
                }
                _logger2.default.error('ajax request error ' + url + ' ---->: ' + JSON.stringify(res));
            });
        });
    };
    // 通过bridge发送请求
    this.nativeRequest = function (param) {
        return new Promise(function (resolve, reject) {
            // console.log('statistic fetch result', param.url, param);
            window.lark.biz.util.fetch(Object.assign({}, param, {
                callback: function callback(res) {
                    // console.log('statistic fetch result', param.url, JSON.stringify(res));
                    var code = res.code,
                        _res$data = res.data,
                        data = _res$data === undefined ? {} : _res$data; // native code not the api

                    if ((typeof data === 'undefined' ? 'undefined' : (0, _typeof3.default)(data)) === 'object') {
                        data.from = _offline.NETWORK;
                    }
                    if (code) {
                        res.data._networkCode = code;
                        reject(res.data);
                        return console.info('native request error ' + param.key + '\n             req:' + JSON.stringify(param) + ' response:' + JSON.stringify(res));
                    }
                    if (res.data.code) {
                        reject(res.data);
                        return console.info('api request error\n             req:' + JSON.stringify(param) + ' ' + param.key + '---->: ' + JSON.stringify(res));
                    }
                    resolve(res.data);
                    console.info('native request success response ' + param.key + ' ok');
                }
            }));
        });
    };
    this.fetch = function (url, param) {
        var chain = [];
        var req = Object.assign({ url: url }, param);
        // request 的处理为同步
        _this.interceptors.request.handles.forEach(function (interceptor) {
            if (interceptor.fulfilled) {
                req = interceptor.fulfilled(req);
            }
        });
        // 参数处理完立马发请求
        var promise = _this.request(req);
        // 加一个参数处理的middleware
        _this.interceptors.response.use(_finalResponseMiddleware2.default, _finalResponseMiddleware2.default);
        _this.interceptors.response.handles.forEach(function (interceptor) {
            chain.push(function (res) {
                if (interceptor.fulfilled) {
                    return interceptor.fulfilled({ req: req, res: res, isRejected: false });
                }
                return res;
            }, function (res) {
                if (interceptor.rejected) {
                    return interceptor.rejected({ req: req, res: res, isRejected: true });
                }
                return res;
            });
        });
        while (chain.length) {
            promise = promise.then(chain.shift(), chain.shift());
        }
        promise.catch(function (e) {
            var code = e.code,
                message = e.message,
                msg = e.msg;

            console.error({ code: code, message: msg || message });
        });
        return promise;
    };
    this.interceptors = {
        request: new MiddleWare(),
        response: new MiddleWare()
    };
    this.config = {
        forbidden: false
    };
};

exports.default = Request;

var MiddleWare = function () {
    function MiddleWare() {
        (0, _classCallCheck3.default)(this, MiddleWare);

        this.handles = [];
    }

    (0, _createClass3.default)(MiddleWare, [{
        key: 'use',
        value: function use(fulfilled, rejected) {
            this.handles.push({ fulfilled: fulfilled, rejected: rejected });
        }
    }]);
    return MiddleWare;
}();

/***/ }),
/* 1212 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _raw = __webpack_require__(1213);

var _raw2 = _interopRequireDefault(_raw);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var id = 0; /**
             * 一个具有then方法的class
             * 与promise不同，这个对象不具有状态，不像promise只能从pending->success或者fail
             * then方法传的回调可能被调用多次
             * 已知问题 同步resolve则then方法传的回调不会被调用多次
             * 类似:
             * new Then((resolve)=>{
             *   resolve(res1);
             *   resolve(res2);
             * }).then((res)=>{
             *    ouput: 'only once res2'
             *    console.log('only once', res);
             * })
             */

var Then = function Then(func) {
    var _this = this;

    (0, _classCallCheck3.default)(this, Then);

    this.state = Then.PENDING;
    this.canceled = false;
    this.deferredQueue = [];
    this.deferredState = Then.DEFER_INIT;
    this.then = function (onFulfilled, onRejected) {
        var promise = new Then(Then.noop);
        var deferred = new Deferred(promise, onFulfilled, onRejected);
        addDeferredToPromise(_this, deferred);
        return promise;
    };
    this.catch = function (callback) {
        return _this.then(undefined, callback);
    };
    this.always = function (onFulfilled) {
        return _this.then(onFulfilled, onFulfilled);
    };
    this.abort = function () {
        return _this.cancel();
    };
    this.cancel = function () {
        _this.canceled = true;
        return _this;
    };
    // finally 没有参数值
    // todo 加finally的单测
    this.finally = function (callback) {
        return _this.then(function (value) {
            return Promise.resolve(callback()).then(function () {
                return value;
            });
        }, function (value) {
            return Promise.reject(callback()).then(function () {
                throw value;
            });
        });
    };
    this.id = id++;
    if (func === Then.noop) return;
    try {
        func(function (value) {
            resolvePromise(_this, value);
        }, function (reason) {
            rejectPromise(_this, reason);
        });
    } catch (e) {
        rejectPromise(this, e);
    }
};

exports.default = Then;

Then.PENDING = 0;
Then.RESOLVED = 1;
Then.REJECTED = 2;
Then.DEFER_INIT = 0;
Then.DEFER_ADDED = 1;
Then.noop = function () {};

var Deferred = function Deferred(promise, onFulfilled, onRejected) {
    (0, _classCallCheck3.default)(this, Deferred);

    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : undefined;
    this.onRejected = typeof onRejected === 'function' ? onRejected : undefined;
    this.promise = promise;
};

function addDeferredToPromise(promise, deferred) {
    promise.deferredQueue.push(deferred);
    promise.deferredState = Then.DEFER_ADDED;
    // 处理 promise已经被resolve||reject的情况
    switch (promise.state) {
        case Then.RESOLVED:
            resolvePromise(promise, promise.value);
            break;
        case Then.REJECTED:
            rejectPromise(promise, promise.value);
            break;
        default:
            break;
    }
}
function rejectPromise(promise, reason) {
    promise.value = reason;
    promise.state = Then.REJECTED;
    handle(promise, reason, Then.REJECTED);
}
function resolvePromise(promise, value) {
    if (value === promise) {
        var e = new TypeError('A promise cannot be resolved with itself.');
        return rejectPromise(promise, e);
    }
    if (value && value.then) {
        try {
            value.then(function (result) {
                resolvePromise(promise, result);
            }, function (reason) {
                rejectPromise(promise, reason);
            });
        } catch (e) {
            rejectPromise(promise, e);
            console.error(e);
        }
        return;
    }
    promise.value = value;
    promise.state = Then.RESOLVED;
    handle(promise, value, Then.RESOLVED);
}
function handle(promise, value, state) {
    if (promise.deferredState === Then.PENDING) return;
    (0, _raw2.default)(function () {
        promise.deferredQueue.forEach(function (defer) {
            if (defer.promise.canceled) return;
            var callback = state === Then.RESOLVED ? defer.onFulfilled : defer.onRejected;
            if (!callback) {
                if (state === Then.RESOLVED) {
                    resolvePromise(defer.promise, value);
                } else {
                    rejectPromise(defer.promise, value);
                }
                return;
            }
            try {
                var ret = callback(value);
                resolvePromise(defer.promise, ret);
            } catch (e) {
                rejectPromise(defer.promise, e);
            }
        });
    });
}

/***/ }),
/* 1213 */,
/* 1214 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;

var _typeof2 = __webpack_require__(82);

var _typeof3 = _interopRequireDefault(_typeof2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */
(function (window, undefined) {
  // Can't do this because several apps including ASP.NET trace
  // the stack via arguments.caller.callee and Firefox dies if
  // you try to trace through "use strict" call chains. (#13335)
  // Support: Firefox 18+
  // "use strict";
  var
  // The deferred used on DOM ready
  readyList,


  // A central reference to the root jQuery(document)
  rootjQuery,


  // Support: IE<9
  // For `typeof node.method` instead of `node.method !== undefined`
  core_strundefined = typeof undefined === 'undefined' ? 'undefined' : (0, _typeof3.default)(undefined),


  // Use the correct document accordingly with window argument (sandbox)
  document = window.document,
      location = window.location,


  // Map over jQuery in case of overwrite
  _jQuery = window.jQuery,


  // Map over the $ in case of overwrite
  _$ = window.$,


  // [[Class]] -> type pairs
  class2type = {},


  // List of deleted data cache ids, so we can reuse them
  core_deletedIds = [],
      core_version = '1.9.1',


  // Save a reference to some core methods
  core_concat = core_deletedIds.concat,
      core_push = core_deletedIds.push,
      core_slice = core_deletedIds.slice,
      core_indexOf = core_deletedIds.indexOf,
      core_toString = class2type.toString,
      core_hasOwn = class2type.hasOwnProperty,
      core_trim = core_version.trim,


  // Define a local copy of jQuery
  jQuery = function jQuery(selector, context) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init(selector, context, rootjQuery);
  },


  // Used for matching numbers
  core_pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,


  // Used for splitting on whitespace
  core_rnotwhite = /\S+/g,


  // Make sure we trim BOM and NBSP (here's looking at you, Safari 5.0 and IE)
  rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,


  // A simple way to check for HTML strings
  // Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
  // Strict HTML recognition (#11290: must start with <)
  rquickExpr = /^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,


  // Match a standalone tag
  rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,


  // JSON RegExp
  rvalidchars = /^[\],:{}\s]*$/,
      rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g,
      rvalidescape = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
      rvalidtokens = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,


  // Matches dashed string for camelizing
  rmsPrefix = /^-ms-/,
      rdashAlpha = /-([\da-z])/gi,


  // Used by jQuery.camelCase as callback to replace()
  fcamelCase = function fcamelCase(all, letter) {
    return letter.toUpperCase();
  },


  // The ready event handler
  completed = function completed(event) {
    // readyState === "complete" is good enough for us to call the dom ready in oldIE
    if (document.addEventListener || event.type === 'load' || document.readyState === 'complete') {
      detach();
      jQuery.ready();
    }
  },

  // Clean-up method for dom ready events
  detach = function detach() {
    if (document.addEventListener) {
      document.removeEventListener('DOMContentLoaded', completed, false);
      window.removeEventListener('load', completed, false);
    } else {
      document.detachEvent('onreadystatechange', completed);
      window.detachEvent('onload', completed);
    }
  };

  jQuery.fn = jQuery.prototype = {
    // The current version of jQuery being used
    jquery: core_version,

    constructor: jQuery,
    init: function init(selector, context, rootjQuery) {
      var match = void 0,
          elem = void 0;

      // HANDLE: $(""), $(null), $(undefined), $(false)
      if (!selector) {
        return this;
      }

      // Handle HTML strings
      if (typeof selector === 'string') {
        if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {
          // Assume that strings that start and end with <> are HTML and skip the regex check
          match = [null, selector, null];
        } else {
          match = rquickExpr.exec(selector);
        }

        // Match html or make sure no context is specified for #id
        if (match && (match[1] || !context)) {
          // HANDLE: $(html) -> $(array)
          if (match[1]) {
            context = context instanceof jQuery ? context[0] : context;

            // scripts is true for back-compat
            jQuery.merge(this, jQuery.parseHTML(match[1], context && context.nodeType ? context.ownerDocument || context : document, true));

            // HANDLE: $(html, props)
            if (rsingleTag.test(match[1]) && jQuery.isPlainObject(context)) {
              for (match in context) {
                // Properties of context are called as methods if possible
                if (jQuery.isFunction(this[match])) {
                  this[match](context[match]);

                  // ...and otherwise set as attributes
                } else {
                  this.attr(match, context[match]);
                }
              }
            }

            return this;

            // HANDLE: $(#id)
          } else {
            elem = document.getElementById(match[2]);

            // Check parentNode to catch when Blackberry 4.6 returns
            // nodes that are no longer in the document #6963
            if (elem && elem.parentNode) {
              // Handle the case where IE and Opera return items
              // by name instead of ID
              if (elem.id !== match[2]) {
                return rootjQuery.find(selector);
              }

              // Otherwise, we inject the element directly into the jQuery object
              this.length = 1;
              this[0] = elem;
            }

            this.context = document;
            this.selector = selector;
            return this;
          }

          // HANDLE: $(expr, $(...))
        } else if (!context || context.jquery) {
          return (context || rootjQuery).find(selector);

          // HANDLE: $(expr, context)
          // (which is just equivalent to: $(context).find(expr)
        } else {
          return this.constructor(context).find(selector);
        }

        // HANDLE: $(DOMElement)
      } else if (selector.nodeType) {
        this.context = this[0] = selector;
        this.length = 1;
        return this;

        // HANDLE: $(function)
        // Shortcut for document ready
      } else if (jQuery.isFunction(selector)) {
        return rootjQuery.ready(selector);
      }

      if (selector.selector !== undefined) {
        this.selector = selector.selector;
        this.context = selector.context;
      }

      return jQuery.makeArray(selector, this);
    },

    // Start with an empty selector
    selector: '',

    // The default length of a jQuery object is 0
    length: 0,

    // The number of elements contained in the matched element set
    size: function size() {
      return this.length;
    },

    toArray: function toArray() {
      return core_slice.call(this);
    },

    // Get the Nth element in the matched element set OR
    // Get the whole matched element set as a clean array
    get: function get(num) {
      return num == null

      // Return a 'clean' array
      ? this.toArray()

      // Return just the object
      : num < 0 ? this[this.length + num] : this[num];
    },

    // Take an array of elements and push it onto the stack
    // (returning the new matched element set)
    pushStack: function pushStack(elems) {
      // Build a new jQuery matched element set
      var ret = jQuery.merge(this.constructor(), elems);

      // Add the old object onto the stack (as a reference)
      ret.prevObject = this;
      ret.context = this.context;

      // Return the newly-formed element set
      return ret;
    },

    // Execute a callback for every element in the matched set.
    // (You can seed the arguments with an array of args, but this is
    // only used internally.)
    each: function each(callback, args) {
      return jQuery.each(this, callback, args);
    },

    ready: function ready(fn) {
      // Add the callback
      jQuery.ready.promise().done(fn);

      return this;
    },

    slice: function slice() {
      return this.pushStack(core_slice.apply(this, arguments));
    },

    first: function first() {
      return this.eq(0);
    },

    last: function last() {
      return this.eq(-1);
    },

    eq: function eq(i) {
      var len = this.length,
          j = +i + (i < 0 ? len : 0);
      return this.pushStack(j >= 0 && j < len ? [this[j]] : []);
    },

    map: function map(callback) {
      return this.pushStack(jQuery.map(this, function (elem, i) {
        return callback.call(elem, i, elem);
      }));
    },

    end: function end() {
      return this.prevObject || this.constructor(null);
    },

    // For internal use only.
    // Behaves like an Array's method, not like a jQuery method.
    push: core_push,
    sort: [].sort,
    splice: [].splice
  };

  // Give the init function the jQuery prototype for later instantiation
  jQuery.fn.init.prototype = jQuery.fn;

  jQuery.extend = jQuery.fn.extend = function () {
    var src = void 0,
        copyIsArray = void 0,
        copy = void 0,
        name = void 0,
        options = void 0,
        clone = void 0,
        target = arguments[0] || {},
        i = 1,
        length = arguments.length,
        deep = false;

    // Handle a deep copy situation
    if (typeof target === 'boolean') {
      deep = target;
      target = arguments[1] || {};
      // skip the boolean and the target
      i = 2;
    }

    // Handle case when target is a string or something (possible in deep copy)
    if ((typeof target === 'undefined' ? 'undefined' : (0, _typeof3.default)(target)) !== 'object' && !jQuery.isFunction(target)) {
      target = {};
    }

    // extend jQuery itself if only one argument is passed
    if (length === i) {
      target = this;
      --i;
    }

    for (; i < length; i++) {
      // Only deal with non-null/undefined values
      if ((options = arguments[i]) != null) {
        // Extend the base object
        for (name in options) {
          src = target[name];
          copy = options[name];

          // Prevent never-ending loop
          if (target === copy) {
            continue;
          }

          // Recurse if we're merging plain objects or arrays
          if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {
            if (copyIsArray) {
              copyIsArray = false;
              clone = src && jQuery.isArray(src) ? src : [];
            } else {
              clone = src && jQuery.isPlainObject(src) ? src : {};
            }

            // Never move original objects, clone them
            target[name] = jQuery.extend(deep, clone, copy);

            // Don't bring in undefined values
          } else if (copy !== undefined) {
            target[name] = copy;
          }
        }
      }
    }

    // Return the modified object
    return target;
  };

  jQuery.extend({
    noConflict: function noConflict(deep) {
      if (window.$ === jQuery) {
        window.$ = _$;
      }

      if (deep && window.jQuery === jQuery) {
        window.jQuery = _jQuery;
      }

      return jQuery;
    },

    // Is the DOM ready to be used? Set to true once it occurs.
    isReady: false,

    // A counter to track how many items to wait for before
    // the ready event fires. See #6781
    readyWait: 1,

    // Hold (or release) the ready event
    holdReady: function holdReady(hold) {
      if (hold) {
        jQuery.readyWait++;
      } else {
        jQuery.ready(true);
      }
    },

    // Handle when the DOM is ready
    ready: function ready(wait) {
      // Abort if there are pending holds or we're already ready
      if (wait === true ? --jQuery.readyWait : jQuery.isReady) {
        return;
      }

      // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
      if (!document.body) {
        return setTimeout(jQuery.ready);
      }

      // Remember that the DOM is ready
      jQuery.isReady = true;

      // If a normal DOM Ready event fired, decrement, and wait if need be
      if (wait !== true && --jQuery.readyWait > 0) {
        return;
      }

      // If there are functions bound, to execute
      readyList.resolveWith(document, [jQuery]);

      // Trigger any bound ready events
      if (jQuery.fn.trigger) {
        jQuery(document).trigger('ready').off('ready');
      }
    },

    // See test/unit/core.js for details concerning isFunction.
    // Since version 1.3, DOM methods and functions like alert
    // aren't supported. They return false on IE (#2968).
    isFunction: function isFunction(obj) {
      return jQuery.type(obj) === 'function';
    },

    isArray: Array.isArray || function (obj) {
      return jQuery.type(obj) === 'array';
    },

    isWindow: function isWindow(obj) {
      return obj != null && obj == obj.window;
    },

    isNumeric: function isNumeric(obj) {
      return !isNaN(parseFloat(obj)) && isFinite(obj);
    },

    type: function type(obj) {
      if (obj == null) {
        return String(obj);
      }
      return (typeof obj === 'undefined' ? 'undefined' : (0, _typeof3.default)(obj)) === 'object' || typeof obj === 'function' ? class2type[core_toString.call(obj)] || 'object' : typeof obj === 'undefined' ? 'undefined' : (0, _typeof3.default)(obj);
    },

    isPlainObject: function isPlainObject(obj) {
      // Must be an Object.
      // Because of IE, we also have to check the presence of the constructor property.
      // Make sure that DOM nodes and window objects don't pass through, as well
      if (!obj || jQuery.type(obj) !== 'object' || obj.nodeType || jQuery.isWindow(obj)) {
        return false;
      }

      try {
        // Not own constructor property must be Object
        if (obj.constructor && !core_hasOwn.call(obj, 'constructor') && !core_hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {
          return false;
        }
      } catch (e) {
        // IE8,9 Will throw exceptions on certain host objects #9897
        return false;
      }

      // Own properties are enumerated firstly, so to speed up,
      // if last one is own, then all properties are own.

      var key = void 0;
      for (key in obj) {}

      return key === undefined || core_hasOwn.call(obj, key);
    },

    isEmptyObject: function isEmptyObject(obj) {
      var name = void 0;
      for (name in obj) {
        return false;
      }
      return true;
    },

    error: function error(msg) {
      throw new Error(msg);
    },

    // data: string of html
    // context (optional): If specified, the fragment will be created in this context, defaults to document
    // keepScripts (optional): If true, will include scripts passed in the html string
    parseHTML: function parseHTML(data, context, keepScripts) {
      if (!data || typeof data !== 'string') {
        return null;
      }
      if (typeof context === 'boolean') {
        keepScripts = context;
        context = false;
      }
      context = context || document;

      var parsed = rsingleTag.exec(data),
          scripts = !keepScripts && [];

      // Single tag
      if (parsed) {
        return [context.createElement(parsed[1])];
      }

      parsed = jQuery.buildFragment([data], context, scripts);
      if (scripts) {
        jQuery(scripts).remove();
      }
      return jQuery.merge([], parsed.childNodes);
    },

    parseJSON: function parseJSON(data) {
      // Attempt to parse using the native JSON parser first
      if (window.JSON && window.JSON.parse) {
        return window.JSON.parse(data);
      }

      if (data === null) {
        return data;
      }

      if (typeof data === 'string') {
        // Make sure leading/trailing whitespace is removed (IE can't handle it)
        data = jQuery.trim(data);

        if (data) {
          // Make sure the incoming data is actual JSON
          // Logic borrowed from http://json.org/json2.js
          if (rvalidchars.test(data.replace(rvalidescape, '@').replace(rvalidtokens, ']').replace(rvalidbraces, ''))) {
            return new Function('return ' + data)();
          }
        }
      }

      jQuery.error('Invalid JSON: ' + data);
    },

    // Cross-browser xml parsing
    parseXML: function parseXML(data) {
      var xml = void 0,
          tmp = void 0;
      if (!data || typeof data !== 'string') {
        return null;
      }
      try {
        if (window.DOMParser) {
          // Standard
          tmp = new DOMParser();
          xml = tmp.parseFromString(data, 'text/xml');
        } else {
          // IE
          xml = new ActiveXObject('Microsoft.XMLDOM');
          xml.async = 'false';
          xml.loadXML(data);
        }
      } catch (e) {
        xml = undefined;
      }
      if (!xml || !xml.documentElement || xml.getElementsByTagName('parsererror').length) {
        jQuery.error('Invalid XML: ' + data);
      }
      return xml;
    },

    noop: function noop() {},

    // Evaluates a script in a global context
    // Workarounds based on findings by Jim Driscoll
    // http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context
    globalEval: function globalEval(data) {
      if (data && jQuery.trim(data)) {
        // We use execScript on Internet Explorer
        // We use an anonymous function so that context is window
        // rather than jQuery in Firefox
        (window.execScript || function (data) {
          window['eval'].call(window, data);
        })(data);
      }
    },

    // Convert dashed to camelCase; used by the css and data modules
    // Microsoft forgot to hump their vendor prefix (#9572)
    camelCase: function camelCase(string) {
      return string.replace(rmsPrefix, 'ms-').replace(rdashAlpha, fcamelCase);
    },

    nodeName: function nodeName(elem, name) {
      return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
    },

    // args is for internal usage only
    each: function each(obj, callback, args) {
      var value = void 0,
          i = 0,
          length = obj.length,
          isArray = isArraylike(obj);

      if (args) {
        if (isArray) {
          for (; i < length; i++) {
            value = callback.apply(obj[i], args);

            if (value === false) {
              break;
            }
          }
        } else {
          for (i in obj) {
            value = callback.apply(obj[i], args);

            if (value === false) {
              break;
            }
          }
        }

        // A special, fast, case for the most common use of each
      } else {
        if (isArray) {
          for (; i < length; i++) {
            value = callback.call(obj[i], i, obj[i]);

            if (value === false) {
              break;
            }
          }
        } else {
          for (i in obj) {
            value = callback.call(obj[i], i, obj[i]);

            if (value === false) {
              break;
            }
          }
        }
      }

      return obj;
    },

    // Use native String.trim function wherever possible
    trim: core_trim && !core_trim.call('\uFEFF\xA0') ? function (text) {
      return text == null ? '' : core_trim.call(text);
    }

    // Otherwise use our own trimming functionality
    : function (text) {
      return text == null ? '' : (text + '').replace(rtrim, '');
    },

    // results is for internal usage only
    makeArray: function makeArray(arr, results) {
      var ret = results || [];

      if (arr != null) {
        if (isArraylike(Object(arr))) {
          jQuery.merge(ret, typeof arr === 'string' ? [arr] : arr);
        } else {
          core_push.call(ret, arr);
        }
      }

      return ret;
    },

    inArray: function inArray(elem, arr, i) {
      var len = void 0;

      if (arr) {
        if (core_indexOf) {
          return core_indexOf.call(arr, elem, i);
        }

        len = arr.length;
        i = i ? i < 0 ? Math.max(0, len + i) : i : 0;

        for (; i < len; i++) {
          // Skip accessing in sparse arrays
          if (i in arr && arr[i] === elem) {
            return i;
          }
        }
      }

      return -1;
    },

    merge: function merge(first, second) {
      var l = second.length,
          i = first.length,
          j = 0;

      if (typeof l === 'number') {
        for (; j < l; j++) {
          first[i++] = second[j];
        }
      } else {
        while (second[j] !== undefined) {
          first[i++] = second[j++];
        }
      }

      first.length = i;

      return first;
    },

    grep: function grep(elems, callback, inv) {
      var retVal = void 0,
          ret = [],
          i = 0,
          length = elems.length;
      inv = !!inv;

      // Go through the array, only saving the items
      // that pass the validator function
      for (; i < length; i++) {
        retVal = !!callback(elems[i], i);
        if (inv !== retVal) {
          ret.push(elems[i]);
        }
      }

      return ret;
    },

    // arg is for internal usage only
    map: function map(elems, callback, arg) {
      var value = void 0,
          i = 0,
          length = elems.length,
          isArray = isArraylike(elems),
          ret = [];

      // Go through the array, translating each of the items to their
      if (isArray) {
        for (; i < length; i++) {
          value = callback(elems[i], i, arg);

          if (value != null) {
            ret[ret.length] = value;
          }
        }

        // Go through every key on the object,
      } else {
        for (i in elems) {
          value = callback(elems[i], i, arg);

          if (value != null) {
            ret[ret.length] = value;
          }
        }
      }

      // Flatten any nested arrays
      return core_concat.apply([], ret);
    },

    // A global GUID counter for objects
    guid: 1,

    // Bind a function to a context, optionally partially applying any
    // arguments.
    proxy: function proxy(fn, context) {
      var args = void 0,
          proxy = void 0,
          tmp = void 0;

      if (typeof context === 'string') {
        tmp = fn[context];
        context = fn;
        fn = tmp;
      }

      // Quick check to determine if target is callable, in the spec
      // this throws a TypeError, but we will just return undefined.
      if (!jQuery.isFunction(fn)) {
        return undefined;
      }

      // Simulated bind
      args = core_slice.call(arguments, 2);
      proxy = function proxy() {
        return fn.apply(context || this, args.concat(core_slice.call(arguments)));
      };

      // Set the guid of unique handler to the same of original handler, so it can be removed
      proxy.guid = fn.guid = fn.guid || jQuery.guid++;

      return proxy;
    },

    // Multifunctional method to get and set values of a collection
    // The value/s can optionally be executed if it's a function
    access: function access(elems, fn, key, value, chainable, emptyGet, raw) {
      var i = 0,
          length = elems.length,
          bulk = key == null;

      // Sets many values
      if (jQuery.type(key) === 'object') {
        chainable = true;
        for (i in key) {
          jQuery.access(elems, fn, i, key[i], true, emptyGet, raw);
        }

        // Sets one value
      } else if (value !== undefined) {
        chainable = true;

        if (!jQuery.isFunction(value)) {
          raw = true;
        }

        if (bulk) {
          // Bulk operations run against the entire set
          if (raw) {
            fn.call(elems, value);
            fn = null;

            // ...except when executing function values
          } else {
            bulk = fn;
            fn = function fn(elem, key, value) {
              return bulk.call(jQuery(elem), value);
            };
          }
        }

        if (fn) {
          for (; i < length; i++) {
            fn(elems[i], key, raw ? value : value.call(elems[i], i, fn(elems[i], key)));
          }
        }
      }

      return chainable ? elems

      // Gets
      : bulk ? fn.call(elems) : length ? fn(elems[0], key) : emptyGet;
    },

    now: function now() {
      return new Date().getTime();
    }
  });

  jQuery.ready.promise = function (obj) {
    if (!readyList) {
      readyList = jQuery.Deferred();

      // Catch cases where $(document).ready() is called after the browser event has already occurred.
      // we once tried to use readyState "interactive" here, but it caused issues like the one
      // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
      if (document.readyState === 'complete') {
        // Handle it asynchronously to allow scripts the opportunity to delay ready
        setTimeout(jQuery.ready);

        // Standards-based browsers support DOMContentLoaded
      } else if (document.addEventListener) {
        // Use the handy event callback
        document.addEventListener('DOMContentLoaded', completed, false);

        // A fallback to window.onload, that will always work
        window.addEventListener('load', completed, false);

        // If IE event model is used
      } else {
        // Ensure firing before onload, maybe late but safe also for iframes
        document.attachEvent('onreadystatechange', completed);

        // A fallback to window.onload, that will always work
        window.attachEvent('onload', completed);

        // If IE and not a frame
        // continually check to see if the document is ready
        var top = false;

        try {
          top = window.frameElement == null && document.documentElement;
        } catch (e) {}

        if (top && top.doScroll) {
          (function doScrollCheck() {
            if (!jQuery.isReady) {
              try {
                // Use the trick by Diego Perini
                // http://javascript.nwbox.com/IEContentLoaded/
                top.doScroll('left');
              } catch (e) {
                return setTimeout(doScrollCheck, 50);
              }

              // detach all dom ready events
              detach();

              // and execute any waiting functions
              jQuery.ready();
            }
          })();
        }
      }
    }
    return readyList.promise(obj);
  };

  // Populate the class2type map
  jQuery.each('Boolean Number String Function Array Date RegExp Object Error'.split(' '), function (i, name) {
    class2type['[object ' + name + ']'] = name.toLowerCase();
  });

  function isArraylike(obj) {
    var length = obj.length,
        type = jQuery.type(obj);

    if (jQuery.isWindow(obj)) {
      return false;
    }

    if (obj.nodeType === 1 && length) {
      return true;
    }

    return type === 'array' || type !== 'function' && (length === 0 || typeof length === 'number' && length > 0 && length - 1 in obj);
  }

  // All jQuery objects should point back to these
  rootjQuery = jQuery(document);
  // String to Object options format cache
  var optionsCache = {};

  // Convert String-formatted options into Object-formatted ones and store in cache
  function createOptions(options) {
    var object = optionsCache[options] = {};
    jQuery.each(options.match(core_rnotwhite) || [], function (_, flag) {
      object[flag] = true;
    });
    return object;
  }

  /*
  * Create a callback list using the following parameters:
  *
  *	options: an optional list of space-separated options that will change how
  *			the callback list behaves or a more traditional option object
  *
  * By default a callback list will act like an event callback list and can be
  * "fired" multiple times.
  *
  * Possible options:
  *
  *	once:			will ensure the callback list can only be fired once (like a Deferred)
  *
  *	memory:			will keep track of previous values and will call any callback added
  *					after the list has been fired right away with the latest "memorized"
  *					values (like a Deferred)
  *
  *	unique:			will ensure a callback can only be added once (no duplicate in the list)
  *
  *	stopOnFalse:	interrupt callings when a callback returns false
  *
  */
  jQuery.Callbacks = function (options) {
    // Convert options from String-formatted to Object-formatted if needed
    // (we check in cache first)
    options = typeof options === 'string' ? optionsCache[options] || createOptions(options) : jQuery.extend({}, options);

    var // Flag to know if list is currently firing
    firing,

    // Last fire value (for non-forgettable lists)
    memory,

    // Flag to know if list was already fired
    _fired,

    // End of the loop when firing
    firingLength,

    // Index of currently firing callback (modified by remove if needed)
    firingIndex,

    // First callback to fire (used internally by add and fireWith)
    firingStart,

    // Actual callback list
    list = [],

    // Stack of fire calls for repeatable lists
    stack = !options.once && [],

    // Fire callbacks
    fire = function fire(data) {
      memory = options.memory && data;
      _fired = true;
      firingIndex = firingStart || 0;
      firingStart = 0;
      firingLength = list.length;
      firing = true;
      for (; list && firingIndex < firingLength; firingIndex++) {
        if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {
          memory = false; // To prevent further calls using add
          break;
        }
      }
      firing = false;
      if (list) {
        if (stack) {
          if (stack.length) {
            fire(stack.shift());
          }
        } else if (memory) {
          list = [];
        } else {
          self.disable();
        }
      }
    },

    // Actual Callbacks object
    self = {
      // Add a callback or a collection of callbacks to the list
      add: function add() {
        if (list) {
          // First, we save the current length
          var start = list.length;
          (function add(args) {
            jQuery.each(args, function (_, arg) {
              var type = jQuery.type(arg);
              if (type === 'function') {
                if (!options.unique || !self.has(arg)) {
                  list.push(arg);
                }
              } else if (arg && arg.length && type !== 'string') {
                // Inspect recursively
                add(arg);
              }
            });
          })(arguments);
          // Do we need to add the callbacks to the
          // current firing batch?
          if (firing) {
            firingLength = list.length;
            // With memory, if we're not firing then
            // we should call right away
          } else if (memory) {
            firingStart = start;
            fire(memory);
          }
        }
        return this;
      },
      // Remove a callback from the list
      remove: function remove() {
        if (list) {
          jQuery.each(arguments, function (_, arg) {
            var index = void 0;
            while ((index = jQuery.inArray(arg, list, index)) > -1) {
              list.splice(index, 1);
              // Handle firing indexes
              if (firing) {
                if (index <= firingLength) {
                  firingLength--;
                }
                if (index <= firingIndex) {
                  firingIndex--;
                }
              }
            }
          });
        }
        return this;
      },
      // Check if a given callback is in the list.
      // If no argument is given, return whether or not list has callbacks attached.
      has: function has(fn) {
        return fn ? jQuery.inArray(fn, list) > -1 : !!(list && list.length);
      },
      // Remove all callbacks from the list
      empty: function empty() {
        list = [];
        return this;
      },
      // Have the list do nothing anymore
      disable: function disable() {
        list = stack = memory = undefined;
        return this;
      },
      // Is it disabled?
      disabled: function disabled() {
        return !list;
      },
      // Lock the list in its current state
      lock: function lock() {
        stack = undefined;
        if (!memory) {
          self.disable();
        }
        return this;
      },
      // Is it locked?
      locked: function locked() {
        return !stack;
      },
      // Call all callbacks with the given context and arguments
      fireWith: function fireWith(context, args) {
        args = args || [];
        args = [context, args.slice ? args.slice() : args];
        if (list && (!_fired || stack)) {
          if (firing) {
            stack.push(args);
          } else {
            fire(args);
          }
        }
        return this;
      },
      // Call all the callbacks with the given arguments
      fire: function fire() {
        self.fireWith(this, arguments);
        return this;
      },
      // To know if the callbacks have already been called at least once
      fired: function fired() {
        return !!_fired;
      }
    };

    return self;
  };
  jQuery.extend({

    Deferred: function Deferred(func) {
      var tuples = [
      // action, add listener, listener list, final state
      ['resolve', 'done', jQuery.Callbacks('once memory'), 'resolved'], ['reject', 'fail', jQuery.Callbacks('once memory'), 'rejected'], ['notify', 'progress', jQuery.Callbacks('memory')]],
          _state = 'pending',
          _promise = {
        state: function state() {
          return _state;
        },
        always: function always() {
          deferred.done(arguments).fail(arguments);
          return this;
        },
        then: function then() /* fnDone, fnFail, fnProgress */{
          var fns = arguments;
          return jQuery.Deferred(function (newDefer) {
            jQuery.each(tuples, function (i, tuple) {
              var action = tuple[0],
                  fn = jQuery.isFunction(fns[i]) && fns[i];
              // deferred[ done | fail | progress ] for forwarding actions to newDefer
              deferred[tuple[1]](function () {
                var returned = fn && fn.apply(this, arguments);
                if (returned && jQuery.isFunction(returned.promise)) {
                  returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);
                } else {
                  newDefer[action + 'With'](this === _promise ? newDefer.promise() : this, fn ? [returned] : arguments);
                }
              });
            });
            fns = null;
          }).promise();
        },
        // Get a promise for this deferred
        // If obj is provided, the promise aspect is added to the object
        promise: function promise(obj) {
          return obj != null ? jQuery.extend(obj, _promise) : _promise;
        }
      },
          deferred = {};

      // Keep pipe for back-compat
      _promise.pipe = _promise.then;

      // Add list-specific methods
      jQuery.each(tuples, function (i, tuple) {
        var list = tuple[2],
            stateString = tuple[3];

        // promise[ done | fail | progress ] = list.add
        _promise[tuple[1]] = list.add;

        // Handle state
        if (stateString) {
          list.add(function () {
            // state = [ resolved | rejected ]
            _state = stateString;

            // [ reject_list | resolve_list ].disable; progress_list.lock
          }, tuples[i ^ 1][2].disable, tuples[2][2].lock);
        }

        // deferred[ resolve | reject | notify ]
        deferred[tuple[0]] = function () {
          deferred[tuple[0] + 'With'](this === deferred ? _promise : this, arguments);
          return this;
        };
        deferred[tuple[0] + 'With'] = list.fireWith;
      });

      // Make the deferred a promise
      _promise.promise(deferred);

      // Call given func if any
      if (func) {
        func.call(deferred, deferred);
      }

      // All done!
      return deferred;
    },

    // Deferred helper
    when: function when(subordinate /* , ..., subordinateN */) {
      var i = 0,
          resolveValues = core_slice.call(arguments),
          length = resolveValues.length,


      // the count of uncompleted subordinates
      remaining = length !== 1 || subordinate && jQuery.isFunction(subordinate.promise) ? length : 0,


      // the master Deferred. If resolveValues consist of only a single Deferred, just use that.
      deferred = remaining === 1 ? subordinate : jQuery.Deferred(),


      // Update function for both resolve and progress values
      updateFunc = function updateFunc(i, contexts, values) {
        return function (value) {
          contexts[i] = this;
          values[i] = arguments.length > 1 ? core_slice.call(arguments) : value;
          if (values === progressValues) {
            deferred.notifyWith(contexts, values);
          } else if (! --remaining) {
            deferred.resolveWith(contexts, values);
          }
        };
      },
          progressValues = void 0,
          progressContexts = void 0,
          resolveContexts = void 0;

      // add listeners to Deferred subordinates; treat others as resolved
      if (length > 1) {
        progressValues = new Array(length);
        progressContexts = new Array(length);
        resolveContexts = new Array(length);
        for (; i < length; i++) {
          if (resolveValues[i] && jQuery.isFunction(resolveValues[i].promise)) {
            resolveValues[i].promise().done(updateFunc(i, resolveContexts, resolveValues)).fail(deferred.reject).progress(updateFunc(i, progressContexts, progressValues));
          } else {
            --remaining;
          }
        }
      }

      // if we're not waiting on anything, resolve the master
      if (!remaining) {
        deferred.resolveWith(resolveContexts, resolveValues);
      }

      return deferred.promise();
    }
  });
  jQuery.support = function () {
    var support = void 0,
        all = void 0,
        a = void 0,
        input = void 0,
        select = void 0,
        fragment = void 0,
        opt = void 0,
        eventName = void 0,
        isSupported = void 0,
        i = void 0,
        div = document.createElement('div');

    // Setup
    div.setAttribute('className', 't');
    div.innerHTML = '  <link/><table></table><a href=\'/a\'>a</a><input type=\'checkbox\'/>';

    // Support tests won't run in some limited or non-browser environments
    all = div.getElementsByTagName('*');
    a = div.getElementsByTagName('a')[0];
    if (!all || !a || !all.length) {
      return {};
    }

    // First batch of tests
    select = document.createElement('select');
    opt = select.appendChild(document.createElement('option'));
    input = div.getElementsByTagName('input')[0];

    a.style.cssText = 'top:1px;float:left;opacity:.5';
    support = {
      // Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)
      getSetAttribute: div.className !== 't',

      // IE strips leading whitespace when .innerHTML is used
      leadingWhitespace: div.firstChild.nodeType === 3,

      // Make sure that tbody elements aren't automatically inserted
      // IE will insert them into empty tables
      tbody: !div.getElementsByTagName('tbody').length,

      // Make sure that link elements get serialized correctly by innerHTML
      // This requires a wrapper element in IE
      htmlSerialize: !!div.getElementsByTagName('link').length,

      // Get the style information from getAttribute
      // (IE uses .cssText instead)
      style: /top/.test(a.getAttribute('style')),

      // Make sure that URLs aren't manipulated
      // (IE normalizes it by default)
      hrefNormalized: a.getAttribute('href') === '/a',

      // Make sure that element opacity exists
      // (IE uses filter instead)
      // Use a regex to work around a WebKit issue. See #5145
      opacity: /^0.5/.test(a.style.opacity),

      // Verify style float existence
      // (IE uses styleFloat instead of cssFloat)
      cssFloat: !!a.style.cssFloat,

      // Check the default checkbox/radio value ("" on WebKit; "on" elsewhere)
      checkOn: !!input.value,

      // Make sure that a selected-by-default option has a working selected property.
      // (WebKit defaults to false instead of true, IE too, if it's in an optgroup)
      optSelected: opt.selected,

      // Tests for enctype support on a form (#6743)
      enctype: !!document.createElement('form').enctype,

      // Makes sure cloning an html5 element does not cause problems
      // Where outerHTML is undefined, this still works
      html5Clone: document.createElement('nav').cloneNode(true).outerHTML !== '<:nav></:nav>',

      // jQuery.support.boxModel DEPRECATED in 1.8 since we don't support Quirks Mode
      boxModel: document.compatMode === 'CSS1Compat',

      // Will be defined later
      deleteExpando: true,
      noCloneEvent: true,
      inlineBlockNeedsLayout: false,
      shrinkWrapBlocks: false,
      reliableMarginRight: true,
      boxSizingReliable: true,
      pixelPosition: false
    };

    // Make sure checked status is properly cloned
    input.checked = true;
    support.noCloneChecked = input.cloneNode(true).checked;

    // Make sure that the options inside disabled selects aren't marked as disabled
    // (WebKit marks them as disabled)
    select.disabled = true;
    support.optDisabled = !opt.disabled;

    // Support: IE<9
    try {
      delete div.test;
    } catch (e) {
      support.deleteExpando = false;
    }

    // Check if we can trust getAttribute("value")
    input = document.createElement('input');
    input.setAttribute('value', '');
    support.input = input.getAttribute('value') === '';

    // Check if an input maintains its value after becoming a radio
    input.value = 't';
    input.setAttribute('type', 'radio');
    support.radioValue = input.value === 't';

    // #11217 - WebKit loses check when the name is after the checked attribute
    input.setAttribute('checked', 't');
    input.setAttribute('name', 't');

    fragment = document.createDocumentFragment();
    fragment.appendChild(input);

    // Check if a disconnected checkbox will retain its checked
    // value of true after appended to the DOM (IE6/7)
    support.appendChecked = input.checked;

    // WebKit doesn't clone checked state correctly in fragments
    support.checkClone = fragment.cloneNode(true).cloneNode(true).lastChild.checked;

    // Support: IE<9
    // Opera does not clone events (and typeof div.attachEvent === undefined).
    // IE9-10 clones events bound via attachEvent, but they don't trigger with .click()
    if (div.attachEvent) {
      div.attachEvent('onclick', function () {
        support.noCloneEvent = false;
      });

      div.cloneNode(true).click();
    }

    // Support: IE<9 (lack submit/change bubble), Firefox 17+ (lack focusin event)
    // Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP), test/csp.php
    for (i in { submit: true, change: true, focusin: true }) {
      div.setAttribute(eventName = 'on' + i, 't');

      support[i + 'Bubbles'] = eventName in window || div.attributes[eventName].expando === false;
    }

    div.style.backgroundClip = 'content-box';
    div.cloneNode(true).style.backgroundClip = '';
    support.clearCloneStyle = div.style.backgroundClip === 'content-box';

    // Run tests that need a body at doc ready
    jQuery(function () {
      var container = void 0,
          marginDiv = void 0,
          tds = void 0,
          divReset = 'padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;',
          body = document.getElementsByTagName('body')[0];

      if (!body) {
        // Return for frameset docs that don't have a body
        return;
      }

      container = document.createElement('div');
      container.style.cssText = 'border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px';

      body.appendChild(container).appendChild(div);

      // Support: IE8
      // Check if table cells still have offsetWidth/Height when they are set
      // to display:none and there are still other visible table cells in a
      // table row; if so, offsetWidth/Height are not reliable for use when
      // determining if an element has been hidden directly using
      // display:none (it is still safe to use offsets if a parent element is
      // hidden; don safety goggles and see bug #4512 for more information).
      div.innerHTML = '<table><tr><td></td><td>t</td></tr></table>';
      tds = div.getElementsByTagName('td');
      tds[0].style.cssText = 'padding:0;margin:0;border:0;display:none';
      isSupported = tds[0].offsetHeight === 0;

      tds[0].style.display = '';
      tds[1].style.display = 'none';

      // Support: IE8
      // Check if empty table cells still have offsetWidth/Height
      support.reliableHiddenOffsets = isSupported && tds[0].offsetHeight === 0;

      // Check box-sizing and margin behavior
      div.innerHTML = '';
      div.style.cssText = 'box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;';
      support.boxSizing = div.offsetWidth === 4;
      support.doesNotIncludeMarginInBodyOffset = body.offsetTop !== 1;

      // Use window.getComputedStyle because jsdom on node.js will break without it.
      if (window.getComputedStyle) {
        support.pixelPosition = (window.getComputedStyle(div, null) || {}).top !== '1%';
        support.boxSizingReliable = (window.getComputedStyle(div, null) || { width: '4px' }).width === '4px';

        // Check if div with explicit width and no margin-right incorrectly
        // gets computed margin-right based on width of container. (#3333)
        // Fails in WebKit before Feb 2011 nightlies
        // WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
        marginDiv = div.appendChild(document.createElement('div'));
        marginDiv.style.cssText = div.style.cssText = divReset;
        marginDiv.style.marginRight = marginDiv.style.width = '0';
        div.style.width = '1px';

        support.reliableMarginRight = !parseFloat((window.getComputedStyle(marginDiv, null) || {}).marginRight);
      }

      if ((0, _typeof3.default)(div.style.zoom) !== core_strundefined) {
        // Support: IE<8
        // Check if natively block-level elements act like inline-block
        // elements when setting their display to 'inline' and giving
        // them layout
        div.innerHTML = '';
        div.style.cssText = divReset + 'width:1px;padding:1px;display:inline;zoom:1';
        support.inlineBlockNeedsLayout = div.offsetWidth === 3;

        // Support: IE6
        // Check if elements with layout shrink-wrap their children
        div.style.display = 'block';
        div.innerHTML = '<div></div>';
        div.firstChild.style.width = '5px';
        support.shrinkWrapBlocks = div.offsetWidth !== 3;

        if (support.inlineBlockNeedsLayout) {
          // Prevent IE 6 from affecting layout for positioned elements #11048
          // Prevent IE from shrinking the body in IE 7 mode #12869
          // Support: IE<8
          body.style.zoom = 1;
        }
      }

      body.removeChild(container);

      // Null elements to avoid leaks in IE
      container = div = tds = marginDiv = null;
    });

    // Null elements to avoid leaks in IE
    all = select = fragment = opt = a = input = null;

    return support;
  }();

  var rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
      rmultiDash = /([A-Z])/g;

  function internalData(elem, name, data, pvt /* Internal Use Only */) {
    if (!jQuery.acceptData(elem)) {
      return;
    }

    var thisCache = void 0,
        ret = void 0,
        internalKey = jQuery.expando,
        getByName = typeof name === 'string',


    // We have to handle DOM nodes and JS objects differently because IE6-7
    // can't GC object references properly across the DOM-JS boundary
    isNode = elem.nodeType,


    // Only DOM nodes need the global jQuery cache; JS object data is
    // attached directly to the object so GC can occur automatically
    cache = isNode ? jQuery.cache : elem,


    // Only defining an ID for JS objects if its cache already exists allows
    // the code to shortcut on the same path as a DOM node with no cache
    id = isNode ? elem[internalKey] : elem[internalKey] && internalKey;

    // Avoid doing any more work than we need to when trying to get data on an
    // object that has no data at all
    if ((!id || !cache[id] || !pvt && !cache[id].data) && getByName && data === undefined) {
      return;
    }

    if (!id) {
      // Only DOM nodes need a new unique ID for each element since their data
      // ends up in the global cache
      if (isNode) {
        elem[internalKey] = id = core_deletedIds.pop() || jQuery.guid++;
      } else {
        id = internalKey;
      }
    }

    if (!cache[id]) {
      cache[id] = {};

      // Avoids exposing jQuery metadata on plain JS objects when the object
      // is serialized using JSON.stringify
      if (!isNode) {
        cache[id].toJSON = jQuery.noop;
      }
    }

    // An object can be passed to jQuery.data instead of a key/value pair; this gets
    // shallow copied over onto the existing cache
    if ((typeof name === 'undefined' ? 'undefined' : (0, _typeof3.default)(name)) === 'object' || typeof name === 'function') {
      if (pvt) {
        cache[id] = jQuery.extend(cache[id], name);
      } else {
        cache[id].data = jQuery.extend(cache[id].data, name);
      }
    }

    thisCache = cache[id];

    // jQuery data() is stored in a separate object inside the object's internal data
    // cache in order to avoid key collisions between internal data and user-defined
    // data.
    if (!pvt) {
      if (!thisCache.data) {
        thisCache.data = {};
      }

      thisCache = thisCache.data;
    }

    if (data !== undefined) {
      thisCache[jQuery.camelCase(name)] = data;
    }

    // Check for both converted-to-camel and non-converted data property names
    // If a data property was specified
    if (getByName) {
      // First Try to find as-is property data
      ret = thisCache[name];

      // Test for null|undefined property data
      if (ret == null) {
        // Try to find the camelCased property
        ret = thisCache[jQuery.camelCase(name)];
      }
    } else {
      ret = thisCache;
    }

    return ret;
  }

  function internalRemoveData(elem, name, pvt) {
    if (!jQuery.acceptData(elem)) {
      return;
    }

    var i = void 0,
        l = void 0,
        thisCache = void 0,
        isNode = elem.nodeType,


    // See jQuery.data for more information
    cache = isNode ? jQuery.cache : elem,
        id = isNode ? elem[jQuery.expando] : jQuery.expando;

    // If there is already no cache entry for this object, there is no
    // purpose in continuing
    if (!cache[id]) {
      return;
    }

    if (name) {
      thisCache = pvt ? cache[id] : cache[id].data;

      if (thisCache) {
        // Support array or space separated string names for data keys
        if (!jQuery.isArray(name)) {
          // try the string as a key before any manipulation
          if (name in thisCache) {
            name = [name];
          } else {
            // split the camel cased version by spaces unless a key with the spaces exists
            name = jQuery.camelCase(name);
            if (name in thisCache) {
              name = [name];
            } else {
              name = name.split(' ');
            }
          }
        } else {
          // If "name" is an array of keys...
          // When data is initially created, via ("key", "val") signature,
          // keys will be converted to camelCase.
          // Since there is no way to tell _how_ a key was added, remove
          // both plain key and camelCase key. #12786
          // This will only penalize the array argument path.
          name = name.concat(jQuery.map(name, jQuery.camelCase));
        }

        for (i = 0, l = name.length; i < l; i++) {
          delete thisCache[name[i]];
        }

        // If there is no data left in the cache, we want to continue
        // and let the cache object itself get destroyed
        if (!(pvt ? isEmptyDataObject : jQuery.isEmptyObject)(thisCache)) {
          return;
        }
      }
    }

    // See jQuery.data for more information
    if (!pvt) {
      delete cache[id].data;

      // Don't destroy the parent cache unless the internal data object
      // had been the only thing left in it
      if (!isEmptyDataObject(cache[id])) {
        return;
      }
    }

    // Destroy the cache
    if (isNode) {
      jQuery.cleanData([elem], true);

      // Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)
    } else if (jQuery.support.deleteExpando || cache != cache.window) {
      delete cache[id];

      // When all else fails, null
    } else {
      cache[id] = null;
    }
  }

  jQuery.extend({
    cache: {},

    // Unique for each copy of jQuery on the page
    // Non-digits removed to match rinlinejQuery
    expando: 'jQuery' + (core_version + Math.random()).replace(/\D/g, ''),

    // The following elements throw uncatchable exceptions if you
    // attempt to add expando properties to them.
    noData: {
      'embed': true,
      // Ban all objects except for Flash (which handle expandos)
      'object': 'clsid:D27CDB6E-AE6D-11cf-96B8-444553540000',
      'applet': true
    },

    hasData: function hasData(elem) {
      elem = elem.nodeType ? jQuery.cache[elem[jQuery.expando]] : elem[jQuery.expando];
      return !!elem && !isEmptyDataObject(elem);
    },

    data: function data(elem, name, _data) {
      return internalData(elem, name, _data);
    },

    removeData: function removeData(elem, name) {
      return internalRemoveData(elem, name);
    },

    // For internal use only.
    _data: function _data(elem, name, data) {
      return internalData(elem, name, data, true);
    },

    _removeData: function _removeData(elem, name) {
      return internalRemoveData(elem, name, true);
    },

    // A method for determining if a DOM node can handle the data expando
    acceptData: function acceptData(elem) {
      // Do not set data on non-element because it will not be cleared (#8335).
      if (elem.nodeType && elem.nodeType !== 1 && elem.nodeType !== 9) {
        return false;
      }

      var noData = elem.nodeName && jQuery.noData[elem.nodeName.toLowerCase()];

      // nodes accept data unless otherwise specified; rejection can be conditional
      return !noData || noData !== true && elem.getAttribute('classid') === noData;
    }
  });

  jQuery.fn.extend({
    data: function data(key, value) {
      var attrs = void 0,
          name = void 0,
          elem = this[0],
          i = 0,
          data = null;

      // Gets all values
      if (key === undefined) {
        if (this.length) {
          data = jQuery.data(elem);

          if (elem.nodeType === 1 && !jQuery._data(elem, 'parsedAttrs')) {
            attrs = elem.attributes;
            for (; i < attrs.length; i++) {
              name = attrs[i].name;

              if (!name.indexOf('data-')) {
                name = jQuery.camelCase(name.slice(5));

                dataAttr(elem, name, data[name]);
              }
            }
            jQuery._data(elem, 'parsedAttrs', true);
          }
        }

        return data;
      }

      // Sets multiple values
      if ((typeof key === 'undefined' ? 'undefined' : (0, _typeof3.default)(key)) === 'object') {
        return this.each(function () {
          jQuery.data(this, key);
        });
      }

      return jQuery.access(this, function (value) {
        if (value === undefined) {
          // Try to fetch any internally stored data first
          return elem ? dataAttr(elem, key, jQuery.data(elem, key)) : null;
        }

        this.each(function () {
          jQuery.data(this, key, value);
        });
      }, null, value, arguments.length > 1, null, true);
    },

    removeData: function removeData(key) {
      return this.each(function () {
        jQuery.removeData(this, key);
      });
    }
  });

  function dataAttr(elem, key, data) {
    // If nothing was found internally, try to fetch any
    // data from the HTML5 data-* attribute
    if (data === undefined && elem.nodeType === 1) {
      var _name = 'data-' + key.replace(rmultiDash, '-$1').toLowerCase();

      data = elem.getAttribute(_name);

      if (typeof data === 'string') {
        try {
          data = data === 'true' ? true : data === 'false' ? false : data === 'null' ? null
          // Only convert to a number if it doesn't change the string
          : +data + '' === data ? +data : rbrace.test(data) ? jQuery.parseJSON(data) : data;
        } catch (e) {}

        // Make sure we set the data so it isn't changed later
        jQuery.data(elem, key, data);
      } else {
        data = undefined;
      }
    }

    return data;
  }

  // checks a cache object for emptiness
  function isEmptyDataObject(obj) {
    var name = void 0;
    for (name in obj) {
      // if the public data object is empty, the private is still empty
      if (name === 'data' && jQuery.isEmptyObject(obj[name])) {
        continue;
      }
      if (name !== 'toJSON') {
        return false;
      }
    }

    return true;
  }
  jQuery.extend({
    queue: function queue(elem, type, data) {
      var queue = void 0;

      if (elem) {
        type = (type || 'fx') + 'queue';
        queue = jQuery._data(elem, type);

        // Speed up dequeue by getting out quickly if this is just a lookup
        if (data) {
          if (!queue || jQuery.isArray(data)) {
            queue = jQuery._data(elem, type, jQuery.makeArray(data));
          } else {
            queue.push(data);
          }
        }
        return queue || [];
      }
    },

    dequeue: function dequeue(elem, type) {
      type = type || 'fx';

      var queue = jQuery.queue(elem, type),
          startLength = queue.length,
          fn = queue.shift(),
          hooks = jQuery._queueHooks(elem, type),
          next = function next() {
        jQuery.dequeue(elem, type);
      };

      // If the fx queue is dequeued, always remove the progress sentinel
      if (fn === 'inprogress') {
        fn = queue.shift();
        startLength--;
      }

      hooks.cur = fn;
      if (fn) {
        // Add a progress sentinel to prevent the fx queue from being
        // automatically dequeued
        if (type === 'fx') {
          queue.unshift('inprogress');
        }

        // clear up the last queue stop function
        delete hooks.stop;
        fn.call(elem, next, hooks);
      }

      if (!startLength && hooks) {
        hooks.empty.fire();
      }
    },

    // not intended for public consumption - generates a queueHooks object, or returns the current one
    _queueHooks: function _queueHooks(elem, type) {
      var key = type + 'queueHooks';
      return jQuery._data(elem, key) || jQuery._data(elem, key, {
        empty: jQuery.Callbacks('once memory').add(function () {
          jQuery._removeData(elem, type + 'queue');
          jQuery._removeData(elem, key);
        })
      });
    }
  });

  jQuery.fn.extend({
    queue: function queue(type, data) {
      var setter = 2;

      if (typeof type !== 'string') {
        data = type;
        type = 'fx';
        setter--;
      }

      if (arguments.length < setter) {
        return jQuery.queue(this[0], type);
      }

      return data === undefined ? this : this.each(function () {
        var queue = jQuery.queue(this, type, data);

        // ensure a hooks for this queue
        jQuery._queueHooks(this, type);

        if (type === 'fx' && queue[0] !== 'inprogress') {
          jQuery.dequeue(this, type);
        }
      });
    },
    dequeue: function dequeue(type) {
      return this.each(function () {
        jQuery.dequeue(this, type);
      });
    },
    // Based off of the plugin by Clint Helfers, with permission.
    // http://blindsignals.com/index.php/2009/07/jquery-delay/
    delay: function delay(time, type) {
      time = jQuery.fx ? jQuery.fx.speeds[time] || time : time;
      type = type || 'fx';

      return this.queue(type, function (next, hooks) {
        var timeout = setTimeout(next, time);
        hooks.stop = function () {
          clearTimeout(timeout);
        };
      });
    },
    clearQueue: function clearQueue(type) {
      return this.queue(type || 'fx', []);
    },
    // Get a promise resolved when queues of a certain type
    // are emptied (fx is the type by default)
    promise: function promise(type, obj) {
      var tmp = void 0,
          count = 1,
          defer = jQuery.Deferred(),
          elements = this,
          i = this.length,
          resolve = function resolve() {
        if (! --count) {
          defer.resolveWith(elements, [elements]);
        }
      };

      if (typeof type !== 'string') {
        obj = type;
        type = undefined;
      }
      type = type || 'fx';

      while (i--) {
        tmp = jQuery._data(elements[i], type + 'queueHooks');
        if (tmp && tmp.empty) {
          count++;
          tmp.empty.add(resolve);
        }
      }
      resolve();
      return defer.promise(obj);
    }
  });
  var nodeHook = void 0,
      boolHook = void 0,
      rclass = /[\t\r\n]/g,
      rreturn = /\r/g,
      rfocusable = /^(?:input|select|textarea|button|object)$/i,
      rclickable = /^(?:a|area)$/i,
      rboolean = /^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,
      ruseDefault = /^(?:checked|selected)$/i,
      getSetAttribute = jQuery.support.getSetAttribute,
      getSetInput = jQuery.support.input;

  jQuery.fn.extend({
    attr: function attr(name, value) {
      return jQuery.access(this, jQuery.attr, name, value, arguments.length > 1);
    },

    removeAttr: function removeAttr(name) {
      return this.each(function () {
        jQuery.removeAttr(this, name);
      });
    },

    prop: function prop(name, value) {
      return jQuery.access(this, jQuery.prop, name, value, arguments.length > 1);
    },

    removeProp: function removeProp(name) {
      name = jQuery.propFix[name] || name;
      return this.each(function () {
        // try/catch handles cases where IE balks (such as removing a property on window)
        try {
          this[name] = undefined;
          delete this[name];
        } catch (e) {}
      });
    },

    addClass: function addClass(value) {
      var classes = void 0,
          elem = void 0,
          cur = void 0,
          clazz = void 0,
          j = void 0,
          i = 0,
          len = this.length,
          proceed = typeof value === 'string' && value;

      if (jQuery.isFunction(value)) {
        return this.each(function (j) {
          jQuery(this).addClass(value.call(this, j, this.className));
        });
      }

      if (proceed) {
        // The disjunction here is for better compressibility (see removeClass)
        classes = (value || '').match(core_rnotwhite) || [];

        for (; i < len; i++) {
          elem = this[i];
          cur = elem.nodeType === 1 && (elem.className ? (' ' + elem.className + ' ').replace(rclass, ' ') : ' ');

          if (cur) {
            j = 0;
            while (clazz = classes[j++]) {
              if (cur.indexOf(' ' + clazz + ' ') < 0) {
                cur += clazz + ' ';
              }
            }
            elem.className = jQuery.trim(cur);
          }
        }
      }

      return this;
    },

    removeClass: function removeClass(value) {
      var classes = void 0,
          elem = void 0,
          cur = void 0,
          clazz = void 0,
          j = void 0,
          i = 0,
          len = this.length,
          proceed = arguments.length === 0 || typeof value === 'string' && value;

      if (jQuery.isFunction(value)) {
        return this.each(function (j) {
          jQuery(this).removeClass(value.call(this, j, this.className));
        });
      }
      if (proceed) {
        classes = (value || '').match(core_rnotwhite) || [];

        for (; i < len; i++) {
          elem = this[i];
          // This expression is here for better compressibility (see addClass)
          cur = elem.nodeType === 1 && (elem.className ? (' ' + elem.className + ' ').replace(rclass, ' ') : '');

          if (cur) {
            j = 0;
            while (clazz = classes[j++]) {
              // Remove *all* instances
              while (cur.indexOf(' ' + clazz + ' ') >= 0) {
                cur = cur.replace(' ' + clazz + ' ', ' ');
              }
            }
            elem.className = value ? jQuery.trim(cur) : '';
          }
        }
      }

      return this;
    },

    toggleClass: function toggleClass(value, stateVal) {
      var type = typeof value === 'undefined' ? 'undefined' : (0, _typeof3.default)(value),
          isBool = typeof stateVal === 'boolean';

      if (jQuery.isFunction(value)) {
        return this.each(function (i) {
          jQuery(this).toggleClass(value.call(this, i, this.className, stateVal), stateVal);
        });
      }

      return this.each(function () {
        if (type === 'string') {
          // toggle individual class names
          var className = void 0,
              i = 0,
              self = jQuery(this),
              state = stateVal,
              classNames = value.match(core_rnotwhite) || [];

          while (className = classNames[i++]) {
            // check each className given, space separated list
            state = isBool ? state : !self.hasClass(className);
            self[state ? 'addClass' : 'removeClass'](className);
          }

          // Toggle whole class name
        } else if (type === core_strundefined || type === 'boolean') {
          if (this.className) {
            // store className if set
            jQuery._data(this, '__className__', this.className);
          }

          // If the element has a class name or if we're passed "false",
          // then remove the whole classname (if there was one, the above saved it).
          // Otherwise bring back whatever was previously saved (if anything),
          // falling back to the empty string if nothing was stored.
          this.className = this.className || value === false ? '' : jQuery._data(this, '__className__') || '';
        }
      });
    },

    hasClass: function hasClass(selector) {
      var className = ' ' + selector + ' ',
          i = 0,
          l = this.length;
      for (; i < l; i++) {
        if (this[i].nodeType === 1 && (' ' + this[i].className + ' ').replace(rclass, ' ').indexOf(className) >= 0) {
          return true;
        }
      }

      return false;
    },

    val: function val(value) {
      var ret = void 0,
          hooks = void 0,
          isFunction = void 0,
          elem = this[0];

      if (!arguments.length) {
        if (elem) {
          hooks = jQuery.valHooks[elem.type] || jQuery.valHooks[elem.nodeName.toLowerCase()];

          if (hooks && 'get' in hooks && (ret = hooks.get(elem, 'value')) !== undefined) {
            return ret;
          }

          ret = elem.value;

          return typeof ret === 'string'
          // handle most common string cases
          ? ret.replace(rreturn, '')
          // handle cases where value is null/undef or number
          : ret == null ? '' : ret;
        }

        return;
      }

      isFunction = jQuery.isFunction(value);

      return this.each(function (i) {
        var val = void 0,
            self = jQuery(this);

        if (this.nodeType !== 1) {
          return;
        }

        if (isFunction) {
          val = value.call(this, i, self.val());
        } else {
          val = value;
        }

        // Treat null/undefined as ""; convert numbers to string
        if (val == null) {
          val = '';
        } else if (typeof val === 'number') {
          val += '';
        } else if (jQuery.isArray(val)) {
          val = jQuery.map(val, function (value) {
            return value == null ? '' : value + '';
          });
        }

        hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()];

        // If set returns undefined, fall back to normal setting
        if (!hooks || !('set' in hooks) || hooks.set(this, val, 'value') === undefined) {
          this.value = val;
        }
      });
    }
  });

  jQuery.extend({
    valHooks: {
      option: {
        get: function get(elem) {
          // attributes.value is undefined in Blackberry 4.7 but
          // uses .value. See #6932
          var val = elem.attributes.value;
          return !val || val.specified ? elem.value : elem.text;
        }
      },
      select: {
        get: function get(elem) {
          var value = void 0,
              option = void 0,
              options = elem.options,
              index = elem.selectedIndex,
              one = elem.type === 'select-one' || index < 0,
              values = one ? null : [],
              max = one ? index + 1 : options.length,
              i = index < 0 ? max : one ? index : 0;

          // Loop through all the selected options
          for (; i < max; i++) {
            option = options[i];

            // oldIE doesn't update selected after form reset (#2551)
            if ((option.selected || i === index) && (
            // Don't return options that are disabled or in a disabled optgroup
            jQuery.support.optDisabled ? !option.disabled : option.getAttribute('disabled') === null) && (!option.parentNode.disabled || !jQuery.nodeName(option.parentNode, 'optgroup'))) {
              // Get the specific value for the option
              value = jQuery(option).val();

              // We don't need an array for one selects
              if (one) {
                return value;
              }

              // Multi-Selects return an array
              values.push(value);
            }
          }

          return values;
        },

        set: function set(elem, value) {
          var values = jQuery.makeArray(value);

          jQuery(elem).find('option').each(function () {
            this.selected = jQuery.inArray(jQuery(this).val(), values) >= 0;
          });

          if (!values.length) {
            elem.selectedIndex = -1;
          }
          return values;
        }
      }
    },

    attr: function attr(elem, name, value) {
      var hooks = void 0,
          notxml = void 0,
          ret = void 0,
          nType = elem.nodeType;

      // don't get/set attributes on text, comment and attribute nodes
      if (!elem || nType === 3 || nType === 8 || nType === 2) {
        return;
      }

      // Fallback to prop when attributes are not supported
      if ((0, _typeof3.default)(elem.getAttribute) === core_strundefined) {
        return jQuery.prop(elem, name, value);
      }

      notxml = nType !== 1 || !jQuery.isXMLDoc(elem);

      // All attributes are lowercase
      // Grab necessary hook if one is defined
      if (notxml) {
        name = name.toLowerCase();
        hooks = jQuery.attrHooks[name] || (rboolean.test(name) ? boolHook : nodeHook);
      }

      if (value !== undefined) {
        if (value === null) {
          jQuery.removeAttr(elem, name);
        } else if (hooks && notxml && 'set' in hooks && (ret = hooks.set(elem, value, name)) !== undefined) {
          return ret;
        } else {
          elem.setAttribute(name, value + '');
          return value;
        }
      } else if (hooks && notxml && 'get' in hooks && (ret = hooks.get(elem, name)) !== null) {
        return ret;
      } else {
        // In IE9+, Flash objects don't have .getAttribute (#12945)
        // Support: IE9+
        if ((0, _typeof3.default)(elem.getAttribute) !== core_strundefined) {
          ret = elem.getAttribute(name);
        }

        // Non-existent attributes return null, we normalize to undefined
        return ret == null ? undefined : ret;
      }
    },

    removeAttr: function removeAttr(elem, value) {
      var name = void 0,
          propName = void 0,
          i = 0,
          attrNames = value && value.match(core_rnotwhite);

      if (attrNames && elem.nodeType === 1) {
        while (name = attrNames[i++]) {
          propName = jQuery.propFix[name] || name;

          // Boolean attributes get special treatment (#10870)
          if (rboolean.test(name)) {
            // Set corresponding property to false for boolean attributes
            // Also clear defaultChecked/defaultSelected (if appropriate) for IE<8
            if (!getSetAttribute && ruseDefault.test(name)) {
              elem[jQuery.camelCase('default-' + name)] = elem[propName] = false;
            } else {
              elem[propName] = false;
            }

            // See #9699 for explanation of this approach (setting first, then removal)
          } else {
            jQuery.attr(elem, name, '');
          }

          elem.removeAttribute(getSetAttribute ? name : propName);
        }
      }
    },

    attrHooks: {
      type: {
        set: function set(elem, value) {
          if (!jQuery.support.radioValue && value === 'radio' && jQuery.nodeName(elem, 'input')) {
            // Setting the type on a radio button after the value resets the value in IE6-9
            // Reset value to default in case type is set after value during creation
            var val = elem.value;
            elem.setAttribute('type', value);
            if (val) {
              elem.value = val;
            }
            return value;
          }
        }
      }
    },

    propFix: {
      tabindex: 'tabIndex',
      readonly: 'readOnly',
      'for': 'htmlFor',
      'class': 'className',
      maxlength: 'maxLength',
      cellspacing: 'cellSpacing',
      cellpadding: 'cellPadding',
      rowspan: 'rowSpan',
      colspan: 'colSpan',
      usemap: 'useMap',
      frameborder: 'frameBorder',
      contenteditable: 'contentEditable'
    },

    prop: function prop(elem, name, value) {
      var ret = void 0,
          hooks = void 0,
          notxml = void 0,
          nType = elem.nodeType;

      // don't get/set properties on text, comment and attribute nodes
      if (!elem || nType === 3 || nType === 8 || nType === 2) {
        return;
      }

      notxml = nType !== 1 || !jQuery.isXMLDoc(elem);

      if (notxml) {
        // Fix name and attach hooks
        name = jQuery.propFix[name] || name;
        hooks = jQuery.propHooks[name];
      }

      if (value !== undefined) {
        if (hooks && 'set' in hooks && (ret = hooks.set(elem, value, name)) !== undefined) {
          return ret;
        } else {
          return elem[name] = value;
        }
      } else {
        if (hooks && 'get' in hooks && (ret = hooks.get(elem, name)) !== null) {
          return ret;
        } else {
          return elem[name];
        }
      }
    },

    propHooks: {
      tabIndex: {
        get: function get(elem) {
          // elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set
          // http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
          var attributeNode = elem.getAttributeNode('tabindex');

          return attributeNode && attributeNode.specified ? parseInt(attributeNode.value, 10) : rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href ? 0 : undefined;
        }
      }
    }
  });

  // Hook for boolean attributes
  boolHook = {
    get: function get(elem, name) {
      var
      // Use .prop to determine if this attribute is understood as boolean
      prop = jQuery.prop(elem, name),


      // Fetch it accordingly
      attr = typeof prop === 'boolean' && elem.getAttribute(name),
          detail = typeof prop === 'boolean' ? getSetInput && getSetAttribute ? attr != null
      // oldIE fabricates an empty string for missing boolean attributes
      // and conflates checked/selected into attroperties
      : ruseDefault.test(name) ? elem[jQuery.camelCase('default-' + name)] : !!attr

      // fetch an attribute node for properties not recognized as boolean
      : elem.getAttributeNode(name);

      return detail && detail.value !== false ? name.toLowerCase() : undefined;
    },
    set: function set(elem, value, name) {
      if (value === false) {
        // Remove boolean attributes when set to false
        jQuery.removeAttr(elem, name);
      } else if (getSetInput && getSetAttribute || !ruseDefault.test(name)) {
        // IE<8 needs the *property* name
        elem.setAttribute(!getSetAttribute && jQuery.propFix[name] || name, name);

        // Use defaultChecked and defaultSelected for oldIE
      } else {
        elem[jQuery.camelCase('default-' + name)] = elem[name] = true;
      }

      return name;
    }
  };

  // fix oldIE value attroperty
  if (!getSetInput || !getSetAttribute) {
    jQuery.attrHooks.value = {
      get: function get(elem, name) {
        var ret = elem.getAttributeNode(name);
        return jQuery.nodeName(elem, 'input')

        // Ignore the value *property* by using defaultValue
        ? elem.defaultValue : ret && ret.specified ? ret.value : undefined;
      },
      set: function set(elem, value, name) {
        if (jQuery.nodeName(elem, 'input')) {
          // Does not return so that setAttribute is also used
          elem.defaultValue = value;
        } else {
          // Use nodeHook if defined (#1954); otherwise setAttribute is fine
          return nodeHook && nodeHook.set(elem, value, name);
        }
      }
    };
  }

  // IE6/7 do not support getting/setting some attributes with get/setAttribute
  if (!getSetAttribute) {
    // Use this for any attribute in IE6/7
    // This fixes almost every IE6/7 issue
    nodeHook = jQuery.valHooks.button = {
      get: function get(elem, name) {
        var ret = elem.getAttributeNode(name);
        return ret && (name === 'id' || name === 'name' || name === 'coords' ? ret.value !== '' : ret.specified) ? ret.value : undefined;
      },
      set: function set(elem, value, name) {
        // Set the existing or create a new attribute node
        var ret = elem.getAttributeNode(name);
        if (!ret) {
          elem.setAttributeNode(ret = elem.ownerDocument.createAttribute(name));
        }

        ret.value = value += '';

        // Break association with cloned elements by also using setAttribute (#9646)
        return name === 'value' || value === elem.getAttribute(name) ? value : undefined;
      }
    };

    // Set contenteditable to false on removals(#10429)
    // Setting to empty string throws an error as an invalid value
    jQuery.attrHooks.contenteditable = {
      get: nodeHook.get,
      set: function set(elem, value, name) {
        nodeHook.set(elem, value === '' ? false : value, name);
      }
    };

    // Set width and height to auto instead of 0 on empty string( Bug #8150 )
    // This is for removals
    jQuery.each(['width', 'height'], function (i, name) {
      jQuery.attrHooks[name] = jQuery.extend(jQuery.attrHooks[name], {
        set: function set(elem, value) {
          if (value === '') {
            elem.setAttribute(name, 'auto');
            return value;
          }
        }
      });
    });
  }

  // Some attributes require a special call on IE
  // http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
  if (!jQuery.support.hrefNormalized) {
    jQuery.each(['href', 'src', 'width', 'height'], function (i, name) {
      jQuery.attrHooks[name] = jQuery.extend(jQuery.attrHooks[name], {
        get: function get(elem) {
          var ret = elem.getAttribute(name, 2);
          return ret == null ? undefined : ret;
        }
      });
    });

    // href/src property should get the full normalized URL (#10299/#12915)
    jQuery.each(['href', 'src'], function (i, name) {
      jQuery.propHooks[name] = {
        get: function get(elem) {
          return elem.getAttribute(name, 4);
        }
      };
    });
  }

  if (!jQuery.support.style) {
    jQuery.attrHooks.style = {
      get: function get(elem) {
        // Return undefined in the case of empty string
        // Note: IE uppercases css property names, but if we were to .toLowerCase()
        // .cssText, that would destroy case senstitivity in URL's, like in "background"
        return elem.style.cssText || undefined;
      },
      set: function set(elem, value) {
        return elem.style.cssText = value + '';
      }
    };
  }

  // Safari mis-reports the default selected property of an option
  // Accessing the parent's selectedIndex property fixes it
  if (!jQuery.support.optSelected) {
    jQuery.propHooks.selected = jQuery.extend(jQuery.propHooks.selected, {
      get: function get(elem) {
        var parent = elem.parentNode;

        if (parent) {
          parent.selectedIndex;

          // Make sure that it also works with optgroups, see #5701
          if (parent.parentNode) {
            parent.parentNode.selectedIndex;
          }
        }
        return null;
      }
    });
  }

  // IE6/7 call enctype encoding
  if (!jQuery.support.enctype) {
    jQuery.propFix.enctype = 'encoding';
  }

  // Radios and checkboxes getter/setter
  if (!jQuery.support.checkOn) {
    jQuery.each(['radio', 'checkbox'], function () {
      jQuery.valHooks[this] = {
        get: function get(elem) {
          // Handle the case where in Webkit "" is returned instead of "on" if a value isn't specified
          return elem.getAttribute('value') === null ? 'on' : elem.value;
        }
      };
    });
  }
  jQuery.each(['radio', 'checkbox'], function () {
    jQuery.valHooks[this] = jQuery.extend(jQuery.valHooks[this], {
      set: function set(elem, value) {
        if (jQuery.isArray(value)) {
          return elem.checked = jQuery.inArray(jQuery(elem).val(), value) >= 0;
        }
      }
    });
  });
  var rformElems = /^(?:input|select|textarea)$/i,
      rkeyEvent = /^key/,
      rmouseEvent = /^(?:mouse|contextmenu)|click/,
      rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
      rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

  function returnTrue() {
    return true;
  }

  function returnFalse() {
    return false;
  }

  /*
  * Helper functions for managing events -- not part of the public interface.
  * Props to Dean Edwards' addEvent library for many of the ideas.
  */
  jQuery.event = {

    global: {},

    add: function add(elem, types, handler, data, selector) {
      var tmp = void 0,
          events = void 0,
          t = void 0,
          handleObjIn = void 0,
          special = void 0,
          eventHandle = void 0,
          handleObj = void 0,
          handlers = void 0,
          type = void 0,
          namespaces = void 0,
          origType = void 0,
          elemData = jQuery._data(elem);

      // Don't attach events to noData or text/comment nodes (but allow plain objects)
      if (!elemData) {
        return;
      }

      // Caller can pass in an object of custom data in lieu of the handler
      if (handler.handler) {
        handleObjIn = handler;
        handler = handleObjIn.handler;
        selector = handleObjIn.selector;
      }

      // Make sure that the handler has a unique ID, used to find/remove it later
      if (!handler.guid) {
        handler.guid = jQuery.guid++;
      }

      // Init the element's event structure and main handler, if this is the first
      if (!(events = elemData.events)) {
        events = elemData.events = {};
      }
      if (!(eventHandle = elemData.handle)) {
        eventHandle = elemData.handle = function (e) {
          // Discard the second event of a jQuery.event.trigger() and
          // when an event is called after a page has unloaded
          return (typeof jQuery === 'undefined' ? 'undefined' : (0, _typeof3.default)(jQuery)) !== core_strundefined && (!e || jQuery.event.triggered !== e.type) ? jQuery.event.dispatch.apply(eventHandle.elem, arguments) : undefined;
        };
        // Add elem as a property of the handle fn to prevent a memory leak with IE non-native events
        eventHandle.elem = elem;
      }

      // Handle multiple events separated by a space
      // jQuery(...).bind("mouseover mouseout", fn);
      types = (types || '').match(core_rnotwhite) || [''];
      t = types.length;
      while (t--) {
        tmp = rtypenamespace.exec(types[t]) || [];
        type = origType = tmp[1];
        namespaces = (tmp[2] || '').split('.').sort();

        // If event changes its type, use the special event handlers for the changed type
        special = jQuery.event.special[type] || {};

        // If selector defined, determine special event api type, otherwise given type
        type = (selector ? special.delegateType : special.bindType) || type;

        // Update special based on newly reset type
        special = jQuery.event.special[type] || {};

        // handleObj is passed to all event handlers
        handleObj = jQuery.extend({
          type: type,
          origType: origType,
          data: data,
          handler: handler,
          guid: handler.guid,
          selector: selector,
          needsContext: selector && jQuery.expr.match.needsContext.test(selector),
          namespace: namespaces.join('.')
        }, handleObjIn);

        // Init the event handler queue if we're the first
        if (!(handlers = events[type])) {
          handlers = events[type] = [];
          handlers.delegateCount = 0;

          // Only use addEventListener/attachEvent if the special events handler returns false
          if (!special.setup || special.setup.call(elem, data, namespaces, eventHandle) === false) {
            // Bind the global event handler to the element
            if (elem.addEventListener) {
              elem.addEventListener(type, eventHandle, false);
            } else if (elem.attachEvent) {
              elem.attachEvent('on' + type, eventHandle);
            }
          }
        }

        if (special.add) {
          special.add.call(elem, handleObj);

          if (!handleObj.handler.guid) {
            handleObj.handler.guid = handler.guid;
          }
        }

        // Add to the element's handler list, delegates in front
        if (selector) {
          handlers.splice(handlers.delegateCount++, 0, handleObj);
        } else {
          handlers.push(handleObj);
        }

        // Keep track of which events have ever been used, for event optimization
        jQuery.event.global[type] = true;
      }

      // Nullify elem to prevent memory leaks in IE
      elem = null;
    },

    // Detach an event or set of events from an element
    remove: function remove(elem, types, handler, selector, mappedTypes) {
      var j = void 0,
          handleObj = void 0,
          tmp = void 0,
          origCount = void 0,
          t = void 0,
          events = void 0,
          special = void 0,
          handlers = void 0,
          type = void 0,
          namespaces = void 0,
          origType = void 0,
          elemData = jQuery.hasData(elem) && jQuery._data(elem);

      if (!elemData || !(events = elemData.events)) {
        return;
      }

      // Once for each type.namespace in types; type may be omitted
      types = (types || '').match(core_rnotwhite) || [''];
      t = types.length;
      while (t--) {
        tmp = rtypenamespace.exec(types[t]) || [];
        type = origType = tmp[1];
        namespaces = (tmp[2] || '').split('.').sort();

        // Unbind all events (on this namespace, if provided) for the element
        if (!type) {
          for (type in events) {
            jQuery.event.remove(elem, type + types[t], handler, selector, true);
          }
          continue;
        }

        special = jQuery.event.special[type] || {};
        type = (selector ? special.delegateType : special.bindType) || type;
        handlers = events[type] || [];
        tmp = tmp[2] && new RegExp('(^|\\.)' + namespaces.join('\\.(?:.*\\.|)') + '(\\.|$)');

        // Remove matching events
        origCount = j = handlers.length;
        while (j--) {
          handleObj = handlers[j];

          if ((mappedTypes || origType === handleObj.origType) && (!handler || handler.guid === handleObj.guid) && (!tmp || tmp.test(handleObj.namespace)) && (!selector || selector === handleObj.selector || selector === '**' && handleObj.selector)) {
            handlers.splice(j, 1);

            if (handleObj.selector) {
              handlers.delegateCount--;
            }
            if (special.remove) {
              special.remove.call(elem, handleObj);
            }
          }
        }

        // Remove generic event handler if we removed something and no more handlers exist
        // (avoids potential for endless recursion during removal of special event handlers)
        if (origCount && !handlers.length) {
          if (!special.teardown || special.teardown.call(elem, namespaces, elemData.handle) === false) {
            jQuery.removeEvent(elem, type, elemData.handle);
          }

          delete events[type];
        }
      }

      // Remove the expando if it's no longer used
      if (jQuery.isEmptyObject(events)) {
        delete elemData.handle;

        // removeData also checks for emptiness and clears the expando if empty
        // so use it instead of delete
        jQuery._removeData(elem, 'events');
      }
    },

    trigger: function trigger(event, data, elem, onlyHandlers) {
      var handle = void 0,
          ontype = void 0,
          cur = void 0,
          bubbleType = void 0,
          special = void 0,
          tmp = void 0,
          i = void 0,
          eventPath = [elem || document],
          type = core_hasOwn.call(event, 'type') ? event.type : event,
          namespaces = core_hasOwn.call(event, 'namespace') ? event.namespace.split('.') : [];

      cur = tmp = elem = elem || document;

      // Don't do events on text and comment nodes
      if (elem.nodeType === 3 || elem.nodeType === 8) {
        return;
      }

      // focus/blur morphs to focusin/out; ensure we're not firing them right now
      if (rfocusMorph.test(type + jQuery.event.triggered)) {
        return;
      }

      if (type.indexOf('.') >= 0) {
        // Namespaced trigger; create a regexp to match event type in handle()
        namespaces = type.split('.');
        type = namespaces.shift();
        namespaces.sort();
      }
      ontype = type.indexOf(':') < 0 && 'on' + type;

      // Caller can pass in a jQuery.Event object, Object, or just an event type string
      event = event[jQuery.expando] ? event : new jQuery.Event(type, (typeof event === 'undefined' ? 'undefined' : (0, _typeof3.default)(event)) === 'object' && event);

      event.isTrigger = true;
      event.namespace = namespaces.join('.');
      event.namespace_re = event.namespace ? new RegExp('(^|\\.)' + namespaces.join('\\.(?:.*\\.|)') + '(\\.|$)') : null;

      // Clean up the event in case it is being reused
      event.result = undefined;
      if (!event.target) {
        event.target = elem;
      }

      // Clone any incoming data and prepend the event, creating the handler arg list
      data = data == null ? [event] : jQuery.makeArray(data, [event]);

      // Allow special events to draw outside the lines
      special = jQuery.event.special[type] || {};
      if (!onlyHandlers && special.trigger && special.trigger.apply(elem, data) === false) {
        return;
      }

      // Determine event propagation path in advance, per W3C events spec (#9951)
      // Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
      if (!onlyHandlers && !special.noBubble && !jQuery.isWindow(elem)) {
        bubbleType = special.delegateType || type;
        if (!rfocusMorph.test(bubbleType + type)) {
          cur = cur.parentNode;
        }
        for (; cur; cur = cur.parentNode) {
          eventPath.push(cur);
          tmp = cur;
        }

        // Only add window if we got to document (e.g., not plain obj or detached DOM)
        if (tmp === (elem.ownerDocument || document)) {
          eventPath.push(tmp.defaultView || tmp.parentWindow || window);
        }
      }

      // Fire handlers on the event path
      i = 0;
      while ((cur = eventPath[i++]) && !event.isPropagationStopped()) {
        event.type = i > 1 ? bubbleType : special.bindType || type;

        // jQuery handler
        handle = (jQuery._data(cur, 'events') || {})[event.type] && jQuery._data(cur, 'handle');
        if (handle) {
          handle.apply(cur, data);
        }

        // Native handler
        handle = ontype && cur[ontype];
        if (handle && jQuery.acceptData(cur) && handle.apply && handle.apply(cur, data) === false) {
          event.preventDefault();
        }
      }
      event.type = type;

      // If nobody prevented the default action, do it now
      if (!onlyHandlers && !event.isDefaultPrevented()) {
        if ((!special._default || special._default.apply(elem.ownerDocument, data) === false) && !(type === 'click' && jQuery.nodeName(elem, 'a')) && jQuery.acceptData(elem)) {
          // Call a native DOM method on the target with the same name name as the event.
          // Can't use an .isFunction() check here because IE6/7 fails that test.
          // Don't do default actions on window, that's where global variables be (#6170)
          if (ontype && elem[type] && !jQuery.isWindow(elem)) {
            // Don't re-trigger an onFOO event when we call its FOO() method
            tmp = elem[ontype];

            if (tmp) {
              elem[ontype] = null;
            }

            // Prevent re-triggering of the same event, since we already bubbled it above
            jQuery.event.triggered = type;
            try {
              elem[type]();
            } catch (e) {
              // IE<9 dies on focus/blur to hidden element (#1486,#12518)
              // only reproducible on winXP IE8 native, not IE9 in IE8 mode
            }
            jQuery.event.triggered = undefined;

            if (tmp) {
              elem[ontype] = tmp;
            }
          }
        }
      }

      return event.result;
    },

    dispatch: function dispatch(event) {
      // Make a writable jQuery.Event from the native event object
      event = jQuery.event.fix(event);

      var i = void 0,
          ret = void 0,
          handleObj = void 0,
          matched = void 0,
          j = void 0,
          handlerQueue = [],
          args = core_slice.call(arguments),
          handlers = (jQuery._data(this, 'events') || {})[event.type] || [],
          special = jQuery.event.special[event.type] || {};

      // Use the fix-ed jQuery.Event rather than the (read-only) native event
      args[0] = event;
      event.delegateTarget = this;

      // Call the preDispatch hook for the mapped type, and let it bail if desired
      if (special.preDispatch && special.preDispatch.call(this, event) === false) {
        return;
      }

      // Determine handlers
      handlerQueue = jQuery.event.handlers.call(this, event, handlers);

      // Run delegates first; they may want to stop propagation beneath us
      i = 0;
      while ((matched = handlerQueue[i++]) && !event.isPropagationStopped()) {
        event.currentTarget = matched.elem;

        j = 0;
        while ((handleObj = matched.handlers[j++]) && !event.isImmediatePropagationStopped()) {
          // Triggered event must either 1) have no namespace, or
          // 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
          if (!event.namespace_re || event.namespace_re.test(handleObj.namespace)) {
            event.handleObj = handleObj;
            event.data = handleObj.data;

            ret = ((jQuery.event.special[handleObj.origType] || {}).handle || handleObj.handler).apply(matched.elem, args);

            if (ret !== undefined) {
              if ((event.result = ret) === false) {
                event.preventDefault();
                event.stopPropagation();
              }
            }
          }
        }
      }

      // Call the postDispatch hook for the mapped type
      if (special.postDispatch) {
        special.postDispatch.call(this, event);
      }

      return event.result;
    },

    handlers: function handlers(event, _handlers) {
      var sel = void 0,
          handleObj = void 0,
          matches = void 0,
          i = void 0,
          handlerQueue = [],
          delegateCount = _handlers.delegateCount,
          cur = event.target;

      // Find delegate handlers
      // Black-hole SVG <use> instance trees (#13180)
      // Avoid non-left-click bubbling in Firefox (#3861)
      if (delegateCount && cur.nodeType && (!event.button || event.type !== 'click')) {
        for (; cur != this; cur = cur.parentNode || this) {
          // Don't check non-elements (#13208)
          // Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
          if (cur.nodeType === 1 && (cur.disabled !== true || event.type !== 'click')) {
            matches = [];
            for (i = 0; i < delegateCount; i++) {
              handleObj = _handlers[i];

              // Don't conflict with Object.prototype properties (#13203)
              sel = handleObj.selector + ' ';

              if (matches[sel] === undefined) {
                matches[sel] = handleObj.needsContext ? jQuery(sel, this).index(cur) >= 0 : jQuery.find(sel, this, null, [cur]).length;
              }
              if (matches[sel]) {
                matches.push(handleObj);
              }
            }
            if (matches.length) {
              handlerQueue.push({ elem: cur, handlers: matches });
            }
          }
        }
      }

      // Add the remaining (directly-bound) handlers
      if (delegateCount < _handlers.length) {
        handlerQueue.push({ elem: this, handlers: _handlers.slice(delegateCount) });
      }

      return handlerQueue;
    },

    fix: function fix(event) {
      if (event[jQuery.expando]) {
        return event;
      }

      // Create a writable copy of the event object and normalize some properties
      var i = void 0,
          prop = void 0,
          copy = void 0,
          type = event.type,
          originalEvent = event,
          fixHook = this.fixHooks[type];

      if (!fixHook) {
        this.fixHooks[type] = fixHook = rmouseEvent.test(type) ? this.mouseHooks : rkeyEvent.test(type) ? this.keyHooks : {};
      }
      copy = fixHook.props ? this.props.concat(fixHook.props) : this.props;

      event = new jQuery.Event(originalEvent);

      i = copy.length;
      while (i--) {
        prop = copy[i];
        event[prop] = originalEvent[prop];
      }

      // Support: IE<9
      // Fix target property (#1925)
      if (!event.target) {
        event.target = originalEvent.srcElement || document;
      }

      // Support: Chrome 23+, Safari?
      // Target should not be a text node (#504, #13143)
      if (event.target.nodeType === 3) {
        event.target = event.target.parentNode;
      }

      // Support: IE<9
      // For mouse/key events, metaKey==false if it's undefined (#3368, #11328)
      event.metaKey = !!event.metaKey;

      return fixHook.filter ? fixHook.filter(event, originalEvent) : event;
    },

    // Includes some event props shared by KeyEvent and MouseEvent
    props: 'altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which'.split(' '),

    fixHooks: {},

    keyHooks: {
      props: 'char charCode key keyCode'.split(' '),
      filter: function filter(event, original) {
        // Add which for key events
        if (event.which == null) {
          event.which = original.charCode != null ? original.charCode : original.keyCode;
        }

        return event;
      }
    },

    mouseHooks: {
      props: 'button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement'.split(' '),
      filter: function filter(event, original) {
        var body = void 0,
            eventDoc = void 0,
            doc = void 0,
            button = original.button,
            fromElement = original.fromElement;

        // Calculate pageX/Y if missing and clientX/Y available
        if (event.pageX == null && original.clientX != null) {
          eventDoc = event.target.ownerDocument || document;
          doc = eventDoc.documentElement;
          body = eventDoc.body;

          event.pageX = original.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);
          event.pageY = original.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);
        }

        // Add relatedTarget, if necessary
        if (!event.relatedTarget && fromElement) {
          event.relatedTarget = fromElement === event.target ? original.toElement : fromElement;
        }

        // Add which for click: 1 === left; 2 === middle; 3 === right
        // Note: button is not normalized, so don't use it
        if (!event.which && button !== undefined) {
          event.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;
        }

        return event;
      }
    },

    special: {
      load: {
        // Prevent triggered image.load events from bubbling to window.load
        noBubble: true
      },
      click: {
        // For checkbox, fire native event so checked state will be right
        trigger: function trigger() {
          if (jQuery.nodeName(this, 'input') && this.type === 'checkbox' && this.click) {
            this.click();
            return false;
          }
        }
      },
      focus: {
        // Fire native event if possible so blur/focus sequence is correct
        trigger: function trigger() {
          if (this !== document.activeElement && this.focus) {
            try {
              this.focus();
              return false;
            } catch (e) {
              // Support: IE<9
              // If we error on focus to hidden element (#1486, #12518),
              // let .trigger() run the handlers
            }
          }
        },
        delegateType: 'focusin'
      },
      blur: {
        trigger: function trigger() {
          if (this === document.activeElement && this.blur) {
            this.blur();
            return false;
          }
        },
        delegateType: 'focusout'
      },

      beforeunload: {
        postDispatch: function postDispatch(event) {
          // Even when returnValue equals to undefined Firefox will still show alert
          if (event.result !== undefined) {
            event.originalEvent.returnValue = event.result;
          }
        }
      }
    },

    simulate: function simulate(type, elem, event, bubble) {
      // Piggyback on a donor event to simulate a different one.
      // Fake originalEvent to avoid donor's stopPropagation, but if the
      // simulated event prevents default then we do the same on the donor.
      var e = jQuery.extend(new jQuery.Event(), event, { type: type,
        isSimulated: true,
        originalEvent: {}
      });
      if (bubble) {
        jQuery.event.trigger(e, null, elem);
      } else {
        jQuery.event.dispatch.call(elem, e);
      }
      if (e.isDefaultPrevented()) {
        event.preventDefault();
      }
    }
  };

  jQuery.removeEvent = document.removeEventListener ? function (elem, type, handle) {
    if (elem.removeEventListener) {
      elem.removeEventListener(type, handle, false);
    }
  } : function (elem, type, handle) {
    var name = 'on' + type;

    if (elem.detachEvent) {
      // #8545, #7054, preventing memory leaks for custom events in IE6-8
      // detachEvent needed property on element, by name of that event, to properly expose it to GC
      if ((0, _typeof3.default)(elem[name]) === core_strundefined) {
        elem[name] = null;
      }

      elem.detachEvent(name, handle);
    }
  };

  jQuery.Event = function (src, props) {
    // Allow instantiation without the 'new' keyword
    if (!(this instanceof jQuery.Event)) {
      return new jQuery.Event(src, props);
    }

    // Event object
    if (src && src.type) {
      this.originalEvent = src;
      this.type = src.type;

      // Events bubbling up the document may have been marked as prevented
      // by a handler lower down the tree; reflect the correct value.
      this.isDefaultPrevented = src.defaultPrevented || src.returnValue === false || src.getPreventDefault && src.getPreventDefault() ? returnTrue : returnFalse;

      // Event type
    } else {
      this.type = src;
    }

    // Put explicitly provided properties onto the event object
    if (props) {
      jQuery.extend(this, props);
    }

    // Create a timestamp if incoming event doesn't have one
    this.timeStamp = src && src.timeStamp || jQuery.now();

    // Mark it as fixed
    this[jQuery.expando] = true;
  };

  // jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
  // http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
  jQuery.Event.prototype = {
    isDefaultPrevented: returnFalse,
    isPropagationStopped: returnFalse,
    isImmediatePropagationStopped: returnFalse,

    preventDefault: function preventDefault() {
      var e = this.originalEvent;

      this.isDefaultPrevented = returnTrue;
      if (!e) {
        return;
      }

      // If preventDefault exists, run it on the original event
      if (e.preventDefault) {
        e.preventDefault();

        // Support: IE
        // Otherwise set the returnValue property of the original event to false
      } else {
        e.returnValue = false;
      }
    },
    stopPropagation: function stopPropagation() {
      var e = this.originalEvent;

      this.isPropagationStopped = returnTrue;
      if (!e) {
        return;
      }
      // If stopPropagation exists, run it on the original event
      if (e.stopPropagation) {
        e.stopPropagation();
      }

      // Support: IE
      // Set the cancelBubble property of the original event to true
      e.cancelBubble = true;
    },
    stopImmediatePropagation: function stopImmediatePropagation() {
      this.isImmediatePropagationStopped = returnTrue;
      this.stopPropagation();
    }
  };

  // Create mouseenter/leave events using mouseover/out and event-time checks
  jQuery.each({
    mouseenter: 'mouseover',
    mouseleave: 'mouseout'
  }, function (orig, fix) {
    jQuery.event.special[orig] = {
      delegateType: fix,
      bindType: fix,

      handle: function handle(event) {
        var ret = void 0,
            target = this,
            related = event.relatedTarget,
            handleObj = event.handleObj;

        // For mousenter/leave call the handler if related is outside the target.
        // NB: No relatedTarget if the mouse left/entered the browser window
        if (!related || related !== target && !jQuery.contains(target, related)) {
          event.type = handleObj.origType;
          ret = handleObj.handler.apply(this, arguments);
          event.type = fix;
        }
        return ret;
      }
    };
  });

  // IE submit delegation
  if (!jQuery.support.submitBubbles) {
    jQuery.event.special.submit = {
      setup: function setup() {
        // Only need this for delegated form submit events
        if (jQuery.nodeName(this, 'form')) {
          return false;
        }

        // Lazy-add a submit handler when a descendant form may potentially be submitted
        jQuery.event.add(this, 'click._submit keypress._submit', function (e) {
          // Node name check avoids a VML-related crash in IE (#9807)
          var elem = e.target,
              form = jQuery.nodeName(elem, 'input') || jQuery.nodeName(elem, 'button') ? elem.form : undefined;
          if (form && !jQuery._data(form, 'submitBubbles')) {
            jQuery.event.add(form, 'submit._submit', function (event) {
              event._submit_bubble = true;
            });
            jQuery._data(form, 'submitBubbles', true);
          }
        });
        // return undefined since we don't need an event listener
      },

      postDispatch: function postDispatch(event) {
        // If form was submitted by the user, bubble the event up the tree
        if (event._submit_bubble) {
          delete event._submit_bubble;
          if (this.parentNode && !event.isTrigger) {
            jQuery.event.simulate('submit', this.parentNode, event, true);
          }
        }
      },

      teardown: function teardown() {
        // Only need this for delegated form submit events
        if (jQuery.nodeName(this, 'form')) {
          return false;
        }

        // Remove delegated handlers; cleanData eventually reaps submit handlers attached above
        jQuery.event.remove(this, '._submit');
      }
    };
  }

  // IE change delegation and checkbox/radio fix
  if (!jQuery.support.changeBubbles) {
    jQuery.event.special.change = {

      setup: function setup() {
        if (rformElems.test(this.nodeName)) {
          // IE doesn't fire change on a check/radio until blur; trigger it on click
          // after a propertychange. Eat the blur-change in special.change.handle.
          // This still fires onchange a second time for check/radio after blur.
          if (this.type === 'checkbox' || this.type === 'radio') {
            jQuery.event.add(this, 'propertychange._change', function (event) {
              if (event.originalEvent.propertyName === 'checked') {
                this._just_changed = true;
              }
            });
            jQuery.event.add(this, 'click._change', function (event) {
              if (this._just_changed && !event.isTrigger) {
                this._just_changed = false;
              }
              // Allow triggered, simulated change events (#11500)
              jQuery.event.simulate('change', this, event, true);
            });
          }
          return false;
        }
        // Delegated event; lazy-add a change handler on descendant inputs
        jQuery.event.add(this, 'beforeactivate._change', function (e) {
          var elem = e.target;

          if (rformElems.test(elem.nodeName) && !jQuery._data(elem, 'changeBubbles')) {
            jQuery.event.add(elem, 'change._change', function (event) {
              if (this.parentNode && !event.isSimulated && !event.isTrigger) {
                jQuery.event.simulate('change', this.parentNode, event, true);
              }
            });
            jQuery._data(elem, 'changeBubbles', true);
          }
        });
      },

      handle: function handle(event) {
        var elem = event.target;

        // Swallow native change events from checkbox/radio, we already triggered them above
        if (this !== elem || event.isSimulated || event.isTrigger || elem.type !== 'radio' && elem.type !== 'checkbox') {
          return event.handleObj.handler.apply(this, arguments);
        }
      },

      teardown: function teardown() {
        jQuery.event.remove(this, '._change');

        return !rformElems.test(this.nodeName);
      }
    };
  }

  // Create "bubbling" focus and blur events
  if (!jQuery.support.focusinBubbles) {
    jQuery.each({ focus: 'focusin', blur: 'focusout' }, function (orig, fix) {
      // Attach a single capturing handler while someone wants focusin/focusout
      var attaches = 0,
          handler = function handler(event) {
        jQuery.event.simulate(fix, event.target, jQuery.event.fix(event), true);
      };

      jQuery.event.special[fix] = {
        setup: function setup() {
          if (attaches++ === 0) {
            document.addEventListener(orig, handler, true);
          }
        },
        teardown: function teardown() {
          if (--attaches === 0) {
            document.removeEventListener(orig, handler, true);
          }
        }
      };
    });
  }

  jQuery.fn.extend({

    on: function on(types, selector, data, fn, /* INTERNAL */one) {
      var type = void 0,
          origFn = void 0;

      // Types can be a map of types/handlers
      if ((typeof types === 'undefined' ? 'undefined' : (0, _typeof3.default)(types)) === 'object') {
        // ( types-Object, selector, data )
        if (typeof selector !== 'string') {
          // ( types-Object, data )
          data = data || selector;
          selector = undefined;
        }
        for (type in types) {
          this.on(type, selector, data, types[type], one);
        }
        return this;
      }

      if (data == null && fn == null) {
        // ( types, fn )
        fn = selector;
        data = selector = undefined;
      } else if (fn == null) {
        if (typeof selector === 'string') {
          // ( types, selector, fn )
          fn = data;
          data = undefined;
        } else {
          // ( types, data, fn )
          fn = data;
          data = selector;
          selector = undefined;
        }
      }
      if (fn === false) {
        fn = returnFalse;
      } else if (!fn) {
        return this;
      }

      if (one === 1) {
        origFn = fn;
        fn = function fn(event) {
          // Can use an empty set, since event contains the info
          jQuery().off(event);
          return origFn.apply(this, arguments);
        };
        // Use same guid so caller can remove using origFn
        fn.guid = origFn.guid || (origFn.guid = jQuery.guid++);
      }
      return this.each(function () {
        jQuery.event.add(this, types, fn, data, selector);
      });
    },
    one: function one(types, selector, data, fn) {
      return this.on(types, selector, data, fn, 1);
    },
    off: function off(types, selector, fn) {
      var handleObj = void 0,
          type = void 0;
      if (types && types.preventDefault && types.handleObj) {
        // ( event )  dispatched jQuery.Event
        handleObj = types.handleObj;
        jQuery(types.delegateTarget).off(handleObj.namespace ? handleObj.origType + '.' + handleObj.namespace : handleObj.origType, handleObj.selector, handleObj.handler);
        return this;
      }
      if ((typeof types === 'undefined' ? 'undefined' : (0, _typeof3.default)(types)) === 'object') {
        // ( types-object [, selector] )
        for (type in types) {
          this.off(type, selector, types[type]);
        }
        return this;
      }
      if (selector === false || typeof selector === 'function') {
        // ( types [, fn] )
        fn = selector;
        selector = undefined;
      }
      if (fn === false) {
        fn = returnFalse;
      }
      return this.each(function () {
        jQuery.event.remove(this, types, fn, selector);
      });
    },

    bind: function bind(types, data, fn) {
      return this.on(types, null, data, fn);
    },
    unbind: function unbind(types, fn) {
      return this.off(types, null, fn);
    },

    delegate: function delegate(selector, types, data, fn) {
      return this.on(types, selector, data, fn);
    },
    undelegate: function undelegate(selector, types, fn) {
      // ( namespace ) or ( selector, types [, fn] )
      return arguments.length === 1 ? this.off(selector, '**') : this.off(types, selector || '**', fn);
    },

    trigger: function trigger(type, data) {
      return this.each(function () {
        jQuery.event.trigger(type, data, this);
      });
    },
    triggerHandler: function triggerHandler(type, data) {
      var elem = this[0];
      if (elem) {
        return jQuery.event.trigger(type, data, elem, true);
      }
    }
  });
  /*!
  * Sizzle CSS Selector Engine
  * Copyright 2012 jQuery Foundation and other contributors
  * Released under the MIT license
  * http://sizzlejs.com/
  */
  (function (window, undefined) {
    var i = void 0,
        cachedruns = void 0,
        Expr = void 0,
        getText = void 0,
        isXML = void 0,
        compile = void 0,
        hasDuplicate = void 0,
        outermostContext = void 0,


    // Local document vars
    setDocument = void 0,
        document = void 0,
        docElem = void 0,
        documentIsXML = void 0,
        rbuggyQSA = void 0,
        rbuggyMatches = void 0,
        matches = void 0,
        contains = void 0,
        sortOrder = void 0,


    // Instance-specific data
    expando = 'sizzle' + -new Date(),
        preferredDoc = window.document,
        support = {},
        dirruns = 0,
        done = 0,
        classCache = createCache(),
        tokenCache = createCache(),
        compilerCache = createCache(),


    // General-purpose constants
    strundefined = typeof undefined === 'undefined' ? 'undefined' : (0, _typeof3.default)(undefined),
        MAX_NEGATIVE = 1 << 31,


    // Array methods
    arr = [],
        pop = arr.pop,
        push = arr.push,
        slice = arr.slice,

    // Use a stripped-down indexOf if we can't use a native one
    indexOf = arr.indexOf || function (elem) {
      var i = 0,
          len = this.length;
      for (; i < len; i++) {
        if (this[i] === elem) {
          return i;
        }
      }
      return -1;
    },


    // Regular expressions

    // Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
    whitespace = '[\\x20\\t\\r\\n\\f]',

    // http://www.w3.org/TR/css3-syntax/#characters
    characterEncoding = '(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+',


    // Loosely modeled on CSS identifier characters
    // An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
    // Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
    identifier = characterEncoding.replace('w', 'w#'),


    // Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors
    operators = '([*^$|!~]?=)',
        attributes = '\\[' + whitespace + '*(' + characterEncoding + ')' + whitespace + '*(?:' + operators + whitespace + '*(?:([\'"])((?:\\\\.|[^\\\\])*?)\\3|(' + identifier + ')|)|)' + whitespace + '*\\]',


    // Prefer arguments quoted,
    //   then not containing pseudos/brackets,
    //   then attribute selectors/non-parenthetical expressions,
    //   then anything else
    // These preferences are here to reduce the number of selectors
    //   needing tokenize in the PSEUDO preFilter
    pseudos = ':(' + characterEncoding + ')(?:\\((([\'"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|' + attributes.replace(3, 8) + ')*)|.*)\\)|)',


    // Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
    rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\])(?:\\\\.)*)' + whitespace + '+$', 'g'),
        rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'),
        rcombinators = new RegExp('^' + whitespace + '*([\\x20\\t\\r\\n\\f>+~])' + whitespace + '*'),
        rpseudo = new RegExp(pseudos),
        ridentifier = new RegExp('^' + identifier + '$'),
        matchExpr = {
      'ID': new RegExp('^#(' + characterEncoding + ')'),
      'CLASS': new RegExp('^\\.(' + characterEncoding + ')'),
      'NAME': new RegExp('^\\[name=[\'"]?(' + characterEncoding + ')[\'"]?\\]'),
      'TAG': new RegExp('^(' + characterEncoding.replace('w', 'w*') + ')'),
      'ATTR': new RegExp('^' + attributes),
      'PSEUDO': new RegExp('^' + pseudos),
      'CHILD': new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(' + whitespace + '*(even|odd|(([+-]|)(\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\d+)|))' + whitespace + '*\\)|)', 'i'),
      // For use in libraries implementing .is()
      // We use this for POS matching in `select`
      'needsContext': new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(' + whitespace + '*((?:-\\d)?\\d*)' + whitespace + '*\\)|)(?=[^-]|$)', 'i')
    },
        rsibling = /[\x20\t\r\n\f]*[+~]/,
        rnative = /^[^{]+\{\s*\[native code/,


    // Easily-parseable/retrievable ID or TAG or CLASS selectors
    rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
        rinputs = /^(?:input|select|textarea|button)$/i,
        rheader = /^h\d$/i,
        rescape = /'|\\/g,
        rattributeQuotes = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,


    // CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
    runescape = /\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,
        funescape = function funescape(_, escaped) {
      var high = '0x' + escaped - 0x10000;
      // NaN means non-codepoint
      return high !== high ? escaped
      // BMP codepoint
      : high < 0 ? String.fromCharCode(high + 0x10000)
      // Supplemental Plane codepoint (surrogate pair)
      : String.fromCharCode(high >> 10 | 0xD800, high & 0x3FF | 0xDC00);
    };

    // Use a stripped-down slice if we can't use a native one
    try {
      slice.call(preferredDoc.documentElement.childNodes, 0)[0].nodeType;
    } catch (e) {
      slice = function slice(i) {
        var elem = void 0,
            results = [];
        while (elem = this[i++]) {
          results.push(elem);
        }
        return results;
      };
    }

    /**
    * For feature detection
    * @param {Function} fn The function to test for native support
    */
    function isNative(fn) {
      return rnative.test(fn + '');
    }

    /**
    * Create key-value caches of limited size
    * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
    *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
    *	deleting the oldest entry
    */
    function createCache() {
      var _cache = void 0,
          keys = [];

      return _cache = function cache(key, value) {
        // Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
        if (keys.push(key += ' ') > Expr.cacheLength) {
          // Only keep the most recent entries
          delete _cache[keys.shift()];
        }
        return _cache[key] = value;
      };
    }

    /**
    * Mark a function for special use by Sizzle
    * @param {Function} fn The function to mark
    */
    function markFunction(fn) {
      fn[expando] = true;
      return fn;
    }

    /**
    * Support testing using an element
    * @param {Function} fn Passed the created div and expects a boolean result
    */
    function assert(fn) {
      var div = document.createElement('div');

      try {
        return fn(div);
      } catch (e) {
        return false;
      } finally {
        // release memory in IE
        div = null;
      }
    }

    function Sizzle(selector, context, results, seed) {
      var match = void 0,
          elem = void 0,
          m = void 0,
          nodeType = void 0,

      // QSA vars
      i = void 0,
          groups = void 0,
          old = void 0,
          nid = void 0,
          newContext = void 0,
          newSelector = void 0;

      if ((context ? context.ownerDocument || context : preferredDoc) !== document) {
        setDocument(context);
      }

      context = context || document;
      results = results || [];

      if (!selector || typeof selector !== 'string') {
        return results;
      }

      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {
        return [];
      }

      if (!documentIsXML && !seed) {
        // Shortcuts
        if (match = rquickExpr.exec(selector)) {
          // Speed-up: Sizzle("#ID")
          if (m = match[1]) {
            if (nodeType === 9) {
              elem = context.getElementById(m);
              // Check parentNode to catch when Blackberry 4.6 returns
              // nodes that are no longer in the document #6963
              if (elem && elem.parentNode) {
                // Handle the case where IE, Opera, and Webkit return items
                // by name instead of ID
                if (elem.id === m) {
                  results.push(elem);
                  return results;
                }
              } else {
                return results;
              }
            } else {
              // Context is not a document
              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) {
                results.push(elem);
                return results;
              }
            }

            // Speed-up: Sizzle("TAG")
          } else if (match[2]) {
            push.apply(results, slice.call(context.getElementsByTagName(selector), 0));
            return results;

            // Speed-up: Sizzle(".CLASS")
          } else if ((m = match[3]) && support.getByClassName && context.getElementsByClassName) {
            push.apply(results, slice.call(context.getElementsByClassName(m), 0));
            return results;
          }
        }

        // QSA path
        if (support.qsa && !rbuggyQSA.test(selector)) {
          old = true;
          nid = expando;
          newContext = context;
          newSelector = nodeType === 9 && selector;

          // qSA works strangely on Element-rooted queries
          // We can work around this by specifying an extra ID on the root
          // and working up from there (Thanks to Andrew Dupont for the technique)
          // IE 8 doesn't work on object elements
          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {
            groups = tokenize(selector);

            if (old = context.getAttribute('id')) {
              nid = old.replace(rescape, '\\$&');
            } else {
              context.setAttribute('id', nid);
            }
            nid = '[id=\'' + nid + '\'] ';

            i = groups.length;
            while (i--) {
              groups[i] = nid + toSelector(groups[i]);
            }
            newContext = rsibling.test(selector) && context.parentNode || context;
            newSelector = groups.join(',');
          }

          if (newSelector) {
            try {
              push.apply(results, slice.call(newContext.querySelectorAll(newSelector), 0));
              return results;
            } catch (qsaError) {} finally {
              if (!old) {
                context.removeAttribute('id');
              }
            }
          }
        }
      }

      // All others
      return select(selector.replace(rtrim, '$1'), context, results, seed);
    }

    /**
    * Detect xml
    * @param {Element|Object} elem An element or a document
    */
    isXML = Sizzle.isXML = function (elem) {
      // documentElement is verified for cases where it doesn't yet exist
      // (such as loading iframes in IE - #4833)
      var documentElement = elem && (elem.ownerDocument || elem).documentElement;
      return documentElement ? documentElement.nodeName !== 'HTML' : false;
    };

    /**
    * Sets document-related variables once based on the current document
    * @param {Element|Object} [doc] An element or document object to use to set the document
    * @returns {Object} Returns the current document
    */
    setDocument = Sizzle.setDocument = function (node) {
      var doc = node ? node.ownerDocument || node : preferredDoc;

      // If no document and documentElement is available, return
      if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {
        return document;
      }

      // Set our document
      document = doc;
      docElem = doc.documentElement;

      // Support tests
      documentIsXML = isXML(doc);

      // Check if getElementsByTagName("*") returns only elements
      support.tagNameNoComments = assert(function (div) {
        div.appendChild(doc.createComment(''));
        return !div.getElementsByTagName('*').length;
      });

      // Check if attributes should be retrieved by attribute nodes
      support.attributes = assert(function (div) {
        div.innerHTML = '<select></select>';
        var type = (0, _typeof3.default)(div.lastChild.getAttribute('multiple'));
        // IE8 returns a string for some attributes even when not present
        return type !== 'boolean' && type !== 'string';
      });

      // Check if getElementsByClassName can be trusted
      support.getByClassName = assert(function (div) {
        // Opera can't find a second classname (in 9.6)
        div.innerHTML = '<div class=\'hidden e\'></div><div class=\'hidden\'></div>';
        if (!div.getElementsByClassName || !div.getElementsByClassName('e').length) {
          return false;
        }

        // Safari 3.2 caches class attributes and doesn't catch changes
        div.lastChild.className = 'e';
        return div.getElementsByClassName('e').length === 2;
      });

      // Check if getElementById returns elements by name
      // Check if getElementsByName privileges form controls or returns elements by ID
      support.getByName = assert(function (div) {
        // Inject content
        div.id = expando + 0;
        div.innerHTML = '<a name=\'' + expando + '\'></a><div name=\'' + expando + '\'></div>';
        docElem.insertBefore(div, docElem.firstChild);

        // Test
        var pass = doc.getElementsByName &&
        // buggy browsers will return fewer than the correct 2
        doc.getElementsByName(expando).length === 2 +
        // buggy browsers will return more than the correct 0
        doc.getElementsByName(expando + 0).length;
        support.getIdNotName = !doc.getElementById(expando);

        // Cleanup
        docElem.removeChild(div);

        return pass;
      });

      // IE6/7 return modified attributes
      Expr.attrHandle = assert(function (div) {
        div.innerHTML = '<a href=\'#\'></a>';
        return div.firstChild && (0, _typeof3.default)(div.firstChild.getAttribute) !== strundefined && div.firstChild.getAttribute('href') === '#';
      }) ? {} : {
        'href': function href(elem) {
          return elem.getAttribute('href', 2);
        },
        'type': function type(elem) {
          return elem.getAttribute('type');
        }
      };

      // ID find and filter
      if (support.getIdNotName) {
        Expr.find['ID'] = function (id, context) {
          if ((0, _typeof3.default)(context.getElementById) !== strundefined && !documentIsXML) {
            var m = context.getElementById(id);
            // Check parentNode to catch when Blackberry 4.6 returns
            // nodes that are no longer in the document #6963
            return m && m.parentNode ? [m] : [];
          }
        };
        Expr.filter['ID'] = function (id) {
          var attrId = id.replace(runescape, funescape);
          return function (elem) {
            return elem.getAttribute('id') === attrId;
          };
        };
      } else {
        Expr.find['ID'] = function (id, context) {
          if ((0, _typeof3.default)(context.getElementById) !== strundefined && !documentIsXML) {
            var m = context.getElementById(id);

            return m ? m.id === id || (0, _typeof3.default)(m.getAttributeNode) !== strundefined && m.getAttributeNode('id').value === id ? [m] : undefined : [];
          }
        };
        Expr.filter['ID'] = function (id) {
          var attrId = id.replace(runescape, funescape);
          return function (elem) {
            var node = (0, _typeof3.default)(elem.getAttributeNode) !== strundefined && elem.getAttributeNode('id');
            return node && node.value === attrId;
          };
        };
      }

      // Tag
      Expr.find['TAG'] = support.tagNameNoComments ? function (tag, context) {
        if ((0, _typeof3.default)(context.getElementsByTagName) !== strundefined) {
          return context.getElementsByTagName(tag);
        }
      } : function (tag, context) {
        var elem = void 0,
            tmp = [],
            i = 0,
            results = context.getElementsByTagName(tag);

        // Filter out possible comments
        if (tag === '*') {
          while (elem = results[i++]) {
            if (elem.nodeType === 1) {
              tmp.push(elem);
            }
          }

          return tmp;
        }
        return results;
      };

      // Name
      Expr.find['NAME'] = support.getByName && function (tag, context) {
        if ((0, _typeof3.default)(context.getElementsByName) !== strundefined) {
          return context.getElementsByName(name);
        }
      };

      // Class
      Expr.find['CLASS'] = support.getByClassName && function (className, context) {
        if ((0, _typeof3.default)(context.getElementsByClassName) !== strundefined && !documentIsXML) {
          return context.getElementsByClassName(className);
        }
      };

      // QSA and matchesSelector support

      // matchesSelector(:active) reports false when true (IE9/Opera 11.5)
      rbuggyMatches = [];

      // qSa(:focus) reports false when true (Chrome 21),
      // no need to also add to buggyMatches since matches checks buggyQSA
      // A support test would require too much code (would include document ready)
      rbuggyQSA = [':focus'];

      if (support.qsa = isNative(doc.querySelectorAll)) {
        // Build QSA regex
        // Regex strategy adopted from Diego Perini
        assert(function (div) {
          // Select is set to empty string on purpose
          // This is to test IE's treatment of not explictly
          // setting a boolean content attribute,
          // since its presence should be enough
          // http://bugs.jquery.com/ticket/12359
          div.innerHTML = '<select><option selected=\'\'></option></select>';

          // IE8 - Some boolean attributes are not treated correctly
          if (!div.querySelectorAll('[selected]').length) {
            rbuggyQSA.push('\\[' + whitespace + '*(?:checked|disabled|ismap|multiple|readonly|selected|value)');
          }

          // Webkit/Opera - :checked should return selected option elements
          // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
          // IE8 throws error here and will not see later tests
          if (!div.querySelectorAll(':checked').length) {
            rbuggyQSA.push(':checked');
          }
        });

        assert(function (div) {
          // Opera 10-12/IE8 - ^= $= *= and empty values
          // Should not select anything
          div.innerHTML = '<input type=\'hidden\' i=\'\'/>';
          if (div.querySelectorAll('[i^=\'\']').length) {
            rbuggyQSA.push('[*^$]=' + whitespace + '*(?:""|\'\')');
          }

          // FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
          // IE8 throws error here and will not see later tests
          if (!div.querySelectorAll(':enabled').length) {
            rbuggyQSA.push(':enabled', ':disabled');
          }

          // Opera 10-11 does not throw on post-comma invalid pseudos
          div.querySelectorAll('*,:x');
          rbuggyQSA.push(',.*:');
        });
      }

      if (support.matchesSelector = isNative(matches = docElem.matchesSelector || docElem.mozMatchesSelector || docElem.webkitMatchesSelector || docElem.oMatchesSelector || docElem.msMatchesSelector)) {
        assert(function (div) {
          // Check to see if it's possible to do matchesSelector
          // on a disconnected node (IE 9)
          support.disconnectedMatch = matches.call(div, 'div');

          // This should fail with an exception
          // Gecko does not error, returns false instead
          matches.call(div, '[s!=\'\']:x');
          rbuggyMatches.push('!=', pseudos);
        });
      }

      rbuggyQSA = new RegExp(rbuggyQSA.join('|'));
      rbuggyMatches = new RegExp(rbuggyMatches.join('|'));

      // Element contains another
      // Purposefully does not implement inclusive descendent
      // As in, an element does not contain itself
      contains = isNative(docElem.contains) || docElem.compareDocumentPosition ? function (a, b) {
        var adown = a.nodeType === 9 ? a.documentElement : a,
            bup = b && b.parentNode;
        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));
      } : function (a, b) {
        if (b) {
          while (b = b.parentNode) {
            if (b === a) {
              return true;
            }
          }
        }
        return false;
      };

      // Document order sorting
      sortOrder = docElem.compareDocumentPosition ? function (a, b) {
        var compare = void 0;

        if (a === b) {
          hasDuplicate = true;
          return 0;
        }

        if (compare = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition(b)) {
          if (compare & 1 || a.parentNode && a.parentNode.nodeType === 11) {
            if (a === doc || contains(preferredDoc, a)) {
              return -1;
            }
            if (b === doc || contains(preferredDoc, b)) {
              return 1;
            }
            return 0;
          }
          return compare & 4 ? -1 : 1;
        }

        return a.compareDocumentPosition ? -1 : 1;
      } : function (a, b) {
        var cur = void 0,
            i = 0,
            aup = a.parentNode,
            bup = b.parentNode,
            ap = [a],
            bp = [b];

        // Exit early if the nodes are identical
        if (a === b) {
          hasDuplicate = true;
          return 0;

          // Parentless nodes are either documents or disconnected
        } else if (!aup || !bup) {
          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : 0;

          // If the nodes are siblings, we can do a quick check
        } else if (aup === bup) {
          return siblingCheck(a, b);
        }

        // Otherwise we need full lists of their ancestors for comparison
        cur = a;
        while (cur = cur.parentNode) {
          ap.unshift(cur);
        }
        cur = b;
        while (cur = cur.parentNode) {
          bp.unshift(cur);
        }

        // Walk down the tree looking for a discrepancy
        while (ap[i] === bp[i]) {
          i++;
        }

        return i
        // Do a sibling check if the nodes have a common ancestor
        ? siblingCheck(ap[i], bp[i])

        // Otherwise nodes in our document sort first
        : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;
      };

      // Always assume the presence of duplicates if sort doesn't
      // pass them to our comparison function (as in Google Chrome).
      hasDuplicate = false;
      [0, 0].sort(sortOrder);
      support.detectDuplicates = hasDuplicate;

      return document;
    };

    Sizzle.matches = function (expr, elements) {
      return Sizzle(expr, null, null, elements);
    };

    Sizzle.matchesSelector = function (elem, expr) {
      // Set document vars if needed
      if ((elem.ownerDocument || elem) !== document) {
        setDocument(elem);
      }

      // Make sure that attribute selectors are quoted
      expr = expr.replace(rattributeQuotes, '=\'$1\']');

      // rbuggyQSA always contains :focus, so no need for an existence check
      if (support.matchesSelector && !documentIsXML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && !rbuggyQSA.test(expr)) {
        try {
          var ret = matches.call(elem, expr);

          // IE 9's matchesSelector returns false on disconnected nodes
          if (ret || support.disconnectedMatch ||
          // As well, disconnected nodes are said to be in a document
          // fragment in IE 9
          elem.document && elem.document.nodeType !== 11) {
            return ret;
          }
        } catch (e) {}
      }

      return Sizzle(expr, document, null, [elem]).length > 0;
    };

    Sizzle.contains = function (context, elem) {
      // Set document vars if needed
      if ((context.ownerDocument || context) !== document) {
        setDocument(context);
      }
      return contains(context, elem);
    };

    Sizzle.attr = function (elem, name) {
      var val = void 0;

      // Set document vars if needed
      if ((elem.ownerDocument || elem) !== document) {
        setDocument(elem);
      }

      if (!documentIsXML) {
        name = name.toLowerCase();
      }
      if (val = Expr.attrHandle[name]) {
        return val(elem);
      }
      if (documentIsXML || support.attributes) {
        return elem.getAttribute(name);
      }
      return ((val = elem.getAttributeNode(name)) || elem.getAttribute(name)) && elem[name] === true ? name : val && val.specified ? val.value : null;
    };

    Sizzle.error = function (msg) {
      throw new Error('Syntax error, unrecognized expression: ' + msg);
    };

    // Document sorting and removing duplicates
    Sizzle.uniqueSort = function (results) {
      var elem = void 0,
          duplicates = [],
          i = 1,
          j = 0;

      // Unless we *know* we can detect duplicates, assume their presence
      hasDuplicate = !support.detectDuplicates;
      results.sort(sortOrder);

      if (hasDuplicate) {
        for (; elem = results[i]; i++) {
          if (elem === results[i - 1]) {
            j = duplicates.push(i);
          }
        }
        while (j--) {
          results.splice(duplicates[j], 1);
        }
      }

      return results;
    };

    function siblingCheck(a, b) {
      var cur = b && a,
          diff = cur && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);

      // Use IE sourceIndex if available on both nodes
      if (diff) {
        return diff;
      }

      // Check if b follows a
      if (cur) {
        while (cur = cur.nextSibling) {
          if (cur === b) {
            return -1;
          }
        }
      }

      return a ? 1 : -1;
    }

    // Returns a function to use in pseudos for input types
    function createInputPseudo(type) {
      return function (elem) {
        var name = elem.nodeName.toLowerCase();
        return name === 'input' && elem.type === type;
      };
    }

    // Returns a function to use in pseudos for buttons
    function createButtonPseudo(type) {
      return function (elem) {
        var name = elem.nodeName.toLowerCase();
        return (name === 'input' || name === 'button') && elem.type === type;
      };
    }

    // Returns a function to use in pseudos for positionals
    function createPositionalPseudo(fn) {
      return markFunction(function (argument) {
        argument = +argument;
        return markFunction(function (seed, matches) {
          var j = void 0,
              matchIndexes = fn([], seed.length, argument),
              i = matchIndexes.length;

          // Match elements found at the specified indexes
          while (i--) {
            if (seed[j = matchIndexes[i]]) {
              seed[j] = !(matches[j] = seed[j]);
            }
          }
        });
      });
    }

    /**
    * Utility function for retrieving the text value of an array of DOM nodes
    * @param {Array|Element} elem
    */
    getText = Sizzle.getText = function (elem) {
      var node = void 0,
          ret = '',
          i = 0,
          nodeType = elem.nodeType;

      if (!nodeType) {
        // If no nodeType, this is expected to be an array
        for (; node = elem[i]; i++) {
          // Do not traverse comment nodes
          ret += getText(node);
        }
      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {
        // Use textContent for elements
        // innerText usage removed for consistency of new lines (see #11153)
        if (typeof elem.textContent === 'string') {
          return elem.textContent;
        } else {
          // Traverse its children
          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
            ret += getText(elem);
          }
        }
      } else if (nodeType === 3 || nodeType === 4) {
        return elem.nodeValue;
      }
      // Do not include comment or processing instruction nodes

      return ret;
    };

    Expr = Sizzle.selectors = {

      // Can be adjusted by the user
      cacheLength: 50,

      createPseudo: markFunction,

      match: matchExpr,

      find: {},

      relative: {
        '>': { dir: 'parentNode', first: true },
        ' ': { dir: 'parentNode' },
        '+': { dir: 'previousSibling', first: true },
        '~': { dir: 'previousSibling' }
      },

      preFilter: {
        'ATTR': function ATTR(match) {
          match[1] = match[1].replace(runescape, funescape);

          // Move the given value to match[3] whether quoted or unquoted
          match[3] = (match[4] || match[5] || '').replace(runescape, funescape);

          if (match[2] === '~=') {
            match[3] = ' ' + match[3] + ' ';
          }

          return match.slice(0, 4);
        },

        'CHILD': function CHILD(match) {
          /* matches from matchExpr["CHILD"]
          1 type (only|nth|...)
          2 what (child|of-type)
          3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
          4 xn-component of xn+y argument ([+-]?\d*n|)
          5 sign of xn-component
          6 x of xn-component
          7 sign of y-component
          8 y of y-component
          */
          match[1] = match[1].toLowerCase();

          if (match[1].slice(0, 3) === 'nth') {
            // nth-* requires argument
            if (!match[3]) {
              Sizzle.error(match[0]);
            }

            // numeric x and y parameters for Expr.filter.CHILD
            // remember that false/true cast respectively to 0/1
            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));
            match[5] = +(match[7] + match[8] || match[3] === 'odd');

            // other types prohibit arguments
          } else if (match[3]) {
            Sizzle.error(match[0]);
          }

          return match;
        },

        'PSEUDO': function PSEUDO(match) {
          var excess = void 0,
              unquoted = !match[5] && match[2];

          if (matchExpr['CHILD'].test(match[0])) {
            return null;
          }

          // Accept quoted arguments as-is
          if (match[4]) {
            match[2] = match[4];

            // Strip excess characters from unquoted arguments
          } else if (unquoted && rpseudo.test(unquoted) && (
          // Get excess from tokenize (recursively)
          excess = tokenize(unquoted, true)) && (
          // advance to the next closing parenthesis
          excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {
            // excess is a negative index
            match[0] = match[0].slice(0, excess);
            match[2] = unquoted.slice(0, excess);
          }

          // Return only captures needed by the pseudo filter method (type and argument)
          return match.slice(0, 3);
        }
      },

      filter: {

        'TAG': function TAG(nodeName) {
          if (nodeName === '*') {
            return function () {
              return true;
            };
          }

          nodeName = nodeName.replace(runescape, funescape).toLowerCase();
          return function (elem) {
            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
          };
        },

        'CLASS': function CLASS(className) {
          var pattern = classCache[className + ' '];

          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {
            return pattern.test(elem.className || (0, _typeof3.default)(elem.getAttribute) !== strundefined && elem.getAttribute('class') || '');
          });
        },

        'ATTR': function ATTR(name, operator, check) {
          return function (elem) {
            var result = Sizzle.attr(elem, name);

            if (result == null) {
              return operator === '!=';
            }
            if (!operator) {
              return true;
            }

            result += '';

            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;
          };
        },

        'CHILD': function CHILD(type, what, argument, first, last) {
          var simple = type.slice(0, 3) !== 'nth',
              forward = type.slice(-4) !== 'last',
              ofType = what === 'of-type';

          return first === 1 && last === 0

          // Shortcut for :nth-*(n)
          ? function (elem) {
            return !!elem.parentNode;
          } : function (elem, context, xml) {
            var cache = void 0,
                outerCache = void 0,
                node = void 0,
                diff = void 0,
                nodeIndex = void 0,
                start = void 0,
                dir = simple !== forward ? 'nextSibling' : 'previousSibling',
                parent = elem.parentNode,
                name = ofType && elem.nodeName.toLowerCase(),
                useCache = !xml && !ofType;

            if (parent) {
              // :(first|last|only)-(child|of-type)
              if (simple) {
                while (dir) {
                  node = elem;
                  while (node = node[dir]) {
                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {
                      return false;
                    }
                  }
                  // Reverse direction for :only-* (if we haven't yet done so)
                  start = dir = type === 'only' && !start && 'nextSibling';
                }
                return true;
              }

              start = [forward ? parent.firstChild : parent.lastChild];

              // non-xml :nth-child(...) stores cache data on `parent`
              if (forward && useCache) {
                // Seek `elem` from a previously-cached index
                outerCache = parent[expando] || (parent[expando] = {});
                cache = outerCache[type] || [];
                nodeIndex = cache[0] === dirruns && cache[1];
                diff = cache[0] === dirruns && cache[2];
                node = nodeIndex && parent.childNodes[nodeIndex];

                while (node = ++nodeIndex && node && node[dir] || (

                // Fallback to seeking `elem` from the start
                diff = nodeIndex = 0) || start.pop()) {
                  // When found, cache indexes on `parent` and break
                  if (node.nodeType === 1 && ++diff && node === elem) {
                    outerCache[type] = [dirruns, nodeIndex, diff];
                    break;
                  }
                }

                // Use previously-cached element index if available
              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {
                diff = cache[1];

                // xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
              } else {
                // Use the same loop as above to seek `elem` from the start
                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {
                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {
                    // Cache the index of each encountered element
                    if (useCache) {
                      (node[expando] || (node[expando] = {}))[type] = [dirruns, diff];
                    }

                    if (node === elem) {
                      break;
                    }
                  }
                }
              }

              // Incorporate the offset, then check against cycle size
              diff -= last;
              return diff === first || diff % first === 0 && diff / first >= 0;
            }
          };
        },

        'PSEUDO': function PSEUDO(pseudo, argument) {
          // pseudo-class names are case-insensitive
          // http://www.w3.org/TR/selectors/#pseudo-classes
          // Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
          // Remember that setFilters inherits from pseudos
          var args = void 0,
              fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);

          // The user may use createPseudo to indicate that
          // arguments are needed to create the filter function
          // just as Sizzle does
          if (fn[expando]) {
            return fn(argument);
          }

          // But maintain support for old signatures
          if (fn.length > 1) {
            args = [pseudo, pseudo, '', argument];
            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {
              var idx = void 0,
                  matched = fn(seed, argument),
                  i = matched.length;
              while (i--) {
                idx = indexOf.call(seed, matched[i]);
                seed[idx] = !(matches[idx] = matched[i]);
              }
            }) : function (elem) {
              return fn(elem, 0, args);
            };
          }

          return fn;
        }
      },

      pseudos: {
        // Potentially complex pseudos
        'not': markFunction(function (selector) {
          // Trim the selector passed to compile
          // to avoid treating leading and trailing
          // spaces as combinators
          var input = [],
              results = [],
              matcher = compile(selector.replace(rtrim, '$1'));

          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {
            var elem = void 0,
                unmatched = matcher(seed, null, xml, []),
                i = seed.length;

            // Match elements unmatched by `matcher`
            while (i--) {
              if (elem = unmatched[i]) {
                seed[i] = !(matches[i] = elem);
              }
            }
          }) : function (elem, context, xml) {
            input[0] = elem;
            matcher(input, null, xml, results);
            return !results.pop();
          };
        }),

        'has': markFunction(function (selector) {
          return function (elem) {
            return Sizzle(selector, elem).length > 0;
          };
        }),

        'contains': markFunction(function (text) {
          return function (elem) {
            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;
          };
        }),

        // "Whether an element is represented by a :lang() selector
        // is based solely on the element's language value
        // being equal to the identifier C,
        // or beginning with the identifier C immediately followed by "-".
        // The matching of C against the element's language value is performed case-insensitively.
        // The identifier C does not have to be a valid language name."
        // http://www.w3.org/TR/selectors/#lang-pseudo
        'lang': markFunction(function (lang) {
          // lang value must be a valid identifider
          if (!ridentifier.test(lang || '')) {
            Sizzle.error('unsupported lang: ' + lang);
          }
          lang = lang.replace(runescape, funescape).toLowerCase();
          return function (elem) {
            var elemLang = void 0;
            do {
              if (elemLang = documentIsXML ? elem.getAttribute('xml:lang') || elem.getAttribute('lang') : elem.lang) {
                elemLang = elemLang.toLowerCase();
                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;
              }
            } while ((elem = elem.parentNode) && elem.nodeType === 1);
            return false;
          };
        }),

        // Miscellaneous
        'target': function target(elem) {
          var hash = window.location && window.location.hash;
          return hash && hash.slice(1) === elem.id;
        },

        'root': function root(elem) {
          return elem === docElem;
        },

        'focus': function focus(elem) {
          return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
        },

        // Boolean properties
        'enabled': function enabled(elem) {
          return elem.disabled === false;
        },

        'disabled': function disabled(elem) {
          return elem.disabled === true;
        },

        'checked': function checked(elem) {
          // In CSS3, :checked should return both checked and selected elements
          // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
          var nodeName = elem.nodeName.toLowerCase();
          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;
        },

        'selected': function selected(elem) {
          // Accessing this property makes selected-by-default
          // options in Safari work properly
          if (elem.parentNode) {
            elem.parentNode.selectedIndex;
          }

          return elem.selected === true;
        },

        // Contents
        'empty': function empty(elem) {
          // http://www.w3.org/TR/selectors/#empty-pseudo
          // :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),
          //   not comment, processing instructions, or others
          // Thanks to Diego Perini for the nodeName shortcut
          //   Greater than "@" means alpha characters (specifically not starting with "#" or "?")
          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
            if (elem.nodeName > '@' || elem.nodeType === 3 || elem.nodeType === 4) {
              return false;
            }
          }
          return true;
        },

        'parent': function parent(elem) {
          return !Expr.pseudos['empty'](elem);
        },

        // Element/input types
        'header': function header(elem) {
          return rheader.test(elem.nodeName);
        },

        'input': function input(elem) {
          return rinputs.test(elem.nodeName);
        },

        'button': function button(elem) {
          var name = elem.nodeName.toLowerCase();
          return name === 'input' && elem.type === 'button' || name === 'button';
        },

        'text': function text(elem) {
          var attr = void 0;
          // IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)
          // use getAttribute instead to test this case
          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === elem.type);
        },

        // Position-in-collection
        'first': createPositionalPseudo(function () {
          return [0];
        }),

        'last': createPositionalPseudo(function (matchIndexes, length) {
          return [length - 1];
        }),

        'eq': createPositionalPseudo(function (matchIndexes, length, argument) {
          return [argument < 0 ? argument + length : argument];
        }),

        'even': createPositionalPseudo(function (matchIndexes, length) {
          var i = 0;
          for (; i < length; i += 2) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        }),

        'odd': createPositionalPseudo(function (matchIndexes, length) {
          var i = 1;
          for (; i < length; i += 2) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        }),

        'lt': createPositionalPseudo(function (matchIndexes, length, argument) {
          var i = argument < 0 ? argument + length : argument;
          for (; --i >= 0;) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        }),

        'gt': createPositionalPseudo(function (matchIndexes, length, argument) {
          var i = argument < 0 ? argument + length : argument;
          for (; ++i < length;) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        })
      }
    };

    // Add button/input type pseudos
    for (i in { radio: true, checkbox: true, file: true, password: true, image: true }) {
      Expr.pseudos[i] = createInputPseudo(i);
    }
    for (i in { submit: true, reset: true }) {
      Expr.pseudos[i] = createButtonPseudo(i);
    }

    function tokenize(selector, parseOnly) {
      var matched = void 0,
          match = void 0,
          tokens = void 0,
          type = void 0,
          soFar = void 0,
          groups = void 0,
          preFilters = void 0,
          cached = tokenCache[selector + ' '];

      if (cached) {
        return parseOnly ? 0 : cached.slice(0);
      }

      soFar = selector;
      groups = [];
      preFilters = Expr.preFilter;

      while (soFar) {
        // Comma and first run
        if (!matched || (match = rcomma.exec(soFar))) {
          if (match) {
            // Don't consume trailing commas as valid
            soFar = soFar.slice(match[0].length) || soFar;
          }
          groups.push(tokens = []);
        }

        matched = false;

        // Combinators
        if (match = rcombinators.exec(soFar)) {
          matched = match.shift();
          tokens.push({
            value: matched,
            // Cast descendant combinators to space
            type: match[0].replace(rtrim, ' ')
          });
          soFar = soFar.slice(matched.length);
        }

        // Filters
        for (type in Expr.filter) {
          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {
            matched = match.shift();
            tokens.push({
              value: matched,
              type: type,
              matches: match
            });
            soFar = soFar.slice(matched.length);
          }
        }

        if (!matched) {
          break;
        }
      }

      // Return the length of the invalid excess
      // if we're just parsing
      // Otherwise, throw an error or return tokens
      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector)
      // Cache the tokens
      : tokenCache(selector, groups).slice(0);
    }

    function toSelector(tokens) {
      var i = 0,
          len = tokens.length,
          selector = '';
      for (; i < len; i++) {
        selector += tokens[i].value;
      }
      return selector;
    }

    function addCombinator(matcher, combinator, base) {
      var dir = combinator.dir,
          checkNonElements = base && dir === 'parentNode',
          doneName = done++;

      return combinator.first
      // Check against closest ancestor/preceding element
      ? function (elem, context, xml) {
        while (elem = elem[dir]) {
          if (elem.nodeType === 1 || checkNonElements) {
            return matcher(elem, context, xml);
          }
        }
      }

      // Check against all ancestor/preceding elements
      : function (elem, context, xml) {
        var data = void 0,
            cache = void 0,
            outerCache = void 0,
            dirkey = dirruns + ' ' + doneName;

        // We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
        if (xml) {
          while (elem = elem[dir]) {
            if (elem.nodeType === 1 || checkNonElements) {
              if (matcher(elem, context, xml)) {
                return true;
              }
            }
          }
        } else {
          while (elem = elem[dir]) {
            if (elem.nodeType === 1 || checkNonElements) {
              outerCache = elem[expando] || (elem[expando] = {});
              if ((cache = outerCache[dir]) && cache[0] === dirkey) {
                if ((data = cache[1]) === true || data === cachedruns) {
                  return data === true;
                }
              } else {
                cache = outerCache[dir] = [dirkey];
                cache[1] = matcher(elem, context, xml) || cachedruns;
                if (cache[1] === true) {
                  return true;
                }
              }
            }
          }
        }
      };
    }

    function elementMatcher(matchers) {
      return matchers.length > 1 ? function (elem, context, xml) {
        var i = matchers.length;
        while (i--) {
          if (!matchers[i](elem, context, xml)) {
            return false;
          }
        }
        return true;
      } : matchers[0];
    }

    function condense(unmatched, map, filter, context, xml) {
      var elem = void 0,
          newUnmatched = [],
          i = 0,
          len = unmatched.length,
          mapped = map != null;

      for (; i < len; i++) {
        if (elem = unmatched[i]) {
          if (!filter || filter(elem, context, xml)) {
            newUnmatched.push(elem);
            if (mapped) {
              map.push(i);
            }
          }
        }
      }

      return newUnmatched;
    }

    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {
      if (postFilter && !postFilter[expando]) {
        postFilter = setMatcher(postFilter);
      }
      if (postFinder && !postFinder[expando]) {
        postFinder = setMatcher(postFinder, postSelector);
      }
      return markFunction(function (seed, results, context, xml) {
        var temp = void 0,
            i = void 0,
            elem = void 0,
            preMap = [],
            postMap = [],
            preexisting = results.length,


        // Get initial elements from seed or context
        elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []),


        // Prefilter to get matcher input, preserving a map for seed-results synchronization
        matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems,
            matcherOut = matcher
        // If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
        ? postFinder || (seed ? preFilter : preexisting || postFilter)

        // ...intermediate processing is necessary
        ? []

        // ...otherwise use results directly
        : results : matcherIn;

        // Find primary matches
        if (matcher) {
          matcher(matcherIn, matcherOut, context, xml);
        }

        // Apply postFilter
        if (postFilter) {
          temp = condense(matcherOut, postMap);
          postFilter(temp, [], context, xml);

          // Un-match failing elements by moving them back to matcherIn
          i = temp.length;
          while (i--) {
            if (elem = temp[i]) {
              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);
            }
          }
        }

        if (seed) {
          if (postFinder || preFilter) {
            if (postFinder) {
              // Get the final matcherOut by condensing this intermediate into postFinder contexts
              temp = [];
              i = matcherOut.length;
              while (i--) {
                if (elem = matcherOut[i]) {
                  // Restore matcherIn since elem is not yet a final match
                  temp.push(matcherIn[i] = elem);
                }
              }
              postFinder(null, matcherOut = [], temp, xml);
            }

            // Move matched elements from seed to results to keep them synchronized
            i = matcherOut.length;
            while (i--) {
              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {
                seed[temp] = !(results[temp] = elem);
              }
            }
          }

          // Add elements to results, through postFinder if defined
        } else {
          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);
          if (postFinder) {
            postFinder(null, results, matcherOut, xml);
          } else {
            push.apply(results, matcherOut);
          }
        }
      });
    }

    function matcherFromTokens(tokens) {
      var checkContext = void 0,
          matcher = void 0,
          j = void 0,
          len = tokens.length,
          leadingRelative = Expr.relative[tokens[0].type],
          implicitRelative = leadingRelative || Expr.relative[' '],
          i = leadingRelative ? 1 : 0,


      // The foundational matcher ensures that elements are reachable from top-level context(s)
      matchContext = addCombinator(function (elem) {
        return elem === checkContext;
      }, implicitRelative, true),
          matchAnyContext = addCombinator(function (elem) {
        return indexOf.call(checkContext, elem) > -1;
      }, implicitRelative, true),
          matchers = [function (elem, context, xml) {
        return !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));
      }];

      for (; i < len; i++) {
        if (matcher = Expr.relative[tokens[i].type]) {
          matchers = [addCombinator(elementMatcher(matchers), matcher)];
        } else {
          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);

          // Return special upon seeing a positional matcher
          if (matcher[expando]) {
            // Find the next relative operator (if any) for proper handling
            j = ++i;
            for (; j < len; j++) {
              if (Expr.relative[tokens[j].type]) {
                break;
              }
            }
            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1)).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));
          }
          matchers.push(matcher);
        }
      }

      return elementMatcher(matchers);
    }

    function matcherFromGroupMatchers(elementMatchers, setMatchers) {
      // A counter to specify which element is currently being matched
      var matcherCachedRuns = 0,
          bySet = setMatchers.length > 0,
          byElement = elementMatchers.length > 0,
          superMatcher = function superMatcher(seed, context, xml, results, expandContext) {
        var elem = void 0,
            j = void 0,
            matcher = void 0,
            setMatched = [],
            matchedCount = 0,
            i = '0',
            unmatched = seed && [],
            outermost = expandContext != null,
            contextBackup = outermostContext,

        // We must always have either seed elements or context
        elems = seed || byElement && Expr.find['TAG']('*', expandContext && context.parentNode || context),

        // Use integer dirruns iff this is the outermost matcher
        dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1;

        if (outermost) {
          outermostContext = context !== document && context;
          cachedruns = matcherCachedRuns;
        }

        // Add elements passing elementMatchers directly to results
        // Keep `i` a string if there are no elements so `matchedCount` will be "00" below
        for (; (elem = elems[i]) != null; i++) {
          if (byElement && elem) {
            j = 0;
            while (matcher = elementMatchers[j++]) {
              if (matcher(elem, context, xml)) {
                results.push(elem);
                break;
              }
            }
            if (outermost) {
              dirruns = dirrunsUnique;
              cachedruns = ++matcherCachedRuns;
            }
          }

          // Track unmatched elements for set filters
          if (bySet) {
            // They will have gone through all possible matchers
            if (elem = !matcher && elem) {
              matchedCount--;
            }

            // Lengthen the array for every element, matched or not
            if (seed) {
              unmatched.push(elem);
            }
          }
        }

        // Apply set filters to unmatched elements
        matchedCount += i;
        if (bySet && i !== matchedCount) {
          j = 0;
          while (matcher = setMatchers[j++]) {
            matcher(unmatched, setMatched, context, xml);
          }

          if (seed) {
            // Reintegrate element matches to eliminate the need for sorting
            if (matchedCount > 0) {
              while (i--) {
                if (!(unmatched[i] || setMatched[i])) {
                  setMatched[i] = pop.call(results);
                }
              }
            }

            // Discard index placeholder values to get only actual matches
            setMatched = condense(setMatched);
          }

          // Add matches to results
          push.apply(results, setMatched);

          // Seedless set matches succeeding multiple successful matchers stipulate sorting
          if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {
            Sizzle.uniqueSort(results);
          }
        }

        // Override manipulation of globals by nested matchers
        if (outermost) {
          dirruns = dirrunsUnique;
          outermostContext = contextBackup;
        }

        return unmatched;
      };

      return bySet ? markFunction(superMatcher) : superMatcher;
    }

    compile = Sizzle.compile = function (selector, group /* Internal Use Only */) {
      var i = void 0,
          setMatchers = [],
          elementMatchers = [],
          cached = compilerCache[selector + ' '];

      if (!cached) {
        // Generate a function of recursive functions that can be used to check each element
        if (!group) {
          group = tokenize(selector);
        }
        i = group.length;
        while (i--) {
          cached = matcherFromTokens(group[i]);
          if (cached[expando]) {
            setMatchers.push(cached);
          } else {
            elementMatchers.push(cached);
          }
        }

        // Cache the compiled function
        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));
      }
      return cached;
    };

    function multipleContexts(selector, contexts, results) {
      var i = 0,
          len = contexts.length;
      for (; i < len; i++) {
        Sizzle(selector, contexts[i], results);
      }
      return results;
    }

    function select(selector, context, results, seed) {
      var i = void 0,
          tokens = void 0,
          token = void 0,
          type = void 0,
          find = void 0,
          match = tokenize(selector);

      if (!seed) {
        // Try to minimize operations if there is only one group
        if (match.length === 1) {
          // Take a shortcut and set the context if the root selector is an ID
          tokens = match[0] = match[0].slice(0);
          if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && context.nodeType === 9 && !documentIsXML && Expr.relative[tokens[1].type]) {
            context = Expr.find['ID'](token.matches[0].replace(runescape, funescape), context)[0];
            if (!context) {
              return results;
            }

            selector = selector.slice(tokens.shift().value.length);
          }

          // Fetch a seed set for right-to-left matching
          i = matchExpr['needsContext'].test(selector) ? 0 : tokens.length;
          while (i--) {
            token = tokens[i];

            // Abort if we hit a combinator
            if (Expr.relative[type = token.type]) {
              break;
            }
            if (find = Expr.find[type]) {
              // Search, expanding context for leading sibling combinators
              if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && context.parentNode || context)) {
                // If seed is empty or no tokens remain, we can return early
                tokens.splice(i, 1);
                selector = seed.length && toSelector(tokens);
                if (!selector) {
                  push.apply(results, slice.call(seed, 0));
                  return results;
                }

                break;
              }
            }
          }
        }
      }

      // Compile and execute a filtering function
      // Provide `match` to avoid retokenization if we modified the selector above
      compile(selector, match)(seed, context, documentIsXML, results, rsibling.test(selector));
      return results;
    }

    // Deprecated
    Expr.pseudos['nth'] = Expr.pseudos['eq'];

    // Easy API for creating new setFilters
    function setFilters() {}
    Expr.filters = setFilters.prototype = Expr.pseudos;
    Expr.setFilters = new setFilters();

    // Initialize with the default document
    setDocument();

    // Override sizzle attribute retrieval
    Sizzle.attr = jQuery.attr;
    jQuery.find = Sizzle;
    jQuery.expr = Sizzle.selectors;
    jQuery.expr[':'] = jQuery.expr.pseudos;
    jQuery.unique = Sizzle.uniqueSort;
    jQuery.text = Sizzle.getText;
    jQuery.isXMLDoc = Sizzle.isXML;
    jQuery.contains = Sizzle.contains;
  })(window);
  var runtil = /Until$/,
      rparentsprev = /^(?:parents|prev(?:Until|All))/,
      isSimple = /^.[^:#\[\.,]*$/,
      rneedsContext = jQuery.expr.match.needsContext,

  // methods guaranteed to produce a unique set when starting from a unique set
  guaranteedUnique = {
    children: true,
    contents: true,
    next: true,
    prev: true
  };

  jQuery.fn.extend({
    find: function find(selector) {
      var i = void 0,
          ret = void 0,
          self = void 0,
          len = this.length;

      if (typeof selector !== 'string') {
        self = this;
        return this.pushStack(jQuery(selector).filter(function () {
          for (i = 0; i < len; i++) {
            if (jQuery.contains(self[i], this)) {
              return true;
            }
          }
        }));
      }

      ret = [];
      for (i = 0; i < len; i++) {
        jQuery.find(selector, this[i], ret);
      }

      // Needed because $( selector, context ) becomes $( context ).find( selector )
      ret = this.pushStack(len > 1 ? jQuery.unique(ret) : ret);
      ret.selector = (this.selector ? this.selector + ' ' : '') + selector;
      return ret;
    },

    has: function has(target) {
      var i = void 0,
          targets = jQuery(target, this),
          len = targets.length;

      return this.filter(function () {
        for (i = 0; i < len; i++) {
          if (jQuery.contains(this, targets[i])) {
            return true;
          }
        }
      });
    },

    not: function not(selector) {
      return this.pushStack(winnow(this, selector, false));
    },

    filter: function filter(selector) {
      return this.pushStack(winnow(this, selector, true));
    },

    is: function is(selector) {
      return !!selector && (typeof selector === 'string'
      // If this is a positional/relative selector, check membership in the returned set
      // so $("p:first").is("p:last") won't return true for a doc with two "p".
      ? rneedsContext.test(selector) ? jQuery(selector, this.context).index(this[0]) >= 0 : jQuery.filter(selector, this).length > 0 : this.filter(selector).length > 0);
    },

    closest: function closest(selectors, context) {
      var cur = void 0,
          i = 0,
          l = this.length,
          ret = [],
          pos = rneedsContext.test(selectors) || typeof selectors !== 'string' ? jQuery(selectors, context || this.context) : 0;

      for (; i < l; i++) {
        cur = this[i];

        while (cur && cur.ownerDocument && cur !== context && cur.nodeType !== 11) {
          if (pos ? pos.index(cur) > -1 : jQuery.find.matchesSelector(cur, selectors)) {
            ret.push(cur);
            break;
          }
          cur = cur.parentNode;
        }
      }

      return this.pushStack(ret.length > 1 ? jQuery.unique(ret) : ret);
    },

    // Determine the position of an element within
    // the matched set of elements
    index: function index(elem) {
      // No argument, return index in parent
      if (!elem) {
        return this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
      }

      // index in selector
      if (typeof elem === 'string') {
        return jQuery.inArray(this[0], jQuery(elem));
      }

      // Locate the position of the desired element
      return jQuery.inArray(
      // If it receives a jQuery object, the first element is used
      elem.jquery ? elem[0] : elem, this);
    },

    add: function add(selector, context) {
      var set = typeof selector === 'string' ? jQuery(selector, context) : jQuery.makeArray(selector && selector.nodeType ? [selector] : selector),
          all = jQuery.merge(this.get(), set);

      return this.pushStack(jQuery.unique(all));
    },

    addBack: function addBack(selector) {
      return this.add(selector == null ? this.prevObject : this.prevObject.filter(selector));
    }
  });

  jQuery.fn.andSelf = jQuery.fn.addBack;

  function sibling(cur, dir) {
    do {
      cur = cur[dir];
    } while (cur && cur.nodeType !== 1);

    return cur;
  }

  jQuery.each({
    parent: function parent(elem) {
      var parent = elem.parentNode;
      return parent && parent.nodeType !== 11 ? parent : null;
    },
    parents: function parents(elem) {
      return jQuery.dir(elem, 'parentNode');
    },
    parentsUntil: function parentsUntil(elem, i, until) {
      return jQuery.dir(elem, 'parentNode', until);
    },
    next: function next(elem) {
      return sibling(elem, 'nextSibling');
    },
    prev: function prev(elem) {
      return sibling(elem, 'previousSibling');
    },
    nextAll: function nextAll(elem) {
      return jQuery.dir(elem, 'nextSibling');
    },
    prevAll: function prevAll(elem) {
      return jQuery.dir(elem, 'previousSibling');
    },
    nextUntil: function nextUntil(elem, i, until) {
      return jQuery.dir(elem, 'nextSibling', until);
    },
    prevUntil: function prevUntil(elem, i, until) {
      return jQuery.dir(elem, 'previousSibling', until);
    },
    siblings: function siblings(elem) {
      return jQuery.sibling((elem.parentNode || {}).firstChild, elem);
    },
    children: function children(elem) {
      return jQuery.sibling(elem.firstChild);
    },
    contents: function contents(elem) {
      return jQuery.nodeName(elem, 'iframe') ? elem.contentDocument || elem.contentWindow.document : jQuery.merge([], elem.childNodes);
    }
  }, function (name, fn) {
    jQuery.fn[name] = function (until, selector) {
      var ret = jQuery.map(this, fn, until);

      if (!runtil.test(name)) {
        selector = until;
      }

      if (selector && typeof selector === 'string') {
        ret = jQuery.filter(selector, ret);
      }

      ret = this.length > 1 && !guaranteedUnique[name] ? jQuery.unique(ret) : ret;

      if (this.length > 1 && rparentsprev.test(name)) {
        ret = ret.reverse();
      }

      return this.pushStack(ret);
    };
  });

  jQuery.extend({
    filter: function filter(expr, elems, not) {
      if (not) {
        expr = ':not(' + expr + ')';
      }

      return elems.length === 1 ? jQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [] : jQuery.find.matches(expr, elems);
    },

    dir: function dir(elem, _dir, until) {
      var matched = [],
          cur = elem[_dir];

      while (cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery(cur).is(until))) {
        if (cur.nodeType === 1) {
          matched.push(cur);
        }
        cur = cur[_dir];
      }
      return matched;
    },

    sibling: function sibling(n, elem) {
      var r = [];

      for (; n; n = n.nextSibling) {
        if (n.nodeType === 1 && n !== elem) {
          r.push(n);
        }
      }

      return r;
    }
  });

  // Implement the identical functionality for filter and not
  function winnow(elements, qualifier, keep) {
    // Can't pass null or undefined to indexOf in Firefox 4
    // Set to 0 to skip string check
    qualifier = qualifier || 0;

    if (jQuery.isFunction(qualifier)) {
      return jQuery.grep(elements, function (elem, i) {
        var retVal = !!qualifier.call(elem, i, elem);
        return retVal === keep;
      });
    } else if (qualifier.nodeType) {
      return jQuery.grep(elements, function (elem) {
        return elem === qualifier === keep;
      });
    } else if (typeof qualifier === 'string') {
      var filtered = jQuery.grep(elements, function (elem) {
        return elem.nodeType === 1;
      });

      if (isSimple.test(qualifier)) {
        return jQuery.filter(qualifier, filtered, !keep);
      } else {
        qualifier = jQuery.filter(qualifier, filtered);
      }
    }

    return jQuery.grep(elements, function (elem) {
      return jQuery.inArray(elem, qualifier) >= 0 === keep;
    });
  }
  function createSafeFragment(document) {
    var list = nodeNames.split('|'),
        safeFrag = document.createDocumentFragment();

    if (safeFrag.createElement) {
      while (list.length) {
        safeFrag.createElement(list.pop());
      }
    }
    return safeFrag;
  }

  var nodeNames = 'abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|' + 'header|hgroup|mark|meter|nav|output|progress|section|summary|time|video',
      rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g,
      rnoshimcache = new RegExp('<(?:' + nodeNames + ')[\\s/>]', 'i'),
      rleadingWhitespace = /^\s+/,
      rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
      rtagName = /<([\w:]+)/,
      rtbody = /<tbody/i,
      rhtml = /<|&#?\w+;/,
      rnoInnerhtml = /<(?:script|style|link)/i,
      manipulation_rcheckableType = /^(?:checkbox|radio)$/i,

  // checked="checked" or checked
  rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
      rscriptType = /^$|\/(?:java|ecma)script/i,
      rscriptTypeMasked = /^true\/(.*)/,
      rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,


  // We have to close these tags to support XHTML (#13200)
  wrapMap = {
    option: [1, '<select multiple=\'multiple\'>', '</select>'],
    legend: [1, '<fieldset>', '</fieldset>'],
    area: [1, '<map>', '</map>'],
    param: [1, '<object>', '</object>'],
    thead: [1, '<table>', '</table>'],
    tr: [2, '<table><tbody>', '</tbody></table>'],
    col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],
    td: [3, '<table><tbody><tr>', '</tr></tbody></table>'],

    // IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,
    // unless wrapped in a div with non-breaking characters in front of it.
    _default: jQuery.support.htmlSerialize ? [0, '', ''] : [1, 'X<div>', '</div>']
  },
      safeFragment = createSafeFragment(document),
      fragmentDiv = safeFragment.appendChild(document.createElement('div'));

  wrapMap.optgroup = wrapMap.option;
  wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
  wrapMap.th = wrapMap.td;

  jQuery.fn.extend({
    text: function text(value) {
      return jQuery.access(this, function (value) {
        return value === undefined ? jQuery.text(this) : this.empty().append((this[0] && this[0].ownerDocument || document).createTextNode(value));
      }, null, value, arguments.length);
    },

    wrapAll: function wrapAll(html) {
      if (jQuery.isFunction(html)) {
        return this.each(function (i) {
          jQuery(this).wrapAll(html.call(this, i));
        });
      }

      if (this[0]) {
        // The elements to wrap the target around
        var wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(true);

        if (this[0].parentNode) {
          wrap.insertBefore(this[0]);
        }

        wrap.map(function () {
          var elem = this;

          while (elem.firstChild && elem.firstChild.nodeType === 1) {
            elem = elem.firstChild;
          }

          return elem;
        }).append(this);
      }

      return this;
    },

    wrapInner: function wrapInner(html) {
      if (jQuery.isFunction(html)) {
        return this.each(function (i) {
          jQuery(this).wrapInner(html.call(this, i));
        });
      }

      return this.each(function () {
        var self = jQuery(this),
            contents = self.contents();

        if (contents.length) {
          contents.wrapAll(html);
        } else {
          self.append(html);
        }
      });
    },

    wrap: function wrap(html) {
      var isFunction = jQuery.isFunction(html);

      return this.each(function (i) {
        jQuery(this).wrapAll(isFunction ? html.call(this, i) : html);
      });
    },

    unwrap: function unwrap() {
      return this.parent().each(function () {
        if (!jQuery.nodeName(this, 'body')) {
          jQuery(this).replaceWith(this.childNodes);
        }
      }).end();
    },

    append: function append() {
      return this.domManip(arguments, true, function (elem) {
        if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
          this.appendChild(elem);
        }
      });
    },

    prepend: function prepend() {
      return this.domManip(arguments, true, function (elem) {
        if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
          this.insertBefore(elem, this.firstChild);
        }
      });
    },

    before: function before() {
      return this.domManip(arguments, false, function (elem) {
        if (this.parentNode) {
          this.parentNode.insertBefore(elem, this);
        }
      });
    },

    after: function after() {
      return this.domManip(arguments, false, function (elem) {
        if (this.parentNode) {
          this.parentNode.insertBefore(elem, this.nextSibling);
        }
      });
    },

    // keepData is for internal use only--do not document
    remove: function remove(selector, keepData) {
      var elem = void 0,
          i = 0;

      for (; (elem = this[i]) != null; i++) {
        if (!selector || jQuery.filter(selector, [elem]).length > 0) {
          if (!keepData && elem.nodeType === 1) {
            jQuery.cleanData(getAll(elem));
          }

          if (elem.parentNode) {
            if (keepData && jQuery.contains(elem.ownerDocument, elem)) {
              setGlobalEval(getAll(elem, 'script'));
            }
            elem.parentNode.removeChild(elem);
          }
        }
      }

      return this;
    },

    empty: function empty() {
      var elem = void 0,
          i = 0;

      for (; (elem = this[i]) != null; i++) {
        // Remove element nodes and prevent memory leaks
        if (elem.nodeType === 1) {
          jQuery.cleanData(getAll(elem, false));
        }

        // Remove any remaining nodes
        while (elem.firstChild) {
          elem.removeChild(elem.firstChild);
        }

        // If this is a select, ensure that it displays empty (#12336)
        // Support: IE<9
        if (elem.options && jQuery.nodeName(elem, 'select')) {
          elem.options.length = 0;
        }
      }

      return this;
    },

    clone: function clone(dataAndEvents, deepDataAndEvents) {
      dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
      deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

      return this.map(function () {
        return jQuery.clone(this, dataAndEvents, deepDataAndEvents);
      });
    },

    html: function html(value) {
      return jQuery.access(this, function (value) {
        var elem = this[0] || {},
            i = 0,
            l = this.length;

        if (value === undefined) {
          return elem.nodeType === 1 ? elem.innerHTML.replace(rinlinejQuery, '') : undefined;
        }

        // See if we can take a shortcut and just use innerHTML
        if (typeof value === 'string' && !rnoInnerhtml.test(value) && (jQuery.support.htmlSerialize || !rnoshimcache.test(value)) && (jQuery.support.leadingWhitespace || !rleadingWhitespace.test(value)) && !wrapMap[(rtagName.exec(value) || ['', ''])[1].toLowerCase()]) {
          value = value.replace(rxhtmlTag, '<$1></$2>');

          try {
            for (; i < l; i++) {
              // Remove element nodes and prevent memory leaks
              elem = this[i] || {};
              if (elem.nodeType === 1) {
                jQuery.cleanData(getAll(elem, false));
                elem.innerHTML = value;
              }
            }

            elem = 0;

            // If using innerHTML throws an exception, use the fallback method
          } catch (e) {}
        }

        if (elem) {
          this.empty().append(value);
        }
      }, null, value, arguments.length);
    },

    replaceWith: function replaceWith(value) {
      var isFunc = jQuery.isFunction(value);

      // Make sure that the elements are removed from the DOM before they are inserted
      // this can help fix replacing a parent with child elements
      if (!isFunc && typeof value !== 'string') {
        value = jQuery(value).not(this).detach();
      }

      return this.domManip([value], true, function (elem) {
        var next = this.nextSibling,
            parent = this.parentNode;

        if (parent) {
          jQuery(this).remove();
          parent.insertBefore(elem, next);
        }
      });
    },

    detach: function detach(selector) {
      return this.remove(selector, true);
    },

    domManip: function domManip(args, table, callback) {
      // Flatten any nested arrays
      args = core_concat.apply([], args);

      var first = void 0,
          node = void 0,
          hasScripts = void 0,
          scripts = void 0,
          doc = void 0,
          fragment = void 0,
          i = 0,
          l = this.length,
          set = this,
          iNoClone = l - 1,
          value = args[0],
          isFunction = jQuery.isFunction(value);

      // We can't cloneNode fragments that contain checked, in WebKit
      if (isFunction || !(l <= 1 || typeof value !== 'string' || jQuery.support.checkClone || !rchecked.test(value))) {
        return this.each(function (index) {
          var self = set.eq(index);
          if (isFunction) {
            args[0] = value.call(this, index, table ? self.html() : undefined);
          }
          self.domManip(args, table, callback);
        });
      }

      if (l) {
        fragment = jQuery.buildFragment(args, this[0].ownerDocument, false, this);
        first = fragment.firstChild;

        if (fragment.childNodes.length === 1) {
          fragment = first;
        }

        if (first) {
          table = table && jQuery.nodeName(first, 'tr');
          scripts = jQuery.map(getAll(fragment, 'script'), disableScript);
          hasScripts = scripts.length;

          // Use the original fragment for the last item instead of the first because it can end up
          // being emptied incorrectly in certain situations (#8070).
          for (; i < l; i++) {
            node = fragment;

            if (i !== iNoClone) {
              node = jQuery.clone(node, true, true);

              // Keep references to cloned scripts for later restoration
              if (hasScripts) {
                jQuery.merge(scripts, getAll(node, 'script'));
              }
            }

            callback.call(table && jQuery.nodeName(this[i], 'table') ? findOrAppend(this[i], 'tbody') : this[i], node, i);
          }

          if (hasScripts) {
            doc = scripts[scripts.length - 1].ownerDocument;

            // Reenable scripts
            jQuery.map(scripts, restoreScript);

            // Evaluate executable scripts on first document insertion
            for (i = 0; i < hasScripts; i++) {
              node = scripts[i];
              if (rscriptType.test(node.type || '') && !jQuery._data(node, 'globalEval') && jQuery.contains(doc, node)) {
                if (node.src) {
                  // Hope ajax is available...
                  jQuery.ajax({
                    url: node.src,
                    type: 'GET',
                    dataType: 'script',
                    async: false,
                    global: false,
                    'throws': true
                  });
                } else {
                  jQuery.globalEval((node.text || node.textContent || node.innerHTML || '').replace(rcleanScript, ''));
                }
              }
            }
          }

          // Fix #11809: Avoid leaking memory
          fragment = first = null;
        }
      }

      return this;
    }
  });

  function findOrAppend(elem, tag) {
    return elem.getElementsByTagName(tag)[0] || elem.appendChild(elem.ownerDocument.createElement(tag));
  }

  // Replace/restore the type attribute of script elements for safe DOM manipulation
  function disableScript(elem) {
    var attr = elem.getAttributeNode('type');
    elem.type = (attr && attr.specified) + '/' + elem.type;
    return elem;
  }
  function restoreScript(elem) {
    var match = rscriptTypeMasked.exec(elem.type);
    if (match) {
      elem.type = match[1];
    } else {
      elem.removeAttribute('type');
    }
    return elem;
  }

  // Mark scripts as having already been evaluated
  function setGlobalEval(elems, refElements) {
    var elem = void 0,
        i = 0;
    for (; (elem = elems[i]) != null; i++) {
      jQuery._data(elem, 'globalEval', !refElements || jQuery._data(refElements[i], 'globalEval'));
    }
  }

  function cloneCopyEvent(src, dest) {
    if (dest.nodeType !== 1 || !jQuery.hasData(src)) {
      return;
    }

    var type = void 0,
        i = void 0,
        l = void 0,
        oldData = jQuery._data(src),
        curData = jQuery._data(dest, oldData),
        events = oldData.events;

    if (events) {
      delete curData.handle;
      curData.events = {};

      for (type in events) {
        for (i = 0, l = events[type].length; i < l; i++) {
          jQuery.event.add(dest, type, events[type][i]);
        }
      }
    }

    // make the cloned public data object a copy from the original
    if (curData.data) {
      curData.data = jQuery.extend({}, curData.data);
    }
  }

  function fixCloneNodeIssues(src, dest) {
    var nodeName = void 0,
        e = void 0,
        data = void 0;

    // We do not need to do anything for non-Elements
    if (dest.nodeType !== 1) {
      return;
    }

    nodeName = dest.nodeName.toLowerCase();

    // IE6-8 copies events bound via attachEvent when using cloneNode.
    if (!jQuery.support.noCloneEvent && dest[jQuery.expando]) {
      data = jQuery._data(dest);

      for (e in data.events) {
        jQuery.removeEvent(dest, e, data.handle);
      }

      // Event data gets referenced instead of copied if the expando gets copied too
      dest.removeAttribute(jQuery.expando);
    }

    // IE blanks contents when cloning scripts, and tries to evaluate newly-set text
    if (nodeName === 'script' && dest.text !== src.text) {
      disableScript(dest).text = src.text;
      restoreScript(dest);

      // IE6-10 improperly clones children of object elements using classid.
      // IE10 throws NoModificationAllowedError if parent is null, #12132.
    } else if (nodeName === 'object') {
      if (dest.parentNode) {
        dest.outerHTML = src.outerHTML;
      }

      // This path appears unavoidable for IE9. When cloning an object
      // element in IE9, the outerHTML strategy above is not sufficient.
      // If the src has innerHTML and the destination does not,
      // copy the src.innerHTML into the dest.innerHTML. #10324
      if (jQuery.support.html5Clone && src.innerHTML && !jQuery.trim(dest.innerHTML)) {
        dest.innerHTML = src.innerHTML;
      }
    } else if (nodeName === 'input' && manipulation_rcheckableType.test(src.type)) {
      // IE6-8 fails to persist the checked state of a cloned checkbox
      // or radio button. Worse, IE6-7 fail to give the cloned element
      // a checked appearance if the defaultChecked value isn't also set

      dest.defaultChecked = dest.checked = src.checked;

      // IE6-7 get confused and end up setting the value of a cloned
      // checkbox/radio button to an empty string instead of "on"
      if (dest.value !== src.value) {
        dest.value = src.value;
      }

      // IE6-8 fails to return the selected option to the default selected
      // state when cloning options
    } else if (nodeName === 'option') {
      dest.defaultSelected = dest.selected = src.defaultSelected;

      // IE6-8 fails to set the defaultValue to the correct value when
      // cloning other types of input fields
    } else if (nodeName === 'input' || nodeName === 'textarea') {
      dest.defaultValue = src.defaultValue;
    }
  }

  jQuery.each({
    appendTo: 'append',
    prependTo: 'prepend',
    insertBefore: 'before',
    insertAfter: 'after',
    replaceAll: 'replaceWith'
  }, function (name, original) {
    jQuery.fn[name] = function (selector) {
      var elems = void 0,
          i = 0,
          ret = [],
          insert = jQuery(selector),
          last = insert.length - 1;

      for (; i <= last; i++) {
        elems = i === last ? this : this.clone(true);
        jQuery(insert[i])[original](elems);

        // Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()
        core_push.apply(ret, elems.get());
      }

      return this.pushStack(ret);
    };
  });

  function getAll(context, tag) {
    var elems = void 0,
        elem = void 0,
        i = 0,
        found = (0, _typeof3.default)(context.getElementsByTagName) !== core_strundefined ? context.getElementsByTagName(tag || '*') : (0, _typeof3.default)(context.querySelectorAll) !== core_strundefined ? context.querySelectorAll(tag || '*') : undefined;

    if (!found) {
      for (found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++) {
        if (!tag || jQuery.nodeName(elem, tag)) {
          found.push(elem);
        } else {
          jQuery.merge(found, getAll(elem, tag));
        }
      }
    }

    return tag === undefined || tag && jQuery.nodeName(context, tag) ? jQuery.merge([context], found) : found;
  }

  // Used in buildFragment, fixes the defaultChecked property
  function fixDefaultChecked(elem) {
    if (manipulation_rcheckableType.test(elem.type)) {
      elem.defaultChecked = elem.checked;
    }
  }

  jQuery.extend({
    clone: function clone(elem, dataAndEvents, deepDataAndEvents) {
      var destElements = void 0,
          node = void 0,
          clone = void 0,
          i = void 0,
          srcElements = void 0,
          inPage = jQuery.contains(elem.ownerDocument, elem);

      if (jQuery.support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test('<' + elem.nodeName + '>')) {
        clone = elem.cloneNode(true);

        // IE<=8 does not properly clone detached, unknown element nodes
      } else {
        fragmentDiv.innerHTML = elem.outerHTML;
        fragmentDiv.removeChild(clone = fragmentDiv.firstChild);
      }

      if ((!jQuery.support.noCloneEvent || !jQuery.support.noCloneChecked) && (elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem)) {
        // We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
        destElements = getAll(clone);
        srcElements = getAll(elem);

        // Fix all IE cloning issues
        for (i = 0; (node = srcElements[i]) != null; ++i) {
          // Ensure that the destination node is not null; Fixes #9587
          if (destElements[i]) {
            fixCloneNodeIssues(node, destElements[i]);
          }
        }
      }

      // Copy the events from the original to the clone
      if (dataAndEvents) {
        if (deepDataAndEvents) {
          srcElements = srcElements || getAll(elem);
          destElements = destElements || getAll(clone);

          for (i = 0; (node = srcElements[i]) != null; i++) {
            cloneCopyEvent(node, destElements[i]);
          }
        } else {
          cloneCopyEvent(elem, clone);
        }
      }

      // Preserve script evaluation history
      destElements = getAll(clone, 'script');
      if (destElements.length > 0) {
        setGlobalEval(destElements, !inPage && getAll(elem, 'script'));
      }

      destElements = srcElements = node = null;

      // Return the cloned set
      return clone;
    },

    buildFragment: function buildFragment(elems, context, scripts, selection) {
      var j = void 0,
          elem = void 0,
          contains = void 0,
          tmp = void 0,
          tag = void 0,
          tbody = void 0,
          wrap = void 0,
          l = elems.length,


      // Ensure a safe fragment
      safe = createSafeFragment(context),
          nodes = [],
          i = 0;

      for (; i < l; i++) {
        elem = elems[i];

        if (elem || elem === 0) {
          // Add nodes directly
          if (jQuery.type(elem) === 'object') {
            jQuery.merge(nodes, elem.nodeType ? [elem] : elem);

            // Convert non-html into a text node
          } else if (!rhtml.test(elem)) {
            nodes.push(context.createTextNode(elem));

            // Convert html into DOM nodes
          } else {
            tmp = tmp || safe.appendChild(context.createElement('div'));

            // Deserialize a standard representation
            tag = (rtagName.exec(elem) || ['', ''])[1].toLowerCase();
            wrap = wrapMap[tag] || wrapMap._default;

            tmp.innerHTML = wrap[1] + elem.replace(rxhtmlTag, '<$1></$2>') + wrap[2];

            // Descend through wrappers to the right content
            j = wrap[0];
            while (j--) {
              tmp = tmp.lastChild;
            }

            // Manually add leading whitespace removed by IE
            if (!jQuery.support.leadingWhitespace && rleadingWhitespace.test(elem)) {
              nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0]));
            }

            // Remove IE's autoinserted <tbody> from table fragments
            if (!jQuery.support.tbody) {
              // String was a <table>, *may* have spurious <tbody>
              elem = tag === 'table' && !rtbody.test(elem) ? tmp.firstChild

              // String was a bare <thead> or <tfoot>
              : wrap[1] === '<table>' && !rtbody.test(elem) ? tmp : 0;

              j = elem && elem.childNodes.length;
              while (j--) {
                if (jQuery.nodeName(tbody = elem.childNodes[j], 'tbody') && !tbody.childNodes.length) {
                  elem.removeChild(tbody);
                }
              }
            }

            jQuery.merge(nodes, tmp.childNodes);

            // Fix #12392 for WebKit and IE > 9
            tmp.textContent = '';

            // Fix #12392 for oldIE
            while (tmp.firstChild) {
              tmp.removeChild(tmp.firstChild);
            }

            // Remember the top-level container for proper cleanup
            tmp = safe.lastChild;
          }
        }
      }

      // Fix #11356: Clear elements from fragment
      if (tmp) {
        safe.removeChild(tmp);
      }

      // Reset defaultChecked for any radios and checkboxes
      // about to be appended to the DOM in IE 6/7 (#8060)
      if (!jQuery.support.appendChecked) {
        jQuery.grep(getAll(nodes, 'input'), fixDefaultChecked);
      }

      i = 0;
      while (elem = nodes[i++]) {
        // #4087 - If origin and destination elements are the same, and this is
        // that element, do not do anything
        if (selection && jQuery.inArray(elem, selection) !== -1) {
          continue;
        }

        contains = jQuery.contains(elem.ownerDocument, elem);

        // Append to fragment
        tmp = getAll(safe.appendChild(elem), 'script');

        // Preserve script evaluation history
        if (contains) {
          setGlobalEval(tmp);
        }

        // Capture executables
        if (scripts) {
          j = 0;
          while (elem = tmp[j++]) {
            if (rscriptType.test(elem.type || '')) {
              scripts.push(elem);
            }
          }
        }
      }

      tmp = null;

      return safe;
    },

    cleanData: function cleanData(elems, /* internal */acceptData) {
      var elem = void 0,
          type = void 0,
          id = void 0,
          data = void 0,
          i = 0,
          internalKey = jQuery.expando,
          cache = jQuery.cache,
          deleteExpando = jQuery.support.deleteExpando,
          special = jQuery.event.special;

      for (; (elem = elems[i]) != null; i++) {
        if (acceptData || jQuery.acceptData(elem)) {
          id = elem[internalKey];
          data = id && cache[id];

          if (data) {
            if (data.events) {
              for (type in data.events) {
                if (special[type]) {
                  jQuery.event.remove(elem, type);

                  // This is a shortcut to avoid jQuery.event.remove's overhead
                } else {
                  jQuery.removeEvent(elem, type, data.handle);
                }
              }
            }

            // Remove cache only if it was not already removed by jQuery.event.remove
            if (cache[id]) {
              delete cache[id];

              // IE does not allow us to delete expando properties from nodes,
              // nor does it have a removeAttribute function on Document nodes;
              // we must handle all of these cases
              if (deleteExpando) {
                delete elem[internalKey];
              } else if ((0, _typeof3.default)(elem.removeAttribute) !== core_strundefined) {
                elem.removeAttribute(internalKey);
              } else {
                elem[internalKey] = null;
              }

              core_deletedIds.push(id);
            }
          }
        }
      }
    }
  });
  var iframe = void 0,
      getStyles = void 0,
      curCSS = void 0,
      ralpha = /alpha\([^)]*\)/i,
      ropacity = /opacity\s*=\s*([^)]*)/,
      rposition = /^(top|right|bottom|left)$/,

  // swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
  // see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
  rdisplayswap = /^(none|table(?!-c[ea]).+)/,
      rmargin = /^margin/,
      rnumsplit = new RegExp('^(' + core_pnum + ')(.*)$', 'i'),
      rnumnonpx = new RegExp('^(' + core_pnum + ')(?!px)[a-z%]+$', 'i'),
      rrelNum = new RegExp('^([+-])=(' + core_pnum + ')', 'i'),
      elemdisplay = { BODY: 'block' },
      cssShow = { position: 'absolute', visibility: 'hidden', display: 'block' },
      cssNormalTransform = {
    letterSpacing: 0,
    fontWeight: 400
  },
      cssExpand = ['Top', 'Right', 'Bottom', 'Left'],
      cssPrefixes = ['Webkit', 'O', 'Moz', 'ms'];

  // return a css property mapped to a potentially vendor prefixed property
  function vendorPropName(style, name) {
    // shortcut for names that are not vendor prefixed
    if (name in style) {
      return name;
    }

    // check for vendor prefixed names
    var capName = name.charAt(0).toUpperCase() + name.slice(1),
        origName = name,
        i = cssPrefixes.length;

    while (i--) {
      name = cssPrefixes[i] + capName;
      if (name in style) {
        return name;
      }
    }

    return origName;
  }

  function isHidden(elem, el) {
    // isHidden might be called from jQuery#filter function;
    // in that case, element will be second argument
    elem = el || elem;
    return jQuery.css(elem, 'display') === 'none' || !jQuery.contains(elem.ownerDocument, elem);
  }

  function showHide(elements, show) {
    var display = void 0,
        elem = void 0,
        hidden = void 0,
        values = [],
        index = 0,
        length = elements.length;

    for (; index < length; index++) {
      elem = elements[index];
      if (!elem.style) {
        continue;
      }

      values[index] = jQuery._data(elem, 'olddisplay');
      display = elem.style.display;
      if (show) {
        // Reset the inline display of this element to learn if it is
        // being hidden by cascaded rules or not
        if (!values[index] && display === 'none') {
          elem.style.display = '';
        }

        // Set elements which have been overridden with display: none
        // in a stylesheet to whatever the default browser style is
        // for such an element
        if (elem.style.display === '' && isHidden(elem)) {
          values[index] = jQuery._data(elem, 'olddisplay', css_defaultDisplay(elem.nodeName));
        }
      } else {
        if (!values[index]) {
          hidden = isHidden(elem);

          if (display && display !== 'none' || !hidden) {
            jQuery._data(elem, 'olddisplay', hidden ? display : jQuery.css(elem, 'display'));
          }
        }
      }
    }

    // Set the display of most of the elements in a second loop
    // to avoid the constant reflow
    for (index = 0; index < length; index++) {
      elem = elements[index];
      if (!elem.style) {
        continue;
      }
      if (!show || elem.style.display === 'none' || elem.style.display === '') {
        elem.style.display = show ? values[index] || '' : 'none';
      }
    }

    return elements;
  }

  jQuery.fn.extend({
    css: function css(name, value) {
      return jQuery.access(this, function (elem, name, value) {
        var len = void 0,
            styles = void 0,
            map = {},
            i = 0;

        if (jQuery.isArray(name)) {
          styles = getStyles(elem);
          len = name.length;

          for (; i < len; i++) {
            map[name[i]] = jQuery.css(elem, name[i], false, styles);
          }

          return map;
        }

        return value !== undefined ? jQuery.style(elem, name, value) : jQuery.css(elem, name);
      }, name, value, arguments.length > 1);
    },
    show: function show() {
      return showHide(this, true);
    },
    hide: function hide() {
      return showHide(this);
    },
    toggle: function toggle(state) {
      var bool = typeof state === 'boolean';

      return this.each(function () {
        if (bool ? state : isHidden(this)) {
          jQuery(this).show();
        } else {
          jQuery(this).hide();
        }
      });
    }
  });

  jQuery.extend({
    // Add in style property hooks for overriding the default
    // behavior of getting and setting a style property
    cssHooks: {
      opacity: {
        get: function get(elem, computed) {
          if (computed) {
            // We should always get a number back from opacity
            var ret = curCSS(elem, 'opacity');
            return ret === '' ? '1' : ret;
          }
        }
      }
    },

    // Exclude the following css properties to add px
    cssNumber: {
      'columnCount': true,
      'fillOpacity': true,
      'fontWeight': true,
      'lineHeight': true,
      'opacity': true,
      'orphans': true,
      'widows': true,
      'zIndex': true,
      'zoom': true
    },

    // Add in properties whose names you wish to fix before
    // setting or getting the value
    cssProps: {
      // normalize float css property
      'float': jQuery.support.cssFloat ? 'cssFloat' : 'styleFloat'
    },

    // Get and set the style property on a DOM Node
    style: function style(elem, name, value, extra) {
      // Don't set styles on text and comment nodes
      if (!elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style) {
        return;
      }

      // Make sure that we're working with the right name
      var ret = void 0,
          type = void 0,
          hooks = void 0,
          origName = jQuery.camelCase(name),
          style = elem.style;

      name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(style, origName));

      // gets hook for the prefixed version
      // followed by the unprefixed version
      hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];

      // Check if we're setting a value
      if (value !== undefined) {
        type = typeof value === 'undefined' ? 'undefined' : (0, _typeof3.default)(value);

        // convert relative number strings (+= or -=) to relative numbers. #7345
        if (type === 'string' && (ret = rrelNum.exec(value))) {
          value = (ret[1] + 1) * ret[2] + parseFloat(jQuery.css(elem, name));
          // Fixes bug #9237
          type = 'number';
        }

        // Make sure that NaN and null values aren't set. See: #7116
        if (value == null || type === 'number' && isNaN(value)) {
          return;
        }

        // If a number was passed in, add 'px' to the (except for certain CSS properties)
        if (type === 'number' && !jQuery.cssNumber[origName]) {
          value += 'px';
        }

        // Fixes #8908, it can be done more correctly by specifing setters in cssHooks,
        // but it would mean to define eight (for every problematic property) identical functions
        if (!jQuery.support.clearCloneStyle && value === '' && name.indexOf('background') === 0) {
          style[name] = 'inherit';
        }

        // If a hook was provided, use that value, otherwise just set the specified value
        if (!hooks || !('set' in hooks) || (value = hooks.set(elem, value, extra)) !== undefined) {
          // Wrapped to prevent IE from throwing errors when 'invalid' values are provided
          // Fixes bug #5509
          try {
            style[name] = value;
          } catch (e) {}
        }
      } else {
        // If a hook was provided get the non-computed value from there
        if (hooks && 'get' in hooks && (ret = hooks.get(elem, false, extra)) !== undefined) {
          return ret;
        }

        // Otherwise just get the value from the style object
        return style[name];
      }
    },

    css: function css(elem, name, extra, styles) {
      var num = void 0,
          val = void 0,
          hooks = void 0,
          origName = jQuery.camelCase(name);

      // Make sure that we're working with the right name
      name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(elem.style, origName));

      // gets hook for the prefixed version
      // followed by the unprefixed version
      hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];

      // If a hook was provided get the computed value from there
      if (hooks && 'get' in hooks) {
        val = hooks.get(elem, true, extra);
      }

      // Otherwise, if a way to get the computed value exists, use that
      if (val === undefined) {
        val = curCSS(elem, name, styles);
      }

      // convert "normal" to computed value
      if (val === 'normal' && name in cssNormalTransform) {
        val = cssNormalTransform[name];
      }

      // Return, converting to number if forced or a qualifier was provided and val looks numeric
      if (extra === '' || extra) {
        num = parseFloat(val);
        return extra === true || jQuery.isNumeric(num) ? num || 0 : val;
      }
      return val;
    },

    // A method for quickly swapping in/out CSS properties to get correct calculations
    swap: function swap(elem, options, callback, args) {
      var ret = void 0,
          name = void 0,
          old = {};

      // Remember the old values, and insert the new ones
      for (name in options) {
        old[name] = elem.style[name];
        elem.style[name] = options[name];
      }

      ret = callback.apply(elem, args || []);

      // Revert the old values
      for (name in options) {
        elem.style[name] = old[name];
      }

      return ret;
    }
  });

  // NOTE: we've included the "window" in window.getComputedStyle
  // because jsdom on node.js will break without it.
  if (window.getComputedStyle) {
    getStyles = function getStyles(elem) {
      return window.getComputedStyle(elem, null);
    };

    curCSS = function curCSS(elem, name, _computed) {
      var width = void 0,
          minWidth = void 0,
          maxWidth = void 0,
          computed = _computed || getStyles(elem),


      // getPropertyValue is only needed for .css('filter') in IE9, see #12537
      ret = computed ? computed.getPropertyValue(name) || computed[name] : undefined,
          style = elem.style;

      if (computed) {
        if (ret === '' && !jQuery.contains(elem.ownerDocument, elem)) {
          ret = jQuery.style(elem, name);
        }

        // A tribute to the "awesome hack by Dean Edwards"
        // Chrome < 17 and Safari 5.0 uses "computed value" instead of "used value" for margin-right
        // Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
        // this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
        if (rnumnonpx.test(ret) && rmargin.test(name)) {
          // Remember the original values
          width = style.width;
          minWidth = style.minWidth;
          maxWidth = style.maxWidth;

          // Put in the new values to get a computed value out
          style.minWidth = style.maxWidth = style.width = ret;
          ret = computed.width;

          // Revert the changed values
          style.width = width;
          style.minWidth = minWidth;
          style.maxWidth = maxWidth;
        }
      }

      return ret;
    };
  } else if (document.documentElement.currentStyle) {
    getStyles = function getStyles(elem) {
      return elem.currentStyle;
    };

    curCSS = function curCSS(elem, name, _computed) {
      var left = void 0,
          rs = void 0,
          rsLeft = void 0,
          computed = _computed || getStyles(elem),
          ret = computed ? computed[name] : undefined,
          style = elem.style;

      // Avoid setting ret to empty string here
      // so we don't default to auto
      if (ret == null && style && style[name]) {
        ret = style[name];
      }

      // From the awesome hack by Dean Edwards
      // http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291

      // If we're not dealing with a regular pixel number
      // but a number that has a weird ending, we need to convert it to pixels
      // but not position css attributes, as those are proportional to the parent element instead
      // and we can't measure the parent instead because it might trigger a "stacking dolls" problem
      if (rnumnonpx.test(ret) && !rposition.test(name)) {
        // Remember the original values
        left = style.left;
        rs = elem.runtimeStyle;
        rsLeft = rs && rs.left;

        // Put in the new values to get a computed value out
        if (rsLeft) {
          rs.left = elem.currentStyle.left;
        }
        style.left = name === 'fontSize' ? '1em' : ret;
        ret = style.pixelLeft + 'px';

        // Revert the changed values
        style.left = left;
        if (rsLeft) {
          rs.left = rsLeft;
        }
      }

      return ret === '' ? 'auto' : ret;
    };
  }

  function setPositiveNumber(elem, value, subtract) {
    var matches = rnumsplit.exec(value);
    return matches
    // Guard against undefined "subtract", e.g., when used as in cssHooks
    ? Math.max(0, matches[1] - (subtract || 0)) + (matches[2] || 'px') : value;
  }

  function augmentWidthOrHeight(elem, name, extra, isBorderBox, styles) {
    var i = extra === (isBorderBox ? 'border' : 'content')
    // If we already have the right measurement, avoid augmentation
    ? 4
    // Otherwise initialize for horizontal or vertical properties
    : name === 'width' ? 1 : 0,
        val = 0;

    for (; i < 4; i += 2) {
      // both box models exclude margin, so add it if we want it
      if (extra === 'margin') {
        val += jQuery.css(elem, extra + cssExpand[i], true, styles);
      }

      if (isBorderBox) {
        // border-box includes padding, so remove it if we want content
        if (extra === 'content') {
          val -= jQuery.css(elem, 'padding' + cssExpand[i], true, styles);
        }

        // at this point, extra isn't border nor margin, so remove border
        if (extra !== 'margin') {
          val -= jQuery.css(elem, 'border' + cssExpand[i] + 'Width', true, styles);
        }
      } else {
        // at this point, extra isn't content, so add padding
        val += jQuery.css(elem, 'padding' + cssExpand[i], true, styles);

        // at this point, extra isn't content nor padding, so add border
        if (extra !== 'padding') {
          val += jQuery.css(elem, 'border' + cssExpand[i] + 'Width', true, styles);
        }
      }
    }

    return val;
  }

  function getWidthOrHeight(elem, name, extra) {
    // Start with offset property, which is equivalent to the border-box value
    var valueIsBorderBox = true,
        val = name === 'width' ? elem.offsetWidth : elem.offsetHeight,
        styles = getStyles(elem),
        isBorderBox = jQuery.support.boxSizing && jQuery.css(elem, 'boxSizing', false, styles) === 'border-box';

    // some non-html elements return undefined for offsetWidth, so check for null/undefined
    // svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
    // MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
    if (val <= 0 || val == null) {
      // Fall back to computed then uncomputed css if necessary
      val = curCSS(elem, name, styles);
      if (val < 0 || val == null) {
        val = elem.style[name];
      }

      // Computed unit is not pixels. Stop here and return.
      if (rnumnonpx.test(val)) {
        return val;
      }

      // we need the check for style in case a browser which returns unreliable values
      // for getComputedStyle silently falls back to the reliable elem.style
      valueIsBorderBox = isBorderBox && (jQuery.support.boxSizingReliable || val === elem.style[name]);

      // Normalize "", auto, and prepare for extra
      val = parseFloat(val) || 0;
    }

    // use the active box-sizing model to add/subtract irrelevant styles
    return val + augmentWidthOrHeight(elem, name, extra || (isBorderBox ? 'border' : 'content'), valueIsBorderBox, styles) + 'px';
  }

  // Try to determine the default display value of an element
  function css_defaultDisplay(nodeName) {
    var doc = document,
        display = elemdisplay[nodeName];

    if (!display) {
      display = actualDisplay(nodeName, doc);

      // If the simple way fails, read from inside an iframe
      if (display === 'none' || !display) {
        // Use the already-created iframe if possible
        iframe = (iframe || jQuery('<iframe frameborder=\'0\' width=\'0\' height=\'0\'/>').css('cssText', 'display:block !important')).appendTo(doc.documentElement);

        // Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
        doc = (iframe[0].contentWindow || iframe[0].contentDocument).document;
        doc.write('<!doctype html><html><body>');
        doc.close();

        display = actualDisplay(nodeName, doc);
        iframe.detach();
      }

      // Store the correct default display
      elemdisplay[nodeName] = display;
    }

    return display;
  }

  // Called ONLY from within css_defaultDisplay
  function actualDisplay(name, doc) {
    var elem = jQuery(doc.createElement(name)).appendTo(doc.body),
        display = jQuery.css(elem[0], 'display');
    elem.remove();
    return display;
  }

  jQuery.each(['height', 'width'], function (i, name) {
    jQuery.cssHooks[name] = {
      get: function get(elem, computed, extra) {
        if (computed) {
          // certain elements can have dimension info if we invisibly show them
          // however, it must have a current display style that would benefit from this
          return elem.offsetWidth === 0 && rdisplayswap.test(jQuery.css(elem, 'display')) ? jQuery.swap(elem, cssShow, function () {
            return getWidthOrHeight(elem, name, extra);
          }) : getWidthOrHeight(elem, name, extra);
        }
      },

      set: function set(elem, value, extra) {
        var styles = extra && getStyles(elem);
        return setPositiveNumber(elem, value, extra ? augmentWidthOrHeight(elem, name, extra, jQuery.support.boxSizing && jQuery.css(elem, 'boxSizing', false, styles) === 'border-box', styles) : 0);
      }
    };
  });

  if (!jQuery.support.opacity) {
    jQuery.cssHooks.opacity = {
      get: function get(elem, computed) {
        // IE uses filters for opacity
        return ropacity.test((computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || '') ? 0.01 * parseFloat(RegExp.$1) + '' : computed ? '1' : '';
      },

      set: function set(elem, value) {
        var style = elem.style,
            currentStyle = elem.currentStyle,
            opacity = jQuery.isNumeric(value) ? 'alpha(opacity=' + value * 100 + ')' : '',
            filter = currentStyle && currentStyle.filter || style.filter || '';

        // IE has trouble with opacity if it does not have layout
        // Force it by setting the zoom level
        style.zoom = 1;

        // if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652
        // if value === "", then remove inline opacity #12685
        if ((value >= 1 || value === '') && jQuery.trim(filter.replace(ralpha, '')) === '' && style.removeAttribute) {
          // Setting style.filter to null, "" & " " still leave "filter:" in the cssText
          // if "filter:" is present at all, clearType is disabled, we want to avoid this
          // style.removeAttribute is IE Only, but so apparently is this code path...
          style.removeAttribute('filter');

          // if there is no filter style applied in a css rule or unset inline opacity, we are done
          if (value === '' || currentStyle && !currentStyle.filter) {
            return;
          }
        }

        // otherwise, set new filter values
        style.filter = ralpha.test(filter) ? filter.replace(ralpha, opacity) : filter + ' ' + opacity;
      }
    };
  }

  // These hooks cannot be added until DOM ready because the support test
  // for it is not run until after DOM ready
  jQuery(function () {
    if (!jQuery.support.reliableMarginRight) {
      jQuery.cssHooks.marginRight = {
        get: function get(elem, computed) {
          if (computed) {
            // WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
            // Work around by temporarily setting element display to inline-block
            return jQuery.swap(elem, { 'display': 'inline-block' }, curCSS, [elem, 'marginRight']);
          }
        }
      };
    }

    // Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
    // getComputedStyle returns percent when specified for top/left/bottom/right
    // rather than make the css module depend on the offset module, we just check for it here
    if (!jQuery.support.pixelPosition && jQuery.fn.position) {
      jQuery.each(['top', 'left'], function (i, prop) {
        jQuery.cssHooks[prop] = {
          get: function get(elem, computed) {
            if (computed) {
              computed = curCSS(elem, prop);
              // if curCSS returns percentage, fallback to offset
              return rnumnonpx.test(computed) ? jQuery(elem).position()[prop] + 'px' : computed;
            }
          }
        };
      });
    }
  });

  if (jQuery.expr && jQuery.expr.filters) {
    jQuery.expr.filters.hidden = function (elem) {
      // Support: Opera <= 12.12
      // Opera reports offsetWidths and offsetHeights css than zero on some elements
      return elem.offsetWidth <= 0 && elem.offsetHeight <= 0 || !jQuery.support.reliableHiddenOffsets && (elem.style && elem.style.display || jQuery.css(elem, 'display')) === 'none';
    };

    jQuery.expr.filters.visible = function (elem) {
      return !jQuery.expr.filters.hidden(elem);
    };
  }

  // These hooks are used by animate to expand properties
  jQuery.each({
    margin: '',
    padding: '',
    border: 'Width'
  }, function (prefix, suffix) {
    jQuery.cssHooks[prefix + suffix] = {
      expand: function expand(value) {
        var i = 0,
            expanded = {},


        // assumes a single number if not a string
        parts = typeof value === 'string' ? value.split(' ') : [value];

        for (; i < 4; i++) {
          expanded[prefix + cssExpand[i] + suffix] = parts[i] || parts[i - 2] || parts[0];
        }

        return expanded;
      }
    };

    if (!rmargin.test(prefix)) {
      jQuery.cssHooks[prefix + suffix].set = setPositiveNumber;
    }
  });
  var r20 = /%20/g,
      rbracket = /\[\]$/,
      rCRLF = /\r?\n/g,
      rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
      rsubmittable = /^(?:input|select|textarea|keygen)/i;

  jQuery.fn.extend({
    serialize: function serialize() {
      return jQuery.param(this.serializeArray());
    },
    serializeArray: function serializeArray() {
      return this.map(function () {
        // Can add propHook for "elements" to filter or add form elements
        var elements = jQuery.prop(this, 'elements');
        return elements ? jQuery.makeArray(elements) : this;
      }).filter(function () {
        var type = this.type;
        // Use .is(":disabled") so that fieldset[disabled] works
        return this.name && !jQuery(this).is(':disabled') && rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) && (this.checked || !manipulation_rcheckableType.test(type));
      }).map(function (i, elem) {
        var val = jQuery(this).val();

        return val == null ? null : jQuery.isArray(val) ? jQuery.map(val, function (val) {
          return { name: elem.name, value: val.replace(rCRLF, '\r\n') };
        }) : { name: elem.name, value: val.replace(rCRLF, '\r\n') };
      }).get();
    }
  });

  // Serialize an array of form elements or a set of
  // key/values into a query string
  jQuery.param = function (a, traditional) {
    var prefix = void 0,
        s = [],
        add = function add(key, value) {
      // If value is a function, invoke it and return its value
      value = jQuery.isFunction(value) ? value() : value == null ? '' : value;
      s[s.length] = encodeURIComponent(key) + '=' + encodeURIComponent(value);
    };

    // Set traditional to true for jQuery <= 1.3.2 behavior.
    if (traditional === undefined) {
      traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
    }

    // If an array was passed in, assume that it is an array of form elements.
    if (jQuery.isArray(a) || a.jquery && !jQuery.isPlainObject(a)) {
      // Serialize the form elements
      jQuery.each(a, function () {
        add(this.name, this.value);
      });
    } else {
      // If traditional, encode the "old" way (the way 1.3.2 or older
      // did it), otherwise encode params recursively.
      for (prefix in a) {
        buildParams(prefix, a[prefix], traditional, add);
      }
    }

    // Return the resulting serialization
    return s.join('&').replace(r20, '+');
  };

  function buildParams(prefix, obj, traditional, add) {
    var name = void 0;

    if (jQuery.isArray(obj)) {
      // Serialize array item.
      jQuery.each(obj, function (i, v) {
        if (traditional || rbracket.test(prefix)) {
          // Treat each array item as a scalar.
          add(prefix, v);
        } else {
          // Item is non-scalar (array or object), encode its numeric index.
          buildParams(prefix + '[' + ((typeof v === 'undefined' ? 'undefined' : (0, _typeof3.default)(v)) === 'object' ? i : '') + ']', v, traditional, add);
        }
      });
    } else if (!traditional && jQuery.type(obj) === 'object') {
      // Serialize object item.
      for (name in obj) {
        buildParams(prefix + '[' + name + ']', obj[name], traditional, add);
      }
    } else {
      // Serialize scalar item.
      add(prefix, obj);
    }
  }
  jQuery.each(('blur focus focusin focusout load resize scroll unload click dblclick ' + 'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' + 'change select submit keydown keypress keyup error contextmenu').split(' '), function (i, name) {
    // Handle event binding
    jQuery.fn[name] = function (data, fn) {
      return arguments.length > 0 ? this.on(name, null, data, fn) : this.trigger(name);
    };
  });

  jQuery.fn.hover = function (fnOver, fnOut) {
    return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);
  };
  var
  // Document location
  ajaxLocParts = void 0,
      ajaxLocation = void 0,
      ajax_nonce = jQuery.now(),
      ajax_rquery = /\?/,
      rhash = /#.*$/,
      rts = /([?&])_=[^&]*/,
      rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg,
      // IE leaves an \r character at EOL
  // #7653, #8125, #8152: local protocol detection
  rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
      rnoContent = /^(?:GET|HEAD)$/,
      rprotocol = /^\/\//,
      rurl = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,


  // Keep a copy of the old load method
  _load = jQuery.fn.load,


  /* Prefilters
  * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
  * 2) These are called:
  *    - BEFORE asking for a transport
  *    - AFTER param serialization (s.data is a string if s.processData is true)
  * 3) key is the dataType
  * 4) the catchall symbol "*" can be used
  * 5) execution will start with transport dataType and THEN continue down to "*" if needed
  */
  prefilters = {},


  /* Transports bindings
  * 1) key is the dataType
  * 2) the catchall symbol "*" can be used
  * 3) selection will start with transport dataType and THEN go to "*" if needed
  */
  transports = {},


  // Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
  allTypes = '*/'.concat('*');

  // #8138, IE may throw an exception when accessing
  // a field from window.location if document.domain has been set
  try {
    ajaxLocation = location.href;
  } catch (e) {
    // Use the href attribute of an A element
    // since IE will modify it given document.location
    ajaxLocation = document.createElement('a');
    ajaxLocation.href = '';
    ajaxLocation = ajaxLocation.href;
  }

  // Segment location into parts
  ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || [];

  // Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
  function addToPrefiltersOrTransports(structure) {
    // dataTypeExpression is optional and defaults to "*"
    return function (dataTypeExpression, func) {
      if (typeof dataTypeExpression !== 'string') {
        func = dataTypeExpression;
        dataTypeExpression = '*';
      }

      var dataType = void 0,
          i = 0,
          dataTypes = dataTypeExpression.toLowerCase().match(core_rnotwhite) || [];

      if (jQuery.isFunction(func)) {
        // For each dataType in the dataTypeExpression
        while (dataType = dataTypes[i++]) {
          // Prepend if requested
          if (dataType[0] === '+') {
            dataType = dataType.slice(1) || '*';
            (structure[dataType] = structure[dataType] || []).unshift(func);

            // Otherwise append
          } else {
            (structure[dataType] = structure[dataType] || []).push(func);
          }
        }
      }
    };
  }

  // Base inspection function for prefilters and transports
  function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR) {
    var inspected = {},
        seekingTransport = structure === transports;

    function inspect(dataType) {
      var selected = void 0;
      inspected[dataType] = true;
      jQuery.each(structure[dataType] || [], function (_, prefilterOrFactory) {
        var dataTypeOrTransport = prefilterOrFactory(options, originalOptions, jqXHR);
        if (typeof dataTypeOrTransport === 'string' && !seekingTransport && !inspected[dataTypeOrTransport]) {
          options.dataTypes.unshift(dataTypeOrTransport);
          inspect(dataTypeOrTransport);
          return false;
        } else if (seekingTransport) {
          return !(selected = dataTypeOrTransport);
        }
      });
      return selected;
    }

    return inspect(options.dataTypes[0]) || !inspected['*'] && inspect('*');
  }

  // A special extend for ajax options
  // that takes "flat" options (not to be deep extended)
  // Fixes #9887
  function ajaxExtend(target, src) {
    var deep = void 0,
        key = void 0,
        flatOptions = jQuery.ajaxSettings.flatOptions || {};

    for (key in src) {
      if (src[key] !== undefined) {
        (flatOptions[key] ? target : deep || (deep = {}))[key] = src[key];
      }
    }
    if (deep) {
      jQuery.extend(true, target, deep);
    }

    return target;
  }

  jQuery.fn.load = function (url, params, callback) {
    if (typeof url !== 'string' && _load) {
      return _load.apply(this, arguments);
    }

    var selector = void 0,
        response = void 0,
        type = void 0,
        self = this,
        off = url.indexOf(' ');

    if (off >= 0) {
      selector = url.slice(off, url.length);
      url = url.slice(0, off);
    }

    // If it's a function
    if (jQuery.isFunction(params)) {
      // We assume that it's the callback
      callback = params;
      params = undefined;

      // Otherwise, build a param string
    } else if (params && (typeof params === 'undefined' ? 'undefined' : (0, _typeof3.default)(params)) === 'object') {
      type = 'POST';
    }

    // If we have elements to modify, make the request
    if (self.length > 0) {
      jQuery.ajax({
        url: url,

        // if "type" variable is undefined, then "GET" method will be used
        type: type,
        dataType: 'html',
        data: params
      }).done(function (responseText) {
        // Save response for use in complete callback
        response = arguments;

        self.html(selector

        // If a selector was specified, locate the right elements in a dummy div
        // Exclude scripts to avoid IE 'Permission Denied' errors
        ? jQuery('<div>').append(jQuery.parseHTML(responseText)).find(selector)

        // Otherwise use the full result
        : responseText);
      }).complete(callback && function (jqXHR, status) {
        self.each(callback, response || [jqXHR.responseText, status, jqXHR]);
      });
    }

    return this;
  };

  // Attach a bunch of functions for handling common AJAX events
  jQuery.each(['ajaxStart', 'ajaxStop', 'ajaxComplete', 'ajaxError', 'ajaxSuccess', 'ajaxSend'], function (i, type) {
    jQuery.fn[type] = function (fn) {
      return this.on(type, fn);
    };
  });

  jQuery.each(['get', 'post'], function (i, method) {
    jQuery[method] = function (url, data, callback, type) {
      // shift arguments if data argument was omitted
      if (jQuery.isFunction(data)) {
        type = type || callback;
        callback = data;
        data = undefined;
      }

      return jQuery.ajax({
        url: url,
        type: method,
        dataType: type,
        data: data,
        success: callback
      });
    };
  });

  jQuery.extend({

    // Counter for holding the number of active queries
    active: 0,

    // Last-Modified header cache for next request
    lastModified: {},
    etag: {},

    ajaxSettings: {
      url: ajaxLocation,
      type: 'GET',
      isLocal: rlocalProtocol.test(ajaxLocParts[1]),
      global: true,
      processData: true,
      async: true,
      contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
      /*
      timeout: 0,
      data: null,
      dataType: null,
      username: null,
      password: null,
      cache: null,
      throws: false,
      traditional: false,
      headers: {},
      */

      accepts: {
        '*': allTypes,
        text: 'text/plain',
        html: 'text/html',
        xml: 'application/xml, text/xml',
        json: 'application/json, text/javascript'
      },

      contents: {
        xml: /xml/,
        html: /html/,
        json: /json/
      },

      responseFields: {
        xml: 'responseXML',
        text: 'responseText'
      },

      // Data converters
      // Keys separate source (or catchall "*") and destination types with a single space
      converters: {

        // Convert anything to text
        '* text': window.String,

        // Text to html (true = no transformation)
        'text html': true,

        // Evaluate text as a json expression
        'text json': jQuery.parseJSON,

        // Parse text as xml
        'text xml': jQuery.parseXML
      },

      // For options that shouldn't be deep extended:
      // you can add your own custom options here if
      // and when you create one that shouldn't be
      // deep extended (see ajaxExtend)
      flatOptions: {
        url: true,
        context: true
      }
    },

    // Creates a full fledged settings object into target
    // with both ajaxSettings and settings fields.
    // If target is omitted, writes into ajaxSettings.
    ajaxSetup: function ajaxSetup(target, settings) {
      return settings

      // Building a settings object
      ? ajaxExtend(ajaxExtend(target, jQuery.ajaxSettings), settings)

      // Extending ajaxSettings
      : ajaxExtend(jQuery.ajaxSettings, target);
    },

    ajaxPrefilter: addToPrefiltersOrTransports(prefilters),
    ajaxTransport: addToPrefiltersOrTransports(transports),

    // Main method
    ajax: function ajax(url, options) {
      // If url is an object, simulate pre-1.5 signature
      if ((typeof url === 'undefined' ? 'undefined' : (0, _typeof3.default)(url)) === 'object') {
        options = url;
        url = undefined;
      }

      // Force options to be an object
      options = options || {};

      var // Cross-domain detection vars
      parts,

      // Loop variable
      i,

      // URL without anti-cache param
      cacheURL,

      // Response headers as string
      responseHeadersString,

      // timeout handle
      timeoutTimer,


      // To know if global events are to be dispatched
      fireGlobals,
          transport,

      // Response headers
      responseHeaders,

      // Create the final options object
      s = jQuery.ajaxSetup({}, options),

      // Callbacks context
      callbackContext = s.context || s,

      // Context for global events is callbackContext if it is a DOM node or jQuery collection
      globalEventContext = s.context && (callbackContext.nodeType || callbackContext.jquery) ? jQuery(callbackContext) : jQuery.event,

      // Deferreds
      deferred = jQuery.Deferred(),
          completeDeferred = jQuery.Callbacks('once memory'),

      // Status-dependent callbacks
      _statusCode = s.statusCode || {},

      // Headers (they are sent all at once)
      requestHeaders = {},
          requestHeadersNames = {},

      // The jqXHR state
      state = 0,

      // Default abort message
      strAbort = 'canceled',

      // Fake xhr
      jqXHR = {
        readyState: 0,

        // Builds headers hashtable if needed
        getResponseHeader: function getResponseHeader(key) {
          var match = void 0;
          if (state === 2) {
            if (!responseHeaders) {
              responseHeaders = {};
              while (match = rheaders.exec(responseHeadersString)) {
                responseHeaders[match[1].toLowerCase()] = match[2];
              }
            }
            match = responseHeaders[key.toLowerCase()];
          }
          return match == null ? null : match;
        },

        // Raw string
        getAllResponseHeaders: function getAllResponseHeaders() {
          return state === 2 ? responseHeadersString : null;
        },

        // Caches the header
        setRequestHeader: function setRequestHeader(name, value) {
          var lname = name.toLowerCase();
          if (!state) {
            name = requestHeadersNames[lname] = requestHeadersNames[lname] || name;
            requestHeaders[name] = value;
          }
          return this;
        },

        // Overrides response content-type header
        overrideMimeType: function overrideMimeType(type) {
          if (!state) {
            s.mimeType = type;
          }
          return this;
        },

        // Status-dependent callbacks
        statusCode: function statusCode(map) {
          var code = void 0;
          if (map) {
            if (state < 2) {
              for (code in map) {
                // Lazy-add the new callback in a way that preserves old ones
                _statusCode[code] = [_statusCode[code], map[code]];
              }
            } else {
              // Execute the appropriate callbacks
              jqXHR.always(map[jqXHR.status]);
            }
          }
          return this;
        },

        // Cancel the request
        abort: function abort(statusText) {
          var finalText = statusText || strAbort;
          if (transport) {
            transport.abort(finalText);
          }
          done(0, finalText);
          return this;
        }
      };

      // Attach deferreds
      deferred.promise(jqXHR).complete = completeDeferred.add;
      jqXHR.success = jqXHR.done;
      jqXHR.error = jqXHR.fail;

      // Remove hash character (#7531: and string promotion)
      // Add protocol if not provided (#5866: IE7 issue with protocol-css urls)
      // Handle falsy url in the settings object (#10093: consistency with old signature)
      // We also use the url parameter if available
      s.url = ((url || s.url || ajaxLocation) + '').replace(rhash, '').replace(rprotocol, ajaxLocParts[1] + '//');

      // Alias method option to type as per ticket #12004
      s.type = options.method || options.type || s.method || s.type;

      // Extract dataTypes list
      s.dataTypes = jQuery.trim(s.dataType || '*').toLowerCase().match(core_rnotwhite) || [''];

      // A cross-domain request is in order when we have a protocol:host:port mismatch
      if (s.crossDomain == null) {
        parts = rurl.exec(s.url.toLowerCase());
        s.crossDomain = !!(parts && (parts[1] !== ajaxLocParts[1] || parts[2] !== ajaxLocParts[2] || (parts[3] || (parts[1] === 'http:' ? 80 : 443)) != (ajaxLocParts[3] || (ajaxLocParts[1] === 'http:' ? 80 : 443))));
      }

      // Convert data if not already a string
      if (s.data && s.processData && typeof s.data !== 'string') {
        s.data = jQuery.param(s.data, s.traditional);
      }

      // Apply prefilters
      inspectPrefiltersOrTransports(prefilters, s, options, jqXHR);

      // If request was aborted inside a prefilter, stop there
      if (state === 2) {
        return jqXHR;
      }

      // We can fire global events as of now if asked to
      fireGlobals = s.global;

      // Watch for a new set of requests
      if (fireGlobals && jQuery.active++ === 0) {
        jQuery.event.trigger('ajaxStart');
      }

      // Uppercase the type
      s.type = s.type.toUpperCase();

      // Determine if request has content
      s.hasContent = !rnoContent.test(s.type);

      // Save the URL in case we're toying with the If-Modified-Since
      // and/or If-None-Match header later on
      cacheURL = s.url;

      // More options handling for requests with no content
      if (!s.hasContent) {
        // If data is available, append data to url
        if (s.data) {
          cacheURL = s.url += (ajax_rquery.test(cacheURL) ? '&' : '?') + s.data;
          // #9682: remove data so that it's not used in an eventual retry
          delete s.data;
        }

        // Add anti-cache in url if needed
        if (s.cache === false) {
          s.url = rts.test(cacheURL)

          // If there is already a '_' parameter, set its value
          ? cacheURL.replace(rts, '$1_=' + ajax_nonce++)

          // Otherwise add one to the end
          : cacheURL + (ajax_rquery.test(cacheURL) ? '&' : '?') + '_=' + ajax_nonce++;
        }
      }

      // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
      if (s.ifModified) {
        if (jQuery.lastModified[cacheURL]) {
          jqXHR.setRequestHeader('If-Modified-Since', jQuery.lastModified[cacheURL]);
        }
        if (jQuery.etag[cacheURL]) {
          jqXHR.setRequestHeader('If-None-Match', jQuery.etag[cacheURL]);
        }
      }

      // Set the correct header, if data is being sent
      if (s.data && s.hasContent && s.contentType !== false || options.contentType) {
        jqXHR.setRequestHeader('Content-Type', s.contentType);
      }

      // Set the Accepts header for the dev_server, depending on the dataType
      jqXHR.setRequestHeader('Accept', s.dataTypes[0] && s.accepts[s.dataTypes[0]] ? s.accepts[s.dataTypes[0]] + (s.dataTypes[0] !== '*' ? ', ' + allTypes + '; q=0.01' : '') : s.accepts['*']);

      // Check for headers option
      for (i in s.headers) {
        jqXHR.setRequestHeader(i, s.headers[i]);
      }

      // Allow custom headers/mimetypes and early abort
      if (s.beforeSend && (s.beforeSend.call(callbackContext, jqXHR, s) === false || state === 2)) {
        // Abort if not done already and return
        return jqXHR.abort();
      }

      // aborting is no longer a cancellation
      strAbort = 'abort';

      // Install callbacks on deferreds
      for (i in { success: 1, error: 1, complete: 1 }) {
        jqXHR[i](s[i]);
      }

      // Get transport
      transport = inspectPrefiltersOrTransports(transports, s, options, jqXHR);

      // If no transport, we auto-abort
      if (!transport) {
        done(-1, 'No Transport');
      } else {
        jqXHR.readyState = 1;

        // Send global event
        if (fireGlobals) {
          globalEventContext.trigger('ajaxSend', [jqXHR, s]);
        }
        // Timeout
        if (s.async && s.timeout > 0) {
          timeoutTimer = setTimeout(function () {
            jqXHR.abort('timeout');
          }, s.timeout);
        }

        try {
          state = 1;
          transport.send(requestHeaders, done);
        } catch (e) {
          // Propagate exception as error if not done
          if (state < 2) {
            done(-1, e);
            // Simply rethrow otherwise
          } else {
            throw e;
          }
        }
      }

      // Callback for when everything is done
      function done(status, nativeStatusText, responses, headers) {
        var isSuccess = void 0,
            success = void 0,
            error = void 0,
            response = void 0,
            modified = void 0,
            statusText = nativeStatusText;

        // Called once
        if (state === 2) {
          return;
        }

        // State is "done" now
        state = 2;

        // Clear timeout if it exists
        if (timeoutTimer) {
          clearTimeout(timeoutTimer);
        }

        // Dereference transport for early garbage collection
        // (no matter how long the jqXHR object will be used)
        transport = undefined;

        // Cache response headers
        responseHeadersString = headers || '';

        // Set readyState
        jqXHR.readyState = status > 0 ? 4 : 0;

        // Get response data
        if (responses) {
          response = ajaxHandleResponses(s, jqXHR, responses);
        }

        // If successful, handle type chaining
        if (status >= 200 && status < 300 || status === 304) {
          // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
          if (s.ifModified) {
            modified = jqXHR.getResponseHeader('Last-Modified');
            if (modified) {
              jQuery.lastModified[cacheURL] = modified;
            }
            modified = jqXHR.getResponseHeader('etag');
            if (modified) {
              jQuery.etag[cacheURL] = modified;
            }
          }

          // if no content
          if (status === 204) {
            isSuccess = true;
            statusText = 'nocontent';

            // if not modified
          } else if (status === 304) {
            isSuccess = true;
            statusText = 'notmodified';

            // If we have data, let's convert it
          } else {
            isSuccess = ajaxConvert(s, response);
            statusText = isSuccess.state;
            success = isSuccess.data;
            error = isSuccess.error;
            isSuccess = !error;
          }
        } else {
          // We extract error from statusText
          // then normalize statusText and status for non-aborts
          error = statusText;
          if (status || !statusText) {
            statusText = 'error';
            if (status < 0) {
              status = 0;
            }
          }
        }

        // Set data for the fake xhr object
        jqXHR.status = status;
        jqXHR.statusText = (nativeStatusText || statusText) + '';

        // Success/Error
        if (isSuccess) {
          deferred.resolveWith(callbackContext, [success, statusText, jqXHR]);
        } else {
          deferred.rejectWith(callbackContext, [jqXHR, statusText, error]);
        }

        // Status-dependent callbacks
        jqXHR.statusCode(_statusCode);
        _statusCode = undefined;

        if (fireGlobals) {
          globalEventContext.trigger(isSuccess ? 'ajaxSuccess' : 'ajaxError', [jqXHR, s, isSuccess ? success : error]);
        }

        // Complete
        completeDeferred.fireWith(callbackContext, [jqXHR, statusText]);

        if (fireGlobals) {
          globalEventContext.trigger('ajaxComplete', [jqXHR, s]);
          // Handle the global AJAX counter
          if (! --jQuery.active) {
            jQuery.event.trigger('ajaxStop');
          }
        }
      }

      return jqXHR;
    },

    getScript: function getScript(url, callback) {
      return jQuery.get(url, undefined, callback, 'script');
    },

    getJSON: function getJSON(url, data, callback) {
      return jQuery.get(url, data, callback, 'json');
    }
  });

  /* Handles responses to an ajax request:
  * - sets all responseXXX fields accordingly
  * - finds the right dataType (mediates between content-type and expected dataType)
  * - returns the corresponding response
  */
  function ajaxHandleResponses(s, jqXHR, responses) {
    var firstDataType = void 0,
        ct = void 0,
        finalDataType = void 0,
        type = void 0,
        contents = s.contents,
        dataTypes = s.dataTypes,
        responseFields = s.responseFields;

    // Fill responseXXX fields
    for (type in responseFields) {
      if (type in responses) {
        jqXHR[responseFields[type]] = responses[type];
      }
    }

    // Remove auto dataType and get content-type in the process
    while (dataTypes[0] === '*') {
      dataTypes.shift();
      if (ct === undefined) {
        ct = s.mimeType || jqXHR.getResponseHeader('Content-Type');
      }
    }

    // Check if we're dealing with a known content-type
    if (ct) {
      for (type in contents) {
        if (contents[type] && contents[type].test(ct)) {
          dataTypes.unshift(type);
          break;
        }
      }
    }

    // Check to see if we have a response for the expected dataType
    if (dataTypes[0] in responses) {
      finalDataType = dataTypes[0];
    } else {
      // Try convertible dataTypes
      for (type in responses) {
        if (!dataTypes[0] || s.converters[type + ' ' + dataTypes[0]]) {
          finalDataType = type;
          break;
        }
        if (!firstDataType) {
          firstDataType = type;
        }
      }
      // Or just use first one
      finalDataType = finalDataType || firstDataType;
    }

    // If we found a dataType
    // We add the dataType to the list if needed
    // and return the corresponding response
    if (finalDataType) {
      if (finalDataType !== dataTypes[0]) {
        dataTypes.unshift(finalDataType);
      }
      return responses[finalDataType];
    }
  }

  // Chain conversions given the request and the original response
  function ajaxConvert(s, response) {
    var conv2 = void 0,
        current = void 0,
        conv = void 0,
        tmp = void 0,
        converters = {},
        i = 0,

    // Work with a copy of dataTypes in case we need to modify it for conversion
    dataTypes = s.dataTypes.slice(),
        prev = dataTypes[0];

    // Apply the dataFilter if provided
    if (s.dataFilter) {
      response = s.dataFilter(response, s.dataType);
    }

    // Create converters map with lowercased keys
    if (dataTypes[1]) {
      for (conv in s.converters) {
        converters[conv.toLowerCase()] = s.converters[conv];
      }
    }

    // Convert to each sequential dataType, tolerating list modification
    for (; current = dataTypes[++i];) {
      // There's only work to do if current dataType is non-auto
      if (current !== '*') {
        // Convert response if prev dataType is non-auto and differs from current
        if (prev !== '*' && prev !== current) {
          // Seek a direct converter
          conv = converters[prev + ' ' + current] || converters['* ' + current];

          // If none found, seek a pair
          if (!conv) {
            for (conv2 in converters) {
              // If conv2 outputs current
              tmp = conv2.split(' ');
              if (tmp[1] === current) {
                // If prev can be converted to accepted input
                conv = converters[prev + ' ' + tmp[0]] || converters['* ' + tmp[0]];
                if (conv) {
                  // Condense equivalence converters
                  if (conv === true) {
                    conv = converters[conv2];

                    // Otherwise, insert the intermediate dataType
                  } else if (converters[conv2] !== true) {
                    current = tmp[0];
                    dataTypes.splice(i--, 0, current);
                  }

                  break;
                }
              }
            }
          }

          // Apply converter (if not an equivalence)
          if (conv !== true) {
            // Unless errors are allowed to bubble, catch and return them
            if (conv && s['throws']) {
              response = conv(response);
            } else {
              try {
                response = conv(response);
              } catch (e) {
                return { state: 'parsererror', error: conv ? e : 'No conversion from ' + prev + ' to ' + current };
              }
            }
          }
        }

        // Update prev for next iteration
        prev = current;
      }
    }

    return { state: 'success', data: response };
  }
  // Install script dataType
  jQuery.ajaxSetup({
    accepts: {
      script: 'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'
    },
    contents: {
      script: /(?:java|ecma)script/
    },
    converters: {
      'text script': function textScript(text) {
        jQuery.globalEval(text);
        return text;
      }
    }
  });

  // Handle cache's special case and global
  jQuery.ajaxPrefilter('script', function (s) {
    if (s.cache === undefined) {
      s.cache = false;
    }
    if (s.crossDomain) {
      s.type = 'GET';
      s.global = false;
    }
  });

  // Bind script tag hack transport
  jQuery.ajaxTransport('script', function (s) {
    // This transport only deals with cross domain requests
    if (s.crossDomain) {
      var script = void 0,
          head = document.head || jQuery('head')[0] || document.documentElement;

      return {

        send: function send(_, callback) {
          script = document.createElement('script');

          script.async = true;

          if (s.scriptCharset) {
            script.charset = s.scriptCharset;
          }

          script.src = s.url;

          // Attach handlers for all browsers
          script.onload = script.onreadystatechange = function (_, isAbort) {
            if (isAbort || !script.readyState || /loaded|complete/.test(script.readyState)) {
              // Handle memory leak in IE
              script.onload = script.onreadystatechange = null;

              // Remove the script
              if (script.parentNode) {
                script.parentNode.removeChild(script);
              }

              // Dereference the script
              script = null;

              // Callback if not abort
              if (!isAbort) {
                callback(200, 'success');
              }
            }
          };

          // Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending
          // Use native DOM manipulation to avoid our domManip AJAX trickery
          head.insertBefore(script, head.firstChild);
        },

        abort: function abort() {
          if (script) {
            script.onload(undefined, true);
          }
        }
      };
    }
  });
  var oldCallbacks = [],
      rjsonp = /(=)\?(?=&|$)|\?\?/;

  // Default jsonp settings
  jQuery.ajaxSetup({
    jsonp: 'callback',
    jsonpCallback: function jsonpCallback() {
      var callback = oldCallbacks.pop() || jQuery.expando + '_' + ajax_nonce++;
      this[callback] = true;
      return callback;
    }
  });

  // Detect, normalize options and install callbacks for jsonp requests
  jQuery.ajaxPrefilter('json jsonp', function (s, originalSettings, jqXHR) {
    var callbackName = void 0,
        overwritten = void 0,
        responseContainer = void 0,
        jsonProp = s.jsonp !== false && (rjsonp.test(s.url) ? 'url' : typeof s.data === 'string' && !(s.contentType || '').indexOf('application/x-www-form-urlencoded') && rjsonp.test(s.data) && 'data');

    // Handle iff the expected data type is "jsonp" or we have a parameter to set
    if (jsonProp || s.dataTypes[0] === 'jsonp') {
      // Get callback name, remembering preexisting value associated with it
      callbackName = s.jsonpCallback = jQuery.isFunction(s.jsonpCallback) ? s.jsonpCallback() : s.jsonpCallback;

      // Insert callback into url or form data
      if (jsonProp) {
        s[jsonProp] = s[jsonProp].replace(rjsonp, '$1' + callbackName);
      } else if (s.jsonp !== false) {
        s.url += (ajax_rquery.test(s.url) ? '&' : '?') + s.jsonp + '=' + callbackName;
      }

      // Use data converter to retrieve json after script execution
      s.converters['script json'] = function () {
        if (!responseContainer) {
          jQuery.error(callbackName + ' was not called');
        }
        return responseContainer[0];
      };

      // force json dataType
      s.dataTypes[0] = 'json';

      // Install callback
      overwritten = window[callbackName];
      window[callbackName] = function () {
        responseContainer = arguments;
      };

      // Clean-up function (fires after converters)
      jqXHR.always(function () {
        // Restore preexisting value
        window[callbackName] = overwritten;

        // Save back as free
        if (s[callbackName]) {
          // make sure that re-using the options doesn't screw things around
          s.jsonpCallback = originalSettings.jsonpCallback;

          // save the callback name for future use
          oldCallbacks.push(callbackName);
        }

        // Call if it was a function and we have a response
        if (responseContainer && jQuery.isFunction(overwritten)) {
          overwritten(responseContainer[0]);
        }

        responseContainer = overwritten = undefined;
      });

      // Delegate to script
      return 'script';
    }
  });
  var xhrCallbacks = void 0,
      xhrSupported = void 0,
      xhrId = 0,

  // #5280: Internet Explorer will keep connections alive if we don't abort on unload
  xhrOnUnloadAbort = window.ActiveXObject && function () {
    // Abort all pending requests
    var key = void 0;
    for (key in xhrCallbacks) {
      xhrCallbacks[key](undefined, true);
    }
  };

  // Functions to create xhrs
  function createStandardXHR() {
    try {
      return new window.XMLHttpRequest();
    } catch (e) {}
  }

  function createActiveXHR() {
    try {
      return new window.ActiveXObject('Microsoft.XMLHTTP');
    } catch (e) {}
  }

  // Create the request object
  // (This is still attached to ajaxSettings for backward compatibility)
  jQuery.ajaxSettings.xhr = window.ActiveXObject
  /* Microsoft failed to properly
  * implement the XMLHttpRequest in IE7 (can't request local files),
  * so we use the ActiveXObject when it is available
  * Additionally XMLHttpRequest can be disabled in IE7/IE8 so
  * we need a fallback.
  */
  ? function () {
    return !this.isLocal && createStandardXHR() || createActiveXHR();
  }
  // For all other browsers, use the standard XMLHttpRequest object
  : createStandardXHR;

  // Determine support properties
  xhrSupported = jQuery.ajaxSettings.xhr();
  jQuery.support.cors = !!xhrSupported && 'withCredentials' in xhrSupported;
  xhrSupported = jQuery.support.ajax = !!xhrSupported;

  // Create transport if the browser can provide an xhr
  if (xhrSupported) {
    jQuery.ajaxTransport(function (s) {
      // Cross domain only allowed if supported through XMLHttpRequest
      if (!s.crossDomain || jQuery.support.cors) {
        var _callback = void 0;

        return {
          send: function send(headers, complete) {
            // Get a new xhr
            var handle = void 0,
                i = void 0,
                xhr = s.xhr();

            // Open the socket
            // Passing null username, generates a login popup on Opera (#2865)
            if (s.username) {
              xhr.open(s.type, s.url, s.async, s.username, s.password);
            } else {
              xhr.open(s.type, s.url, s.async);
            }

            // Apply custom fields if provided
            if (s.xhrFields) {
              for (i in s.xhrFields) {
                xhr[i] = s.xhrFields[i];
              }
            }

            // Override mime type if needed
            if (s.mimeType && xhr.overrideMimeType) {
              xhr.overrideMimeType(s.mimeType);
            }

            // X-Requested-With header
            // For cross-domain requests, seeing as conditions for a preflight are
            // akin to a jigsaw puzzle, we simply never set it to be sure.
            // (it can always be set on a per-request basis or even using ajaxSetup)
            // For same-domain requests, won't change header if already provided.
            if (!s.crossDomain && !headers['X-Requested-With']) {
              headers['X-Requested-With'] = 'XMLHttpRequest';
            }

            // Need an extra try/catch for cross domain requests in Firefox 3
            try {
              for (i in headers) {
                xhr.setRequestHeader(i, headers[i]);
              }
            } catch (err) {}

            // Do send the request
            // This may raise an exception which is actually
            // handled in jQuery.ajax (so no try/catch here)
            xhr.send(s.hasContent && s.data || null);

            // Listener
            _callback = function callback(_, isAbort) {
              var status = void 0,
                  responseHeaders = void 0,
                  statusText = void 0,
                  responses = void 0;

              // Firefox throws exceptions when accessing properties
              // of an xhr when a network error occurred
              // http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)
              try {
                // Was never called and is aborted or complete
                if (_callback && (isAbort || xhr.readyState === 4)) {
                  // Only called once
                  _callback = undefined;

                  // Do not keep as active anymore
                  if (handle) {
                    xhr.onreadystatechange = jQuery.noop;
                    if (xhrOnUnloadAbort) {
                      delete xhrCallbacks[handle];
                    }
                  }

                  // If it's an abort
                  if (isAbort) {
                    // Abort it manually if needed
                    if (xhr.readyState !== 4) {
                      xhr.abort();
                    }
                  } else {
                    responses = {};
                    status = xhr.status;
                    responseHeaders = xhr.getAllResponseHeaders();

                    // When requesting binary data, IE6-9 will throw an exception
                    // on any attempt to access responseText (#11426)
                    if (typeof xhr.responseText === 'string') {
                      responses.text = xhr.responseText;
                    }

                    // Firefox throws an exception when accessing
                    // statusText for faulty cross-domain requests
                    try {
                      statusText = xhr.statusText;
                    } catch (e) {
                      // We normalize with Webkit giving an empty statusText
                      statusText = '';
                    }

                    // Filter status for non standard behaviors

                    // If the request is local and we have data: assume a success
                    // (success with no data won't get notified, that's the best we
                    // can do given current implementations)
                    if (!status && s.isLocal && !s.crossDomain) {
                      status = responses.text ? 200 : 404;
                      // IE - #1450: sometimes returns 1223 when it should be 204
                    } else if (status === 1223) {
                      status = 204;
                    }
                  }
                }
              } catch (firefoxAccessException) {
                if (!isAbort) {
                  complete(-1, firefoxAccessException);
                }
              }

              // Call complete if needed
              if (responses) {
                complete(status, statusText, responses, responseHeaders);
              }
            };

            if (!s.async) {
              // if we're in sync mode we fire the callback
              _callback();
            } else if (xhr.readyState === 4) {
              // (IE6 & IE7) if it's in cache and has been
              // retrieved directly we need to fire the callback
              setTimeout(_callback);
            } else {
              handle = ++xhrId;
              if (xhrOnUnloadAbort) {
                // Create the active xhrs callbacks list if needed
                // and attach the unload handler
                if (!xhrCallbacks) {
                  xhrCallbacks = {};
                  jQuery(window).unload(xhrOnUnloadAbort);
                }
                // Add to list of active xhrs callbacks
                xhrCallbacks[handle] = _callback;
              }
              xhr.onreadystatechange = _callback;
            }
          },

          abort: function abort() {
            if (_callback) {
              _callback(undefined, true);
            }
          }
        };
      }
    });
  }
  var fxNow = void 0,
      timerId = void 0,
      rfxtypes = /^(?:toggle|show|hide)$/,
      rfxnum = new RegExp('^(?:([+-])=|)(' + core_pnum + ')([a-z%]*)$', 'i'),
      rrun = /queueHooks$/,
      animationPrefilters = [defaultPrefilter],
      tweeners = {
    '*': [function (prop, value) {
      var end = void 0,
          unit = void 0,
          tween = this.createTween(prop, value),
          parts = rfxnum.exec(value),
          target = tween.cur(),
          start = +target || 0,
          scale = 1,
          maxIterations = 20;

      if (parts) {
        end = +parts[2];
        unit = parts[3] || (jQuery.cssNumber[prop] ? '' : 'px');

        // We need to compute starting value
        if (unit !== 'px' && start) {
          // Iteratively approximate from a nonzero starting point
          // Prefer the current property, because this process will be trivial if it uses the same units
          // Fallback to end or a simple constant
          start = jQuery.css(tween.elem, prop, true) || end || 1;

          do {
            // If previous iteration zeroed out, double until we get *something*
            // Use a string for doubling factor so we don't accidentally see scale as unchanged below
            scale = scale || '.5';

            // Adjust and apply
            start = start / scale;
            jQuery.style(tween.elem, prop, start + unit);

            // Update scale, tolerating zero or NaN from tween.cur()
            // And breaking the loop if scale is unchanged or perfect, or if we've just had enough
          } while (scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations);
        }

        tween.unit = unit;
        tween.start = start;
        // If a +=/-= token was provided, we're doing a relative animation
        tween.end = parts[1] ? start + (parts[1] + 1) * end : end;
      }
      return tween;
    }]
  };

  // Animations created synchronously will run synchronously
  function createFxNow() {
    setTimeout(function () {
      fxNow = undefined;
    });
    return fxNow = jQuery.now();
  }

  function createTweens(animation, props) {
    jQuery.each(props, function (prop, value) {
      var collection = (tweeners[prop] || []).concat(tweeners['*']),
          index = 0,
          length = collection.length;
      for (; index < length; index++) {
        if (collection[index].call(animation, prop, value)) {
          // we're done with this property
          return;
        }
      }
    });
  }

  function Animation(elem, properties, options) {
    var result,
        stopped,
        index = 0,
        length = animationPrefilters.length,
        deferred = jQuery.Deferred().always(function () {
      // don't match elem in the :animated selector
      delete tick.elem;
    }),
        tick = function tick() {
      if (stopped) {
        return false;
      }
      var currentTime = fxNow || createFxNow(),
          remaining = Math.max(0, animation.startTime + animation.duration - currentTime),

      // archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)
      temp = remaining / animation.duration || 0,
          percent = 1 - temp,
          index = 0,
          length = animation.tweens.length;

      for (; index < length; index++) {
        animation.tweens[index].run(percent);
      }

      deferred.notifyWith(elem, [animation, percent, remaining]);

      if (percent < 1 && length) {
        return remaining;
      } else {
        deferred.resolveWith(elem, [animation]);
        return false;
      }
    },
        animation = deferred.promise({
      elem: elem,
      props: jQuery.extend({}, properties),
      opts: jQuery.extend(true, { specialEasing: {} }, options),
      originalProperties: properties,
      originalOptions: options,
      startTime: fxNow || createFxNow(),
      duration: options.duration,
      tweens: [],
      createTween: function createTween(prop, end) {
        var tween = jQuery.Tween(elem, animation.opts, prop, end, animation.opts.specialEasing[prop] || animation.opts.easing);
        animation.tweens.push(tween);
        return tween;
      },
      stop: function stop(gotoEnd) {
        var index = 0,

        // if we are going to the end, we want to run all the tweens
        // otherwise we skip this part
        length = gotoEnd ? animation.tweens.length : 0;
        if (stopped) {
          return this;
        }
        stopped = true;
        for (; index < length; index++) {
          animation.tweens[index].run(1);
        }

        // resolve when we played the last frame
        // otherwise, reject
        if (gotoEnd) {
          deferred.resolveWith(elem, [animation, gotoEnd]);
        } else {
          deferred.rejectWith(elem, [animation, gotoEnd]);
        }
        return this;
      }
    }),
        props = animation.props;

    propFilter(props, animation.opts.specialEasing);

    for (; index < length; index++) {
      result = animationPrefilters[index].call(animation, elem, props, animation.opts);
      if (result) {
        return result;
      }
    }

    createTweens(animation, props);

    if (jQuery.isFunction(animation.opts.start)) {
      animation.opts.start.call(elem, animation);
    }

    jQuery.fx.timer(jQuery.extend(tick, {
      elem: elem,
      anim: animation,
      queue: animation.opts.queue
    }));

    // attach callbacks from options
    return animation.progress(animation.opts.progress).done(animation.opts.done, animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);
  }

  function propFilter(props, specialEasing) {
    var value = void 0,
        name = void 0,
        index = void 0,
        easing = void 0,
        hooks = void 0;

    // camelCase, specialEasing and expand cssHook pass
    for (index in props) {
      name = jQuery.camelCase(index);
      easing = specialEasing[name];
      value = props[index];
      if (jQuery.isArray(value)) {
        easing = value[1];
        value = props[index] = value[0];
      }

      if (index !== name) {
        props[name] = value;
        delete props[index];
      }

      hooks = jQuery.cssHooks[name];
      if (hooks && 'expand' in hooks) {
        value = hooks.expand(value);
        delete props[name];

        // not quite $.extend, this wont overwrite keys already present.
        // also - reusing 'index' from above because we have the correct "name"
        for (index in value) {
          if (!(index in props)) {
            props[index] = value[index];
            specialEasing[index] = easing;
          }
        }
      } else {
        specialEasing[name] = easing;
      }
    }
  }

  jQuery.Animation = jQuery.extend(Animation, {

    tweener: function tweener(props, callback) {
      if (jQuery.isFunction(props)) {
        callback = props;
        props = ['*'];
      } else {
        props = props.split(' ');
      }

      var prop = void 0,
          index = 0,
          length = props.length;

      for (; index < length; index++) {
        prop = props[index];
        tweeners[prop] = tweeners[prop] || [];
        tweeners[prop].unshift(callback);
      }
    },

    prefilter: function prefilter(callback, prepend) {
      if (prepend) {
        animationPrefilters.unshift(callback);
      } else {
        animationPrefilters.push(callback);
      }
    }
  });

  function defaultPrefilter(elem, props, opts) {
    /* jshint validthis:true */
    var prop = void 0,
        index = void 0,
        length = void 0,
        value = void 0,
        dataShow = void 0,
        toggle = void 0,
        tween = void 0,
        hooks = void 0,
        oldfire = void 0,
        anim = this,
        style = elem.style,
        orig = {},
        handled = [],
        hidden = elem.nodeType && isHidden(elem);

    // handle queue: false promises
    if (!opts.queue) {
      hooks = jQuery._queueHooks(elem, 'fx');
      if (hooks.unqueued == null) {
        hooks.unqueued = 0;
        oldfire = hooks.empty.fire;
        hooks.empty.fire = function () {
          if (!hooks.unqueued) {
            oldfire();
          }
        };
      }
      hooks.unqueued++;

      anim.always(function () {
        // doing this makes sure that the complete handler will be called
        // before this completes
        anim.always(function () {
          hooks.unqueued--;
          if (!jQuery.queue(elem, 'fx').length) {
            hooks.empty.fire();
          }
        });
      });
    }

    // height/width overflow pass
    if (elem.nodeType === 1 && ('height' in props || 'width' in props)) {
      // Make sure that nothing sneaks out
      // Record all 3 overflow attributes because IE does not
      // change the overflow attribute when overflowX and
      // overflowY are set to the same value
      opts.overflow = [style.overflow, style.overflowX, style.overflowY];

      // Set display property to inline-block for height/width
      // animations on inline elements that are having width/height animated
      if (jQuery.css(elem, 'display') === 'inline' && jQuery.css(elem, 'float') === 'none') {
        // inline-level elements accept inline-block;
        // block-level elements need to be inline with layout
        if (!jQuery.support.inlineBlockNeedsLayout || css_defaultDisplay(elem.nodeName) === 'inline') {
          style.display = 'inline-block';
        } else {
          style.zoom = 1;
        }
      }
    }

    if (opts.overflow) {
      style.overflow = 'hidden';
      if (!jQuery.support.shrinkWrapBlocks) {
        anim.always(function () {
          style.overflow = opts.overflow[0];
          style.overflowX = opts.overflow[1];
          style.overflowY = opts.overflow[2];
        });
      }
    }

    // show/hide pass
    for (index in props) {
      value = props[index];
      if (rfxtypes.exec(value)) {
        delete props[index];
        toggle = toggle || value === 'toggle';
        if (value === (hidden ? 'hide' : 'show')) {
          continue;
        }
        handled.push(index);
      }
    }

    length = handled.length;
    if (length) {
      dataShow = jQuery._data(elem, 'fxshow') || jQuery._data(elem, 'fxshow', {});
      if ('hidden' in dataShow) {
        hidden = dataShow.hidden;
      }

      // store state if its toggle - enables .stop().toggle() to "reverse"
      if (toggle) {
        dataShow.hidden = !hidden;
      }
      if (hidden) {
        jQuery(elem).show();
      } else {
        anim.done(function () {
          jQuery(elem).hide();
        });
      }
      anim.done(function () {
        var prop = void 0;
        jQuery._removeData(elem, 'fxshow');
        for (prop in orig) {
          jQuery.style(elem, prop, orig[prop]);
        }
      });
      for (index = 0; index < length; index++) {
        prop = handled[index];
        tween = anim.createTween(prop, hidden ? dataShow[prop] : 0);
        orig[prop] = dataShow[prop] || jQuery.style(elem, prop);

        if (!(prop in dataShow)) {
          dataShow[prop] = tween.start;
          if (hidden) {
            tween.end = tween.start;
            tween.start = prop === 'width' || prop === 'height' ? 1 : 0;
          }
        }
      }
    }
  }

  function Tween(elem, options, prop, end, easing) {
    return new Tween.prototype.init(elem, options, prop, end, easing);
  }
  jQuery.Tween = Tween;

  Tween.prototype = {
    constructor: Tween,
    init: function init(elem, options, prop, end, easing, unit) {
      this.elem = elem;
      this.prop = prop;
      this.easing = easing || 'swing';
      this.options = options;
      this.start = this.now = this.cur();
      this.end = end;
      this.unit = unit || (jQuery.cssNumber[prop] ? '' : 'px');
    },
    cur: function cur() {
      var hooks = Tween.propHooks[this.prop];

      return hooks && hooks.get ? hooks.get(this) : Tween.propHooks._default.get(this);
    },
    run: function run(percent) {
      var eased = void 0,
          hooks = Tween.propHooks[this.prop];

      if (this.options.duration) {
        this.pos = eased = jQuery.easing[this.easing](percent, this.options.duration * percent, 0, 1, this.options.duration);
      } else {
        this.pos = eased = percent;
      }
      this.now = (this.end - this.start) * eased + this.start;

      if (this.options.step) {
        this.options.step.call(this.elem, this.now, this);
      }

      if (hooks && hooks.set) {
        hooks.set(this);
      } else {
        Tween.propHooks._default.set(this);
      }
      return this;
    }
  };

  Tween.prototype.init.prototype = Tween.prototype;

  Tween.propHooks = {
    _default: {
      get: function get(tween) {
        var result = void 0;

        if (tween.elem[tween.prop] != null && (!tween.elem.style || tween.elem.style[tween.prop] == null)) {
          return tween.elem[tween.prop];
        }

        // passing an empty string as a 3rd parameter to .css will automatically
        // attempt a parseFloat and fallback to a string if the parse fails
        // so, simple values such as "10px" are parsed to Float.
        // complex values such as "rotate(1rad)" are returned as is.
        result = jQuery.css(tween.elem, tween.prop, '');
        // Empty strings, null, undefined and "auto" are converted to 0.
        return !result || result === 'auto' ? 0 : result;
      },
      set: function set(tween) {
        // use step hook for back compat - use cssHook if its there - use .style if its
        // available and use plain properties where available
        if (jQuery.fx.step[tween.prop]) {
          jQuery.fx.step[tween.prop](tween);
        } else if (tween.elem.style && (tween.elem.style[jQuery.cssProps[tween.prop]] != null || jQuery.cssHooks[tween.prop])) {
          jQuery.style(tween.elem, tween.prop, tween.now + tween.unit);
        } else {
          tween.elem[tween.prop] = tween.now;
        }
      }
    }
  };

  // Remove in 2.0 - this supports IE8's panic based approach
  // to setting things on disconnected nodes

  Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
    set: function set(tween) {
      if (tween.elem.nodeType && tween.elem.parentNode) {
        tween.elem[tween.prop] = tween.now;
      }
    }
  };

  jQuery.each(['toggle', 'show', 'hide'], function (i, name) {
    var cssFn = jQuery.fn[name];
    jQuery.fn[name] = function (speed, easing, callback) {
      return speed == null || typeof speed === 'boolean' ? cssFn.apply(this, arguments) : this.animate(genFx(name, true), speed, easing, callback);
    };
  });

  jQuery.fn.extend({
    fadeTo: function fadeTo(speed, to, easing, callback) {
      // show any hidden elements after setting opacity to 0
      return this.filter(isHidden).css('opacity', 0).show()

      // animate to the value specified
      .end().animate({ opacity: to }, speed, easing, callback);
    },
    animate: function animate(prop, speed, easing, callback) {
      var empty = jQuery.isEmptyObject(prop),
          optall = jQuery.speed(speed, easing, callback),
          doAnimation = function doAnimation() {
        // Operate on a copy of prop so per-property easing won't be lost
        var anim = Animation(this, jQuery.extend({}, prop), optall);
        doAnimation.finish = function () {
          anim.stop(true);
        };
        // Empty animations, or finishing resolves immediately
        if (empty || jQuery._data(this, 'finish')) {
          anim.stop(true);
        }
      };
      doAnimation.finish = doAnimation;

      return empty || optall.queue === false ? this.each(doAnimation) : this.queue(optall.queue, doAnimation);
    },
    stop: function stop(type, clearQueue, gotoEnd) {
      var stopQueue = function stopQueue(hooks) {
        var stop = hooks.stop;
        delete hooks.stop;
        stop(gotoEnd);
      };

      if (typeof type !== 'string') {
        gotoEnd = clearQueue;
        clearQueue = type;
        type = undefined;
      }
      if (clearQueue && type !== false) {
        this.queue(type || 'fx', []);
      }

      return this.each(function () {
        var dequeue = true,
            index = type != null && type + 'queueHooks',
            timers = jQuery.timers,
            data = jQuery._data(this);

        if (index) {
          if (data[index] && data[index].stop) {
            stopQueue(data[index]);
          }
        } else {
          for (index in data) {
            if (data[index] && data[index].stop && rrun.test(index)) {
              stopQueue(data[index]);
            }
          }
        }

        for (index = timers.length; index--;) {
          if (timers[index].elem === this && (type == null || timers[index].queue === type)) {
            timers[index].anim.stop(gotoEnd);
            dequeue = false;
            timers.splice(index, 1);
          }
        }

        // start the next in the queue if the last step wasn't forced
        // timers currently will call their complete callbacks, which will dequeue
        // but only if they were gotoEnd
        if (dequeue || !gotoEnd) {
          jQuery.dequeue(this, type);
        }
      });
    },
    finish: function finish(type) {
      if (type !== false) {
        type = type || 'fx';
      }
      return this.each(function () {
        var index = void 0,
            data = jQuery._data(this),
            queue = data[type + 'queue'],
            hooks = data[type + 'queueHooks'],
            timers = jQuery.timers,
            length = queue ? queue.length : 0;

        // enable finishing flag on private data
        data.finish = true;

        // empty the queue first
        jQuery.queue(this, type, []);

        if (hooks && hooks.cur && hooks.cur.finish) {
          hooks.cur.finish.call(this);
        }

        // look for any active animations, and finish them
        for (index = timers.length; index--;) {
          if (timers[index].elem === this && timers[index].queue === type) {
            timers[index].anim.stop(true);
            timers.splice(index, 1);
          }
        }

        // look for any animations in the old queue and finish them
        for (index = 0; index < length; index++) {
          if (queue[index] && queue[index].finish) {
            queue[index].finish.call(this);
          }
        }

        // turn off finishing flag
        delete data.finish;
      });
    }
  });

  // Generate parameters to create a standard animation
  function genFx(type, includeWidth) {
    var which = void 0,
        attrs = { height: type },
        i = 0;

    // if we include width, step value is 1 to do all cssExpand values,
    // if we don't include width, step value is 2 to skip over Left and Right
    includeWidth = includeWidth ? 1 : 0;
    for (; i < 4; i += 2 - includeWidth) {
      which = cssExpand[i];
      attrs['margin' + which] = attrs['padding' + which] = type;
    }

    if (includeWidth) {
      attrs.opacity = attrs.width = type;
    }

    return attrs;
  }

  // Generate shortcuts for custom animations
  jQuery.each({
    slideDown: genFx('show'),
    slideUp: genFx('hide'),
    slideToggle: genFx('toggle'),
    fadeIn: { opacity: 'show' },
    fadeOut: { opacity: 'hide' },
    fadeToggle: { opacity: 'toggle' }
  }, function (name, props) {
    jQuery.fn[name] = function (speed, easing, callback) {
      return this.animate(props, speed, easing, callback);
    };
  });

  jQuery.speed = function (speed, easing, fn) {
    var opt = speed && (typeof speed === 'undefined' ? 'undefined' : (0, _typeof3.default)(speed)) === 'object' ? jQuery.extend({}, speed) : {
      complete: fn || !fn && easing || jQuery.isFunction(speed) && speed,
      duration: speed,
      easing: fn && easing || easing && !jQuery.isFunction(easing) && easing
    };

    opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === 'number' ? opt.duration : opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[opt.duration] : jQuery.fx.speeds._default;

    // normalize opt.queue - true/undefined/null -> "fx"
    if (opt.queue == null || opt.queue === true) {
      opt.queue = 'fx';
    }

    // Queueing
    opt.old = opt.complete;

    opt.complete = function () {
      if (jQuery.isFunction(opt.old)) {
        opt.old.call(this);
      }

      if (opt.queue) {
        jQuery.dequeue(this, opt.queue);
      }
    };

    return opt;
  };

  jQuery.easing = {
    linear: function linear(p) {
      return p;
    },
    swing: function swing(p) {
      return 0.5 - Math.cos(p * Math.PI) / 2;
    }
  };

  jQuery.timers = [];
  jQuery.fx = Tween.prototype.init;
  jQuery.fx.tick = function () {
    var timer = void 0,
        timers = jQuery.timers,
        i = 0;

    fxNow = jQuery.now();

    for (; i < timers.length; i++) {
      timer = timers[i];
      // Checks the timer has not already been removed
      if (!timer() && timers[i] === timer) {
        timers.splice(i--, 1);
      }
    }

    if (!timers.length) {
      jQuery.fx.stop();
    }
    fxNow = undefined;
  };

  jQuery.fx.timer = function (timer) {
    if (timer() && jQuery.timers.push(timer)) {
      jQuery.fx.start();
    }
  };

  jQuery.fx.interval = 13;

  jQuery.fx.start = function () {
    if (!timerId) {
      timerId = setInterval(jQuery.fx.tick, jQuery.fx.interval);
    }
  };

  jQuery.fx.stop = function () {
    clearInterval(timerId);
    timerId = null;
  };

  jQuery.fx.speeds = {
    slow: 600,
    fast: 200,
    // Default speed
    _default: 400
  };

  // Back Compat <1.8 extension point
  jQuery.fx.step = {};

  if (jQuery.expr && jQuery.expr.filters) {
    jQuery.expr.filters.animated = function (elem) {
      return jQuery.grep(jQuery.timers, function (fn) {
        return elem === fn.elem;
      }).length;
    };
  }
  jQuery.fn.offset = function (options) {
    if (arguments.length) {
      return options === undefined ? this : this.each(function (i) {
        jQuery.offset.setOffset(this, options, i);
      });
    }

    var docElem = void 0,
        win = void 0,
        box = { top: 0, left: 0 },
        elem = this[0],
        doc = elem && elem.ownerDocument;

    if (!doc) {
      return;
    }

    docElem = doc.documentElement;

    // Make sure it's not a disconnected DOM node
    if (!jQuery.contains(docElem, elem)) {
      return box;
    }

    // If we don't have gBCR, just use 0,0 rather than error
    // BlackBerry 5, iOS 3 (original iPhone)
    if ((0, _typeof3.default)(elem.getBoundingClientRect) !== core_strundefined) {
      box = elem.getBoundingClientRect();
    }
    win = getWindow(doc);
    return {
      top: box.top + (win.pageYOffset || docElem.scrollTop) - (docElem.clientTop || 0),
      left: box.left + (win.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || 0)
    };
  };

  jQuery.offset = {

    setOffset: function setOffset(elem, options, i) {
      var position = jQuery.css(elem, 'position');

      // set position first, in-case top/left are set even on static elem
      if (position === 'static') {
        elem.style.position = 'relative';
      }

      var curElem = jQuery(elem),
          curOffset = curElem.offset(),
          curCSSTop = jQuery.css(elem, 'top'),
          curCSSLeft = jQuery.css(elem, 'left'),
          calculatePosition = (position === 'absolute' || position === 'fixed') && jQuery.inArray('auto', [curCSSTop, curCSSLeft]) > -1,
          props = {},
          curPosition = {},
          curTop = void 0,
          curLeft = void 0;

      // need to be able to calculate position if either top or left is auto and position is either absolute or fixed
      if (calculatePosition) {
        curPosition = curElem.position();
        curTop = curPosition.top;
        curLeft = curPosition.left;
      } else {
        curTop = parseFloat(curCSSTop) || 0;
        curLeft = parseFloat(curCSSLeft) || 0;
      }

      if (jQuery.isFunction(options)) {
        options = options.call(elem, i, curOffset);
      }

      if (options.top != null) {
        props.top = options.top - curOffset.top + curTop;
      }
      if (options.left != null) {
        props.left = options.left - curOffset.left + curLeft;
      }

      if ('using' in options) {
        options.using.call(elem, props);
      } else {
        curElem.css(props);
      }
    }
  };

  jQuery.fn.extend({

    position: function position() {
      if (!this[0]) {
        return;
      }

      var offsetParent = void 0,
          offset = void 0,
          parentOffset = { top: 0, left: 0 },
          elem = this[0];

      // fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is it's only offset parent
      if (jQuery.css(elem, 'position') === 'fixed') {
        // we assume that getBoundingClientRect is available when computed position is fixed
        offset = elem.getBoundingClientRect();
      } else {
        // Get *real* offsetParent
        offsetParent = this.offsetParent();

        // Get correct offsets
        offset = this.offset();
        if (!jQuery.nodeName(offsetParent[0], 'html')) {
          parentOffset = offsetParent.offset();
        }

        // Add offsetParent borders
        parentOffset.top += jQuery.css(offsetParent[0], 'borderTopWidth', true);
        parentOffset.left += jQuery.css(offsetParent[0], 'borderLeftWidth', true);
      }

      // Subtract parent offsets and element margins
      // note: when an element has margin: auto the offsetLeft and marginLeft
      // are the same in Safari causing offset.left to incorrectly be 0
      return {
        top: offset.top - parentOffset.top - jQuery.css(elem, 'marginTop', true),
        left: offset.left - parentOffset.left - jQuery.css(elem, 'marginLeft', true)
      };
    },

    offsetParent: function offsetParent() {
      return this.map(function () {
        var offsetParent = this.offsetParent || document.documentElement;
        while (offsetParent && !jQuery.nodeName(offsetParent, 'html') && jQuery.css(offsetParent, 'position') === 'static') {
          offsetParent = offsetParent.offsetParent;
        }
        return offsetParent || document.documentElement;
      });
    }
  });

  // Create scrollLeft and scrollTop methods
  jQuery.each({ scrollLeft: 'pageXOffset', scrollTop: 'pageYOffset' }, function (method, prop) {
    var top = /Y/.test(prop);

    jQuery.fn[method] = function (val) {
      return jQuery.access(this, function (elem, method, val) {
        var win = getWindow(elem);

        if (val === undefined) {
          return win ? prop in win ? win[prop] : win.document.documentElement[method] : elem[method];
        }

        if (win) {
          win.scrollTo(!top ? val : jQuery(win).scrollLeft(), top ? val : jQuery(win).scrollTop());
        } else {
          elem[method] = val;
        }
      }, method, val, arguments.length, null);
    };
  });

  function getWindow(elem) {
    return jQuery.isWindow(elem) ? elem : elem.nodeType === 9 ? elem.defaultView || elem.parentWindow : false;
  }
  // Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
  jQuery.each({ Height: 'height', Width: 'width' }, function (name, type) {
    jQuery.each({ padding: 'inner' + name, content: type, '': 'outer' + name }, function (defaultExtra, funcName) {
      // margin is only for outerHeight, outerWidth
      jQuery.fn[funcName] = function (margin, value) {
        var chainable = arguments.length && (defaultExtra || typeof margin !== 'boolean'),
            extra = defaultExtra || (margin === true || value === true ? 'margin' : 'border');

        return jQuery.access(this, function (elem, type, value) {
          var doc = void 0;

          if (jQuery.isWindow(elem)) {
            // As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
            // isn't a whole lot we can do. See pull request at this URL for discussion:
            // https://github.com/jquery/jquery/pull/764
            return elem.document.documentElement['client' + name];
          }

          // Get document width or height
          if (elem.nodeType === 9) {
            doc = elem.documentElement;

            // Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest
            // unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.
            return Math.max(elem.body['scroll' + name], doc['scroll' + name], elem.body['offset' + name], doc['offset' + name], doc['client' + name]);
          }

          return value === undefined
          // Get width or height on the element, requesting but not forcing parseFloat
          ? jQuery.css(elem, type, extra)

          // Set width or height on the element
          : jQuery.style(elem, type, value, extra);
        }, type, chainable ? margin : undefined, chainable, null);
      };
    });
  });
  // Limit scope pollution from any deprecated API
  // (function() {

  // })();
  // Expose jQuery to the global object
  window.jQuery = window.$ = jQuery;

  // Expose jQuery as an AMD module, but only for AMD loaders that
  // understand the issues with loading multiple versions of jQuery
  // in a page that all might call define(). The loader will indicate
  // they have special allowances for multiple jQuery versions by
  // specifying define.amd.jQuery = true. Register as a named module,
  // since jQuery can be concatenated with other files that may use define,
  // but not use a proper concatenation script that understands anonymous
  // AMD modules. A named AMD is safest and most robust way to register.
  // Lowercase jquery is used because AMD module names are derived from
  // file names, and jQuery is normally delivered in a lowercase file name.
  // Do this after creating the global so that if an AMD module wants to call
  // noConflict to hide this version of jQuery, it will work.
  if ("function" === 'function' && __webpack_require__(535) && __webpack_require__(535).jQuery) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {
      return jQuery;
    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  }
})(window);

/***/ }),
/* 1215 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.replaceSlashToDot = replaceSlashToDot;
exports.generateParsedUrl = generateParsedUrl;

var _pathToRegexp = __webpack_require__(1216);

var _pathToRegexp2 = _interopRequireDefault(_pathToRegexp);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// const regex = pathToRegexp('/api/doc/<string:token>/create_sheet/');
// const rst = regex.exec('/api/docx/BowboOoi6w4E00dtQiNQug/create_sheet/');
function replaceSlashToDot(url) {
    var removeHeadTailSlash = url.replace(/(^\/)|(\/$)/g, '');
    var rst = removeHeadTailSlash.replace(/\//g, '.');
    return rst;
}
function generateParsedUrl(pattern) {
    return _pathToRegexp2.default.parse(pattern).map(function (match) {
        return typeof match === 'string' ? replaceSlashToDot(match) : match.name;
    }).join('.');
}

/***/ }),
/* 1216 */,
/* 1217 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(99);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var compatStoreUpgrade = function () {
  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
    var compatUpgradeDone, oldSecret, result, useNullToken, nullToken;
    return _regenerator2.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return metaStorage.getItem(META_KEY.COMPAT_UPGRADE_DONE);

          case 2:
            compatUpgradeDone = _context.sent;
            oldSecret = getOldSecret();

            if (!(compatUpgradeDone || !oldSecret)) {
              _context.next = 6;
              break;
            }

            return _context.abrupt('return');

          case 6:
            result = false;
            useNullToken = false;

            // try update with old token if ot and et differ

            if (!(oldSecret !== getSecret())) {
              _context.next = 12;
              break;
            }

            _context.next = 11;
            return updateEncryption(oldSecret);

          case 11:
            result = _context.sent;

          case 12:
            if (result) {
              _context.next = 18;
              break;
            }

            nullToken = (0, _networkHelper.getEnvSpecificConfig)(_envConfigs.NULL_SECRET);
            _context.next = 16;
            return updateEncryption(nullToken);

          case 16:
            result = _context.sent;

            useNullToken = true;

          case 18:

            (0, _tea2.default)(EVT_TYPE.STORE_UPGRADE, {
              is_compat_upgrade: 'true',
              from_null_token: useNullToken.toString(),
              upgrade_status: result ? 'success' : 'fail'
            });

            _context.next = 21;
            return metaStorage.setItem(META_KEY.COMPAT_UPGRADE_DONE, true);

          case 21:
            if (result) {
              _context.next = 23;
              break;
            }

            throw new Error('Compatibility encryption update failed.');

          case 23:
          case 'end':
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function compatStoreUpgrade() {
    return _ref.apply(this, arguments);
  };
}();

var versionTokenStoreUpgrade = function () {
  var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {
    var currTokenVersion, isFirstTokenVersion, isTokenVersionMismatch, oldToken, result;
    return _regenerator2.default.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _context2.next = 2;
            return metaStorage.getItem(META_KEY.TOKEN_VERSION);

          case 2:
            currTokenVersion = _context2.sent;
            isFirstTokenVersion = !currTokenVersion && getTokenVersion();
            isTokenVersionMismatch = currTokenVersion && currTokenVersion !== getTokenVersion();

            if (!(!isFirstTokenVersion && !isTokenVersionMismatch)) {
              _context2.next = 7;
              break;
            }

            return _context2.abrupt('return');

          case 7:
            _context2.next = 9;
            return getSpecificToken(currTokenVersion);

          case 9:
            oldToken = _context2.sent;
            _context2.next = 12;
            return updateEncryption(oldToken);

          case 12:
            result = _context2.sent;


            (0, _tea2.default)(EVT_TYPE.STORE_UPGRADE, {
              prev_ver: currTokenVersion,
              upgrade_ver: getTokenVersion(),
              file_type: 'doc',
              is_first_upgrade: !currTokenVersion ? 'true' : 'false',
              upgrade_status: result ? 'success' : 'fail'
            });

            if (result) {
              _context2.next = 21;
              break;
            }

            if (!isFirstTokenVersion) {
              _context2.next = 20;
              break;
            }

            // Report the edge case and fix it
            (0, _tea2.default)(EVT_TYPE.EMPTY_VT_UPGRADE_FAILURE);
            metaStorage.setItem(META_KEY.TOKEN_VERSION, getTokenVersion());
            _context2.next = 21;
            break;

          case 20:
            throw new Error('Failed to updateEncryption.');

          case 21:
          case 'end':
            return _context2.stop();
        }
      }
    }, _callee2, this);
  }));

  return function versionTokenStoreUpgrade() {
    return _ref2.apply(this, arguments);
  };
}();

/**
 * 初始化 SecureStorage
 * 1. 初始化用户层面的 secureStorage
 * 2. 验证该 store 下的 token version 与 checkSum
 * 3. token version 不一致则从远端拉取旧 token 进行解密之后加密
 */


var initSecureStorage = function () {
  var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3() {
    var isVerified, _isVerified;

    return _regenerator2.default.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return versionTokenStoreUpgrade();

          case 2:
            _context3.next = 4;
            return secureStorage.verify();

          case 4:
            isVerified = _context3.sent;

            if (isVerified) {
              _context3.next = 15;
              break;
            }

            (0, _tea2.default)(EVT_TYPE.STORE_VERIFY, {
              is_upgrade: 'false',
              verify_status: 'fail',
              file_type: 'doc'
            });

            // Try compatibility store upgrade if first verification failed.
            _context3.next = 9;
            return compatStoreUpgrade();

          case 9:
            _context3.next = 11;
            return secureStorage.verify();

          case 11:
            _isVerified = _context3.sent;

            if (_isVerified) {
              _context3.next = 15;
              break;
            }

            (0, _tea2.default)(EVT_TYPE.STORE_VERIFY, {
              is_upgrade: 'true',
              verify_status: 'fail',
              file_type: 'doc'
            });
            throw new Error('Failed to verify secure storage checksum.');

          case 15:

            // 升级成功，后更新 metaStorage 中的 vt
            metaStorage.setItem(META_KEY.TOKEN_VERSION, getTokenVersion());
            (0, _tea2.default)(EVT_TYPE.STORE_VERIFY, {
              is_upgrade: 'false',
              verify_status: 'success',
              file_type: 'doc'
            });
            return _context3.abrupt('return', secureStorage);

          case 18:
          case 'end':
            return _context3.stop();
        }
      }
    }, _callee3, this);
  }));

  return function initSecureStorage() {
    return _ref3.apply(this, arguments);
  };
}();

var _bytedSecureLocalForage = __webpack_require__(696);

var _bytedSecureLocalForage2 = _interopRequireDefault(_bytedSecureLocalForage);

var _api = __webpack_require__(150);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _networkHelper = __webpack_require__(113);

var _cookie = __webpack_require__(536);

var _tea = __webpack_require__(42);

var _tea2 = _interopRequireDefault(_tea);

var _$constants = __webpack_require__(5);

var _envConfigs = __webpack_require__(515);

var _altLocalStore = __webpack_require__(700);

var _altLocalStore2 = _interopRequireDefault(_altLocalStore);

var _crypto = __webpack_require__(1245);

var _crypto2 = _interopRequireDefault(_crypto);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var metaStorage = new _bytedSecureLocalForage2.default({
  name: 'meta-docs-forage:' + window.User.id,
  encrypt: function encrypt(data) {
    return data;
  },
  decrypt: function decrypt(data) {
    return data;
  }
});

var secureStorage = new _bytedSecureLocalForage2.default({
  name: 'docs-forage-v2:' + window.User.id,
  encrypt: function encrypt(data) {
    var secret = getSecret();
    return _crypto2.default.encrypt(data, secret);
  },
  decrypt: function decrypt(data) {
    if (!data) {
      return data;
    }
    var secret = getSecret();
    return _crypto2.default.decrypt(data, secret);
  }
});

function updateEncryption(decryptKey) {
  return secureStorage.updateEncryption({
    decrypt: function decrypt(data) {
      if (!data) return data;
      return _crypto2.default.decrypt(data, decryptKey);
    }
  });
}

var META_KEY = {
  TOKEN_VERSION: 'vt',
  COMPAT_UPGRADE_DONE: 'compat_upgrade_done'
};

var EVT_TYPE = {
  STORE_UPGRADE: 'client_local_store_upgrade',
  STORE_VERIFY: 'client_local_store_verify',
  EMPTY_VT_UPGRADE_FAILURE: 'empty_vt_upgrade_failure'
};

function getTokenVersion() {
  return (0, _cookie.getCookie)('vt');
}

function getSecret() {
  return (0, _cookie.getCookie)('et');
}

function getOldSecret() {
  return (0, _cookie.getCookie)('ot');
}

function getSpecificToken(vt) {
  // 考虑升级逻辑，即从没有 token 到有 token ，vt 初始化的时候为空
  if (!vt) {
    return '';
  }
  return (0, _api.fetchDoc)({ url: _$constants.apiUrls.GET_USER_ET + '?vt=' + vt }).then(function (res) {
    return res.data;
  });
}

var secureStoragePromise = null;
function getStore() {
  if (_browserHelper2.default.isSafari) {
    return Promise.resolve(_altLocalStore2.default);
  }

  if (!secureStoragePromise) {
    secureStoragePromise = initSecureStorage();
  }
  return secureStoragePromise.catch(function (e) {
    window.Raven && window.Raven.captureException(e);
    throw new Error(e);
  });
}

exports.default = getStore;

/***/ }),
/* 1218 */,
/* 1219 */,
/* 1220 */,
/* 1221 */,
/* 1222 */,
/* 1223 */,
/* 1224 */,
/* 1225 */,
/* 1226 */,
/* 1227 */,
/* 1228 */,
/* 1229 */,
/* 1230 */,
/* 1231 */,
/* 1232 */,
/* 1233 */,
/* 1234 */,
/* 1235 */,
/* 1236 */,
/* 1237 */,
/* 1238 */,
/* 1239 */,
/* 1240 */,
/* 1241 */,
/* 1242 */,
/* 1243 */,
/* 1244 */,
/* 1245 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _aes = __webpack_require__(699);

var _aes2 = _interopRequireDefault(_aes);

var _encUtf = __webpack_require__(1246);

var _encUtf2 = _interopRequireDefault(_encUtf);

var _cryptoTypes = __webpack_require__(1247);

var _cryptoTypes2 = _interopRequireDefault(_cryptoTypes);

var _crypto = __webpack_require__(1248);

var _crypto2 = _interopRequireDefault(_crypto);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var cryptoWorker = null;
// Crypto map, timestamp as key
var cryptoMap = new Map();

/**
 * 加解密完成后回调
 *
 * @param {object} event - 回调数据，主要是加解密后内容和调用方标识
 * @param {string} event.data.callerId - 调用标识，调用时间戳
 * @param {string} event.data.content - 加解密后内容
 */
function handleCryptoDone(event) {
  var _event$data = event.data,
      callerId = _event$data.callerId,
      content = _event$data.content;


  if (!cryptoMap.has(callerId)) {
    return;
  }
  var caller = cryptoMap.get(callerId);
  cryptoMap.delete(callerId);
  caller.resolve(content);
}

function generateCallerId() {
  return +new Date() + Math.random();
}

function notifyWorker(callerId, type, secret, content, caller) {
  if (!cryptoWorker) {
    return;
  }
  cryptoWorker.postMessage({
    callerId: callerId,
    type: type,
    secret: secret,
    content: content
  });
  cryptoMap.set(callerId, caller);
}

// Init worker.
if (window.Worker) {
  cryptoWorker = new _crypto2.default();
  cryptoWorker.onmessage = handleCryptoDone;
}

var Crypto = {
  encrypt: function encrypt() {
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    var secret = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

    if (!cryptoWorker) {
      return Crypto.encryptSync(data, secret);
    }

    var callerId = generateCallerId();
    return new Promise(function (resolve, reject) {
      notifyWorker(callerId, _cryptoTypes2.default.CRYPTO_TYPE_ENCRYPT, secret, data, {
        resolve: resolve,
        reject: reject
      });
    });
  },
  encryptSync: function encryptSync() {
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    var secret = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

    return _aes2.default.encrypt(data, secret).toString();
  },
  decrypt: function decrypt() {
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    var secret = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

    if (!cryptoWorker) {
      return Crypto.decryptSync(data, secret);
    }

    var callerId = generateCallerId();
    return new Promise(function (resolve, reject) {
      notifyWorker(callerId, _cryptoTypes2.default.CRYPTO_TYPE_DECRYPT, secret, data, {
        resolve: resolve,
        reject: reject
      });
    });
  },
  decryptSync: function decryptSync() {
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    var secret = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

    return _aes2.default.decrypt(data, secret).toString(_encUtf2.default);
  }
};

exports.default = Crypto;

/***/ }),
/* 1246 */,
/* 1247 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  CRYPTO_TYPE_ENCRYPT: 'encrypt',
  CRYPTO_TYPE_DECRYPT: 'decrypt'
};

/***/ }),
/* 1248 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function() {
  return __webpack_require__(783)("/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"//s3.pstatp.com/eesz/resource/bear/\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse {}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /*\n\t     * Local polyfil of Object.create\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {};\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }())\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory, undef) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(0), __webpack_require__(7), __webpack_require__(8));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_algo = C.algo;\n\t    var MD5 = C_algo.MD5;\n\n\t    /**\n\t     * This key derivation function is meant to conform with EVP_BytesToKey.\n\t     * www.openssl.org/docs/crypto/EVP_BytesToKey.html\n\t     */\n\t    var EvpKDF = C_algo.EvpKDF = Base.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)\n\t         * @property {Hasher} hasher The hash algorithm to use. Default: MD5\n\t         * @property {number} iterations The number of iterations to perform. Default: 1\n\t         */\n\t        cfg: Base.extend({\n\t            keySize: 128/32,\n\t            hasher: MD5,\n\t            iterations: 1\n\t        }),\n\n\t        /**\n\t         * Initializes a newly created key derivation function.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for the derivation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create();\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8 });\n\t         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8, iterations: 1000 });\n\t         */\n\t        init: function (cfg) {\n\t            this.cfg = this.cfg.extend(cfg);\n\t        },\n\n\t        /**\n\t         * Derives a key from a password.\n\t         *\n\t         * @param {WordArray|string} password The password.\n\t         * @param {WordArray|string} salt A salt.\n\t         *\n\t         * @return {WordArray} The derived key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var key = kdf.compute(password, salt);\n\t         */\n\t        compute: function (password, salt) {\n\t            // Shortcut\n\t            var cfg = this.cfg;\n\n\t            // Init hasher\n\t            var hasher = cfg.hasher.create();\n\n\t            // Initial values\n\t            var derivedKey = WordArray.create();\n\n\t            // Shortcuts\n\t            var derivedKeyWords = derivedKey.words;\n\t            var keySize = cfg.keySize;\n\t            var iterations = cfg.iterations;\n\n\t            // Generate key\n\t            while (derivedKeyWords.length < keySize) {\n\t                if (block) {\n\t                    hasher.update(block);\n\t                }\n\t                var block = hasher.update(password).finalize(salt);\n\t                hasher.reset();\n\n\t                // Iterations\n\t                for (var i = 1; i < iterations; i++) {\n\t                    block = hasher.finalize(block);\n\t                    hasher.reset();\n\t                }\n\n\t                derivedKey.concat(block);\n\t            }\n\t            derivedKey.sigBytes = keySize * 4;\n\n\t            return derivedKey;\n\t        }\n\t    });\n\n\t    /**\n\t     * Derives a key from a password.\n\t     *\n\t     * @param {WordArray|string} password The password.\n\t     * @param {WordArray|string} salt A salt.\n\t     * @param {Object} cfg (Optional) The configuration options to use for this computation.\n\t     *\n\t     * @return {WordArray} The derived key.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var key = CryptoJS.EvpKDF(password, salt);\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8 });\n\t     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8, iterations: 1000 });\n\t     */\n\t    C.EvpKDF = function (password, salt, cfg) {\n\t        return EvpKDF.create(cfg).compute(password, salt);\n\t    };\n\t}());\n\n\n\treturn CryptoJS.EvpKDF;\n\n}));\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _encUtf = __webpack_require__(3);\n\nvar _encUtf2 = _interopRequireDefault(_encUtf);\n\nvar _aes = __webpack_require__(4);\n\nvar _aes2 = _interopRequireDefault(_aes);\n\nvar _cryptoTypes = __webpack_require__(10);\n\nvar _cryptoTypes2 = _interopRequireDefault(_cryptoTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 无法在 Worker 内通过解构的方式 import\n// 详见 https://github.com/webpack-contrib/worker-loader/issues/35\n\n/**\n * Secure store 存储加解密\n *\n * @param  {object} event - 加解密所需参数\n * @param  {string} event.data.callerId - 调用方标识，需要透传回去告知加解密完成\n * @param  {string} event.data.type - 类型，加密或解密\n * @param  {string} event.data.secret - 秘钥\n * @param  {string} event.data.content - 待加解密内容\n */\n// eslint-disable-next-line\nonmessage = function onmessage(event) {\n  var _event$data = event.data,\n      callerId = _event$data.callerId,\n      type = _event$data.type,\n      secret = _event$data.secret,\n      content = _event$data.content;\n\n\n  var result = null;\n\n  switch (type) {\n    case _cryptoTypes2.default.CRYPTO_TYPE_ENCRYPT:\n      result = _aes2.default.encrypt(content, secret).toString();\n      break;\n    case _cryptoTypes2.default.CRYPTO_TYPE_DECRYPT:\n      result = _aes2.default.decrypt(content, secret).toString(_encUtf2.default);\n      break;\n    default:\n      result = content;\n  }\n\n  postMessage({\n    callerId: callerId,\n    content: result\n  });\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(0));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.enc.Utf8;\n\n}));\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory, undef) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(0), __webpack_require__(5), __webpack_require__(6), __webpack_require__(1), __webpack_require__(9));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var BlockCipher = C_lib.BlockCipher;\n\t    var C_algo = C.algo;\n\n\t    // Lookup tables\n\t    var SBOX = [];\n\t    var INV_SBOX = [];\n\t    var SUB_MIX_0 = [];\n\t    var SUB_MIX_1 = [];\n\t    var SUB_MIX_2 = [];\n\t    var SUB_MIX_3 = [];\n\t    var INV_SUB_MIX_0 = [];\n\t    var INV_SUB_MIX_1 = [];\n\t    var INV_SUB_MIX_2 = [];\n\t    var INV_SUB_MIX_3 = [];\n\n\t    // Compute lookup tables\n\t    (function () {\n\t        // Compute double table\n\t        var d = [];\n\t        for (var i = 0; i < 256; i++) {\n\t            if (i < 128) {\n\t                d[i] = i << 1;\n\t            } else {\n\t                d[i] = (i << 1) ^ 0x11b;\n\t            }\n\t        }\n\n\t        // Walk GF(2^8)\n\t        var x = 0;\n\t        var xi = 0;\n\t        for (var i = 0; i < 256; i++) {\n\t            // Compute sbox\n\t            var sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);\n\t            sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;\n\t            SBOX[x] = sx;\n\t            INV_SBOX[sx] = x;\n\n\t            // Compute multiplication\n\t            var x2 = d[x];\n\t            var x4 = d[x2];\n\t            var x8 = d[x4];\n\n\t            // Compute sub bytes, mix columns tables\n\t            var t = (d[sx] * 0x101) ^ (sx * 0x1010100);\n\t            SUB_MIX_0[x] = (t << 24) | (t >>> 8);\n\t            SUB_MIX_1[x] = (t << 16) | (t >>> 16);\n\t            SUB_MIX_2[x] = (t << 8)  | (t >>> 24);\n\t            SUB_MIX_3[x] = t;\n\n\t            // Compute inv sub bytes, inv mix columns tables\n\t            var t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);\n\t            INV_SUB_MIX_0[sx] = (t << 24) | (t >>> 8);\n\t            INV_SUB_MIX_1[sx] = (t << 16) | (t >>> 16);\n\t            INV_SUB_MIX_2[sx] = (t << 8)  | (t >>> 24);\n\t            INV_SUB_MIX_3[sx] = t;\n\n\t            // Compute next counter\n\t            if (!x) {\n\t                x = xi = 1;\n\t            } else {\n\t                x = x2 ^ d[d[d[x8 ^ x2]]];\n\t                xi ^= d[d[xi]];\n\t            }\n\t        }\n\t    }());\n\n\t    // Precomputed Rcon lookup\n\t    var RCON = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36];\n\n\t    /**\n\t     * AES block cipher algorithm.\n\t     */\n\t    var AES = C_algo.AES = BlockCipher.extend({\n\t        _doReset: function () {\n\t            // Skip reset of nRounds has been set before and key did not change\n\t            if (this._nRounds && this._keyPriorReset === this._key) {\n\t                return;\n\t            }\n\n\t            // Shortcuts\n\t            var key = this._keyPriorReset = this._key;\n\t            var keyWords = key.words;\n\t            var keySize = key.sigBytes / 4;\n\n\t            // Compute number of rounds\n\t            var nRounds = this._nRounds = keySize + 6;\n\n\t            // Compute number of key schedule rows\n\t            var ksRows = (nRounds + 1) * 4;\n\n\t            // Compute key schedule\n\t            var keySchedule = this._keySchedule = [];\n\t            for (var ksRow = 0; ksRow < ksRows; ksRow++) {\n\t                if (ksRow < keySize) {\n\t                    keySchedule[ksRow] = keyWords[ksRow];\n\t                } else {\n\t                    var t = keySchedule[ksRow - 1];\n\n\t                    if (!(ksRow % keySize)) {\n\t                        // Rot word\n\t                        t = (t << 8) | (t >>> 24);\n\n\t                        // Sub word\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\n\n\t                        // Mix Rcon\n\t                        t ^= RCON[(ksRow / keySize) | 0] << 24;\n\t                    } else if (keySize > 6 && ksRow % keySize == 4) {\n\t                        // Sub word\n\t                        t = (SBOX[t >>> 24] << 24) | (SBOX[(t >>> 16) & 0xff] << 16) | (SBOX[(t >>> 8) & 0xff] << 8) | SBOX[t & 0xff];\n\t                    }\n\n\t                    keySchedule[ksRow] = keySchedule[ksRow - keySize] ^ t;\n\t                }\n\t            }\n\n\t            // Compute inv key schedule\n\t            var invKeySchedule = this._invKeySchedule = [];\n\t            for (var invKsRow = 0; invKsRow < ksRows; invKsRow++) {\n\t                var ksRow = ksRows - invKsRow;\n\n\t                if (invKsRow % 4) {\n\t                    var t = keySchedule[ksRow];\n\t                } else {\n\t                    var t = keySchedule[ksRow - 4];\n\t                }\n\n\t                if (invKsRow < 4 || ksRow <= 4) {\n\t                    invKeySchedule[invKsRow] = t;\n\t                } else {\n\t                    invKeySchedule[invKsRow] = INV_SUB_MIX_0[SBOX[t >>> 24]] ^ INV_SUB_MIX_1[SBOX[(t >>> 16) & 0xff]] ^\n\t                                               INV_SUB_MIX_2[SBOX[(t >>> 8) & 0xff]] ^ INV_SUB_MIX_3[SBOX[t & 0xff]];\n\t                }\n\t            }\n\t        },\n\n\t        encryptBlock: function (M, offset) {\n\t            this._doCryptBlock(M, offset, this._keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX);\n\t        },\n\n\t        decryptBlock: function (M, offset) {\n\t            // Swap 2nd and 4th rows\n\t            var t = M[offset + 1];\n\t            M[offset + 1] = M[offset + 3];\n\t            M[offset + 3] = t;\n\n\t            this._doCryptBlock(M, offset, this._invKeySchedule, INV_SUB_MIX_0, INV_SUB_MIX_1, INV_SUB_MIX_2, INV_SUB_MIX_3, INV_SBOX);\n\n\t            // Inv swap 2nd and 4th rows\n\t            var t = M[offset + 1];\n\t            M[offset + 1] = M[offset + 3];\n\t            M[offset + 3] = t;\n\t        },\n\n\t        _doCryptBlock: function (M, offset, keySchedule, SUB_MIX_0, SUB_MIX_1, SUB_MIX_2, SUB_MIX_3, SBOX) {\n\t            // Shortcut\n\t            var nRounds = this._nRounds;\n\n\t            // Get input, add round key\n\t            var s0 = M[offset]     ^ keySchedule[0];\n\t            var s1 = M[offset + 1] ^ keySchedule[1];\n\t            var s2 = M[offset + 2] ^ keySchedule[2];\n\t            var s3 = M[offset + 3] ^ keySchedule[3];\n\n\t            // Key schedule row counter\n\t            var ksRow = 4;\n\n\t            // Rounds\n\t            for (var round = 1; round < nRounds; round++) {\n\t                // Shift rows, sub bytes, mix columns, add round key\n\t                var t0 = SUB_MIX_0[s0 >>> 24] ^ SUB_MIX_1[(s1 >>> 16) & 0xff] ^ SUB_MIX_2[(s2 >>> 8) & 0xff] ^ SUB_MIX_3[s3 & 0xff] ^ keySchedule[ksRow++];\n\t                var t1 = SUB_MIX_0[s1 >>> 24] ^ SUB_MIX_1[(s2 >>> 16) & 0xff] ^ SUB_MIX_2[(s3 >>> 8) & 0xff] ^ SUB_MIX_3[s0 & 0xff] ^ keySchedule[ksRow++];\n\t                var t2 = SUB_MIX_0[s2 >>> 24] ^ SUB_MIX_1[(s3 >>> 16) & 0xff] ^ SUB_MIX_2[(s0 >>> 8) & 0xff] ^ SUB_MIX_3[s1 & 0xff] ^ keySchedule[ksRow++];\n\t                var t3 = SUB_MIX_0[s3 >>> 24] ^ SUB_MIX_1[(s0 >>> 16) & 0xff] ^ SUB_MIX_2[(s1 >>> 8) & 0xff] ^ SUB_MIX_3[s2 & 0xff] ^ keySchedule[ksRow++];\n\n\t                // Update state\n\t                s0 = t0;\n\t                s1 = t1;\n\t                s2 = t2;\n\t                s3 = t3;\n\t            }\n\n\t            // Shift rows, sub bytes, add round key\n\t            var t0 = ((SBOX[s0 >>> 24] << 24) | (SBOX[(s1 >>> 16) & 0xff] << 16) | (SBOX[(s2 >>> 8) & 0xff] << 8) | SBOX[s3 & 0xff]) ^ keySchedule[ksRow++];\n\t            var t1 = ((SBOX[s1 >>> 24] << 24) | (SBOX[(s2 >>> 16) & 0xff] << 16) | (SBOX[(s3 >>> 8) & 0xff] << 8) | SBOX[s0 & 0xff]) ^ keySchedule[ksRow++];\n\t            var t2 = ((SBOX[s2 >>> 24] << 24) | (SBOX[(s3 >>> 16) & 0xff] << 16) | (SBOX[(s0 >>> 8) & 0xff] << 8) | SBOX[s1 & 0xff]) ^ keySchedule[ksRow++];\n\t            var t3 = ((SBOX[s3 >>> 24] << 24) | (SBOX[(s0 >>> 16) & 0xff] << 16) | (SBOX[(s1 >>> 8) & 0xff] << 8) | SBOX[s2 & 0xff]) ^ keySchedule[ksRow++];\n\n\t            // Set output\n\t            M[offset]     = t0;\n\t            M[offset + 1] = t1;\n\t            M[offset + 2] = t2;\n\t            M[offset + 3] = t3;\n\t        },\n\n\t        keySize: 256/32\n\t    });\n\n\t    /**\n\t     * Shortcut functions to the cipher's object interface.\n\t     *\n\t     * @example\n\t     *\n\t     *     var ciphertext = CryptoJS.AES.encrypt(message, key, cfg);\n\t     *     var plaintext  = CryptoJS.AES.decrypt(ciphertext, key, cfg);\n\t     */\n\t    C.AES = BlockCipher._createHelper(AES);\n\t}());\n\n\n\treturn CryptoJS.AES;\n\n}));\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(0));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              words[nBytes >>> 2] |= (bits1 | bits2) << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(0));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var T = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        for (var i = 0; i < 64; i++) {\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\n\t        }\n\t    }());\n\n\t    /**\n\t     * MD5 hash algorithm.\n\t     */\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var M_offset_0  = M[offset + 0];\n\t            var M_offset_1  = M[offset + 1];\n\t            var M_offset_2  = M[offset + 2];\n\t            var M_offset_3  = M[offset + 3];\n\t            var M_offset_4  = M[offset + 4];\n\t            var M_offset_5  = M[offset + 5];\n\t            var M_offset_6  = M[offset + 6];\n\t            var M_offset_7  = M[offset + 7];\n\t            var M_offset_8  = M[offset + 8];\n\t            var M_offset_9  = M[offset + 9];\n\t            var M_offset_10 = M[offset + 10];\n\t            var M_offset_11 = M[offset + 11];\n\t            var M_offset_12 = M[offset + 12];\n\t            var M_offset_13 = M[offset + 13];\n\t            var M_offset_14 = M[offset + 14];\n\t            var M_offset_15 = M[offset + 15];\n\n\t            // Working varialbes\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\n\t            // Computation\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\n\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\n\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\n\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\n\t            var nBitsTotalL = nBitsTotal;\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\n\t            );\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\n\t            );\n\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    function FF(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function GG(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function HH(a, b, c, d, x, s, t) {\n\t        var n = a + (b ^ c ^ d) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function II(a, b, c, d, x, s, t) {\n\t        var n = a + (c ^ (b | ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.MD5('message');\n\t     *     var hash = CryptoJS.MD5(wordArray);\n\t     */\n\t    C.MD5 = Hasher._createHelper(MD5);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\n\t     */\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\n\t}(Math));\n\n\n\treturn CryptoJS.MD5;\n\n}));\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(0));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-1 hash algorithm.\n\t     */\n\t    var SHA1 = C_algo.SHA1 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476,\n\t                0xc3d2e1f0\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\n\t            // Computation\n\t            for (var i = 0; i < 80; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n\t                    W[i] = (n << 1) | (n >>> 31);\n\t                }\n\n\t                var t = ((a << 5) | (a >>> 27)) + e + W[i];\n\t                if (i < 20) {\n\t                    t += ((b & c) | (~b & d)) + 0x5a827999;\n\t                } else if (i < 40) {\n\t                    t += (b ^ c ^ d) + 0x6ed9eba1;\n\t                } else if (i < 60) {\n\t                    t += ((b & c) | (b & d) | (c & d)) - 0x70e44324;\n\t                } else /* if (i < 80) */ {\n\t                    t += (b ^ c ^ d) - 0x359d3e2a;\n\t                }\n\n\t                e = d;\n\t                d = c;\n\t                c = (b << 30) | (b >>> 2);\n\t                b = a;\n\t                a = t;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA1('message');\n\t     *     var hash = CryptoJS.SHA1(wordArray);\n\t     */\n\t    C.SHA1 = Hasher._createHelper(SHA1);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA1(message, key);\n\t     */\n\t    C.HmacSHA1 = Hasher._createHmacHelper(SHA1);\n\t}());\n\n\n\treturn CryptoJS.SHA1;\n\n}));\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(0));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n;(function (root, factory, undef) {\n\tif (true) {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(__webpack_require__(0), __webpack_require__(1));\n\t}\n\telse {}\n}(this, function (CryptoJS) {\n\n\t/**\n\t * Cipher core components.\n\t */\n\tCryptoJS.lib.Cipher || (function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var WordArray = C_lib.WordArray;\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var Base64 = C_enc.Base64;\n\t    var C_algo = C.algo;\n\t    var EvpKDF = C_algo.EvpKDF;\n\n\t    /**\n\t     * Abstract base cipher template.\n\t     *\n\t     * @property {number} keySize This cipher's key size. Default: 4 (128 bits)\n\t     * @property {number} ivSize This cipher's IV size. Default: 4 (128 bits)\n\t     * @property {number} _ENC_XFORM_MODE A constant representing encryption mode.\n\t     * @property {number} _DEC_XFORM_MODE A constant representing decryption mode.\n\t     */\n\t    var Cipher = C_lib.Cipher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {WordArray} iv The IV to use for this operation.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Creates this cipher in encryption mode.\n\t         *\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {Cipher} A cipher instance.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipher = CryptoJS.algo.AES.createEncryptor(keyWordArray, { iv: ivWordArray });\n\t         */\n\t        createEncryptor: function (key, cfg) {\n\t            return this.create(this._ENC_XFORM_MODE, key, cfg);\n\t        },\n\n\t        /**\n\t         * Creates this cipher in decryption mode.\n\t         *\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {Cipher} A cipher instance.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipher = CryptoJS.algo.AES.createDecryptor(keyWordArray, { iv: ivWordArray });\n\t         */\n\t        createDecryptor: function (key, cfg) {\n\t            return this.create(this._DEC_XFORM_MODE, key, cfg);\n\t        },\n\n\t        /**\n\t         * Initializes a newly created cipher.\n\t         *\n\t         * @param {number} xformMode Either the encryption or decryption transormation mode constant.\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipher = CryptoJS.algo.AES.create(CryptoJS.algo.AES._ENC_XFORM_MODE, keyWordArray, { iv: ivWordArray });\n\t         */\n\t        init: function (xformMode, key, cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Store transform mode and key\n\t            this._xformMode = xformMode;\n\t            this._key = key;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this cipher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     cipher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-cipher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Adds data to be encrypted or decrypted.\n\t         *\n\t         * @param {WordArray|string} dataUpdate The data to encrypt or decrypt.\n\t         *\n\t         * @return {WordArray} The data after processing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var encrypted = cipher.process('data');\n\t         *     var encrypted = cipher.process(wordArray);\n\t         */\n\t        process: function (dataUpdate) {\n\t            // Append\n\t            this._append(dataUpdate);\n\n\t            // Process available blocks\n\t            return this._process();\n\t        },\n\n\t        /**\n\t         * Finalizes the encryption or decryption process.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} dataUpdate The final data to encrypt or decrypt.\n\t         *\n\t         * @return {WordArray} The data after final processing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var encrypted = cipher.finalize();\n\t         *     var encrypted = cipher.finalize('data');\n\t         *     var encrypted = cipher.finalize(wordArray);\n\t         */\n\t        finalize: function (dataUpdate) {\n\t            // Final data update\n\t            if (dataUpdate) {\n\t                this._append(dataUpdate);\n\t            }\n\n\t            // Perform concrete-cipher logic\n\t            var finalProcessedData = this._doFinalize();\n\n\t            return finalProcessedData;\n\t        },\n\n\t        keySize: 128/32,\n\n\t        ivSize: 128/32,\n\n\t        _ENC_XFORM_MODE: 1,\n\n\t        _DEC_XFORM_MODE: 2,\n\n\t        /**\n\t         * Creates shortcut functions to a cipher's object interface.\n\t         *\n\t         * @param {Cipher} cipher The cipher to create a helper for.\n\t         *\n\t         * @return {Object} An object with encrypt and decrypt shortcut functions.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var AES = CryptoJS.lib.Cipher._createHelper(CryptoJS.algo.AES);\n\t         */\n\t        _createHelper: (function () {\n\t            function selectCipherStrategy(key) {\n\t                if (typeof key == 'string') {\n\t                    return PasswordBasedCipher;\n\t                } else {\n\t                    return SerializableCipher;\n\t                }\n\t            }\n\n\t            return function (cipher) {\n\t                return {\n\t                    encrypt: function (message, key, cfg) {\n\t                        return selectCipherStrategy(key).encrypt(cipher, message, key, cfg);\n\t                    },\n\n\t                    decrypt: function (ciphertext, key, cfg) {\n\t                        return selectCipherStrategy(key).decrypt(cipher, ciphertext, key, cfg);\n\t                    }\n\t                };\n\t            };\n\t        }())\n\t    });\n\n\t    /**\n\t     * Abstract base stream cipher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 1 (32 bits)\n\t     */\n\t    var StreamCipher = C_lib.StreamCipher = Cipher.extend({\n\t        _doFinalize: function () {\n\t            // Process partial blocks\n\t            var finalProcessedBlocks = this._process(!!'flush');\n\n\t            return finalProcessedBlocks;\n\t        },\n\n\t        blockSize: 1\n\t    });\n\n\t    /**\n\t     * Mode namespace.\n\t     */\n\t    var C_mode = C.mode = {};\n\n\t    /**\n\t     * Abstract base block cipher mode template.\n\t     */\n\t    var BlockCipherMode = C_lib.BlockCipherMode = Base.extend({\n\t        /**\n\t         * Creates this mode for encryption.\n\t         *\n\t         * @param {Cipher} cipher A block cipher instance.\n\t         * @param {Array} iv The IV words.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var mode = CryptoJS.mode.CBC.createEncryptor(cipher, iv.words);\n\t         */\n\t        createEncryptor: function (cipher, iv) {\n\t            return this.Encryptor.create(cipher, iv);\n\t        },\n\n\t        /**\n\t         * Creates this mode for decryption.\n\t         *\n\t         * @param {Cipher} cipher A block cipher instance.\n\t         * @param {Array} iv The IV words.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var mode = CryptoJS.mode.CBC.createDecryptor(cipher, iv.words);\n\t         */\n\t        createDecryptor: function (cipher, iv) {\n\t            return this.Decryptor.create(cipher, iv);\n\t        },\n\n\t        /**\n\t         * Initializes a newly created mode.\n\t         *\n\t         * @param {Cipher} cipher A block cipher instance.\n\t         * @param {Array} iv The IV words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var mode = CryptoJS.mode.CBC.Encryptor.create(cipher, iv.words);\n\t         */\n\t        init: function (cipher, iv) {\n\t            this._cipher = cipher;\n\t            this._iv = iv;\n\t        }\n\t    });\n\n\t    /**\n\t     * Cipher Block Chaining mode.\n\t     */\n\t    var CBC = C_mode.CBC = (function () {\n\t        /**\n\t         * Abstract base CBC mode.\n\t         */\n\t        var CBC = BlockCipherMode.extend();\n\n\t        /**\n\t         * CBC encryptor.\n\t         */\n\t        CBC.Encryptor = CBC.extend({\n\t            /**\n\t             * Processes the data block at offset.\n\t             *\n\t             * @param {Array} words The data words to operate on.\n\t             * @param {number} offset The offset where the block starts.\n\t             *\n\t             * @example\n\t             *\n\t             *     mode.processBlock(data.words, offset);\n\t             */\n\t            processBlock: function (words, offset) {\n\t                // Shortcuts\n\t                var cipher = this._cipher;\n\t                var blockSize = cipher.blockSize;\n\n\t                // XOR and encrypt\n\t                xorBlock.call(this, words, offset, blockSize);\n\t                cipher.encryptBlock(words, offset);\n\n\t                // Remember this block to use with next block\n\t                this._prevBlock = words.slice(offset, offset + blockSize);\n\t            }\n\t        });\n\n\t        /**\n\t         * CBC decryptor.\n\t         */\n\t        CBC.Decryptor = CBC.extend({\n\t            /**\n\t             * Processes the data block at offset.\n\t             *\n\t             * @param {Array} words The data words to operate on.\n\t             * @param {number} offset The offset where the block starts.\n\t             *\n\t             * @example\n\t             *\n\t             *     mode.processBlock(data.words, offset);\n\t             */\n\t            processBlock: function (words, offset) {\n\t                // Shortcuts\n\t                var cipher = this._cipher;\n\t                var blockSize = cipher.blockSize;\n\n\t                // Remember this block to use with next block\n\t                var thisBlock = words.slice(offset, offset + blockSize);\n\n\t                // Decrypt and XOR\n\t                cipher.decryptBlock(words, offset);\n\t                xorBlock.call(this, words, offset, blockSize);\n\n\t                // This block becomes the previous block\n\t                this._prevBlock = thisBlock;\n\t            }\n\t        });\n\n\t        function xorBlock(words, offset, blockSize) {\n\t            // Shortcut\n\t            var iv = this._iv;\n\n\t            // Choose mixing block\n\t            if (iv) {\n\t                var block = iv;\n\n\t                // Remove IV for subsequent blocks\n\t                this._iv = undefined;\n\t            } else {\n\t                var block = this._prevBlock;\n\t            }\n\n\t            // XOR blocks\n\t            for (var i = 0; i < blockSize; i++) {\n\t                words[offset + i] ^= block[i];\n\t            }\n\t        }\n\n\t        return CBC;\n\t    }());\n\n\t    /**\n\t     * Padding namespace.\n\t     */\n\t    var C_pad = C.pad = {};\n\n\t    /**\n\t     * PKCS #5/7 padding strategy.\n\t     */\n\t    var Pkcs7 = C_pad.Pkcs7 = {\n\t        /**\n\t         * Pads data using the algorithm defined in PKCS #5/7.\n\t         *\n\t         * @param {WordArray} data The data to pad.\n\t         * @param {number} blockSize The multiple that the data should be padded to.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     CryptoJS.pad.Pkcs7.pad(wordArray, 4);\n\t         */\n\t        pad: function (data, blockSize) {\n\t            // Shortcut\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count padding bytes\n\t            var nPaddingBytes = blockSizeBytes - data.sigBytes % blockSizeBytes;\n\n\t            // Create padding word\n\t            var paddingWord = (nPaddingBytes << 24) | (nPaddingBytes << 16) | (nPaddingBytes << 8) | nPaddingBytes;\n\n\t            // Create padding\n\t            var paddingWords = [];\n\t            for (var i = 0; i < nPaddingBytes; i += 4) {\n\t                paddingWords.push(paddingWord);\n\t            }\n\t            var padding = WordArray.create(paddingWords, nPaddingBytes);\n\n\t            // Add padding\n\t            data.concat(padding);\n\t        },\n\n\t        /**\n\t         * Unpads data that had been padded using the algorithm defined in PKCS #5/7.\n\t         *\n\t         * @param {WordArray} data The data to unpad.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     CryptoJS.pad.Pkcs7.unpad(wordArray);\n\t         */\n\t        unpad: function (data) {\n\t            // Get number of padding bytes from last byte\n\t            var nPaddingBytes = data.words[(data.sigBytes - 1) >>> 2] & 0xff;\n\n\t            // Remove padding\n\t            data.sigBytes -= nPaddingBytes;\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract base block cipher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this cipher operates on. Default: 4 (128 bits)\n\t     */\n\t    var BlockCipher = C_lib.BlockCipher = Cipher.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {Mode} mode The block mode to use. Default: CBC\n\t         * @property {Padding} padding The padding strategy to use. Default: Pkcs7\n\t         */\n\t        cfg: Cipher.cfg.extend({\n\t            mode: CBC,\n\t            padding: Pkcs7\n\t        }),\n\n\t        reset: function () {\n\t            // Reset cipher\n\t            Cipher.reset.call(this);\n\n\t            // Shortcuts\n\t            var cfg = this.cfg;\n\t            var iv = cfg.iv;\n\t            var mode = cfg.mode;\n\n\t            // Reset block mode\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\n\t                var modeCreator = mode.createEncryptor;\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\n\t                var modeCreator = mode.createDecryptor;\n\t                // Keep at least one block in the buffer for unpadding\n\t                this._minBufferSize = 1;\n\t            }\n\n\t            if (this._mode && this._mode.__creator == modeCreator) {\n\t                this._mode.init(this, iv && iv.words);\n\t            } else {\n\t                this._mode = modeCreator.call(mode, this, iv && iv.words);\n\t                this._mode.__creator = modeCreator;\n\t            }\n\t        },\n\n\t        _doProcessBlock: function (words, offset) {\n\t            this._mode.processBlock(words, offset);\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcut\n\t            var padding = this.cfg.padding;\n\n\t            // Finalize\n\t            if (this._xformMode == this._ENC_XFORM_MODE) {\n\t                // Pad data\n\t                padding.pad(this._data, this.blockSize);\n\n\t                // Process final blocks\n\t                var finalProcessedBlocks = this._process(!!'flush');\n\t            } else /* if (this._xformMode == this._DEC_XFORM_MODE) */ {\n\t                // Process final blocks\n\t                var finalProcessedBlocks = this._process(!!'flush');\n\n\t                // Unpad data\n\t                padding.unpad(finalProcessedBlocks);\n\t            }\n\n\t            return finalProcessedBlocks;\n\t        },\n\n\t        blockSize: 128/32\n\t    });\n\n\t    /**\n\t     * A collection of cipher parameters.\n\t     *\n\t     * @property {WordArray} ciphertext The raw ciphertext.\n\t     * @property {WordArray} key The key to this ciphertext.\n\t     * @property {WordArray} iv The IV used in the ciphering operation.\n\t     * @property {WordArray} salt The salt used with a key derivation function.\n\t     * @property {Cipher} algorithm The cipher algorithm.\n\t     * @property {Mode} mode The block mode used in the ciphering operation.\n\t     * @property {Padding} padding The padding scheme used in the ciphering operation.\n\t     * @property {number} blockSize The block size of the cipher.\n\t     * @property {Format} formatter The default formatting strategy to convert this cipher params object to a string.\n\t     */\n\t    var CipherParams = C_lib.CipherParams = Base.extend({\n\t        /**\n\t         * Initializes a newly created cipher params object.\n\t         *\n\t         * @param {Object} cipherParams An object with any of the possible cipher parameters.\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipherParams = CryptoJS.lib.CipherParams.create({\n\t         *         ciphertext: ciphertextWordArray,\n\t         *         key: keyWordArray,\n\t         *         iv: ivWordArray,\n\t         *         salt: saltWordArray,\n\t         *         algorithm: CryptoJS.algo.AES,\n\t         *         mode: CryptoJS.mode.CBC,\n\t         *         padding: CryptoJS.pad.PKCS7,\n\t         *         blockSize: 4,\n\t         *         formatter: CryptoJS.format.OpenSSL\n\t         *     });\n\t         */\n\t        init: function (cipherParams) {\n\t            this.mixIn(cipherParams);\n\t        },\n\n\t        /**\n\t         * Converts this cipher params object to a string.\n\t         *\n\t         * @param {Format} formatter (Optional) The formatting strategy to use.\n\t         *\n\t         * @return {string} The stringified cipher params.\n\t         *\n\t         * @throws Error If neither the formatter nor the default formatter is set.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = cipherParams + '';\n\t         *     var string = cipherParams.toString();\n\t         *     var string = cipherParams.toString(CryptoJS.format.OpenSSL);\n\t         */\n\t        toString: function (formatter) {\n\t            return (formatter || this.formatter).stringify(this);\n\t        }\n\t    });\n\n\t    /**\n\t     * Format namespace.\n\t     */\n\t    var C_format = C.format = {};\n\n\t    /**\n\t     * OpenSSL formatting strategy.\n\t     */\n\t    var OpenSSLFormatter = C_format.OpenSSL = {\n\t        /**\n\t         * Converts a cipher params object to an OpenSSL-compatible string.\n\t         *\n\t         * @param {CipherParams} cipherParams The cipher params object.\n\t         *\n\t         * @return {string} The OpenSSL-compatible string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var openSSLString = CryptoJS.format.OpenSSL.stringify(cipherParams);\n\t         */\n\t        stringify: function (cipherParams) {\n\t            // Shortcuts\n\t            var ciphertext = cipherParams.ciphertext;\n\t            var salt = cipherParams.salt;\n\n\t            // Format\n\t            if (salt) {\n\t                var wordArray = WordArray.create([0x53616c74, 0x65645f5f]).concat(salt).concat(ciphertext);\n\t            } else {\n\t                var wordArray = ciphertext;\n\t            }\n\n\t            return wordArray.toString(Base64);\n\t        },\n\n\t        /**\n\t         * Converts an OpenSSL-compatible string to a cipher params object.\n\t         *\n\t         * @param {string} openSSLStr The OpenSSL-compatible string.\n\t         *\n\t         * @return {CipherParams} The cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var cipherParams = CryptoJS.format.OpenSSL.parse(openSSLString);\n\t         */\n\t        parse: function (openSSLStr) {\n\t            // Parse base64\n\t            var ciphertext = Base64.parse(openSSLStr);\n\n\t            // Shortcut\n\t            var ciphertextWords = ciphertext.words;\n\n\t            // Test for salt\n\t            if (ciphertextWords[0] == 0x53616c74 && ciphertextWords[1] == 0x65645f5f) {\n\t                // Extract salt\n\t                var salt = WordArray.create(ciphertextWords.slice(2, 4));\n\n\t                // Remove salt from ciphertext\n\t                ciphertextWords.splice(0, 4);\n\t                ciphertext.sigBytes -= 16;\n\t            }\n\n\t            return CipherParams.create({ ciphertext: ciphertext, salt: salt });\n\t        }\n\t    };\n\n\t    /**\n\t     * A cipher wrapper that returns ciphertext as a serializable cipher params object.\n\t     */\n\t    var SerializableCipher = C_lib.SerializableCipher = Base.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {Formatter} format The formatting strategy to convert cipher param objects to and from a string. Default: OpenSSL\n\t         */\n\t        cfg: Base.extend({\n\t            format: OpenSSLFormatter\n\t        }),\n\n\t        /**\n\t         * Encrypts a message.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {WordArray|string} message The message to encrypt.\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {CipherParams} A cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key);\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv });\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv, format: CryptoJS.format.OpenSSL });\n\t         */\n\t        encrypt: function (cipher, message, key, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Encrypt\n\t            var encryptor = cipher.createEncryptor(key, cfg);\n\t            var ciphertext = encryptor.finalize(message);\n\n\t            // Shortcut\n\t            var cipherCfg = encryptor.cfg;\n\n\t            // Create and return serializable cipher params\n\t            return CipherParams.create({\n\t                ciphertext: ciphertext,\n\t                key: key,\n\t                iv: cipherCfg.iv,\n\t                algorithm: cipher,\n\t                mode: cipherCfg.mode,\n\t                padding: cipherCfg.padding,\n\t                blockSize: cipher.blockSize,\n\t                formatter: cfg.format\n\t            });\n\t        },\n\n\t        /**\n\t         * Decrypts serialized ciphertext.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\n\t         * @param {WordArray} key The key.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {WordArray} The plaintext.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, key, { iv: iv, format: CryptoJS.format.OpenSSL });\n\t         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, key, { iv: iv, format: CryptoJS.format.OpenSSL });\n\t         */\n\t        decrypt: function (cipher, ciphertext, key, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Convert string to CipherParams\n\t            ciphertext = this._parse(ciphertext, cfg.format);\n\n\t            // Decrypt\n\t            var plaintext = cipher.createDecryptor(key, cfg).finalize(ciphertext.ciphertext);\n\n\t            return plaintext;\n\t        },\n\n\t        /**\n\t         * Converts serialized ciphertext to CipherParams,\n\t         * else assumed CipherParams already and returns ciphertext unchanged.\n\t         *\n\t         * @param {CipherParams|string} ciphertext The ciphertext.\n\t         * @param {Formatter} format The formatting strategy to use to parse serialized ciphertext.\n\t         *\n\t         * @return {CipherParams} The unserialized ciphertext.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var ciphertextParams = CryptoJS.lib.SerializableCipher._parse(ciphertextStringOrParams, format);\n\t         */\n\t        _parse: function (ciphertext, format) {\n\t            if (typeof ciphertext == 'string') {\n\t                return format.parse(ciphertext, this);\n\t            } else {\n\t                return ciphertext;\n\t            }\n\t        }\n\t    });\n\n\t    /**\n\t     * Key derivation function namespace.\n\t     */\n\t    var C_kdf = C.kdf = {};\n\n\t    /**\n\t     * OpenSSL key derivation function.\n\t     */\n\t    var OpenSSLKdf = C_kdf.OpenSSL = {\n\t        /**\n\t         * Derives a key and IV from a password.\n\t         *\n\t         * @param {string} password The password to derive from.\n\t         * @param {number} keySize The size in words of the key to generate.\n\t         * @param {number} ivSize The size in words of the IV to generate.\n\t         * @param {WordArray|string} salt (Optional) A 64-bit salt to use. If omitted, a salt will be generated randomly.\n\t         *\n\t         * @return {CipherParams} A cipher params object with the key, IV, and salt.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32);\n\t         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32, 'saltsalt');\n\t         */\n\t        execute: function (password, keySize, ivSize, salt) {\n\t            // Generate random salt\n\t            if (!salt) {\n\t                salt = WordArray.random(64/8);\n\t            }\n\n\t            // Derive key and IV\n\t            var key = EvpKDF.create({ keySize: keySize + ivSize }).compute(password, salt);\n\n\t            // Separate key and IV\n\t            var iv = WordArray.create(key.words.slice(keySize), ivSize * 4);\n\t            key.sigBytes = keySize * 4;\n\n\t            // Return params\n\t            return CipherParams.create({ key: key, iv: iv, salt: salt });\n\t        }\n\t    };\n\n\t    /**\n\t     * A serializable cipher wrapper that derives the key from a password,\n\t     * and returns ciphertext as a serializable cipher params object.\n\t     */\n\t    var PasswordBasedCipher = C_lib.PasswordBasedCipher = SerializableCipher.extend({\n\t        /**\n\t         * Configuration options.\n\t         *\n\t         * @property {KDF} kdf The key derivation function to use to generate a key and IV from a password. Default: OpenSSL\n\t         */\n\t        cfg: SerializableCipher.cfg.extend({\n\t            kdf: OpenSSLKdf\n\t        }),\n\n\t        /**\n\t         * Encrypts a message using a password.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {WordArray|string} message The message to encrypt.\n\t         * @param {string} password The password.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {CipherParams} A cipher params object.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password');\n\t         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password', { format: CryptoJS.format.OpenSSL });\n\t         */\n\t        encrypt: function (cipher, message, password, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Derive key and other params\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize);\n\n\t            // Add IV to config\n\t            cfg.iv = derivedParams.iv;\n\n\t            // Encrypt\n\t            var ciphertext = SerializableCipher.encrypt.call(this, cipher, message, derivedParams.key, cfg);\n\n\t            // Mix in derived params\n\t            ciphertext.mixIn(derivedParams);\n\n\t            return ciphertext;\n\t        },\n\n\t        /**\n\t         * Decrypts serialized ciphertext using a password.\n\t         *\n\t         * @param {Cipher} cipher The cipher algorithm to use.\n\t         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.\n\t         * @param {string} password The password.\n\t         * @param {Object} cfg (Optional) The configuration options to use for this operation.\n\t         *\n\t         * @return {WordArray} The plaintext.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, 'password', { format: CryptoJS.format.OpenSSL });\n\t         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, 'password', { format: CryptoJS.format.OpenSSL });\n\t         */\n\t        decrypt: function (cipher, ciphertext, password, cfg) {\n\t            // Apply config defaults\n\t            cfg = this.cfg.extend(cfg);\n\n\t            // Convert string to CipherParams\n\t            ciphertext = this._parse(ciphertext, cfg.format);\n\n\t            // Derive key and other params\n\t            var derivedParams = cfg.kdf.execute(password, cipher.keySize, cipher.ivSize, ciphertext.salt);\n\n\t            // Add IV to config\n\t            cfg.iv = derivedParams.iv;\n\n\t            // Decrypt\n\t            var plaintext = SerializableCipher.decrypt.call(this, cipher, ciphertext, derivedParams.key, cfg);\n\n\t            return plaintext;\n\t        }\n\t    });\n\t}());\n\n\n}));\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  CRYPTO_TYPE_ENCRYPT: 'encrypt',\n  CRYPTO_TYPE_DECRYPT: 'decrypt'\n};\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=https://s3.pstatp.com/eesz/resource/bear/js/118912c4f59ea61cb5e5.worker.js.map", __webpack_require__.p + "118912c4f59ea61cb5e5.worker.js");
};

/***/ }),
/* 1249 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = finalResponseMiddleare;

var _networkStateHelper = __webpack_require__(129);

var _offline = __webpack_require__(148);

function finalResponseMiddleare(context) {
    var res = context.res,
        req = context.req,
        isRejected = context.isRejected;
    var noStore = req.noStore,
        readStore = req.readStore;
    // 不读数据且没网 调用reject方法

    if (noStore && !readStore && !(0, _networkStateHelper.isOnLine)()) {
        return Promise.reject(new Error('networker error'));
    }
    // 已经从store resolve了 并且返回了一个网络错误
    // 则忽略这个网络错误
    var resolvedFromStore = (!noStore || readStore) && req.resolved && res.from === _offline.NETWORK;
    if (resolvedFromStore && isRejected && res._networkCode) {
        return new Promise(function () {
            // pending
        });
    }
    if (!res) {
        return new Promise(function () {
            // pending
        });
    }
    if (isRejected) {
        return Promise.reject(res);
    }
    return res;
}

/***/ }),
/* 1250 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.TYPE_FORM_DATA = exports.TYPE_APPLICATION_JSON = undefined;

var _typeof2 = __webpack_require__(82);

var _typeof3 = _interopRequireDefault(_typeof2);

exports.default = paramsFixMiddleware;

var _url = __webpack_require__(591);

var _url2 = _interopRequireDefault(_url);

var _merge2 = __webpack_require__(701);

var _merge3 = _interopRequireDefault(_merge2);

var _isEmpty2 = __webpack_require__(454);

var _isEmpty3 = _interopRequireDefault(_isEmpty2);

var _qs = __webpack_require__(353);

var _qs2 = _interopRequireDefault(_qs);

var _sdkCompatibleHelper = __webpack_require__(45);

var _generateHeadersHelper = __webpack_require__(347);

var _suiteHelper = __webpack_require__(52);

var _apiUrls = __webpack_require__(307);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var TYPE_APPLICATION_JSON = exports.TYPE_APPLICATION_JSON = 'application/json';
var TYPE_FORM_DATA = exports.TYPE_FORM_DATA = 'application/x-www-form-urlencoded';
var POST = 'POST';
var GET = 'GET';
var reqId = 0;
function paramsFixMiddleware(req) {
    var _req = req,
        url = _req.url,
        contentType = _req.contentType;

    var defaultFechReq = {
        method: POST,
        key: url,
        token: (0, _suiteHelper.getToken)(),
        reqId: ++reqId,
        serverFirst: false,
        readStore: false,
        noStore: false,
        once: false,
        ignoreForbidden: false,
        headers: Object.assign({
            'Content-Type': contentType || TYPE_FORM_DATA,
            'Accept-Encoding': 'gzip, deflate, br',
            Accept: 'application/json, text/plain, */*',
            Pragma: 'no-cache'
        }, (0, _generateHeadersHelper.generateHeaders)()),
        body: {}
    };
    // 处理成绝对路径的url
    if (url.indexOf('http') === 0) {
        req.url = url;
    } else if (_apiUrls.API_PREFIX && url.indexOf('/api/') === 0) {
        // 一些地方发起api并没有从apiUrl中取地址，而是写死了，只能这里转换
        req.url = _apiUrls.API_PREFIX + url;
    } else {
        var urlFixed = (0, _sdkCompatibleHelper.isDocsourceProtocol)() ? (location.href || '').replace(location.protocol + '//', 'https://') : location.href;
        req.url = _url2.default.resolve(urlFixed, url);
    }
    req = (0, _merge3.default)(defaultFechReq, req);
    req = fixParams(req);
    if ((0, _sdkCompatibleHelper.isSupportNativeFetch)() && req.body && typeof req.body !== 'string') {
        req.body = JSON.stringify(req.body);
    }
    return req;
}
function fixParams(param) {
    var isFormData = param.headers && param.headers['Content-Type'] === TYPE_FORM_DATA;
    // formData
    if (isFormData && (0, _typeof3.default)(param.body) === 'object') {
        param.body = _qs2.default.stringify(param.body, { arrayFormat: 'repeat' });
    }
    // ios下的网络库 get请求不能带body
    if (param.method === GET && param.body) {
        if (!(0, _isEmpty3.default)(param.body)) {
            param.url = param.url.indexOf('?') > -1 ? param.url + '&' + param.body : param.url + '?' + param.body;
        }
        delete param.body;
    }
    return param;
}

/***/ }),
/* 1251 */,
/* 1252 */,
/* 1253 */,
/* 1254 */,
/* 1255 */,
/* 1256 */,
/* 1257 */,
/* 1258 */,
/* 1259 */,
/* 1260 */,
/* 1261 */,
/* 1262 */,
/* 1263 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

exports.default = mockMiddleware;

var _offlineCreateHelper = __webpack_require__(306);

var _offline = __webpack_require__(148);

var _networkStateHelper = __webpack_require__(129);

var _suiteHelper = __webpack_require__(52);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @fileoverview 有些接口在离线状态下需要mock数据
 * 比如新建文档我们需要mock clientvars
 */
function mockMiddleware(context) {
    var req = context.req,
        res = context.res;

    var isNeedMock = !res || !res.data;
    if (isNeedMock) {
        var url = req.url,
            param = (0, _objectWithoutProperties3.default)(req, ['url']);

        var data = getOfflineMockData(url, param);
        if (data) {
            data.from = _offline.CACHE;
            return data;
        }
    }
    return res;
}
// 离线创建文档需要mock一些数据
function getOfflineMockData(url, param) {
    var _param$key = param.key,
        key = _param$key === undefined ? '' : _param$key;

    if ((0, _offlineCreateHelper.isOfflineCreateDoc)()) {
        return getOfflineDocData(url, param);
    }
    if (key === _offline.CLIENT_VARS && !(0, _networkStateHelper.isOnLine)()) {
        // 离线情况没有clientVars数据
        return {
            type: 'DOC',
            data: {
                fakeCode: _offline.EMPTY_RESULT,
                type: _offline.CLIENT_VARS,
                token: (0, _suiteHelper.getToken)(),
                collab_client_vars: {
                    rev: 1
                }
            }
        };
    }
    if (key === _offline.SHEET_CLIENT_VARS && !(0, _networkStateHelper.isOnLine)()) {
        // 离线情况没有clientVars数据
        return {
            type: 'SPREADSHEET',
            data: {
                fakeCode: _offline.EMPTY_RESULT,
                type: _offline.CLIENT_VARS,
                token: (0, _suiteHelper.getToken)()
            }
        };
    }
    return null;
}
function getOfflineDocData(url, param) {
    var PERMISSION_V2_KEY = '/api/suite/permission.v2/user/';
    var PERMISSION_KEY = '/api/suite/permission/user';
    var _param$key2 = param.key,
        key = _param$key2 === undefined ? '' : _param$key2;

    if (key === _offline.CLIENT_VARS) {
        var userId = window.User.id;
        return {
            type: 'DOC',
            req_id: 0,
            from: _offline.CACHE,
            data: {
                type: _offline.CLIENT_VARS,
                token: (0, _suiteHelper.getToken)(),
                docKey: new Date().getTime(),
                user_id: userId,
                numConnectedUsers: 1,
                collab_client_vars: Object.assign({}, (0, _offline.getNewDocClientVars)(), {
                    existedAuthorData: [],
                    rev: 0,
                    time: Date.now(),
                    comment_rev: 0,
                    doc_comment_rev: 0
                }),
                readonly: false,
                permissions: [1, 2, 4, 8],
                user_info: {
                    user_id: userId,
                    member_id: '',
                    color_id: 1,
                    avatar_url: '',
                    user_name: '',
                    create_time: 0,
                    cursor_info: null,
                    cursor_info_str: '',
                    user_email: '',
                    user_mobile: ''
                },
                colorPalette: ['#E94D3D'],
                is_template: false,
                entities: {
                    users: (0, _defineProperty3.default)({}, userId, {
                        cn_name: '',
                        en_name: '',
                        avatar_url: '',
                        user_email: '',
                        user_mobile: ''
                    })
                }
            }
        };
    } else if (key.indexOf(PERMISSION_KEY) > -1) {
        return {
            data: {
                permissions: 15,
                entities: {
                    users: {}
                }
            },
            code: 0,
            msg: '',
            meta: {}
        };
    } else if (key.indexOf(PERMISSION_V2_KEY) > -1) {
        return {
            code: 0,
            data: {
                permissions: 15,
                relationship_level: 1,
                contact_url: ''
            },
            msg: 'Success',
            meta: {}
        };
    }
    return null;
}

/***/ }),
/* 1264 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = onceMiddleware;
function onceMiddleware(context) {
    var req = context.req,
        res = context.res,
        isRejected = context.isRejected;

    if (req.once === true && req.resolved) {
        return new Promise(function () {
            // return a pending promise
        });
    }
    if (res && res.data) {
        req.resolved = true;
    }
    if (isRejected) {
        return Promise.reject(res);
    }
    return res;
}

/***/ }),
/* 1265 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = serverFirstMiddleware;

var _offline = __webpack_require__(148);

var _networkStateHelper = __webpack_require__(129);

function serverFirstMiddleware(context) {
    var req = context.req,
        res = context.res,
        isRejected = context.isRejected;
    var serverFirst = req.serverFirst;

    if ((0, _networkStateHelper.isOnLine)() && res.from === _offline.CACHE && serverFirst) {
        return new Promise(function () {
            // pending for network response
        });
    }
    if (isRejected) {
        return Promise.reject(res);
    }
    return res;
}

/***/ }),
/* 1266 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = autoStorageMiddleware;

var _offlineStorageHelper = __webpack_require__(313);

var _suiteHelper = __webpack_require__(52);

var _offline = __webpack_require__(148);

function autoStorageMiddleware(context) {
    var req = context.req,
        res = context.res;
    var noStore = req.noStore,
        key = req.key,
        _req$token = req.token,
        token = _req$token === undefined ? (0, _suiteHelper.getToken)() : _req$token;

    if (!noStore && res.from !== _offline.CACHE) {
        (0, _offlineStorageHelper.setData)({
            key: key,
            token: token,
            needSync: false,
            data: res
        });
    }
    return res;
} /**
   * @fileoverview
   * 自动缓存接口内容
   */

/***/ }),
/* 1267 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = errorReportMiddleware;

var _offline = __webpack_require__(148);

var _tea = __webpack_require__(42);

var _tea2 = _interopRequireDefault(_tea);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function errorReportMiddleware(context) {
    var req = context.req,
        res = context.res,
        isRejected = context.isRejected;
    var from = res.from;

    var code = res._networkCode || res.code;
    if (from === _offline.NETWORK && code) {
        (0, _tea2.default)('request_network_error', {
            url: req.url,
            network_code: res._networkCode,
            api_code: res.code
        });
    }
    if (isRejected) {
        return Promise.reject(res);
    }
    return res;
}

/***/ }),
/* 1268 */,
/* 1269 */,
/* 1270 */,
/* 1271 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _doc = __webpack_require__(1272);

var _doc2 = _interopRequireDefault(_doc);

var _sheet = __webpack_require__(1273);

var _sheet2 = _interopRequireDefault(_sheet);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = { doc: _doc2.default, sheet: _sheet2.default };

/***/ }),
/* 1272 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _axios = __webpack_require__(351);

var _axios2 = _interopRequireDefault(_axios);

var _qs = __webpack_require__(353);

var _qs2 = _interopRequireDefault(_qs);

var _get = __webpack_require__(83);

var _get2 = _interopRequireDefault(_get);

var _baseConfig = __webpack_require__(708);

var _performanceLogHelper = __webpack_require__(458);

var _apiUrls = __webpack_require__(307);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DEFAULT_TIMEOUT = 10000;

var axiosInstance = _axios2.default.create({
  baseURL: _apiUrls.API_PREFIX,
  withCredentials: true,
  headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
});

/**
 * 请求数据格式转换
 * 允许headers自定义，可以在[REQUEST]中增加字段自定义 Content-Type
 * 默认 Content-Type 为 application/x-www-form-urlencoded，并对数据进行字符串序列化
 * 例：定义数据格式为json
 * [REQUEST]: {
    headers: { 'Content-Type': 'application/json' },
    url: apiUrls.FETCH_DOCS_CUSTOMER_SERVICE_CHAT_ID,
    method: apiUrls.METHOD.POST,
    data: { log: _log },
  }
 * @param {*} request
 */
var formatData = function formatData(request) {
  var contentType = (0, _get2.default)(request, ['headers', 'Content-Type']);
  switch (contentType) {
    case 'application/x-www-form-urlencoded':
      return _qs2.default.stringify(request.data, { arrayFormat: 'repeat' });
    default:
      return request.data;
  }
};

function requestInterceptor(request) {
  var mergedHeaders = Object.assign({}, (0, _baseConfig.getHeaders)(request), request.headers);
  var formatedData = formatData(request);
  var docRequestConfig = {
    data: formatedData,
    headers: mergedHeaders,
    timeout: request.timeout || DEFAULT_TIMEOUT,
    validateStatus: function validateStatus(status) {
      return status >= 200 && status < 300; // default
    }
  };

  return Object.assign({}, request, docRequestConfig);
}

/**
 * 区别于只在网络层的抛错(比如status > 300)，增加根据业务进行判定是否抛出错误
 * 这样的目的是为了让所有错误都能走 promise 的 errorHandler，
 * 便于统一在一处处理，避免了在 resolve handler 里也要处理特殊业务 error 的情况
 *
 * dispathedAsyncAction => (Promise).then(resolveHandler, errorHandler)
 * 此文件的目的在于编写 response 拦截 function，
 * 识别业务里存在特殊错误 case，转化为一个错误抛出，强制流向 errorHandler
 *
 * Any question or suggestion，feel free to comment here.
 * @liaowenhao
 */
function errorInterceptor(response) {
  if (response.data.code && response.data.code !== 0) {
    var _response$data = response.data,
        _data = _response$data.data,
        code = _response$data.code,
        msg = _response$data.msg,
        _meta = _response$data.meta,
        rest = (0, _objectWithoutProperties3.default)(_response$data, ['data', 'code', 'msg', 'meta']);

    console.log('Network Error (explore):', _data);
    // 用于处理 data 和 meta 均有信息的情况
    var errorMeta = _meta;
    if (_data) {
      errorMeta = Object.assign(_data, _meta);
    }

    return Promise.reject({ code: code, msg: msg, meta: errorMeta });
  }

  try {
    var config = response.config;
    (0, _performanceLogHelper.transformPerformanceData)({
      url: config.url,
      data: {
        code: response.data.code,
        request_id: config.headers['Request-Id'],
        data: config.data
      }
    });
  } catch (error) {
    console.error(error);
  }

  // 考虑到有服务 fail 的情况，我们需要将 meta 计入返回数据中。
  var meta = response.data.meta;
  // 有极个别 API 的返回没有遵从首级为 data 这种结构

  var data = response.data.data || response.data;
  // data 可能是 array，所以我们不能用解构，直接按 key: data 传入.
  var mergedResponse = { data: data, meta: meta };
  return mergedResponse;
}

// 根据 https://wiki.bytedance.net/pages/viewpage.action?pageId=121742738
// 存在 code 且不为 0 即服务端业务出错 (非服务器错误)
// 我们将错误跑出，使其被 errorHandler 接收
axiosInstance.interceptors.response.use(errorInterceptor);
axiosInstance.interceptors.request.use(requestInterceptor);

exports.default = axiosInstance;

/***/ }),
/* 1273 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _axios = __webpack_require__(351);

var _axios2 = _interopRequireDefault(_axios);

var _baseConfig = __webpack_require__(708);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var sheetRequestInstance = _axios2.default.create({
  baseURL: '/api',
  withCredentials: true
});

sheetRequestInstance.interceptors.request.use(function (request) {
  return Object.assign(request, {
    headers: Object.assign(request.headers || {}, (0, _baseConfig.getHeaders)())
  });
});

sheetRequestInstance.interceptors.response.use(function (response) {
  // @todo 需要对应的错误处理，例如 5 需要login
  if (typeof response.data.code !== 'undefined' && response.data.code !== 0) {
    return Promise.reject(response);
  }
  return response.data;
});

exports.default = sheetRequestInstance;

/***/ }),
/* 1274 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.createRequestPreResolved = undefined;

var _$constants = __webpack_require__(5);

var createRequestPreResolved = exports.createRequestPreResolved = function createRequestPreResolved(isSucc) {
    return function (action, response) {
        return {
            type: isSucc ? _$constants.actionTypes.request.FETCH_SUCC : _$constants.actionTypes.request.FETCH_FAIL,
            payload: {
                action: action,
                response: response
            }
        };
    };
};

/***/ }),
/* 1275 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.fetchShareHomeWatcher = fetchShareHomeWatcher;
exports.fetchShareHomeSaga = fetchShareHomeSaga;

var _effects = __webpack_require__(17);

var _reactRouterRedux = __webpack_require__(173);

var _explorer = __webpack_require__(56);

var _$constants = __webpack_require__(5);

var _titleHelper = __webpack_require__(195);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchShareHomeWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchShareHomeSaga);

function fetchShareHomeWatcher() {
    return _regenerator2.default.wrap(function fetchShareHomeWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.explorer.FETCH_SHARE_HOME_SUCCESS, fetchShareHomeSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchShareHomeSaga(action) {
    var _action$payload, path, has_share, share_type, token, url, hasShareFolder;

    return _regenerator2.default.wrap(function fetchShareHomeSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, path = _action$payload.path, has_share = _action$payload.has_share, share_type = _action$payload.share_type;
                    token = path[0] ? path[0] : _$constants.apiField.FAKE_SHARE_FOLDER_TOKEN;

                    (0, _titleHelper.setDocumentTitle)(t('common.share'));
                    url = _$constants.common.ROOT_TYPE_URL_MAP[share_type];
                    hasShareFolder = share_type === _$constants.common.NUM_ROOT_META.SHARE_FOLDERS;
                    _context2.next = 7;
                    return (0, _effects.put)((0, _explorer.setShouldLoadShare)(false));

                case 7:
                    if (!url) {
                        _context2.next = 10;
                        break;
                    }

                    _context2.next = 10;
                    return (0, _effects.put)((0, _reactRouterRedux.replace)(url));

                case 10:
                    _context2.next = 12;
                    return (0, _effects.put)((0, _explorer.setHasShareFolder)(hasShareFolder));

                case 12:
                    _context2.next = 14;
                    return (0, _effects.put)((0, _explorer.checkRootMeta)({ token: token, type: share_type, hasShare: has_share }));

                case 14:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = fetchShareHomeWatcher;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1276 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.watchFetchFileMeta = watchFetchFileMeta;

var _effects = __webpack_require__(17);

var _api = __webpack_require__(150);

var _utils = __webpack_require__(260);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchFetchFileMeta),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(removeFile);

function watchFetchFileMeta() {
    return _regenerator2.default.wrap(function watchFetchFileMeta$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.explorer.REMOVE_FILE, removeFile);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function removeFile(action) {
    var deferred, token, _ref, abort, response, transformedRes, successAction, _action$payload, isOwner, isMobile, failAction;

    return _regenerator2.default.wrap(function removeFile$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    deferred = action[_$constants.common.DEFERRED];
                    _context2.prev = 1;
                    token = action.payload.token;
                    _context2.next = 5;
                    return (0, _effects.put)(_utils.requestActions.start(action));

                case 5:
                    _context2.next = 7;
                    return (0, _effects.race)({
                        abort: (0, _effects.take)('CANCEL_' + _$constants.actionTypes.explorer.REMOVE_FILE),
                        response: (0, _effects.call)(_api.fetchDoc, {
                            url: _$constants.apiUrls.POST_REMOVE_FILE,
                            method: _$constants.apiUrls.METHOD.POST,
                            data: { token: token }
                        })
                    });

                case 7:
                    _ref = _context2.sent;
                    abort = _ref.abort;
                    response = _ref.response;

                    if (!abort) {
                        _context2.next = 12;
                        break;
                    }

                    return _context2.abrupt('return');

                case 12:
                    transformedRes = Object.assign({}, response.data, action.payload);
                    successAction = _utils.requestActions.success(action, transformedRes);

                    deferred && deferred.resolve(successAction);
                    _context2.next = 17;
                    return (0, _effects.put)(successAction);

                case 17:
                    _context2.next = 29;
                    break;

                case 19:
                    _context2.prev = 19;
                    _context2.t0 = _context2['catch'](1);

                    console.log(_context2.t0);
                    _action$payload = action.payload, isOwner = _action$payload.isOwner, isMobile = _action$payload.isMobile;
                    failAction = _utils.requestActions.fail(action, _context2.t0);

                    deferred && deferred.reject(failAction);
                    _context2.next = 27;
                    return (0, _effects.put)(failAction);

                case 27:
                    _context2.next = 29;
                    return (0, _effects.put)(!isMobile ? {
                        type: _$constants.actionTypes.toast.TOAST_SHOW,
                        toastConfig: {
                            type: 'error',
                            closable: true,
                            content: (isOwner ? t('explorer.delete') : t('explorer.remove')) + ' ' + t('explorer.failure')
                        }
                    } : {
                        type: _$constants.actionTypes.toastMobile.TOAST_MOBILE_SHOW,
                        toastConfig: {
                            content: (isOwner ? t('explorer.delete') : t('explorer.remove')) + ' ' + t('explorer.failure'),
                            mask: false
                        }
                    });

                case 29:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this, [[1, 19]]);
}
exports.default = watchFetchFileMeta;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1277 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.watchFetchFileMeta = watchFetchFileMeta;
exports.deleteRemovedFile = deleteRemovedFile;

var _effects = __webpack_require__(17);

var _api = __webpack_require__(150);

var _utils = __webpack_require__(260);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchFetchFileMeta),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(deleteRemovedFile);

function watchFetchFileMeta() {
    return _regenerator2.default.wrap(function watchFetchFileMeta$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.explorer.DELETE_REMOVED_FILE, deleteRemovedFile);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function deleteRemovedFile(action) {
    var deferred, _action$payload, token, isMobile, rootType, _ref, abort, response, data, transformedRes, successAction, success_tokens, toastAction, _isMobile, failAction, _toastAction;

    return _regenerator2.default.wrap(function deleteRemovedFile$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    deferred = action[_$constants.common.DEFERRED];
                    _context2.prev = 1;
                    _action$payload = action.payload, token = _action$payload.token, isMobile = _action$payload.isMobile, rootType = _action$payload.rootType;
                    _context2.next = 5;
                    return (0, _effects.put)(_utils.requestActions.start(action));

                case 5:
                    _context2.next = 7;
                    return (0, _effects.race)({
                        abort: (0, _effects.take)('CANCEL_' + _$constants.actionTypes.explorer.DELETE_REMOVED_FILE),
                        response: (0, _effects.call)(_api.fetchDoc, {
                            url: _$constants.apiUrls.POST_DELETE_REMOVED_FILE,
                            method: _$constants.apiUrls.METHOD.POST,
                            data: { token: token }
                        })
                    });

                case 7:
                    _ref = _context2.sent;
                    abort = _ref.abort;
                    response = _ref.response;

                    if (!abort) {
                        _context2.next = 12;
                        break;
                    }

                    return _context2.abrupt('return');

                case 12:
                    data = response.data;
                    transformedRes = Object.assign({}, data, { token: token, isMobile: isMobile, rootType: rootType });
                    successAction = _utils.requestActions.success(action, transformedRes);

                    deferred && deferred.resolve(successAction);
                    _context2.next = 18;
                    return (0, _effects.put)(successAction);

                case 18:
                    success_tokens = data.success_tokens;
                    toastAction = !isMobile ? {
                        type: _$constants.actionTypes.toast.TOAST_SHOW,
                        toastConfig: {
                            type: 'success',
                            content: t('explorer.deleted') + ' ' + success_tokens.length + ' ' + t('explorer.n_items')
                        }
                    } : {
                        type: _$constants.actionTypes.toastMobile.TOAST_MOBILE_SHOW,
                        toastConfig: {
                            content: t('explorer.delete_success'),
                            mask: false
                        }
                    };
                    _context2.next = 22;
                    return (0, _effects.put)(toastAction);

                case 22:
                    _context2.next = 34;
                    break;

                case 24:
                    _context2.prev = 24;
                    _context2.t0 = _context2['catch'](1);
                    _isMobile = action.payload.isMobile;
                    failAction = _utils.requestActions.fail(action, _context2.t0);

                    deferred && deferred.reject(failAction);
                    _context2.next = 31;
                    return (0, _effects.put)(failAction);

                case 31:
                    _toastAction = !_isMobile ? {
                        type: _$constants.actionTypes.toast.TOAST_SHOW,
                        toastConfig: {
                            type: 'error',
                            closable: true,
                            content: t('explorer.delete_failed')
                        }
                    } : {
                        type: _$constants.actionTypes.toastMobile.TOAST_MOBILE_SHOW,
                        toastConfig: {
                            content: t('explorer.delete_failed'),
                            mask: false
                        }
                    };
                    _context2.next = 34;
                    return (0, _effects.put)(_toastAction);

                case 34:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this, [[1, 24]]);
}
exports.default = watchFetchFileMeta;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1278 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _actionType2RtMap;

var _effects = __webpack_require__(17);

var _common = __webpack_require__(85);

var _explorer = __webpack_require__(48);

var _explorer2 = __webpack_require__(56);

var _constants = __webpack_require__(5);

var _isUndefined = __webpack_require__(228);

var _isUndefined2 = _interopRequireDefault(_isUndefined);

var _share = __webpack_require__(78);

var _models = __webpack_require__(172);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchFilesWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchFilesSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(handleRouteDependentFetch);

/**
 * Enum 不指定值会自动赋值从0开始, 1, 2, 3...
 * Halt: 不做任何事情, 直接return
 * ActionRootTypeDependent: 由action.payload 里的 rootType 来决定 fetch
 * RouteDependent: 由路由来判断是否需要fetch
 */
var FetchType;
(function (FetchType) {
    FetchType[FetchType["Halt"] = 0] = "Halt";
    FetchType[FetchType["ActionRootTypeDependent"] = 1] = "ActionRootTypeDependent";
    FetchType[FetchType["RouteDependent"] = 2] = "RouteDependent";
})(FetchType || (FetchType = {}));
function fetchFilesWatcher() {
    return _regenerator2.default.wrap(function fetchFilesWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(getShouldFetchFile, fetchFilesSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function getShouldFetchFile(action) {
    return typeof actionType2RtMap[action.type] !== 'undefined';
}
function fetchFilesSaga(action) {
    var fetchType, rootType;
    return _regenerator2.default.wrap(function fetchFilesSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    fetchType = actionType2RtMap[action.type](action);
                    _context2.t0 = fetchType;
                    _context2.next = _context2.t0 === FetchType.ActionRootTypeDependent ? 4 : _context2.t0 === FetchType.RouteDependent ? 10 : _context2.t0 === FetchType.Halt ? 13 : 14;
                    break;

                case 4:
                    rootType = action.payload.rootType;

                    if (!(0, _isUndefined2.default)(rootType)) {
                        _context2.next = 7;
                        break;
                    }

                    return _context2.abrupt('return');

                case 7:
                    _context2.next = 9;
                    return (0, _effects.put)((0, _explorer2.fetchRootMeta)(rootType));

                case 9:
                    return _context2.abrupt('return', _context2.sent);

                case 10:
                    _context2.next = 12;
                    return handleRouteDependentFetch(action);

                case 12:
                    return _context2.abrupt('return', _context2.sent);

                case 13:
                    return _context2.abrupt('return');

                case 14:
                    return _context2.abrupt('break', 15);

                case 15:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
/** 标识特殊的type，在这些type下不需要进行fetchFiles操作 */
var SHOULD_NOT_FETCH_TYPES = [_constants.actionTypes.explorer.DISMISS_SHARE_FOLDER_SUCCESS];
function handleRouteDependentFetch(action) {
    var routeObj, rootType, isSuite, isDisabledType, shouldFetch, _shouldFetch, currentFileToken;

    return _regenerator2.default.wrap(function handleRouteDependentFetch$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.select)(_common.selectRoute);

                case 2:
                    routeObj = _context3.sent;
                    rootType = routeObj.get('rootType');
                    isSuite = routeObj.get('isSuite');
                    isDisabledType = SHOULD_NOT_FETCH_TYPES.indexOf(action.type) > -1;
                    shouldFetch = !isSuite && !isDisabledType;

                    if (!rootType) {
                        _context3.next = 20;
                        break;
                    }

                    _shouldFetch = rootType !== _constants.common.NUM_ROOT_META.HOME;

                    if (_shouldFetch) {
                        _context3.next = 11;
                        break;
                    }

                    return _context3.abrupt('return');

                case 11:
                    if (!(rootType === _constants.common.NUM_ROOT_META.SHARE_FOLDERS)) {
                        _context3.next = 16;
                        break;
                    }

                    _context3.next = 14;
                    return (0, _effects.put)((0, _share.fetchRootShareFolder)(_models.ShareFolderHiddenType.FetchVisible, true));

                case 14:
                    _context3.next = 18;
                    break;

                case 16:
                    _context3.next = 18;
                    return (0, _effects.put)((0, _explorer2.fetchRootMeta)(rootType));

                case 18:
                    _context3.next = 26;
                    break;

                case 20:
                    if (!shouldFetch) {
                        _context3.next = 26;
                        break;
                    }

                    _context3.next = 23;
                    return (0, _effects.select)(_explorer.selectCurrentFileToken);

                case 23:
                    currentFileToken = _context3.sent;
                    _context3.next = 26;
                    return (0, _effects.put)((0, _explorer2.fetchFileMeta)(currentFileToken, 0));

                case 26:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
var actionType2RtMap = (_actionType2RtMap = {}, (0, _defineProperty3.default)(_actionType2RtMap, _constants.actionTypes.explorer.DISMISS_SHARE_FOLDER_SUCCESS, function (action) {
    return FetchType.RouteDependent;
}), (0, _defineProperty3.default)(_actionType2RtMap, _constants.actionTypes.explorer.CREATE_FILE_SUCCESS, function (action) {
    var type = action.payload.type;

    return type === _constants.common.NUM_FILE_TYPE.FOLDER ? FetchType.RouteDependent : FetchType.Halt;
}), (0, _defineProperty3.default)(_actionType2RtMap, _constants.actionTypes.explorer.CREATE_SHARE_FOLDER_SUCCESS, function (action) {
    return FetchType.Halt;
}), (0, _defineProperty3.default)(_actionType2RtMap, _constants.actionTypes.explorer.RESTORE_REMOVED_FILE_SUCCESS, function (action) {
    return FetchType.RouteDependent;
}), (0, _defineProperty3.default)(_actionType2RtMap, _constants.actionTypes.explorer.MOVE_FILE_SUCCESS, function (action) {
    var isInNav = action.payload.isInNav;

    if (!isInNav) return FetchType.RouteDependent;
    return FetchType.Halt;
}), (0, _defineProperty3.default)(_actionType2RtMap, _constants.actionTypes.explorer.REMOVE_FILE_SUCCESS, function (action) {
    var fetchAfter = action.payload.fetchAfter;

    return fetchAfter ? FetchType.RouteDependent : FetchType.Halt;
}), (0, _defineProperty3.default)(_actionType2RtMap, _constants.actionTypes.explorer.DELETE_REMOVED_FILE_SUCCESS, function (action) {
    return FetchType.RouteDependent;
}), (0, _defineProperty3.default)(_actionType2RtMap, _constants.actionTypes.explorer.COPY_SHARE_FILES_TO_PERSONAL_FOLDER_SUCCESS, function (action) {
    return FetchType.RouteDependent;
}), _actionType2RtMap);
exports.default = fetchFilesWatcher;

/***/ }),
/* 1279 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.createShareFolderWatcher = createShareFolderWatcher;

var _effects = __webpack_require__(17);

var _reactRouterRedux = __webpack_require__(173);

var _$constants = __webpack_require__(5);

var _LogContext = __webpack_require__(769);

var _share = __webpack_require__(78);

var _models = __webpack_require__(172);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(createShareFolderWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(createShareFolderSaga);

function createShareFolderWatcher() {
    return _regenerator2.default.wrap(function createShareFolderWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.explorer.CREATE_SHARE_FOLDER_SUCCESS, createShareFolderSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function createShareFolderSaga(action) {
    var token;
    return _regenerator2.default.wrap(function createShareFolderSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    token = action.payload.token;

                    (0, _LogContext.LogFlow)('create_new_objs').report({
                        file_id: token,
                        file_type: 'share_folder'
                    });
                    _context2.next = 4;
                    return (0, _effects.put)((0, _reactRouterRedux.push)('/folder/' + token));

                case 4:
                    _context2.next = 6;
                    return (0, _effects.put)((0, _share.fetchRootShareFolder)(_models.ShareFolderHiddenType.FetchVisible, false));

                case 6:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = createShareFolderWatcher;

/***/ }),
/* 1280 */,
/* 1281 */,
/* 1282 */,
/* 1283 */,
/* 1284 */,
/* 1285 */,
/* 1286 */,
/* 1287 */,
/* 1288 */,
/* 1289 */,
/* 1290 */,
/* 1291 */,
/* 1292 */,
/* 1293 */,
/* 1294 */,
/* 1295 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = watchFetchExplorerFolderList;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(85);

var _explorer = __webpack_require__(48);

var _explorer2 = __webpack_require__(56);

var _share = __webpack_require__(78);

var _util = __webpack_require__(254);

var _models = __webpack_require__(172);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchFetchExplorerFolderList),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(getActionAndReslovedTypes),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(fetchExplorerFolderListSaga),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(aboutExplorerListLoading),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(getFetchStatusFromActionType);

var NUM_ROOT_META = _$constants.common.NUM_ROOT_META;
/**
 * 包装返回的结果
 * @param action action
 * @param hasSuffixs 是否需要后缀。false表明其loading不归setLoadingStatus管理
 */

var _bundleResult = function _bundleResult(action2Dispatch) {
    var hasSuffixs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

    var reslovedTypes = hasSuffixs ? (0, _util.getSuffixedTypes)({
        type: action2Dispatch.type,
        withPrefix: false,
        suffixs: [_util.SUFFIX.SUCCESS, _util.SUFFIX.FAIL]
    }) : [];
    return {
        reslovedTypes: reslovedTypes,
        action2Dispatch: action2Dispatch
    };
};
function watchFetchExplorerFolderList() {
    return _regenerator2.default.wrap(function watchFetchExplorerFolderList$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeLatest)(_$constants.actionTypes.explorer.FETCH_EXPLORER_FOLDER_LIST, fetchExplorerFolderListSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function getActionAndReslovedTypes(action) {
    var isContinuous, route, rootType, shouldLoadShare, currentFileToken, needPath;
    return _regenerator2.default.wrap(function getActionAndReslovedTypes$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    isContinuous = action.payload.isContinuous;
                    _context2.next = 3;
                    return (0, _effects.select)(_common.selectRoute);

                case 3:
                    route = _context2.sent;
                    rootType = route.get('rootType');
                    _context2.t0 = rootType;
                    _context2.next = _context2.t0 === NUM_ROOT_META.EXPLORER ? 8 : _context2.t0 === NUM_ROOT_META.TRASH ? 8 : _context2.t0 === NUM_ROOT_META.SHARE ? 9 : _context2.t0 === NUM_ROOT_META.SHARE_FOLDERS ? 10 : _context2.t0 === NUM_ROOT_META.SHARE_FILES ? 11 : 15;
                    break;

                case 8:
                    return _context2.abrupt('return', _bundleResult((0, _explorer2.fetchRootMeta)(rootType, isContinuous)));

                case 9:
                    return _context2.abrupt('return', _bundleResult((0, _explorer2.fetchShareHome)()));

                case 10:
                    return _context2.abrupt('return', _bundleResult((0, _share.fetchRootShareFolder)(_models.ShareFolderHiddenType.FetchVisible, true)));

                case 11:
                    _context2.next = 13;
                    return (0, _effects.select)(_explorer.selectShouldLoadShare);

                case 13:
                    shouldLoadShare = _context2.sent;
                    return _context2.abrupt('return', shouldLoadShare ? _bundleResult((0, _explorer2.fetchRootMeta)(rootType, isContinuous)) : _bundleResult((0, _explorer2.setShouldLoadShare)(true), false));

                case 15:
                    _context2.next = 17;
                    return (0, _effects.select)(_explorer.selectCurrentFileToken);

                case 17:
                    currentFileToken = _context2.sent;
                    needPath = 1;
                    return _context2.abrupt('return', _bundleResult((0, _explorer2.fetchFileMeta)(currentFileToken, needPath)));

                case 20:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function fetchExplorerFolderListSaga(action) {
    var _ref, action2Dispatch, reslovedTypes;

    return _regenerator2.default.wrap(function fetchExplorerFolderListSaga$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return getActionAndReslovedTypes(action);

                case 2:
                    _ref = _context3.sent;
                    action2Dispatch = _ref.action2Dispatch;
                    reslovedTypes = _ref.reslovedTypes;
                    _context3.next = 7;
                    return (0, _effects.put)(action2Dispatch);

                case 7:
                    if (!reslovedTypes.length) {
                        _context3.next = 10;
                        break;
                    }

                    _context3.next = 10;
                    return aboutExplorerListLoading(reslovedTypes);

                case 10:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function aboutExplorerListLoading(reslovedTypes) {
    return _regenerator2.default.wrap(function aboutExplorerListLoading$(_context5) {
        while (1) {
            switch (_context5.prev = _context5.next) {
                case 0:
                    _context5.next = 2;
                    return (0, _effects.put)((0, _explorer2.setExplorerListLoadingStatus)('loading'));

                case 2:
                    _context5.next = 4;
                    return (0, _effects.takeEvery)(reslovedTypes, /*#__PURE__*/_regenerator2.default.mark(function _callee(action) {
                        var status;
                        return _regenerator2.default.wrap(function _callee$(_context4) {
                            while (1) {
                                switch (_context4.prev = _context4.next) {
                                    case 0:
                                        _context4.next = 2;
                                        return getFetchStatusFromActionType(action);

                                    case 2:
                                        status = _context4.sent;
                                        _context4.next = 5;
                                        return (0, _effects.put)((0, _explorer2.setExplorerListLoadingStatus)(status));

                                    case 5:
                                    case 'end':
                                        return _context4.stop();
                                }
                            }
                        }, _callee, this);
                    }));

                case 4:
                case 'end':
                    return _context5.stop();
            }
        }
    }, _marked4, this);
}
function getFetchStatusFromActionType(action) {
    var type;
    return _regenerator2.default.wrap(function getFetchStatusFromActionType$(_context6) {
        while (1) {
            switch (_context6.prev = _context6.next) {
                case 0:
                    type = action.type;

                    if (!~type.indexOf(_util.SUFFIX.SUCCESS)) {
                        _context6.next = 5;
                        break;
                    }

                    return _context6.abrupt('return', 'loaded');

                case 5:
                    if (!~type.indexOf(_util.SUFFIX.FAIL)) {
                        _context6.next = 7;
                        break;
                    }

                    return _context6.abrupt('return', 'failed');

                case 7:
                case 'end':
                    return _context6.stop();
            }
        }
    }, _marked5, this);
}
// handleMetaFetch = (isContinuous = false) => {
//   const { params, path } = this.props.match;
//   const {
//     trClicked,
//     fetchRootMeta,
//     fetchFileMeta,
//     fetchShareHome,
//     shouldLoadShare,
//     setShouldLoadShare,
//   } = this.props;
//   if (path === route.PATH.SHARE_FILES) {
//     if (shouldLoadShare) {
//       return fetchRootMeta(common.NUM_ROOT_META.SHARE_FILES, isContinuous);
//     } else {
//       return setShouldLoadShare(true);
//     }
//   } else if (path === route.PATH.SHARE_FOLDERS) {
//     if (shouldLoadShare) {
//       return fetchRootMeta(common.NUM_ROOT_META.SHARE_FOLDERS, isContinuous);
//     } else {
//       return setShouldLoadShare(true);
//     }
//   } else if (isUnderRootRoute()) {
//     const mapPathToRootMetaFetchFunc = {
//       [route.PATH.FOLDER]: fetchRootMeta.bind(null, common.NUM_ROOT_META.EXPLORER, isContinuous),
//       [route.PATH.SHARE]: fetchShareHome,
//       [route.PATH.TRASH]: fetchRootMeta.bind(null, common.NUM_ROOT_META.TRASH, isContinuous)
//     };
//     return mapPathToRootMetaFetchFunc[path]();
//   } else {
//     if (trClicked) {
//       return fetchFileMeta(params.token, 0);
//     } else {
//       return fetchFileMeta(params.token, 1);
//     }
//   }
// };

/***/ }),
/* 1296 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = watchFetchSelectedFileData;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _explorer = __webpack_require__(48);

var _common = __webpack_require__(85);

var _user = __webpack_require__(72);

var _share = __webpack_require__(78);

var _modelHelper = __webpack_require__(209);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchFetchSelectedFileData),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchSelectedFileDataSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(handleSuiteTypeDataFetch),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(handleFolderTypeDataFetch);

function watchFetchSelectedFileData() {
    return _regenerator2.default.wrap(function watchFetchSelectedFileData$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeLatest)(_$constants.actionTypes.explorer.SET_SELECTED_FILE_METAS, fetchSelectedFileDataSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchSelectedFileDataSaga() {
    var routeObj, suiteType, folderType, metas, metaType, _metas$first, objToken, _metas$first2, token;

    return _regenerator2.default.wrap(function fetchSelectedFileDataSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.select)(_common.selectRoute);

                case 2:
                    routeObj = _context2.sent;

                    if (!(routeObj.get('type') === 'suite')) {
                        _context2.next = 5;
                        break;
                    }

                    return _context2.abrupt('return');

                case 5:
                    suiteType = _$constants.common.suiteType, folderType = _$constants.common.folderType;
                    _context2.prev = 6;
                    _context2.next = 9;
                    return (0, _effects.select)(_explorer.selectSelectedFileMetas);

                case 9:
                    metas = _context2.sent;

                    if (!(metas.size !== 1)) {
                        _context2.next = 12;
                        break;
                    }

                    return _context2.abrupt('return');

                case 12:
                    metaType = metas.first().type;

                    if (!(suiteType.indexOf(metaType) > -1)) {
                        _context2.next = 17;
                        break;
                    }

                    _metas$first = metas.first(), objToken = _metas$first.obj_token;
                    _context2.next = 17;
                    return handleSuiteTypeDataFetch(objToken, metaType);

                case 17:
                    if (!(folderType.indexOf(metaType) > -1)) {
                        _context2.next = 21;
                        break;
                    }

                    _metas$first2 = metas.first(), token = _metas$first2.token;
                    _context2.next = 21;
                    return handleFolderTypeDataFetch(token, metaType);

                case 21:
                    _context2.next = 26;
                    break;

                case 23:
                    _context2.prev = 23;
                    _context2.t0 = _context2['catch'](6);

                    console.error(_context2.t0);

                case 26:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this, [[6, 23]]);
}
function handleSuiteTypeDataFetch(objToken, type) {
    var objMap, metaObjOwnerId, currentUser, isOwner;
    return _regenerator2.default.wrap(function handleSuiteTypeDataFetch$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.select)(_explorer.selectObjEntities);

                case 2:
                    objMap = _context3.sent;

                    // objMap 的 key 格式为 type:objToken，历史遗留原因，防止撞key.
                    metaObjOwnerId = objMap.getIn([(0, _modelHelper.getTypePrefixedToken)(type, objToken), 'owner_id']);
                    _context3.next = 6;
                    return (0, _effects.select)(_user.selectCurrentUser);

                case 6:
                    currentUser = _context3.sent;
                    isOwner = currentUser.get('id') === metaObjOwnerId;

                    if (isOwner) {
                        _context3.next = 11;
                        break;
                    }

                    _context3.next = 11;
                    return (0, _effects.put)((0, _share.fetchUserPermissionOnSuite)(objToken, type));

                case 11:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function handleFolderTypeDataFetch(token, type) {
    var nodeMap, node;
    return _regenerator2.default.wrap(function handleFolderTypeDataFetch$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    _context4.next = 2;
                    return (0, _effects.select)(_explorer.selectFileEntities);

                case 2:
                    nodeMap = _context4.sent;
                    node = nodeMap.get(token);
                    // const currentUser = yield select(selectCurrentUser);
                    // const isOwner = currentUser.get('id') === node.owner_id;

                    if (!node.space_id) {
                        _context4.next = 7;
                        break;
                    }

                    _context4.next = 7;
                    return (0, _effects.put)((0, _share.fetchShareFolderMembers)(node.space_id));

                case 7:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}

/***/ }),
/* 1297 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = watchSetSelectedFileMetas;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _explorer = __webpack_require__(56);

var _suite = __webpack_require__(84);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchSetSelectedFileMetas),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(setSelectedFileMetasSaga);

function watchSetSelectedFileMetas() {
    return _regenerator2.default.wrap(function watchSetSelectedFileMetas$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.explorer.SET_SELECTED_FILE_METAS, setSelectedFileMetasSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function setSelectedFileMetasSaga(action) {
    var metas, _metas$, obj_token, type, oldObjToken;

    return _regenerator2.default.wrap(function setSelectedFileMetasSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    metas = action.payload;

                    if (!(metas.length !== 1)) {
                        _context2.next = 3;
                        break;
                    }

                    return _context2.abrupt('return');

                case 3:
                    _metas$ = metas[0], obj_token = _metas$.obj_token, type = _metas$.type;

                    if (!(obj_token === '')) {
                        _context2.next = 6;
                        break;
                    }

                    return _context2.abrupt('return');

                case 6:
                    _context2.next = 8;
                    return (0, _effects.select)(_suite.selectCurrentSuiteToken);

                case 8:
                    oldObjToken = _context2.sent;

                    if (!(oldObjToken !== obj_token)) {
                        _context2.next = 12;
                        break;
                    }

                    _context2.next = 12;
                    return (0, _effects.put)((0, _explorer.setCurrentSuiteToken)(obj_token, type));

                case 12:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}

/***/ }),
/* 1298 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = watchMoveFile;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _explorer = __webpack_require__(56);

var _explorer2 = __webpack_require__(48);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchMoveFile),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(moveFileSaga);

function watchMoveFile() {
    return _regenerator2.default.wrap(function watchMoveFile$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.explorer.MOVE_FILE_SUCCESS, moveFileSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
/**
 * 负责标记从共享变为非共享的file，让nodes & objs 去执行清理工作。
 */
function moveFileSaga(action) {
    var _action$payload, destToken, success_tokens, nodeMap, isDestShared, wasSharedSrcTokens, wasSharedFileMetas;

    return _regenerator2.default.wrap(function moveFileSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, destToken = _action$payload.destToken, success_tokens = _action$payload.success_tokens;
                    _context2.next = 3;
                    return (0, _effects.select)(_explorer2.selectFileEntities);

                case 3:
                    nodeMap = _context2.sent;
                    isDestShared = nodeMap.getIn([destToken, 'space_id']) !== '';
                    wasSharedSrcTokens = success_tokens.filter(function (token) {
                        return typeof nodeMap.getIn([token, 'space_id']) !== 'undefined';
                    });

                    if (!(!isDestShared && wasSharedSrcTokens.length !== 0)) {
                        _context2.next = 10;
                        break;
                    }

                    wasSharedFileMetas = wasSharedSrcTokens.map(function (token) {
                        return {
                            type: nodeMap.getIn([token, 'type']),
                            token: token,
                            objToken: nodeMap.get([token, 'obj_token'])
                        };
                    });
                    _context2.next = 10;
                    return (0, _effects.put)((0, _explorer.removeFilesShareInfo)(wasSharedFileMetas));

                case 10:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}

/***/ }),
/* 1299 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = watchRemoveFile;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _explorer = __webpack_require__(56);

var _explorer2 = __webpack_require__(48);

var _user = __webpack_require__(72);

var _modelHelper = __webpack_require__(209);

var _reactRouterRedux = __webpack_require__(173);

var _url = __webpack_require__(530);

var _routeHelper = __webpack_require__(67);

var _route = __webpack_require__(514);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchRemoveFile),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(removeFileSaga);

function watchRemoveFile() {
    return _regenerator2.default.wrap(function watchRemoveFile$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.explorer.REMOVE_FILE_SUCCESS, removeFileSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function removeFileSaga(action) {
    var _action$payload, deletedFileTokens, fetchAfter, objMap, currentUser, currentUid, deletedObjTokens, recentObjTokens, newRecentObjTokens, backUrl;

    return _regenerator2.default.wrap(function removeFileSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, deletedFileTokens = _action$payload.token, fetchAfter = _action$payload.fetchAfter;
                    _context2.next = 3;
                    return (0, _effects.select)(_explorer2.selectObjEntities);

                case 3:
                    objMap = _context2.sent;
                    _context2.next = 6;
                    return (0, _effects.select)(_user.selectCurrentUser);

                case 6:
                    currentUser = _context2.sent;
                    currentUid = currentUser.get('id');
                    deletedObjTokens = deletedFileTokens.reduce(function (prev, cur, idx) {
                        var obj = objMap.find(function (obj) {
                            return obj.token === cur;
                        });
                        if (!obj) {
                            return prev;
                        }
                        var isCurrentUserOwned = obj.owner_id === currentUid;
                        return isCurrentUserOwned ? prev.concat(obj.obj_token) : prev;
                    }, []);
                    _context2.next = 11;
                    return (0, _effects.select)(_explorer2.selectRecentObjTokens);

                case 11:
                    recentObjTokens = _context2.sent;
                    newRecentObjTokens = recentObjTokens.filter(function (typePrefixedObjToken) {
                        var objToken = (0, _modelHelper.getTypePrefixRemovedToken)(typePrefixedObjToken);
                        return deletedObjTokens.indexOf(objToken) < 0;
                    });
                    _context2.next = 15;
                    return (0, _effects.put)((0, _explorer.setRecentObjTokens)(newRecentObjTokens));

                case 15:
                    if (!(0, _routeHelper.isUnderSuiteView)()) {
                        _context2.next = 28;
                        break;
                    }

                    if (fetchAfter) {
                        _context2.next = 18;
                        break;
                    }

                    return _context2.abrupt('return');

                case 18:
                    _context2.next = 20;
                    return (0, _effects.select)(_url.selectBackUrl);

                case 20:
                    backUrl = _context2.sent;

                    if (!backUrl) {
                        _context2.next = 26;
                        break;
                    }

                    _context2.next = 24;
                    return (0, _effects.put)((0, _reactRouterRedux.replace)(backUrl));

                case 24:
                    _context2.next = 28;
                    break;

                case 26:
                    _context2.next = 28;
                    return (0, _effects.put)((0, _reactRouterRedux.replace)(_route.PATH.HOME));

                case 28:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}

/***/ }),
/* 1300 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _explorer = __webpack_require__(48);

var _modal = __webpack_require__(711);

var _modal2 = __webpack_require__(334);

var _explorer2 = __webpack_require__(56);

var _reactRouterRedux = __webpack_require__(173);

var _$constants = __webpack_require__(5);

var _share = __webpack_require__(78);

var _models = __webpack_require__(172);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(addMember2UnsharedFolderWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(getWasUnSharedFolder),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(getIsShareModalOpen),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(getFileToken),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(addMember2UnsharedFolderSaga),
    _marked6 = /*#__PURE__*/_regenerator2.default.mark(jump2SharedFolderThenCloseModal),
    _marked7 = /*#__PURE__*/_regenerator2.default.mark(removeSharedFolderFromCurrentFileTokens);

function addMember2UnsharedFolderWatcher() {
    return _regenerator2.default.wrap(function addMember2UnsharedFolderWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_START], addMember2UnsharedFolderSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function getWasUnSharedFolder() {
    var token = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    var nodeMap, wasUnSharedFolder;
    return _regenerator2.default.wrap(function getWasUnSharedFolder$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.select)(_explorer.selectFileEntities);

                case 2:
                    nodeMap = _context2.sent;
                    wasUnSharedFolder = nodeMap.getIn([token, 'space_id'], '') === '';
                    return _context2.abrupt('return', wasUnSharedFolder);

                case 5:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function getIsShareModalOpen() {
    var currentModals, isShareModalOpened;
    return _regenerator2.default.wrap(function getIsShareModalOpen$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.select)(_modal.selectCurrentModals);

                case 2:
                    currentModals = _context3.sent;
                    isShareModalOpened = currentModals.find(function (modalMeta) {
                        return modalMeta.type === _$constants.ui.MODAL_TYPES.SHARE;
                    });
                    return _context3.abrupt('return', isShareModalOpened);

                case 5:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function getFileToken(payload) {
    var meta, token;
    return _regenerator2.default.wrap(function getFileToken$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    _context4.next = 2;
                    return (0, _effects.select)(_explorer.selectSelectedFirstFileMeta);

                case 2:
                    meta = _context4.sent;
                    token = payload.token || meta.token;
                    return _context4.abrupt('return', token);

                case 5:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}
function addMember2UnsharedFolderSaga(action) {
    var isShareModalOpened, token, wasUnSharedFolder, _ref, success;

    return _regenerator2.default.wrap(function addMember2UnsharedFolderSaga$(_context5) {
        while (1) {
            switch (_context5.prev = _context5.next) {
                case 0:
                    _context5.prev = 0;
                    _context5.next = 3;
                    return (0, _effects.call)(getIsShareModalOpen);

                case 3:
                    isShareModalOpened = _context5.sent;

                    if (isShareModalOpened) {
                        _context5.next = 6;
                        break;
                    }

                    return _context5.abrupt('return');

                case 6:
                    _context5.next = 8;
                    return (0, _effects.call)(getFileToken, action.payload);

                case 8:
                    token = _context5.sent;
                    _context5.next = 11;
                    return (0, _effects.call)(getWasUnSharedFolder, token);

                case 11:
                    wasUnSharedFolder = _context5.sent;

                    if (wasUnSharedFolder) {
                        _context5.next = 14;
                        break;
                    }

                    return _context5.abrupt('return');

                case 14:
                    _context5.next = 16;
                    return (0, _effects.race)({
                        success: (0, _effects.take)(_$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_SUCCESS),
                        failed: (0, _effects.take)(_$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_FAIL),
                        canceled: (0, _effects.take)(_$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_CANCEL)
                    });

                case 16:
                    _ref = _context5.sent;
                    success = _ref.success;

                    if (success) {
                        _context5.next = 20;
                        break;
                    }

                    return _context5.abrupt('return');

                case 20:
                    _context5.next = 22;
                    return (0, _effects.spawn)(jump2SharedFolderThenCloseModal, action);

                case 22:
                    _context5.next = 24;
                    return (0, _effects.spawn)(removeSharedFolderFromCurrentFileTokens, action);

                case 24:
                    _context5.next = 26;
                    return (0, _effects.put)((0, _share.fetchRootShareFolder)(_models.ShareFolderHiddenType.FetchVisible, false));

                case 26:
                    _context5.next = 31;
                    break;

                case 28:
                    _context5.prev = 28;
                    _context5.t0 = _context5['catch'](0);

                    console.error(_context5.t0);

                case 31:
                case 'end':
                    return _context5.stop();
            }
        }
    }, _marked5, this, [[0, 28]]);
}
function jump2SharedFolderThenCloseModal(action) {
    var token;
    return _regenerator2.default.wrap(function jump2SharedFolderThenCloseModal$(_context6) {
        while (1) {
            switch (_context6.prev = _context6.next) {
                case 0:
                    _context6.prev = 0;
                    token = action.payload.token;
                    _context6.next = 4;
                    return (0, _effects.put)((0, _reactRouterRedux.push)('' + _$constants.route.URL.FOLDER + token));

                case 4:
                    _context6.next = 6;
                    return (0, _effects.put)((0, _modal2.closeModal)(_$constants.ui.MODAL_TYPES.SHARE, _$constants.ui.CLOSE_TYPES.COMPLETE));

                case 6:
                    _context6.next = 11;
                    break;

                case 8:
                    _context6.prev = 8;
                    _context6.t0 = _context6['catch'](0);
                    throw _context6.t0;

                case 11:
                case 'end':
                    return _context6.stop();
            }
        }
    }, _marked6, this, [[0, 8]]);
}
/**
 * 解决当向一个文件夹添加成员使其变为共享文件夹后
 * 将共享文件夹从当前非共享目录下移除(比如explorer根目录)
 */
function removeSharedFolderFromCurrentFileTokens(action) {
    var token, currentPath, currentFileToken, currentFileTokens, isCurrentFolderUnShared, isExistUnderCurrentFolder;
    return _regenerator2.default.wrap(function removeSharedFolderFromCurrentFileTokens$(_context7) {
        while (1) {
            switch (_context7.prev = _context7.next) {
                case 0:
                    _context7.prev = 0;
                    token = action.payload.token;
                    /* 因为在文件选中时 currentFileToken 会被替换为选中文件的 token，
                       所以使用currentPath.last()来判断是安全的 */

                    _context7.next = 4;
                    return (0, _effects.select)(_explorer.selectCurrentPath);

                case 4:
                    currentPath = _context7.sent;
                    currentFileToken = currentPath.last();
                    _context7.next = 8;
                    return (0, _effects.select)(_explorer.selectCurrentFileTokens);

                case 8:
                    currentFileTokens = _context7.sent;
                    _context7.next = 11;
                    return (0, _effects.call)(getWasUnSharedFolder, currentFileToken);

                case 11:
                    isCurrentFolderUnShared = _context7.sent;
                    isExistUnderCurrentFolder = currentFileTokens.indexOf(token) > -1;

                    if (!(!isCurrentFolderUnShared || !isExistUnderCurrentFolder)) {
                        _context7.next = 15;
                        break;
                    }

                    return _context7.abrupt('return');

                case 15:
                    _context7.next = 17;
                    return (0, _effects.put)((0, _explorer2.removeFromFileTokens)(currentFileToken, token));

                case 17:
                    _context7.next = 22;
                    break;

                case 19:
                    _context7.prev = 19;
                    _context7.t0 = _context7['catch'](0);
                    throw _context7.t0;

                case 22:
                case 'end':
                    return _context7.stop();
            }
        }
    }, _marked7, this, [[0, 19]]);
}
exports.default = addMember2UnsharedFolderWatcher;

/***/ }),
/* 1301 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = persistRootTokenMapWatcher;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _store = __webpack_require__(393);

var _store2 = _interopRequireDefault(_store);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(persistRootTokenMapWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(persistRootTokenMapSaga);

var key = _$constants.storage.STORAGE_KEY.explorer.EXPLORER_ROOT_TOKEN_MAP;
function persistRootTokenMapWatcher() {
    return _regenerator2.default.wrap(function persistRootTokenMapWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.explorer.FETCH_EXPLORER_ROOT_TOKEN_MAP_SUCCESS, persistRootTokenMapSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function persistRootTokenMapSaga(action) {
    var userId, data;
    return _regenerator2.default.wrap(function persistRootTokenMapSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.prev = 0;
                    userId = window.User.id;

                    if (userId) {
                        _context2.next = 4;
                        break;
                    }

                    return _context2.abrupt('return');

                case 4:
                    data = (0, _defineProperty3.default)({}, userId, action.payload);
                    _context2.next = 7;
                    return (0, _effects.call)(_store2.default.setItem, key, JSON.stringify(data));

                case 7:
                    _context2.next = 12;
                    break;

                case 9:
                    _context2.prev = 9;
                    _context2.t0 = _context2['catch'](0);

                    console.error(_context2.t0);

                case 12:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this, [[0, 9]]);
}

/***/ }),
/* 1302 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = fetchExplorerRootTokenMapWatcher;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _store = __webpack_require__(393);

var _store2 = _interopRequireDefault(_store);

var _explorer = __webpack_require__(56);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchExplorerRootTokenMapWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchExplorerRootTokenMapSaga);

var key = _$constants.storage.STORAGE_KEY.explorer.EXPLORER_ROOT_TOKEN_MAP;
function fetchExplorerRootTokenMapWatcher() {
    return _regenerator2.default.wrap(function fetchExplorerRootTokenMapWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.initialization.APP_INITIALIZED, fetchExplorerRootTokenMapSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
/**
 * 当取不到持久化存储的tokenMap时进行拉取。
 * 否则load map，通知reducer初始化数据。
 */
function fetchExplorerRootTokenMapSaga(action) {
    var userId, cachedDataStr, cached, rootTokenMap;
    return _regenerator2.default.wrap(function fetchExplorerRootTokenMapSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.prev = 0;
                    userId = window.User.id;

                    if (userId) {
                        _context2.next = 4;
                        break;
                    }

                    return _context2.abrupt('return');

                case 4:
                    _context2.next = 6;
                    return (0, _effects.call)(_store2.default.getItem, key);

                case 6:
                    cachedDataStr = _context2.sent;

                    if (!(!cachedDataStr || !JSON.parse(cachedDataStr)[userId])) {
                        _context2.next = 11;
                        break;
                    }

                    _context2.next = 10;
                    return (0, _effects.put)((0, _explorer.fetchExplorerRootTokenMap)());

                case 10:
                    return _context2.abrupt('return', _context2.sent);

                case 11:
                    cached = JSON.parse(cachedDataStr);
                    rootTokenMap = cached[userId];
                    _context2.next = 15;
                    return (0, _effects.put)((0, _explorer.loadPersistedRootTokenMap)(rootTokenMap));

                case 15:
                    _context2.next = 20;
                    break;

                case 17:
                    _context2.prev = 17;
                    _context2.t0 = _context2['catch'](0);

                    console.error(_context2.t0);

                case 20:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this, [[0, 17]]);
}

/***/ }),
/* 1303 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = watchDismissSharedFolder;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _reactRouterRedux = __webpack_require__(173);

var _routeHelper = __webpack_require__(67);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchDismissSharedFolder),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(dismissSharedFolderSaga);

function watchDismissSharedFolder() {
    return _regenerator2.default.wrap(function watchDismissSharedFolder$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.explorer.DISMISS_SHARE_FOLDER_SUCCESS, dismissSharedFolderSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function dismissSharedFolderSaga(action) {
    return _regenerator2.default.wrap(function dismissSharedFolderSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    if (!(0, _routeHelper.locateRoute)().isShareFolders) {
                        _context2.next = 2;
                        break;
                    }

                    return _context2.abrupt('return');

                case 2:
                    _context2.next = 4;
                    return (0, _effects.put)((0, _reactRouterRedux.push)(_$constants.route.URL.SHARE_FOLDERS));

                case 4:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}

/***/ }),
/* 1304 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = switchRootTokenWatcher;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _explorer = __webpack_require__(56);

var _explorer2 = __webpack_require__(48);

var _common = __webpack_require__(85);

var _titleHelper = __webpack_require__(195);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(switchRootTokenWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(switchRootTokenByCacheSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(handleFetchRootMeta),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(handleFetchRootShareFolder),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(getShouldSetRootMeta);

function switchRootTokenWatcher() {
    return _regenerator2.default.wrap(function switchRootTokenWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeLatest)([_$constants.actionTypes.explorer.FETCH_ROOT_META, _$constants.actionTypes.explorer.FETCH_ROOT_SHARE_FOLDER_START], switchRootTokenByCacheSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function switchRootTokenByCacheSaga(action) {
    return _regenerator2.default.wrap(function switchRootTokenByCacheSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.t0 = action.type;
                    _context2.next = _context2.t0 === _$constants.actionTypes.explorer.FETCH_ROOT_META ? 3 : _context2.t0 === _$constants.actionTypes.explorer.FETCH_ROOT_SHARE_FOLDER_START ? 6 : 9;
                    break;

                case 3:
                    _context2.next = 5;
                    return handleFetchRootMeta(action);

                case 5:
                    return _context2.abrupt('break', 10);

                case 6:
                    _context2.next = 8;
                    return handleFetchRootShareFolder(action);

                case 8:
                    return _context2.abrupt('break', 10);

                case 9:
                    return _context2.abrupt('break', 10);

                case 10:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function handleFetchRootMeta(action) {
    var type, rootTokenMap, rootToken, shouldSetRootMeta;
    return _regenerator2.default.wrap(function handleFetchRootMeta$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    type = action.payload.type;
                    _context3.next = 3;
                    return (0, _effects.select)(_explorer2.selectRootToken);

                case 3:
                    rootTokenMap = _context3.sent;
                    rootToken = rootTokenMap.get(String(type));
                    _context3.next = 7;
                    return (0, _effects.call)(getShouldSetRootMeta);

                case 7:
                    shouldSetRootMeta = _context3.sent;

                    if (!(shouldSetRootMeta && rootToken)) {
                        _context3.next = 11;
                        break;
                    }

                    _context3.next = 11;
                    return (0, _effects.put)((0, _explorer.setRootMeta)({ type: type, token: rootToken }));

                case 11:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function handleFetchRootShareFolder(action) {
    var willUpdatePath;
    return _regenerator2.default.wrap(function handleFetchRootShareFolder$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    willUpdatePath = action.payload.willUpdatePath;

                    if (!willUpdatePath) {
                        _context4.next = 4;
                        break;
                    }

                    _context4.next = 4;
                    return (0, _effects.put)((0, _explorer.setRootMeta)({
                        type: _$constants.common.NUM_ROOT_META.SHARE_FOLDERS,
                        token: 'share-folders'
                    }));

                case 4:
                    // 更新document.title
                    (0, _titleHelper.setTitle)(_$constants.common.NUM_ROOT_META.SHARE_FOLDERS);

                case 5:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}
function getShouldSetRootMeta() {
    var routeObj;
    return _regenerator2.default.wrap(function getShouldSetRootMeta$(_context5) {
        while (1) {
            switch (_context5.prev = _context5.next) {
                case 0:
                    _context5.next = 2;
                    return (0, _effects.select)(_common.selectRoute);

                case 2:
                    routeObj = _context5.sent;
                    return _context5.abrupt('return', routeObj.get('path') !== _$constants.route.PATH.HOME);

                case 4:
                case 'end':
                    return _context5.stop();
            }
        }
    }, _marked5, this);
}

/***/ }),
/* 1305 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _mapRootType2Path;

exports.default = checkRootMetaWatcher;

var _constants = __webpack_require__(5);

var _effects = __webpack_require__(17);

var _explorer = __webpack_require__(48);

var _common = __webpack_require__(85);

var _explorer2 = __webpack_require__(56);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(checkRootMetaWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(checkRootMetaSaga);

/**
 * 侧边栏三项 rootRoute 的对应 rootType 为索引
 * 此三项 rootRoute 的list索引与路由强绑定
 */
var mapRootType2Path = (_mapRootType2Path = {}, (0, _defineProperty3.default)(_mapRootType2Path, _constants.common.NUM_ROOT_META.EXPLORER, _constants.route.PATH.EXPLORER), (0, _defineProperty3.default)(_mapRootType2Path, _constants.common.NUM_ROOT_META.SHARE_FOLDERS, _constants.route.PATH.SHARE_FOLDERS), (0, _defineProperty3.default)(_mapRootType2Path, _constants.common.NUM_ROOT_META.TRASH, _constants.route.PATH.TRASH), _mapRootType2Path);
function checkRootMetaWatcher() {
    return _regenerator2.default.wrap(function checkRootMetaWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeLatest)(_constants.actionTypes.explorer.CHECK_ROOT_META, checkRootMetaSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function checkRootMetaSaga(action) {
    var routeObj, path, _action$payload, type, token, isValidToSetRootMeta, currentFileToken, isNecessary2SetRootMeta;

    return _regenerator2.default.wrap(function checkRootMetaSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.select)(_common.selectRoute);

                case 2:
                    routeObj = _context2.sent;
                    path = routeObj.get('path');
                    _action$payload = action.payload, type = _action$payload.type, token = _action$payload.token;
                    isValidToSetRootMeta = (mapRootType2Path[type] || '') === path;
                    _context2.next = 8;
                    return (0, _effects.select)(_explorer.selectCurrentFileToken);

                case 8:
                    currentFileToken = _context2.sent;
                    isNecessary2SetRootMeta = currentFileToken !== token;
                    // for debug use
                    // if (!isNecessary2SetRootMeta) {
                    //   console.log(`%c拦截到没必要的setRootMeta: ${type}`, 'font-size: 20px; color: purple;');
                    // }
                    // if (!isValidToSetRootMeta) {
                    //   console.log(`%c拦截到验证失败的setRootMeta: ${type}, ${token}, ${path}`, 'font-size: 20px; color: purple;');
                    // }

                    if (!(isValidToSetRootMeta && isNecessary2SetRootMeta)) {
                        _context2.next = 13;
                        break;
                    }

                    _context2.next = 13;
                    return (0, _effects.put)((0, _explorer2.setRootMeta)(action.payload));

                case 13:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}

/***/ }),
/* 1306 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = closeModalWatcher;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _explorer = __webpack_require__(56);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(closeModalWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(closeModalSaga);

function closeModalWatcher() {
    return _regenerator2.default.wrap(function closeModalWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.ui.CLOSE_MODAL, closeModalSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function closeModalSaga(action) {
    var shouldIgnoredModalTypes, shouldIgnoredCloseTypes, _action$payload, modalType, closeType;

    return _regenerator2.default.wrap(function closeModalSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    shouldIgnoredModalTypes = [_$constants.ui.MODAL_TYPES.CREATE_SHARE_FOLDER, _$constants.ui.MODAL_TYPES.CREATE_FOLDER];
                    shouldIgnoredCloseTypes = [_$constants.ui.CLOSE_TYPES.ABORT, _$constants.ui.CLOSE_TYPES.TRANSFER];
                    _action$payload = action.payload, modalType = _action$payload.modalType, closeType = _action$payload.closeType;

                    if (!(shouldIgnoredModalTypes.indexOf(modalType) > -1)) {
                        _context2.next = 5;
                        break;
                    }

                    return _context2.abrupt('return');

                case 5:
                    if (!(shouldIgnoredCloseTypes.indexOf(closeType) > -1)) {
                        _context2.next = 7;
                        break;
                    }

                    return _context2.abrupt('return');

                case 7:
                    if (!(_$constants.ui.modalTypesArr.indexOf(modalType) < 0)) {
                        _context2.next = 9;
                        break;
                    }

                    return _context2.abrupt('return');

                case 9:
                    _context2.next = 11;
                    return (0, _effects.put)((0, _explorer.setSelectedFileMetas)([]));

                case 11:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}

/***/ }),
/* 1307 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _star = __webpack_require__(1308);

var _star2 = _interopRequireDefault(_star);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(logSaga);

function logSaga() {
    return _regenerator2.default.wrap(function logSaga$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(_star2.default), (0, _effects.fork)(_star.startClickStarWatcher)]);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
exports.default = logSaga;

/***/ }),
/* 1308 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = watchStarOpeate;
exports.startClickStarWatcher = startClickStarWatcher;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _explorer = __webpack_require__(48);

var _tea = __webpack_require__(42);

var _tea2 = _interopRequireDefault(_tea);

var _teaLogger = __webpack_require__(450);

var _encryption = __webpack_require__(164);

var _common = __webpack_require__(19);

var _ui = __webpack_require__(383);

var _modelHelper = __webpack_require__(209);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchStarOpeate),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(startClickStarWatcher),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(startClickStar);

var addStar = [_$constants.actionTypes.explorer.ADD_STAR_SUCCESS, _$constants.actionTypes.explorer.ADD_STAR_FAIL];
var removeStar = [_$constants.actionTypes.explorer.REMOVE_STAR_SUCCESS, _$constants.actionTypes.explorer.REMOVE_STAR_FAIL];
var filterEntity = function filterEntity(entities, token) {
    return entities.filter(function (item) {
        // 有些obj_token是 tpye:obj_token 的形式的，去掉 tpye:
        var objToken = item.get('obj_token').replace(/^(\d+:)/, '');
        return objToken === token;
    }).first();
};
function watchStarOpeate() {
    var startClickStarAction, startClickStarPayload, action, error, token, fileEntities, objEntities, event, file, shareRoot, type, typeOfNum, fileType, _logHelper$getFileInf, file_tenant_id, file_is_cross_tenant, logObj;

    return _regenerator2.default.wrap(function watchStarOpeate$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    if (false) {}

                    _context.next = 3;
                    return (0, _effects.take)(_$constants.actionTypes.explorer.CLICK_STAR_START);

                case 3:
                    startClickStarAction = _context.sent;
                    startClickStarPayload = startClickStarAction.payload;
                    _context.next = 7;
                    return (0, _effects.take)([].concat(addStar, removeStar));

                case 7:
                    action = _context.sent;
                    error = action.error;
                    token = action.payload.token;
                    _context.next = 12;
                    return (0, _effects.select)(_explorer.selectFileEntities);

                case 12:
                    fileEntities = _context.sent;
                    _context.next = 15;
                    return (0, _effects.select)(_explorer.selectObjEntities);

                case 15:
                    objEntities = _context.sent;

                    // 获取事件
                    event = addStar.includes(action.type) ? 'click_file_star' : 'click_file_cancel_star';
                    // 获取star操作的实体，然后获取file_type

                    file = fileEntities.get(token) || filterEntity(fileEntities, token) || filterEntity(objEntities, token);
                    shareRoot = file.get('share_root');
                    type = file.get('type');
                    typeOfNum = (0, _modelHelper.transformType2VirtualType)({ shareRoot: shareRoot, type: type });
                    fileType = _common.mapTypeNumToFileType[typeOfNum];
                    _logHelper$getFileInf = _teaLogger.logHelper.getFileInfoByEntity(file), file_tenant_id = _logHelper$getFileInf.file_tenant_id, file_is_cross_tenant = _logHelper$getFileInf.file_is_cross_tenant;
                    // 打点数据

                    logObj = {
                        status_code: error ? error.code : 0,
                        status_name: error ? error.msg : 'Success',
                        file_type: fileType,
                        file_id: (0, _encryption.encryptTea)(token),
                        module: _tea.getDefaultOptions.module(),
                        file_tenant_id: (0, _encryption.encryptTea)(file_tenant_id),
                        file_is_cross_tenant: String(file_is_cross_tenant),
                        click_from: startClickStarPayload.from
                    };
                    // 打点

                    (0, _tea2.default)(event, logObj);
                    _context.next = 0;
                    break;

                case 27:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function startClickStarWatcher() {
    return _regenerator2.default.wrap(function startClickStarWatcher$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.explorer.ADD_STAR, _$constants.actionTypes.explorer.REMOVE_STAR, _ui.menuActionTypes.TOGGLE_STAR], startClickStar);

                case 2:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function startClickStar(action) {
    return _regenerator2.default.wrap(function startClickStar$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.put)({
                        type: _$constants.actionTypes.explorer.CLICK_STAR_START,
                        payload: action.payload
                    });

                case 2:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}

/***/ }),
/* 1309 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = shareSaga;

var _effects = __webpack_require__(17);

var _fetchShareFolderMembers = __webpack_require__(1310);

var _fetchShareFolderMembers2 = _interopRequireDefault(_fetchShareFolderMembers);

var _setUserPermission = __webpack_require__(1311);

var _setUserPermission2 = _interopRequireDefault(_setUserPermission);

var _fetchAuthorizedMember = __webpack_require__(1312);

var _fetchAuthorizedMember2 = _interopRequireDefault(_fetchAuthorizedMember);

var _fetchSuitePublicPermission = __webpack_require__(1313);

var _fetchSuitePublicPermission2 = _interopRequireDefault(_fetchSuitePublicPermission);

var _userPermission = __webpack_require__(1314);

var _userPermission2 = _interopRequireDefault(_userPermission);

var _setPublicPermission = __webpack_require__(1317);

var _setPublicPermission2 = _interopRequireDefault(_setPublicPermission);

var _addOrRemoveAuthorizedMember = __webpack_require__(1318);

var _addOrRemoveAuthorizedMember2 = _interopRequireDefault(_addOrRemoveAuthorizedMember);

var _removeMemberFromFolder = __webpack_require__(1319);

var _resetPathName = __webpack_require__(1320);

var _resetPathName2 = _interopRequireDefault(_resetPathName);

var _permissionChange = __webpack_require__(1321);

var _permissionChange2 = _interopRequireDefault(_permissionChange);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(shareSaga);

function shareSaga() {
    return _regenerator2.default.wrap(function shareSaga$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(_fetchShareFolderMembers2.default), (0, _effects.fork)(_setUserPermission2.default), (0, _effects.fork)(_fetchAuthorizedMember2.default), (0, _effects.fork)(_fetchSuitePublicPermission2.default), (0, _effects.fork)(_userPermission2.default), (0, _effects.fork)(_removeMemberFromFolder.removeMemberFromFolderSuccessWatcher), (0, _effects.fork)(_removeMemberFromFolder.removeMemberFromFolderFailWatcher), (0, _effects.fork)(_resetPathName2.default), (0, _effects.fork)(_setPublicPermission2.default), (0, _effects.fork)(_addOrRemoveAuthorizedMember2.default), (0, _effects.fork)(_permissionChange2.default)]);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}

/***/ }),
/* 1310 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _share = __webpack_require__(78);

var shareActions = _interopRequireWildcard(_share);

var _$constants = __webpack_require__(5);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchShareFolderMembersWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchShareFolderMembersSaga);

function fetchShareFolderMembersWatcher() {
    return _regenerator2.default.wrap(function fetchShareFolderMembersWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_SUCCESS, _$constants.actionTypes.explorer.REMOVE_MEMBER_FROM_FOLDER_FAIL], fetchShareFolderMembersSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchShareFolderMembersSaga(action) {
    var space_id;
    return _regenerator2.default.wrap(function fetchShareFolderMembersSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    space_id = action.payload.space_id;
                    _context2.next = 3;
                    return (0, _effects.put)(shareActions.fetchShareFolderMembers(space_id));

                case 3:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = fetchShareFolderMembersWatcher;

/***/ }),
/* 1311 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _share = __webpack_require__(78);

var shareActions = _interopRequireWildcard(_share);

var _$constants = __webpack_require__(5);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(setUserPermissionWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(setUserPermissionSaga);

/* 设置用户权限 */
function setUserPermissionWatcher() {
    return _regenerator2.default.wrap(function setUserPermissionWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.permission.SET_USER_PERMISSION_SUCCESS, setUserPermissionSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function setUserPermissionSaga(action) {
    var _action$payload, ownerId, token, type;

    return _regenerator2.default.wrap(function setUserPermissionSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, ownerId = _action$payload.ownerId, token = _action$payload.token, type = _action$payload.type;

                    if (!(ownerId !== 0)) {
                        _context2.next = 4;
                        break;
                    }

                    _context2.next = 4;
                    return (0, _effects.put)(shareActions.fetchAuthorizedMembers(token, type));

                case 4:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = setUserPermissionWatcher;

/***/ }),
/* 1312 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _share = __webpack_require__(78);

var shareActions = _interopRequireWildcard(_share);

var _$constants = __webpack_require__(5);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchAuthorizedMembersWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchAuthorizedMembers);

/* 拉取已赋权成员 */
function fetchAuthorizedMembersWatcher() {
    return _regenerator2.default.wrap(function fetchAuthorizedMembersWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.permission.FETCH_ALL_PERMISSION_INFO, _$constants.actionTypes.permission.BULK_SET_PERM_SUCCESS, _$constants.actionTypes.permission.BULK_SET_PERM_FAIL, _$constants.actionTypes.permission.SET_USER_PERMISSION_FAIL, _$constants.actionTypes.permission.SET_SUITE_PUBLIC_PERMISSION_FAIL, _$constants.actionTypes.permission.REMOVE_AUTHORIZED_MEMBERS_FAIL], fetchAuthorizedMembers);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchAuthorizedMembers(action) {
    var _action$payload, token, type, isFromNotification;

    return _regenerator2.default.wrap(function fetchAuthorizedMembers$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, token = _action$payload.token, type = _action$payload.type, isFromNotification = _action$payload.isFromNotification;

                    if (!(token && type)) {
                        _context2.next = 4;
                        break;
                    }

                    _context2.next = 4;
                    return (0, _effects.put)(shareActions.fetchAuthorizedMembers(token, type, isFromNotification));

                case 4:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = fetchAuthorizedMembersWatcher;

/***/ }),
/* 1313 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _share = __webpack_require__(78);

var shareActions = _interopRequireWildcard(_share);

var _$constants = __webpack_require__(5);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchSuitePublicPermissionWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchSuitePublicPermission);

/* 拉取公共权限 */
function fetchSuitePublicPermissionWatcher() {
    return _regenerator2.default.wrap(function fetchSuitePublicPermissionWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.permission.FETCH_ALL_PERMISSION_INFO], fetchSuitePublicPermission);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchSuitePublicPermission(action) {
    var _action$payload, token, type, isFromNotification;

    return _regenerator2.default.wrap(function fetchSuitePublicPermission$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, token = _action$payload.token, type = _action$payload.type, isFromNotification = _action$payload.isFromNotification;
                    _context2.next = 3;
                    return (0, _effects.put)(shareActions.fetchSuitePublicPermission(token, type, isFromNotification));

                case 3:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = fetchSuitePublicPermissionWatcher;

/***/ }),
/* 1314 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = fetchUserPermissionOnSuiteWatcher;

var _effects = __webpack_require__(17);

var _fetchAllPermissionInfo = __webpack_require__(1315);

var _fetchAllPermissionInfo2 = _interopRequireDefault(_fetchAllPermissionInfo);

var _updateAuthorizedMembers = __webpack_require__(1316);

var _updateAuthorizedMembers2 = _interopRequireDefault(_updateAuthorizedMembers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchUserPermissionOnSuiteWatcher);

function fetchUserPermissionOnSuiteWatcher() {
    return _regenerator2.default.wrap(function fetchUserPermissionOnSuiteWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(_fetchAllPermissionInfo2.default), (0, _effects.fork)(_updateAuthorizedMembers2.default)]);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}

/***/ }),
/* 1315 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _share = __webpack_require__(78);

var shareActions = _interopRequireWildcard(_share);

var _$constants = __webpack_require__(5);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchAllPermissionInfoWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchAllPermissionInfoSaga);

function fetchAllPermissionInfoWatcher() {
    return _regenerator2.default.wrap(function fetchAllPermissionInfoWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.permission.FETCH_ALL_PERMISSION_INFO], fetchAllPermissionInfoSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchAllPermissionInfoSaga(action) {
    var _action$payload, token, type, isFromNotification;

    return _regenerator2.default.wrap(function fetchAllPermissionInfoSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, token = _action$payload.token, type = _action$payload.type, isFromNotification = _action$payload.isFromNotification;
                    _context2.next = 3;
                    return (0, _effects.put)(shareActions.fetchUserPermissionOnSuite(token, type, isFromNotification));

                case 3:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = fetchAllPermissionInfoWatcher;

/***/ }),
/* 1316 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _share = __webpack_require__(78);

var shareActions = _interopRequireWildcard(_share);

var _$constants = __webpack_require__(5);

var _user = __webpack_require__(72);

var _share2 = __webpack_require__(342);

var _permissionHelper = __webpack_require__(302);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchUserPermissionOnSuiteWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchUserPermissionOnSuite);

/* 拉取用户权限 */
function fetchUserPermissionOnSuiteWatcher() {
    return _regenerator2.default.wrap(function fetchUserPermissionOnSuiteWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_SUCCESS], fetchUserPermissionOnSuite);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchUserPermissionOnSuite(action) {
    var _action$payload, token, type, permissions, currentUserObj, currentUid, currentSuiteInvitedMembers, currentUserIdx, newPermissionNum, originMemberObj, oldPermissionNum, isPermissionChanged, updatedMember, data;

    return _regenerator2.default.wrap(function fetchUserPermissionOnSuite$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, token = _action$payload.token, type = _action$payload.type, permissions = _action$payload.permissions;
                    _context2.next = 3;
                    return (0, _effects.select)(_user.selectCurrentUser);

                case 3:
                    currentUserObj = _context2.sent;
                    currentUid = currentUserObj.get('id');
                    _context2.next = 7;
                    return (0, _effects.select)(_share2.selectCurNoteMember);

                case 7:
                    currentSuiteInvitedMembers = _context2.sent;

                    if (currentSuiteInvitedMembers) {
                        _context2.next = 10;
                        break;
                    }

                    return _context2.abrupt('return');

                case 10:
                    currentUserIdx = currentSuiteInvitedMembers.findIndex(function (member) {
                        return member.get('owner_id') === currentUid;
                    });

                    if (!(currentUserIdx === -1)) {
                        _context2.next = 13;
                        break;
                    }

                    return _context2.abrupt('return');

                case 13:
                    newPermissionNum = (0, _permissionHelper.permissionArr2Num)(permissions);
                    originMemberObj = currentSuiteInvitedMembers.get(currentUserIdx);
                    oldPermissionNum = (0, _permissionHelper.permissionArr2Num)(originMemberObj.get('permissions'));
                    isPermissionChanged = newPermissionNum !== oldPermissionNum;

                    if (isPermissionChanged) {
                        _context2.next = 19;
                        break;
                    }

                    return _context2.abrupt('return');

                case 19:
                    updatedMember = originMemberObj.set('permissions', newPermissionNum);
                    data = {
                        index: currentUserIdx,
                        member: updatedMember
                    };
                    _context2.next = 23;
                    return (0, _effects.put)(shareActions.updateAuthorizedMembers(token, type, data));

                case 23:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = fetchUserPermissionOnSuiteWatcher;

/***/ }),
/* 1317 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _suite = __webpack_require__(223);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(setPublicPermissionWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(setPublicPermissionSaga);

/* 设置公共权限 */
function setPublicPermissionWatcher() {
    return _regenerator2.default.wrap(function setPublicPermissionWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.permission.SET_SUITE_PUBLIC_PERMISSION_SUCCESS, setPublicPermissionSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function setPublicPermissionSaga(action) {
    var payload, type, token;
    return _regenerator2.default.wrap(function setPublicPermissionSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    payload = action.payload;
                    type = payload.type, token = payload.token;
                    // 设置完文档公共权限后重新获取文档属性，更新is_external字段

                    _context2.next = 4;
                    return (0, _effects.put)((0, _suite.updateSuiteExternal)(token, type));

                case 4:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = setPublicPermissionWatcher;

/***/ }),
/* 1318 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _suite = __webpack_require__(223);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(addOrRemoveAuthorizedMemberWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(addOrRemoveSuiteMember);

/* 添加成员和删除成员 */
function addOrRemoveAuthorizedMemberWatcher() {
    return _regenerator2.default.wrap(function addOrRemoveAuthorizedMemberWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeLatest)([_$constants.actionTypes.permission.BULK_SET_PERM_SUCCESS, _$constants.actionTypes.permission.REMOVE_AUTHORIZED_MEMBERS_SUCCESS], addOrRemoveSuiteMember);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function addOrRemoveSuiteMember(action) {
    var payload, type, token;
    return _regenerator2.default.wrap(function addOrRemoveSuiteMember$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    payload = action.payload;
                    type = payload.type, token = payload.token;
                    // 新增或删除文档协作成员后重新获取文档属性，更新is_external字段

                    _context2.next = 4;
                    return (0, _effects.put)((0, _suite.updateSuiteExternal)(token, type));

                case 4:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = addOrRemoveAuthorizedMemberWatcher;

/***/ }),
/* 1319 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.removeMemberFromFolderSuccessWatcher = exports.removeMemberFromFolderFailWatcher = undefined;

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _share = __webpack_require__(78);

var shareActions = _interopRequireWildcard(_share);

var _modal = __webpack_require__(334);

var _$constants = __webpack_require__(5);

var _explorer = __webpack_require__(48);

var _modal2 = __webpack_require__(711);

var _explorer2 = __webpack_require__(56);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(removeMemberFromFolderFailWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(removeMemberFromFolderFailSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(removeMemberFromFolderSuccessWatcher),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(removeMemberFromFolderSuccessSaga);

function removeMemberFromFolderFailWatcher() {
    return _regenerator2.default.wrap(function removeMemberFromFolderFailWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.explorer.REMOVE_MEMBER_FROM_FOLDER_FAIL], removeMemberFromFolderFailSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function removeMemberFromFolderFailSaga(action) {
    var _action$payload, onlyOne, spaceId;

    return _regenerator2.default.wrap(function removeMemberFromFolderFailSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, onlyOne = _action$payload.onlyOne, spaceId = _action$payload.spaceId;

                    if (onlyOne) {
                        _context2.next = 4;
                        break;
                    }

                    _context2.next = 4;
                    return (0, _effects.put)(shareActions.fetchShareFolderMembers(spaceId));

                case 4:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function removeMemberFromFolderSuccessWatcher() {
    return _regenerator2.default.wrap(function removeMemberFromFolderSuccessWatcher$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.explorer.REMOVE_MEMBER_FROM_FOLDER_SUCCESS], removeMemberFromFolderSuccessSaga);

                case 2:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function removeMemberFromFolderSuccessSaga(action) {
    var onlyOne, _ref, currentFileToken, needPath, currentModals;

    return _regenerator2.default.wrap(function removeMemberFromFolderSuccessSaga$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    onlyOne = action.payload.onlyOne;
                    _context4.next = 3;
                    return (0, _effects.select)(_explorer.selectSelectedFirstFileMeta);

                case 3:
                    _ref = _context4.sent;
                    currentFileToken = _ref.token;

                    if (!(!currentFileToken || !onlyOne)) {
                        _context4.next = 7;
                        break;
                    }

                    return _context4.abrupt('return');

                case 7:
                    /**
                     * 后端将共享文件夹 -> 普通文件夹这个过程改为了同步
                     * 这是拿回来的数据保证是普通文件夹的，so did path.
                     */
                    needPath = 1;
                    _context4.next = 10;
                    return (0, _effects.put)((0, _explorer2.fetchFileMeta)(currentFileToken, needPath));

                case 10:
                    _context4.next = 12;
                    return (0, _effects.select)(_modal2.selectCurrentModals);

                case 12:
                    currentModals = _context4.sent;

                    if (!(currentModals.first() !== _$constants.ui.MODAL_TYPES.SHARE)) {
                        _context4.next = 15;
                        break;
                    }

                    return _context4.abrupt('return');

                case 15:
                    _context4.next = 17;
                    return (0, _effects.put)((0, _modal.closeModal)(_$constants.ui.MODAL_TYPES.SHARE, _$constants.ui.CLOSE_TYPES.TRANSFER));

                case 17:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}
exports.removeMemberFromFolderFailWatcher = removeMemberFromFolderFailWatcher;
exports.removeMemberFromFolderSuccessWatcher = removeMemberFromFolderSuccessWatcher;

/***/ }),
/* 1320 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _queryPresetHelper = __webpack_require__(686);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(resetPathNameWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(resetPathNameSaga);

function resetPathNameWatcher() {
    return _regenerator2.default.wrap(function resetPathNameWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.permission.BULK_SET_PERM_SUCCESS, _$constants.actionTypes.permission.SET_SUITE_PUBLIC_PERMISSION_SUCCESS], resetPathNameSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function resetPathNameSaga() {
    return _regenerator2.default.wrap(function resetPathNameSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    (0, _queryPresetHelper.resetPathNameIfShareQueryExist)();

                case 1:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = resetPathNameWatcher;

/***/ }),
/* 1321 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _share = __webpack_require__(342);

var _permissionHelper = __webpack_require__(302);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(permissionChangeWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(notifyNativePermissionChange);

/**
 * 当公共权限或个人权限变更时，通知客户端
 */
function permissionChangeWatcher() {
    return _regenerator2.default.wrap(function permissionChangeWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_SUCCESS, _$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_FAIL, _$constants.actionTypes.permission.FETCH_SUITE_PUBLIC_PERMISSION_SUCCESS, _$constants.actionTypes.permission.FETCH_SUITE_PUBLIC_PERMISSION_FAIL], notifyNativePermissionChange);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function notifyNativePermissionChange(action) {
    var _action$payload, token, type, permission;

    return _regenerator2.default.wrap(function notifyNativePermissionChange$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _action$payload = action.payload, token = _action$payload.token, type = _action$payload.type;
                    _context2.next = 3;
                    return (0, _effects.select)(_share.selectCurrentSuitePermissionInfo);

                case 3:
                    permission = _context2.sent;

                    window.lark.biz.util.notifyPermissionChange({
                        copy: permission.getIn(['copy']) || 1,
                        permissions: permission.get('isPermissionClosed') ? 0 : (0, _permissionHelper.permissionList2Num)(permission.getIn(['permissions'], [-1])),
                        publicPermission: permission.getIn(['publicPermission'], -1),
                        token: token,
                        type: type
                    });

                case 5:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = permissionChangeWatcher;

/***/ }),
/* 1322 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _slicedToArray2 = __webpack_require__(111);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = commentSaga;

var _effects = __webpack_require__(17);

var _$constants = __webpack_require__(5);

var _docCommentHelper = __webpack_require__(465);

var _comment = __webpack_require__(770);

var commentActions = _interopRequireWildcard(_comment);

var _message = __webpack_require__(466);

var _sheet = __webpack_require__(745);

var _tea = __webpack_require__(42);

var _tea2 = _interopRequireDefault(_tea);

var _member = __webpack_require__(533);

var _suite = __webpack_require__(84);

var _message2 = __webpack_require__(581);

var _subpub = __webpack_require__(771);

var _subpub2 = _interopRequireDefault(_subpub);

var _moirae = __webpack_require__(449);

var _moirae2 = _interopRequireDefault(_moirae);

var _encryption = __webpack_require__(164);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(processIfSameSuite),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchGlobalCommentWatcher),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(fetchCommentWatcher),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(addGlobalCommentWatcher),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(addGlobalCommentSaga),
    _marked6 = /*#__PURE__*/_regenerator2.default.mark(replyCommentWatcher),
    _marked7 = /*#__PURE__*/_regenerator2.default.mark(replyCommentSaga),
    _marked8 = /*#__PURE__*/_regenerator2.default.mark(reopenCommentWatcher),
    _marked9 = /*#__PURE__*/_regenerator2.default.mark(reopenCommentSaga),
    _marked10 = /*#__PURE__*/_regenerator2.default.mark(classifyComment),
    _marked11 = /*#__PURE__*/_regenerator2.default.mark(initMessageWatcher),
    _marked12 = /*#__PURE__*/_regenerator2.default.mark(initLarkFeedMessageWatcher),
    _marked13 = /*#__PURE__*/_regenerator2.default.mark(fetchMessageWatcher),
    _marked14 = /*#__PURE__*/_regenerator2.default.mark(fetchMessageWatchSaga),
    _marked15 = /*#__PURE__*/_regenerator2.default.mark(updatePCMessageWatcher),
    _marked16 = /*#__PURE__*/_regenerator2.default.mark(updatePCMessageSaga),
    _marked17 = /*#__PURE__*/_regenerator2.default.mark(setMessageReadSuccessWatcher),
    _marked18 = /*#__PURE__*/_regenerator2.default.mark(setLocalMessageReadSaga),
    _marked19 = /*#__PURE__*/_regenerator2.default.mark(mobileCommentWatcher),
    _marked20 = /*#__PURE__*/_regenerator2.default.mark(callTohandleDocMessage),
    _marked21 = /*#__PURE__*/_regenerator2.default.mark(commentSaga);

function processIfSameSuite(process, action) {
    var token, state, currentToken;
    return _regenerator2.default.wrap(function processIfSameSuite$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    token = action.payload.token;
                    _context.next = 3;
                    return (0, _effects.select)();

                case 3:
                    state = _context.sent;
                    currentToken = (0, _suite.selectCurrentSuiteToken)(state);

                    if (!(token === currentToken)) {
                        _context.next = 8;
                        break;
                    }

                    _context.next = 8;
                    return (0, _effects.put)(process(action.payload));

                case 8:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchGlobalCommentWatcher() {
    return _regenerator2.default.wrap(function fetchGlobalCommentWatcher$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.comment.globalComment.FETCH_NEW_GLOBAL_COMMENT_SUCCESS, _$constants.actionTypes.comment.globalComment.FETCH_GLOBAL_COMMENT_LIST_SUCCESS], processIfSameSuite.bind(null, commentActions.mergeGlobalCommentMessageStatuses));

                case 2:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function fetchCommentWatcher() {
    return _regenerator2.default.wrap(function fetchCommentWatcher$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.comment.docComment.FETCH_COMMENT_LIST_SUCCESS, processIfSameSuite.bind(null, commentActions.mergeCommentMessageStatuses));

                case 2:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function addGlobalCommentWatcher() {
    return _regenerator2.default.wrap(function addGlobalCommentWatcher$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    _context4.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.comment.globalComment.ADD_NEW_GLOBAL_COMMENT_SUCCESS, addGlobalCommentSaga);

                case 2:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}
function addGlobalCommentSaga(action) {
    var _action$payload, reply_id, editor, serverFirst;

    return _regenerator2.default.wrap(function addGlobalCommentSaga$(_context5) {
        while (1) {
            switch (_context5.prev = _context5.next) {
                case 0:
                    _action$payload = action.payload, reply_id = _action$payload.reply_id, editor = _action$payload.editor, serverFirst = _action$payload.serverFirst;

                    delete action.payload.editor; // memory leak
                    _context5.next = 4;
                    return (0, _effects.put)(commentActions.fetchGlobalComment({ reply_id: [reply_id] }, undefined, { serverFirst: serverFirst }));

                case 4:
                    (0, _tea.collectCommentLog)('full_comment', '', reply_id, 'global_comment_sync', '');
                    commentActions.sendToGlobalCommentCollabs([{ replyId: reply_id, action: 'new' }], editor);

                case 6:
                case 'end':
                    return _context5.stop();
            }
        }
    }, _marked5, this);
}
var CommentActionName;
(function (CommentActionName) {
    CommentActionName["RESOLVE"] = "RESOLVE_GLOBAL_COMMENT_SUCCESS";
    CommentActionName["UPDATE"] = "UPDATE_GLOBAL_COMMENT_SUCCESS";
    CommentActionName["DELETE"] = "DELETE_GLOBAL_COMMENT_SUCCESS";
})(CommentActionName || (CommentActionName = {}));
var CommentActionType;
(function (CommentActionType) {
    CommentActionType["RESOLVE"] = "finish";
    CommentActionType["UPDATE"] = "update";
    CommentActionType["DELETE"] = "delete";
})(CommentActionType || (CommentActionType = {}));
var makeGlobalCommentWatcher = function makeGlobalCommentWatcher(commentAction) {
    var globalCommentSaga = /*#__PURE__*/_regenerator2.default.mark(function globalCommentSaga(action) {
        var _action$payload2, replyId, editor;

        return _regenerator2.default.wrap(function globalCommentSaga$(_context6) {
            while (1) {
                switch (_context6.prev = _context6.next) {
                    case 0:
                        _action$payload2 = action.payload, replyId = _action$payload2.replyId, editor = _action$payload2.editor;

                        commentActions.sendToGlobalCommentCollabs([{ replyId: replyId, action: CommentActionType[commentAction] }], editor);

                    case 2:
                    case 'end':
                        return _context6.stop();
                }
            }
        }, globalCommentSaga, this);
    });
    return (/*#__PURE__*/_regenerator2.default.mark(function _callee() {
            return _regenerator2.default.wrap(function _callee$(_context7) {
                while (1) {
                    switch (_context7.prev = _context7.next) {
                        case 0:
                            _context7.next = 2;
                            return (0, _effects.takeEvery)(_$constants.actionTypes.comment.globalComment[CommentActionName[commentAction]], globalCommentSaga);

                        case 2:
                        case 'end':
                            return _context7.stop();
                    }
                }
            }, _callee, this);
        })
    );
};
var resolveGlobalCommentWatcher = makeGlobalCommentWatcher('RESOLVE');
var updateGlobalCommentWatcher = makeGlobalCommentWatcher('UPDATE');
var deleteGlobalCommentWatcher = makeGlobalCommentWatcher('DELETE');
function replyCommentWatcher() {
    return _regenerator2.default.wrap(function replyCommentWatcher$(_context8) {
        while (1) {
            switch (_context8.prev = _context8.next) {
                case 0:
                    _context8.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.comment.docComment.REPLY_COMMENT_SUCCESS, _$constants.actionTypes.comment.docComment.UPDATE_REPLY_COMMENT_SUCCESS, _$constants.actionTypes.comment.docComment.DELETE_REPLY_COMMENT_SUCCESS], replyCommentSaga);

                case 2:
                case 'end':
                    return _context8.stop();
            }
        }
    }, _marked6, this);
}
function replyCommentSaga(action) {
    var _action$payload3, commentId, editor;

    return _regenerator2.default.wrap(function replyCommentSaga$(_context9) {
        while (1) {
            switch (_context9.prev = _context9.next) {
                case 0:
                    _action$payload3 = action.payload, commentId = _action$payload3.commentId, editor = _action$payload3.editor;

                    (0, _tea.collectCommentLog)('part_comment', '', commentId, 'reply_comment_sync', '');
                    commentActions.sendToCommentCollabs(commentId, editor);

                case 3:
                case 'end':
                    return _context9.stop();
            }
        }
    }, _marked7, this);
}
function reopenCommentWatcher() {
    return _regenerator2.default.wrap(function reopenCommentWatcher$(_context10) {
        while (1) {
            switch (_context10.prev = _context10.next) {
                case 0:
                    _context10.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.history.commentHistory.REOPEN_HISTORY_COMMENT_SUCCESS, reopenCommentSaga);

                case 2:
                case 'end':
                    return _context10.stop();
            }
        }
    }, _marked8, this);
}
function reopenCommentSaga(action) {
    var _action$payload4, comment, editor, result;

    return _regenerator2.default.wrap(function reopenCommentSaga$(_context11) {
        while (1) {
            switch (_context11.prev = _context11.next) {
                case 0:
                    _action$payload4 = action.payload, comment = _action$payload4.comment, editor = _action$payload4.editor;
                    /* 判断 comment 是否来自 sheet */

                    if (!(comment.obj_type === 3)) {
                        _context11.next = 5;
                        break;
                    }

                    _context11.next = 4;
                    return (0, _effects.put)((0, _sheet.reopenSheetComment)(comment));

                case 4:
                    return _context11.abrupt('return');

                case 5:
                    if (!(0, _docCommentHelper.isGlobalComment)(comment)) {
                        _context11.next = 9;
                        break;
                    }

                    _context11.next = 8;
                    return (0, _effects.put)(commentActions.reopenGlobalComment(comment, editor));

                case 8:
                    return _context11.abrupt('return');

                case 9:
                    if (!(0, _docCommentHelper.isDocComment)(comment)) {
                        _context11.next = 15;
                        break;
                    }

                    _context11.next = 12;
                    return commentActions.reopenComment(comment, editor);

                case 12:
                    result = _context11.sent;
                    _context11.next = 15;
                    return (0, _effects.put)(result);

                case 15:
                case 'end':
                    return _context11.stop();
            }
        }
    }, _marked9, this);
}
function classifyComment(_ref) {
    var messagePayload = _ref.messagePayload,
        commentPayload = _ref.commentPayload,
        replaceAll = _ref.replaceAll,
        __callerId = _ref.__callerId;

    var state, messageToken, allCommentInfo, _messagePayload$messa, messages, currentToken, allGlobalCommentInfo, allDocCommentInfo, messageInfo, markReaded, currentMember, currentUserId, hasDocComment, hasGlobalComment;

    return _regenerator2.default.wrap(function classifyComment$(_context12) {
        while (1) {
            switch (_context12.prev = _context12.next) {
                case 0:
                    _context12.next = 2;
                    return (0, _effects.select)();

                case 2:
                    state = _context12.sent;
                    messageToken = messagePayload.token, allCommentInfo = messagePayload.comment, _messagePayload$messa = messagePayload.message, messages = _messagePayload$messa === undefined ? [] : _messagePayload$messa;
                    currentToken = (0, _suite.selectCurrentSuiteToken)(state);

                    if (!(messageToken !== currentToken || commentPayload && commentPayload.token !== currentToken)) {
                        _context12.next = 7;
                        break;
                    }

                    return _context12.abrupt('return');

                case 7:
                    allGlobalCommentInfo = [];
                    allDocCommentInfo = {};
                    messageInfo = {};
                    markReaded = [];
                    currentMember = (0, _member.selectCurrentMember)(state);
                    currentUserId = currentMember && currentMember.user_id || '';

                    messages.forEach(function (message) {
                        var comment_id = message.comment_id,
                            reply_id = message.reply_id,
                            user_id = message.user_id,
                            message_id = message.message_id,
                            uuid = message.uuid;

                        var status = message.status;
                        if (!comment_id || !reply_id) {
                            return;
                        }
                        var isSameUser = user_id === currentUserId;
                        if (status === _message2.MESSAGE_UNREAD && isSameUser) {
                            markReaded.push(message_id);
                            status = _message2.MESSAGE_READED;
                        }
                        messageInfo[(0, _docCommentHelper.formatReplyId)(comment_id, reply_id)] = { message_id: message_id, status: status, uuid: uuid };
                    });

                    if (!(markReaded.length > 0)) {
                        _context12.next = 17;
                        break;
                    }

                    _context12.next = 17;
                    return (0, _effects.put)((0, _message.setMessageRead)({ member_id: currentMember.member_id, msg_id: markReaded }));

                case 17:
                    hasDocComment = false;

                    Object.keys(allCommentInfo).forEach(function (commentKey) {
                        var comment = allCommentInfo[commentKey];
                        if (comment.finish === 1) {
                            return;
                        }
                        if ((0, _docCommentHelper.isDocComment)(comment)) {
                            hasDocComment = true;
                            allDocCommentInfo[commentKey] = comment;
                            return;
                        }
                        if ((0, _docCommentHelper.isGlobalComment)(comment)) {
                            var comment_list = comment.comment_list,
                                rest = (0, _objectWithoutProperties3.default)(comment, ['comment_list']);

                            allGlobalCommentInfo.push(Object.assign({}, rest, comment_list[0], {
                                comment_id: commentKey
                            }));
                        }
                    });
                    hasGlobalComment = allGlobalCommentInfo.length > 0;
                    // For debug purpose

                    (0, _tea2.default)('dev_saga_classify_comment', {
                        hasDocComment: hasDocComment,
                        hasGlobalComment: hasGlobalComment,
                        replaceAll: replaceAll,
                        hasCommentPayload: !!commentPayload,
                        callerId: __callerId
                    });

                    if (!hasDocComment) {
                        _context12.next = 24;
                        break;
                    }

                    _context12.next = 24;
                    return (0, _effects.put)(commentActions.mergeCommentMessageStatuses({
                        messageInfo: messageInfo,
                        replaceAll: replaceAll,
                        fetchedComments: allDocCommentInfo,
                        allComments: commentPayload ? commentPayload.allComments : null,
                        token: messageToken
                    }));

                case 24:
                    if (!hasGlobalComment) {
                        _context12.next = 27;
                        break;
                    }

                    _context12.next = 27;
                    return (0, _effects.put)(commentActions.mergeGlobalCommentMessageStatuses({
                        messageInfo: messageInfo,
                        replaceAll: replaceAll,
                        comment_list: allGlobalCommentInfo,
                        token: messageToken
                    }));

                case 27:
                case 'end':
                    return _context12.stop();
            }
        }
    }, _marked10, this);
}
function initMessageWatcher() {
    var _this = this;

    var _loop;

    return _regenerator2.default.wrap(function initMessageWatcher$(_context14) {
        while (1) {
            switch (_context14.prev = _context14.next) {
                case 0:
                    _loop = /*#__PURE__*/_regenerator2.default.mark(function _loop() {
                        var _ref2, _ref3, commentAction, messageAction, messagePayload, commentPayload, commentData, allCommentsInDoc;

                        return _regenerator2.default.wrap(function _loop$(_context13) {
                            while (1) {
                                switch (_context13.prev = _context13.next) {
                                    case 0:
                                        _context13.next = 2;
                                        return (0, _effects.all)([(0, _effects.take)(_$constants.actionTypes.comment.docComment.INIT_COMMENTS), (0, _effects.take)(_$constants.actionTypes.pageMessage.FETCH_PC_INIT_MESSAGE_LIST_SUCCESS)]);

                                    case 2:
                                        _ref2 = _context13.sent;
                                        _ref3 = (0, _slicedToArray3.default)(_ref2, 2);
                                        commentAction = _ref3[0];
                                        messageAction = _ref3[1];
                                        messagePayload = messageAction.payload;
                                        commentPayload = commentAction.payload;
                                        // for debug

                                        commentData = messagePayload.comment || {};
                                        allCommentsInDoc = commentPayload.allComments || [];

                                        allCommentsInDoc.forEach(function (_ref4) {
                                            var commentId = _ref4.commentId;

                                            // 后端没有返回该评论
                                            if (!commentData[commentId]) {
                                                _moirae2.default.error({
                                                    key: 'dev_comment_not_found_error',
                                                    commentId: (0, _encryption.encryptTea)(commentId)
                                                });
                                                return;
                                            }
                                            // 该评论其实已经被解决了
                                            if (commentData[commentId].finish === 1) {
                                                _moirae2.default.error({
                                                    key: 'dev_comment_found_resolve_error',
                                                    commentId: (0, _encryption.encryptTea)(commentId)
                                                });
                                            }
                                        });
                                        _context13.next = 13;
                                        return classifyComment({
                                            messagePayload: messagePayload,
                                            commentPayload: commentPayload,
                                            replaceAll: true,
                                            __callerId: 1
                                        });

                                    case 13:
                                    case 'end':
                                        return _context13.stop();
                                }
                            }
                        }, _loop, _this);
                    });

                case 1:
                    if (false) {}

                    return _context14.delegateYield(_loop(), 't0', 3);

                case 3:
                    _context14.next = 1;
                    break;

                case 5:
                case 'end':
                    return _context14.stop();
            }
        }
    }, _marked11, this);
}
function initLarkFeedMessageWatcher() {
    var _ref5, _ref6, messageAction;

    return _regenerator2.default.wrap(function initLarkFeedMessageWatcher$(_context15) {
        while (1) {
            switch (_context15.prev = _context15.next) {
                case 0:
                    if (false) {}

                    _context15.next = 3;
                    return (0, _effects.all)([(0, _effects.take)(_$constants.actionTypes.pageMessage.FETCH_MESSAGE_LIST_SUCCESS)]);

                case 3:
                    _ref5 = _context15.sent;
                    _ref6 = (0, _slicedToArray3.default)(_ref5, 1);
                    messageAction = _ref6[0];
                    _context15.next = 8;
                    return classifyComment({
                        messagePayload: messageAction.payload,
                        __callerId: 2
                    });

                case 8:
                    _context15.next = 0;
                    break;

                case 10:
                case 'end':
                    return _context15.stop();
            }
        }
    }, _marked12, this);
}
// 版本断开的时候
function fetchMessageWatcher() {
    return _regenerator2.default.wrap(function fetchMessageWatcher$(_context16) {
        while (1) {
            switch (_context16.prev = _context16.next) {
                case 0:
                    _context16.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.pageMessage.FETCH_PC_MESSAGE_LIST_SUCCESS, fetchMessageWatchSaga);

                case 2:
                case 'end':
                    return _context16.stop();
            }
        }
    }, _marked13, this);
}
function fetchMessageWatchSaga(action) {
    var payload;
    return _regenerator2.default.wrap(function fetchMessageWatchSaga$(_context17) {
        while (1) {
            switch (_context17.prev = _context17.next) {
                case 0:
                    payload = action.payload;
                    _context17.next = 3;
                    return classifyComment({
                        messagePayload: payload,
                        replaceAll: true,
                        __callerId: 3
                    });

                case 3:
                case 'end':
                    return _context17.stop();
            }
        }
    }, _marked14, this);
}
// 接受message消息更新
function updatePCMessageWatcher() {
    return _regenerator2.default.wrap(function updatePCMessageWatcher$(_context18) {
        while (1) {
            switch (_context18.prev = _context18.next) {
                case 0:
                    _context18.next = 2;
                    return (0, _effects.takeEvery)(_$constants.actionTypes.pageMessage.UPDATE_PC_MESSAGE, updatePCMessageSaga);

                case 2:
                case 'end':
                    return _context18.stop();
            }
        }
    }, _marked15, this);
}
function updatePCMessageSaga(action) {
    var payload, newMessage, allComments, token, message, comment;
    return _regenerator2.default.wrap(function updatePCMessageSaga$(_context19) {
        while (1) {
            switch (_context19.prev = _context19.next) {
                case 0:
                    payload = action.payload;
                    newMessage = payload.newMessage, allComments = payload.allComments, token = payload.token;
                    message = newMessage.message, comment = newMessage.comment;
                    _context19.next = 5;
                    return classifyComment({
                        messagePayload: { comment: comment, message: [message], token: token },
                        commentPayload: { allComments: allComments, token: token },
                        __callerId: 4
                    });

                case 5:
                case 'end':
                    return _context19.stop();
            }
        }
    }, _marked16, this);
}
function setMessageReadSuccessWatcher() {
    return _regenerator2.default.wrap(function setMessageReadSuccessWatcher$(_context20) {
        while (1) {
            switch (_context20.prev = _context20.next) {
                case 0:
                    _context20.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.comment.SET_COMMENT_MESSAGE_READ_SUCCESS, _$constants.actionTypes.comment.SET_COLLAB_DOC_MESSAGE_READ], setLocalMessageReadSaga);

                case 2:
                case 'end':
                    return _context20.stop();
            }
        }
    }, _marked17, this);
}
function setLocalMessageReadSaga(action) {
    var _action$payload5, message_ids, msg_id, type, messageIds, _getDocCommentType, isDocComment, isGlobalComment;

    return _regenerator2.default.wrap(function setLocalMessageReadSaga$(_context21) {
        while (1) {
            switch (_context21.prev = _context21.next) {
                case 0:
                    _action$payload5 = action.payload, message_ids = _action$payload5.message_ids, msg_id = _action$payload5.msg_id, type = _action$payload5.type;
                    messageIds = message_ids || msg_id;
                    _getDocCommentType = (0, _docCommentHelper.getDocCommentType)(type), isDocComment = _getDocCommentType.isDocComment, isGlobalComment = _getDocCommentType.isGlobalComment;

                    if (!(isDocComment || !type)) {
                        _context21.next = 6;
                        break;
                    }

                    _context21.next = 6;
                    return (0, _effects.put)(commentActions.setLocalDocCommentRead({ messageIds: messageIds }));

                case 6:
                    if (!(isGlobalComment || !type)) {
                        _context21.next = 9;
                        break;
                    }

                    _context21.next = 9;
                    return (0, _effects.put)(commentActions.setLocalGlobalCommentRead({ messageIds: messageIds }));

                case 9:
                case 'end':
                    return _context21.stop();
            }
        }
    }, _marked18, this);
}
function mobileCommentWatcher() {
    var _ref7, _ref8, globalComment;

    return _regenerator2.default.wrap(function mobileCommentWatcher$(_context22) {
        while (1) {
            switch (_context22.prev = _context22.next) {
                case 0:
                    if (false) {}

                    _context22.next = 3;
                    return (0, _effects.all)([(0, _effects.take)(_$constants.actionTypes.comment.globalComment.FETCH_GLOBAL_COMMENT_LIST_SUCCESS), (0, _effects.take)(_$constants.actionTypes.comment.docComment.INIT_MOBILE_COMMENTS)]);

                case 3:
                    _ref7 = _context22.sent;
                    _ref8 = (0, _slicedToArray3.default)(_ref7, 1);
                    globalComment = _ref8[0];
                    _context22.next = 8;
                    return callTohandleDocMessage(globalComment.payload.comment_list);

                case 8:
                    _context22.next = 0;
                    break;

                case 10:
                case 'end':
                    return _context22.stop();
            }
        }
    }, _marked19, this);
}
function callTohandleDocMessage(globalComment) {
    return _regenerator2.default.wrap(function callTohandleDocMessage$(_context23) {
        while (1) {
            switch (_context23.prev = _context23.next) {
                case 0:
                    _subpub2.default.pub('commentHasAttached', globalComment);

                case 1:
                case 'end':
                    return _context23.stop();
            }
        }
    }, _marked20, this);
}
function commentSaga() {
    return _regenerator2.default.wrap(function commentSaga$(_context24) {
        while (1) {
            switch (_context24.prev = _context24.next) {
                case 0:
                    _context24.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(fetchGlobalCommentWatcher), (0, _effects.fork)(addGlobalCommentWatcher), (0, _effects.fork)(resolveGlobalCommentWatcher), (0, _effects.fork)(updateGlobalCommentWatcher), (0, _effects.fork)(deleteGlobalCommentWatcher), (0, _effects.fork)(fetchCommentWatcher), (0, _effects.fork)(initLarkFeedMessageWatcher), (0, _effects.fork)(initMessageWatcher), (0, _effects.fork)(fetchMessageWatcher), (0, _effects.fork)(setMessageReadSuccessWatcher), (0, _effects.fork)(updatePCMessageWatcher), (0, _effects.fork)(replyCommentWatcher), (0, _effects.fork)(reopenCommentWatcher), (0, _effects.fork)(mobileCommentWatcher)]);

                case 2:
                case 'end':
                    return _context24.stop();
            }
        }
    }, _marked21, this);
}

/***/ }),
/* 1323 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var watchRequest = exports.watchRequest = function watchRequest(fn, countLimit) {
    var watcher = { count: 0 };
    return function () {
        var _watcher = watcher,
            count = _watcher.count,
            time = _watcher.time;

        var less1Min = time && Date.now() - time < 1000;
        if (less1Min) {
            var nextCount = count + 1;
            var multipleRequest = nextCount > countLimit;
            if (multipleRequest) {
                var _console;

                (_console = console).log.apply(_console, arguments);
                window.Raven && window.Raven.captureException("too many request: " + nextCount);
            }
            watcher = {
                time: time,
                count: nextCount
            };
        } else {
            watcher = {
                time: Date.now(),
                count: 1
            };
        }
        return fn.apply(undefined, arguments);
    };
};

/***/ }),
/* 1324 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.MoiraeStorage = undefined;

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(99);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _debounce2 = __webpack_require__(556);

var _debounce3 = _interopRequireDefault(_debounce2);

var _bytedSecureLocalForage = __webpack_require__(696);

var _bytedSecureLocalForage2 = _interopRequireDefault(_bytedSecureLocalForage);

var _altLocalStore = __webpack_require__(700);

var _altLocalStore2 = _interopRequireDefault(_altLocalStore);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var StorageType;
(function (StorageType) {
    StorageType[StorageType["NONE"] = 0] = "NONE";
    StorageType[StorageType["LS"] = 1] = "LS";
    StorageType[StorageType["IndexDB"] = 2] = "IndexDB";
})(StorageType || (StorageType = {}));

var Storage = function () {
    function Storage(userId) {
        (0, _classCallCheck3.default)(this, Storage);

        this.storage = null;
        this.storageType = StorageType.NONE;
        this.userId = '';
        this.userId = userId;
        this.ready();
    }

    (0, _createClass3.default)(Storage, [{
        key: 'getKeys',
        value: function () {
            var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
                var length, keys, i;
                return _regenerator2.default.wrap(function _callee$(_context) {
                    while (1) {
                        switch (_context.prev = _context.next) {
                            case 0:
                                if (!(!this.storage || this.storage.isReady !== true)) {
                                    _context.next = 3;
                                    break;
                                }

                                _context.next = 3;
                                return this.ready();

                            case 3:
                                _context.prev = 3;

                                if (!(this.storageType === StorageType.IndexDB)) {
                                    _context.next = 10;
                                    break;
                                }

                                _context.next = 7;
                                return this.storage.keys();

                            case 7:
                                return _context.abrupt('return', _context.sent);

                            case 10:
                                if (!(this.storageType === StorageType.LS)) {
                                    _context.next = 15;
                                    break;
                                }

                                length = this.storage.length();
                                keys = [];

                                for (i = 0; i < length; i++) {
                                    keys.push(this.storage.key(i));
                                }
                                return _context.abrupt('return', keys);

                            case 15:
                                _context.next = 21;
                                break;

                            case 17:
                                _context.prev = 17;
                                _context.t0 = _context['catch'](3);

                                this.onStorageError(_context.t0, 'get-keys');
                                return _context.abrupt('return', []);

                            case 21:
                            case 'end':
                                return _context.stop();
                        }
                    }
                }, _callee, this, [[3, 17]]);
            }));

            function getKeys() {
                return _ref.apply(this, arguments);
            }

            return getKeys;
        }()
    }, {
        key: 'setItem',
        value: function () {
            var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(key, obj) {
                return _regenerator2.default.wrap(function _callee2$(_context2) {
                    while (1) {
                        switch (_context2.prev = _context2.next) {
                            case 0:
                                _context2.prev = 0;

                                if (!(!this.storage || this.storage.isReady !== true)) {
                                    _context2.next = 4;
                                    break;
                                }

                                _context2.next = 4;
                                return this.ready();

                            case 4:
                                _context2.next = 6;
                                return this.storage.setItem(key, JSON.stringify(obj), true);

                            case 6:
                                return _context2.abrupt('return', true);

                            case 9:
                                _context2.prev = 9;
                                _context2.t0 = _context2['catch'](0);

                                this.onStorageError(_context2.t0, 'set-item');
                                return _context2.abrupt('return', false);

                            case 13:
                            case 'end':
                                return _context2.stop();
                        }
                    }
                }, _callee2, this, [[0, 9]]);
            }));

            function setItem(_x, _x2) {
                return _ref2.apply(this, arguments);
            }

            return setItem;
        }()
    }, {
        key: 'getItem',
        value: function () {
            var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3(key) {
                return _regenerator2.default.wrap(function _callee3$(_context3) {
                    while (1) {
                        switch (_context3.prev = _context3.next) {
                            case 0:
                                if (!(!this.storage || this.storage.isReady !== true)) {
                                    _context3.next = 3;
                                    break;
                                }

                                _context3.next = 3;
                                return this.ready();

                            case 3:
                                _context3.prev = 3;
                                _context3.next = 6;
                                return this.storage.getItem(key, {}, true);

                            case 6:
                                return _context3.abrupt('return', _context3.sent);

                            case 9:
                                _context3.prev = 9;
                                _context3.t0 = _context3['catch'](3);

                                this.onStorageError(_context3.t0, 'get-item');
                                return _context3.abrupt('return', null);

                            case 13:
                            case 'end':
                                return _context3.stop();
                        }
                    }
                }, _callee3, this, [[3, 9]]);
            }));

            function getItem(_x3) {
                return _ref3.apply(this, arguments);
            }

            return getItem;
        }()
    }, {
        key: 'removeItem',
        value: function () {
            var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4(key) {
                return _regenerator2.default.wrap(function _callee4$(_context4) {
                    while (1) {
                        switch (_context4.prev = _context4.next) {
                            case 0:
                                if (!(!this.storage || this.storage.isReady !== true)) {
                                    _context4.next = 3;
                                    break;
                                }

                                _context4.next = 3;
                                return this.ready();

                            case 3:
                                _context4.prev = 3;

                                if (!(this.storageType === StorageType.IndexDB)) {
                                    _context4.next = 10;
                                    break;
                                }

                                _context4.next = 7;
                                return this.storage.removeByHashKey(key);

                            case 7:
                                return _context4.abrupt('return', _context4.sent);

                            case 10:
                                if (!(this.storageType === StorageType.LS)) {
                                    _context4.next = 12;
                                    break;
                                }

                                return _context4.abrupt('return', this.storage.removeItem(key));

                            case 12:
                                _context4.next = 18;
                                break;

                            case 14:
                                _context4.prev = 14;
                                _context4.t0 = _context4['catch'](3);

                                this.onStorageError(_context4.t0, 'remove-item');
                                return _context4.abrupt('return', false);

                            case 18:
                            case 'end':
                                return _context4.stop();
                        }
                    }
                }, _callee4, this, [[3, 14]]);
            }));

            function removeItem(_x4) {
                return _ref4.apply(this, arguments);
            }

            return removeItem;
        }()
    }, {
        key: 'ready',
        value: function () {
            var _ref5 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee5() {
                return _regenerator2.default.wrap(function _callee5$(_context5) {
                    while (1) {
                        switch (_context5.prev = _context5.next) {
                            case 0:
                                if (!(this.storage && this.storage.isReady === true)) {
                                    _context5.next = 2;
                                    break;
                                }

                                return _context5.abrupt('return', true);

                            case 2:
                                this.getSecureStorage();

                                if (!(this.storageType === StorageType.IndexDB)) {
                                    _context5.next = 6;
                                    break;
                                }

                                _context5.next = 6;
                                return this.storage.ready();

                            case 6:
                                this.storage.isReady = true;
                                return _context5.abrupt('return', this.storage.isReady);

                            case 8:
                            case 'end':
                                return _context5.stop();
                        }
                    }
                }, _callee5, this);
            }));

            function ready() {
                return _ref5.apply(this, arguments);
            }

            return ready;
        }()
    }, {
        key: 'onStorageError',
        value: function onStorageError(ex, from) {
            // ConsoleError
            console.error(ex, from, this.storageType);
            // // Raven上报  上报又不处理，直接干掉
            // window.Raven && window.Raven.captureException(ex, {
            //   tags: {
            //     scm: JSON.stringify(window.scm),
            //     key: 'MOIRAE_STORAGE_ERROR',
            //   },
            // });
        }
    }, {
        key: 'getSecureStorage',
        value: function getSecureStorage() {
            var _this = this;

            var userId = this.userId;
            if (this.storage) {
                return;
            }
            var onError = function onError(ex) {
                _this.storage = _altLocalStore2.default;
                _this.storageType = StorageType.LS;
                _this.onStorageError(ex, 'get-storage');
            };
            try {
                var storage = new _bytedSecureLocalForage2.default({
                    name: 'moirae-forage-v2-' + userId,
                    encrypt: function encrypt(data) {
                        return data;
                    },
                    decrypt: function decrypt(data) {
                        return data;
                    }
                });
                this.storage = storage;
                this.storageType = StorageType.IndexDB;
                storage.ready = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee6() {
                    var testKey, compareStr, compareObj, compareKey;
                    return _regenerator2.default.wrap(function _callee6$(_context6) {
                        while (1) {
                            switch (_context6.prev = _context6.next) {
                                case 0:
                                    _context6.prev = 0;
                                    testKey = Date.now();
                                    _context6.next = 4;
                                    return storage.setItem('idb-' + testKey + '-' + userId, JSON.stringify({
                                        timeStamp: testKey
                                    }));

                                case 4:
                                    _context6.next = 6;
                                    return storage.getItem('idb-' + testKey + '-' + userId);

                                case 6:
                                    compareStr = _context6.sent;
                                    compareObj = JSON.parse(compareStr);
                                    compareKey = compareObj && compareObj.timeStamp;
                                    _context6.next = 11;
                                    return storage.removeItem('idb-' + testKey + '-' + userId);

                                case 11:
                                    if (testKey !== compareKey) {
                                        onError('testKey(' + testKey + ') not equal compareKey(' + compareKey + ')');
                                    }
                                    _context6.next = 17;
                                    break;

                                case 14:
                                    _context6.prev = 14;
                                    _context6.t0 = _context6['catch'](0);

                                    onError(_context6.t0);

                                case 17:
                                case 'end':
                                    return _context6.stop();
                            }
                        }
                    }, _callee6, _this, [[0, 14]]);
                }));
            } catch (ex) {
                onError(ex);
            }
        }
    }]);
    return Storage;
}();

var MoiraeStorage = exports.MoiraeStorage = function () {
    function MoiraeStorage(userId) {
        var _this2 = this;

        (0, _classCallCheck3.default)(this, MoiraeStorage);

        this.userId = '';
        this.clearLogLevel = -1;
        this.cachedLogs = [];
        this.storing = false;
        this.logCount = 0;
        this.saveLog = function (obj) {
            var token = _this2.getToken();
            var timeStamp = Date.now();
            var fileType = _this2.getFileType();
            var Spread = window.Spread;
            var moiraeLogObj = {
                token: token,
                timeStamp: timeStamp,
                fileType: fileType,
                timeStampStr: new Date(timeStamp).toLocaleString(),
                userId: _this2.userId,
                docToken: fileType === 'doc' ? token : '',
                sheetToken: Spread && Spread.sync ? Spread.sync._token || '' : '',
                logs: obj.params,
                scm: window.scm || {}
            };
            if (!token || token.length === 0) {
                return;
            }
            _this2.logCount += 1;
            var dbKey = token + '-' + obj.level + '-' + timeStamp + '-' + _this2.logCount;
            _this2.cachedLogs.push({
                dbKey: dbKey,
                moiraeLogObj: moiraeLogObj
            });
            _this2.storeLogs();
        };
        this.autoClearLogs = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee7() {
            var keys, keyTime, keyList;
            return _regenerator2.default.wrap(function _callee7$(_context7) {
                while (1) {
                    switch (_context7.prev = _context7.next) {
                        case 0:
                            _context7.next = 2;
                            return _this2.storage.getKeys();

                        case 2:
                            keys = _context7.sent;
                            keyTime = Date.now() - 7 * 24 * 60 * 60 * 1000;
                            keyList = keys.filter(function (item) {
                                var buffer = item.split('-');
                                var bufferTime = parseInt(buffer[2], 10);
                                if (bufferTime < keyTime) {
                                    return true;
                                }
                                return false;
                            });
                            _context7.next = 7;
                            return _this2.removeLogs(keyList);

                        case 7:
                        case 'end':
                            return _context7.stop();
                    }
                }
            }, _callee7, _this2);
        }));
        this.collectLog = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee9() {
            var keys, token, tokenedKey, logArray;
            return _regenerator2.default.wrap(function _callee9$(_context9) {
                while (1) {
                    switch (_context9.prev = _context9.next) {
                        case 0:
                            _context9.next = 2;
                            return _this2.storage.getKeys();

                        case 2:
                            keys = _context9.sent;
                            token = _this2.getToken();
                            tokenedKey = keys.filter(function (item) {
                                var buffer = item.split('-');
                                if (buffer[0] !== token) {
                                    return false;
                                }
                                return true;
                            });
                            logArray = [];
                            _context9.next = 8;
                            return _this2.iterKeys(tokenedKey, function () {
                                var _ref9 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee8(item) {
                                    var str;
                                    return _regenerator2.default.wrap(function _callee8$(_context8) {
                                        while (1) {
                                            switch (_context8.prev = _context8.next) {
                                                case 0:
                                                    _context8.next = 2;
                                                    return _this2.storage.getItem(item);

                                                case 2:
                                                    str = _context8.sent;

                                                    logArray.push({
                                                        key: item,
                                                        val: JSON.parse(str)
                                                    });

                                                case 4:
                                                case 'end':
                                                    return _context8.stop();
                                            }
                                        }
                                    }, _callee8, _this2);
                                }));

                                return function (_x5) {
                                    return _ref9.apply(this, arguments);
                                };
                            }());

                        case 8:
                            logArray.sort(function (a, b) {
                                var keyA = a.key;
                                var keyB = b.key;
                                var timeA = parseInt(keyA.split('-')[2], 10);
                                var timeB = parseInt(keyB.split('-')[2], 10);
                                return timeB - timeA;
                            });
                            logArray = logArray.map(function (item) {
                                return item.val;
                            });
                            return _context9.abrupt('return', logArray);

                        case 11:
                        case 'end':
                            return _context9.stop();
                    }
                }
            }, _callee9, _this2);
        }));
        this.removeLogs = function () {
            var _ref10 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee11() {
                var keyArray = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
                var keys, token;
                return _regenerator2.default.wrap(function _callee11$(_context11) {
                    while (1) {
                        switch (_context11.prev = _context11.next) {
                            case 0:
                                if (!(keyArray.length === 0)) {
                                    _context11.next = 6;
                                    break;
                                }

                                _context11.next = 3;
                                return _this2.storage.getKeys();

                            case 3:
                                keys = _context11.sent;
                                token = _this2.getToken();

                                keyArray = keys.filter(function (item) {
                                    var buffer = item.split('-');
                                    if (buffer[0] !== token) {
                                        return false;
                                    }
                                    return true;
                                });

                            case 6:
                                _context11.next = 8;
                                return _this2.iterKeys(keyArray, function () {
                                    var _ref11 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee10(item) {
                                        return _regenerator2.default.wrap(function _callee10$(_context10) {
                                            while (1) {
                                                switch (_context10.prev = _context10.next) {
                                                    case 0:
                                                        _context10.next = 2;
                                                        return _this2.storage.removeItem(item);

                                                    case 2:
                                                    case 'end':
                                                        return _context10.stop();
                                                }
                                            }
                                        }, _callee10, _this2);
                                    }));

                                    return function (_x7) {
                                        return _ref11.apply(this, arguments);
                                    };
                                }());

                            case 8:
                                return _context11.abrupt('return', _context11.sent);

                            case 9:
                            case 'end':
                                return _context11.stop();
                        }
                    }
                }, _callee11, _this2);
            }));

            return function () {
                return _ref10.apply(this, arguments);
            };
        }();
        this.getFileType = function () {
            if (/\/sheet\//ig.test(location.href)) {
                return 'sheet';
            } else if (/\/doc\//ig.test(location.href)) {
                return 'doc';
            } else {
                return 'unknown';
            }
        };
        this.getToken = function () {
            var pathName = location.pathname;
            var lastPath = pathName.substr(pathName.lastIndexOf('/') + 1);
            var buffer = lastPath.split('#');
            return buffer[0];
        };
        this.iterKeys = function () {
            var _ref12 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee13(keys, callback) {
                var iterCore;
                return _regenerator2.default.wrap(function _callee13$(_context13) {
                    while (1) {
                        switch (_context13.prev = _context13.next) {
                            case 0:
                                iterCore = function () {
                                    var _ref13 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee12(idx) {
                                        var key;
                                        return _regenerator2.default.wrap(function _callee12$(_context12) {
                                            while (1) {
                                                switch (_context12.prev = _context12.next) {
                                                    case 0:
                                                        key = keys[idx];

                                                        if (!(key && callback)) {
                                                            _context12.next = 4;
                                                            break;
                                                        }

                                                        _context12.next = 4;
                                                        return callback(key);

                                                    case 4:
                                                        if (!(idx < keys.length - 1)) {
                                                            _context12.next = 10;
                                                            break;
                                                        }

                                                        _context12.next = 7;
                                                        return iterCore(idx + 1);

                                                    case 7:
                                                        return _context12.abrupt('return', _context12.sent);

                                                    case 10:
                                                        return _context12.abrupt('return', null);

                                                    case 11:
                                                    case 'end':
                                                        return _context12.stop();
                                                }
                                            }
                                        }, _callee12, _this2);
                                    }));

                                    return function iterCore(_x10) {
                                        return _ref13.apply(this, arguments);
                                    };
                                }();

                                _context13.next = 3;
                                return iterCore(0);

                            case 3:
                            case 'end':
                                return _context13.stop();
                        }
                    }
                }, _callee13, _this2);
            }));

            return function (_x8, _x9) {
                return _ref12.apply(this, arguments);
            };
        }();
        this.storeLogs = (0, _debounce3.default)((0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee14() {
            return _regenerator2.default.wrap(function _callee14$(_context14) {
                while (1) {
                    switch (_context14.prev = _context14.next) {
                        case 0:
                            _context14.prev = 0;

                            if (!_this2.storing) {
                                _context14.next = 3;
                                break;
                            }

                            return _context14.abrupt('return');

                        case 3:
                            _this2.storing = true;
                            _context14.next = 6;
                            return _this2.storeLogsCore(0);

                        case 6:
                            _this2.clearLogLevel = -1;
                            _this2.cachedLogs = [];
                            _this2.storing = false;
                            return _context14.abrupt('return', true);

                        case 12:
                            _context14.prev = 12;
                            _context14.t0 = _context14['catch'](0);

                            _this2.clearLogLevel += 1;
                            _this2.storing = false;

                            if (!(_this2.clearLogLevel < 8)) {
                                _context14.next = 24;
                                break;
                            }

                            _context14.next = 19;
                            return _this2.clearLogByLevel(_this2.clearLogLevel);

                        case 19:
                            _context14.next = 21;
                            return _this2.storeLogs();

                        case 21:
                            return _context14.abrupt('return', _context14.sent);

                        case 24:
                            _this2.clearLogLevel = -1;
                            return _context14.abrupt('return', false);

                        case 26:
                        case 'end':
                            return _context14.stop();
                    }
                }
            }, _callee14, _this2, [[0, 12]]);
        })), 1000);
        this.userId = userId;
        this.storage = new Storage(this.userId);
        this.autoClearLogs();
    }

    (0, _createClass3.default)(MoiraeStorage, [{
        key: 'clearLogByLevel',
        value: function () {
            var _ref15 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee16(level) {
                var _this3 = this;

                var keys, token, leveledKey;
                return _regenerator2.default.wrap(function _callee16$(_context16) {
                    while (1) {
                        switch (_context16.prev = _context16.next) {
                            case 0:
                                _context16.next = 2;
                                return this.storage.getKeys();

                            case 2:
                                keys = _context16.sent;
                                token = this.getToken();
                                leveledKey = keys.filter(function (item) {
                                    var buffer = item.split('-');
                                    var levelStr = level.toString();
                                    if (buffer[0] !== token) {
                                        return false;
                                    }
                                    if (buffer[1] !== levelStr) {
                                        return false;
                                    }
                                    return true;
                                });

                                if (!(leveledKey.length > 0)) {
                                    _context16.next = 11;
                                    break;
                                }

                                _context16.next = 8;
                                return this.iterKeys(leveledKey, function () {
                                    var _ref16 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee15(item) {
                                        return _regenerator2.default.wrap(function _callee15$(_context15) {
                                            while (1) {
                                                switch (_context15.prev = _context15.next) {
                                                    case 0:
                                                        _context15.next = 2;
                                                        return _this3.storage.removeItem(item);

                                                    case 2:
                                                    case 'end':
                                                        return _context15.stop();
                                                }
                                            }
                                        }, _callee15, _this3);
                                    }));

                                    return function (_x12) {
                                        return _ref16.apply(this, arguments);
                                    };
                                }());

                            case 8:
                                return _context16.abrupt('return', _context16.sent);

                            case 11:
                                return _context16.abrupt('return', true);

                            case 12:
                            case 'end':
                                return _context16.stop();
                        }
                    }
                }, _callee16, this);
            }));

            function clearLogByLevel(_x11) {
                return _ref15.apply(this, arguments);
            }

            return clearLogByLevel;
        }()
    }, {
        key: 'storeLogsCore',
        value: function () {
            var _ref17 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee17(idx) {
                var logInfo, dbKey, moiraeLogObj, result;
                return _regenerator2.default.wrap(function _callee17$(_context17) {
                    while (1) {
                        switch (_context17.prev = _context17.next) {
                            case 0:
                                logInfo = this.cachedLogs[idx];

                                if (!logInfo) {
                                    _context17.next = 12;
                                    break;
                                }

                                dbKey = logInfo.dbKey, moiraeLogObj = logInfo.moiraeLogObj;
                                _context17.next = 5;
                                return this.storage.setItem(dbKey, moiraeLogObj);

                            case 5:
                                result = _context17.sent;

                                if (!result) {
                                    _context17.next = 10;
                                    break;
                                }

                                this.cachedLogs[idx] = null;
                                _context17.next = 12;
                                break;

                            case 10:
                                _context17.next = 12;
                                return this.storeLogsCore(idx);

                            case 12:
                                if (!(idx < this.cachedLogs.length - 1)) {
                                    _context17.next = 18;
                                    break;
                                }

                                _context17.next = 15;
                                return this.storeLogsCore(idx + 1);

                            case 15:
                                return _context17.abrupt('return', _context17.sent);

                            case 18:
                                return _context17.abrupt('return', null);

                            case 19:
                            case 'end':
                                return _context17.stop();
                        }
                    }
                }, _callee17, this);
            }));

            function storeLogsCore(_x13) {
                return _ref17.apply(this, arguments);
            }

            return storeLogsCore;
        }()
    }]);
    return MoiraeStorage;
}();

/***/ }),
/* 1325 */,
/* 1326 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.tryCatch = tryCatch;
exports.pcOnly = pcOnly;
exports.productionOnly = productionOnly;

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _logger = __webpack_require__(712);

var _type = __webpack_require__(539);

var _networkHelper = __webpack_require__(113);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function tryCatch(context, next) {
    try {
        next();
    } catch (e) {
        console.error(e);
    }
}
function pcOnly(context, next) {
    if (context.method === _type.LogMethod.MEAN || context.method === _type.LogMethod.COUNT) {
        // MEAN和COUNT是打点方法，都要执行
        next();
    } else if (!_browserHelper2.default.isMobile && !_browserHelper2.default.isLark && !_browserHelper2.default.isFeed) {
        // TODO: 移动端的存储方式和上传方式应该单独处理，现在只处理PC端。 Lark和Feed需要测试
        next();
    }
    return;
}
function productionOnly(context, next) {
    if ((0, _networkHelper.isProdEnv)()) {
        window.User && window.User.showLog && (0, _logger.writeToConsole)(context);
        return;
    }
    next();
}

/***/ }),
/* 1327 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Sla = undefined;

var _sla = __webpack_require__(1328);

Object.defineProperty(exports, 'Sla', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_sla).default;
  }
});

var _metrics = __webpack_require__(1329);

var _metrics2 = _interopRequireDefault(_metrics);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _metrics2.default;

/***/ }),
/* 1328 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SUCCESS = 1;
var FAIL = 0;

var Sla = function () {
    function Sla(metrics) {
        (0, _classCallCheck3.default)(this, Sla);

        this.metrics = metrics;
    }

    (0, _createClass3.default)(Sla, [{
        key: 'success',
        value: function success(service, cmd, tags) {
            this.send(SUCCESS, service, cmd, tags);
        }
    }, {
        key: 'fail',
        value: function fail(service, cmd, tags) {
            this.send(FAIL, service, cmd, tags);
        }
    }, {
        key: 'send',
        value: function send(value, service, cmd, tags) {
            try {
                var pairs = [{
                    key: 'ee.http.sla.latency',
                    value: 1
                }, {
                    key: 'ee.http.sla.stable',
                    value: value
                }];
                tags = Object.assign({
                    service: service,
                    command: cmd
                }, tags);
                this.metrics.pair(pairs, tags);
            } catch (e) {
                console.error(e);
            }
        }
    }]);
    return Sla;
}();

exports.default = Sla;

/***/ }),
/* 1329 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handlers;

var _type = __webpack_require__(1330);

var _utils = __webpack_require__(1331);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function sum(nums) {
    return nums.reduce(function (acc, cur) {
        return acc + cur;
    }, 0);
}
function mean(nums) {
    var s = nums.reduce(function (acc, cur) {
        return acc + cur;
    }, 0);
    return s / nums.length;
}
var handlers = (_handlers = {}, (0, _defineProperty3.default)(_handlers, _type.HandlerType.SUM, sum), (0, _defineProperty3.default)(_handlers, _type.HandlerType.MEAN, mean), _handlers);

var MemoryStorage = function () {
    function MemoryStorage() {
        (0, _classCallCheck3.default)(this, MemoryStorage);

        this.contexts = {};
        this.contexts = {};
    }

    (0, _createClass3.default)(MemoryStorage, [{
        key: 'set',
        value: function set(context) {
            var key = context.key,
                tags = context.tags,
                value = context.value,
                type = context.type,
                handler = context.handler,
                pairs = context.pairs;

            if (value) {
                var _contexts$uniqueKey$v;

                var uniqueKey = this.generateKeys(key, tags);
                this.contexts[uniqueKey] = this.contexts[uniqueKey] || { type: type, key: key, tags: tags, value: [], handler: handler };
                (_contexts$uniqueKey$v = this.contexts[uniqueKey].value).push.apply(_contexts$uniqueKey$v, (0, _toConsumableArray3.default)(value));
            } else if (pairs) {
                var _uniqueKey = (0, _utils.randomString)();
                this.contexts[_uniqueKey] = { type: type, tags: tags, pairs: pairs };
            }
        }
    }, {
        key: 'read',
        value: function read() {
            var _this = this;

            return Object.getOwnPropertyNames(this.contexts).map(function (key) {
                return _this.contexts[key];
            });
        }
    }, {
        key: 'clear',
        value: function clear() {
            this.contexts = {};
        }
    }, {
        key: 'generateKeys',
        value: function generateKeys(key, tags) {
            tags = tags || {};
            var tagKeys = Object.keys(tags).sort().map(function (key) {
                var v = tags[key];
                return key + ':' + v;
            });
            var keys = [key].concat((0, _toConsumableArray3.default)(tagKeys));
            return keys.join('-');
        }
    }]);
    return MemoryStorage;
}();

var Metrics = function () {
    function Metrics(options) {
        var _this2 = this;

        (0, _classCallCheck3.default)(this, Metrics);

        this.uploadTimer = 0;
        this.sending = false;
        this.upload = function () {
            if (_this2.sending) {
                _this2.setUploadTimer(2000);
                return;
            }
            _this2.sending = true;
            var storage = _this2.storage,
                logType = _this2.logType,
                header = _this2.header;

            var contexts = storage.read();
            if (contexts.length === 0) {
                _this2.sending = false;
                return;
            }
            var data = contexts.map(function (context) {
                var dataObj = {};
                if (context.value) {
                    var handler = handlers[context.handler];
                    dataObj.value = handler ? handler(context.value) : 0;
                    dataObj.key = context.key || '';
                } else if (context.pairs) {
                    dataObj.pairs = context.pairs;
                }
                var obj = Object.assign({
                    type: context.type,
                    ts: Math.round(Date.now() / 1000)
                }, dataObj);
                if (context.tags) {
                    obj.tags = context.tags;
                }
                return obj;
            });
            var body = {
                data: JSON.stringify(data)
            };
            if (logType) {
                body.log_type = logType;
            }
            var uploadBody = {
                data: [body],
                header: header
            };
            var postUrl = _this2.getUrl();
            var xhr = new XMLHttpRequest();
            xhr.open('POST', postUrl, true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function () {
                if (xhr.readyState !== 4) {
                    return;
                }
                if (xhr.status === 200) {
                    storage.clear();
                    _this2.onUpload && _this2.onUpload();
                }
                _this2.sending = false;
            };
            xhr.send(JSON.stringify(uploadBody));
        };
        this.validKeyPrefix = options.validKeyPrefix || [];
        this.logType = options.logType || '';
        this.onUpload = options.onUpload;
        this.getUrl = typeof options.url === 'string' ? function () {
            return options.url;
        } : options.url;
        this.header = Object.assign({
            aid: '1161',
            channel_type: 'metrics'
        }, options.header || {});
        this.storage = options.storage || new MemoryStorage();
    }

    (0, _createClass3.default)(Metrics, [{
        key: 'setUploadTimer',
        value: function setUploadTimer(delay) {
            delay = delay || 5000;
            window.clearTimeout(this.uploadTimer);
            this.uploadTimer = window.setTimeout(this.upload, delay);
        }
    }, {
        key: 'setValueContext',
        value: function setValueContext(type, handler, key, value, tags) {
            var storage = this.storage,
                validKeyPrefix = this.validKeyPrefix;

            if (validKeyPrefix.every(function (item) {
                return key.indexOf(item) === -1;
            })) {
                return;
            }
            storage.set({ key: key, tags: tags, handler: handler, type: type, value: [value] });
        }
    }, {
        key: 'setPairsContext',
        value: function setPairsContext(type, pairs, tags) {
            var storage = this.storage;

            storage.set({ tags: tags, pairs: pairs, type: type });
        }
    }, {
        key: 'count',
        value: function count(key, tags) {
            this.setValueContext('counter', _type.HandlerType.SUM, key, 1, tags);
            this.setUploadTimer();
        }
    }, {
        key: 'mean',
        value: function mean(key, value, tags) {
            this.setValueContext('timer', _type.HandlerType.MEAN, key, value, tags);
            this.setUploadTimer();
        }
    }, {
        key: 'pair',
        value: function pair(pairs, tags) {
            this.setPairsContext('timer', pairs, tags);
            this.setUploadTimer();
        }
    }]);
    return Metrics;
}();

exports.default = Metrics;

/***/ }),
/* 1330 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var HandlerType = exports.HandlerType = undefined;
(function (HandlerType) {
    HandlerType[HandlerType["MEAN"] = 0] = "MEAN";
    HandlerType[HandlerType["SUM"] = 1] = "SUM";
})(HandlerType || (exports.HandlerType = HandlerType = {}));

/***/ }),
/* 1331 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.randomString = randomString;
function randomString() {
    return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
}

/***/ }),
/* 1332 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _title = __webpack_require__(1333);

var _title2 = _interopRequireDefault(_title);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _title2.default;

/***/ }),
/* 1333 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _titleHelper = __webpack_require__(195);

var _action2TitleMap = __webpack_require__(1334);

var _action2TitleMap2 = _interopRequireDefault(_action2TitleMap);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(setDocumentTitleWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(setDocumentTitleWorker);

function setDocumentTitleWatcher() {
    return _regenerator2.default.wrap(function setDocumentTitleWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(shouldTake, setDocumentTitleWorker);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function shouldTake(action) {
    return typeof _action2TitleMap2.default[action.type] !== 'undefined';
}
function setDocumentTitleWorker(action) {
    var title;
    return _regenerator2.default.wrap(function setDocumentTitleWorker$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    title = _action2TitleMap2.default[action.type](action);

                    if (title) {
                        _context2.next = 3;
                        break;
                    }

                    return _context2.abrupt('return');

                case 3:
                    (0, _titleHelper.setDocumentTitle)(title);

                case 4:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
exports.default = setDocumentTitleWatcher;

/***/ }),
/* 1334 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _actionToTitleMap;

var _$constants = __webpack_require__(5);

var _titleHelper = __webpack_require__(195);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var actionToTitleMap = (_actionToTitleMap = {}, (0, _defineProperty3.default)(_actionToTitleMap, _$constants.actionTypes.suite.FETCH_CURRENT_SUITE_SUCCESS, function (action) {
    return (0, _titleHelper.getTitle)(action);
}), (0, _defineProperty3.default)(_actionToTitleMap, _$constants.actionTypes.suite.FETCH_CURRENT_SUITE_FAIL, function (action) {
    return (0, _titleHelper.getTitle)(action);
}), (0, _defineProperty3.default)(_actionToTitleMap, _$constants.actionTypes.suite.UPDATE_DOC_TITLE, function (action) {
    return (0, _titleHelper.getTitle)(action);
}), (0, _defineProperty3.default)(_actionToTitleMap, _$constants.actionTypes.suite.SYNC_TAB_TITLE, function (action) {
    return (0, _titleHelper.getTitle)(action);
}), _actionToTitleMap);
exports.default = actionToTitleMap;

/***/ }),
/* 1335 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _fetchRecentObjs = __webpack_require__(1336);

var _fetchRecentObjs2 = _interopRequireDefault(_fetchRecentObjs);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(sidebarSaga);

function sidebarSaga() {
    return _regenerator2.default.wrap(function sidebarSaga$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(_fetchRecentObjs2.default)]);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
exports.default = sidebarSaga;

/***/ }),
/* 1336 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.fetchRecentObjsWatcher = fetchRecentObjsWatcher;

var _effects = __webpack_require__(17);

var _constants = __webpack_require__(5);

var _utils = __webpack_require__(260);

var _common = __webpack_require__(19);

var _api = __webpack_require__(150);

var _explorer = __webpack_require__(48);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchRecentObjsWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchRecentObjsSaga);

function fetchRecentObjsWatcher() {
    return _regenerator2.default.wrap(function fetchRecentObjsWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_constants.actionTypes.explorer.FETCH_RECENT_OBJS, fetchRecentObjsSaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchRecentObjsSaga(action) {
    var deferred, _action$payload, isContinuous, length, nextTime, previousOffset, previousLoadInfo, recentObjTokens, _ref, data, successAction, failAction;

    return _regenerator2.default.wrap(function fetchRecentObjsSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    deferred = action[_common.DEFERRED];
                    _context2.prev = 1;
                    _action$payload = action.payload, isContinuous = _action$payload.isContinuous, length = _action$payload.length;
                    _context2.next = 5;
                    return (0, _effects.put)(_utils.requestActions.start(action));

                case 5:
                    nextTime = 0;
                    previousOffset = 0;
                    _context2.next = 9;
                    return (0, _effects.select)(_explorer.selectRecentObjLoadInfo);

                case 9:
                    previousLoadInfo = _context2.sent;

                    if (!(isContinuous && previousLoadInfo)) {
                        _context2.next = 16;
                        break;
                    }

                    nextTime = previousLoadInfo.get('next');
                    _context2.next = 14;
                    return (0, _effects.select)(_explorer.selectRecentObjTokens);

                case 14:
                    recentObjTokens = _context2.sent;

                    previousOffset = recentObjTokens.size;

                case 16:
                    _context2.next = 18;
                    return (0, _effects.call)(_api.fetchDoc, {
                        url: _constants.apiUrls.POST_FETCH_RECENT_OBJS,
                        method: _constants.apiUrls.METHOD.POST,
                        data: {
                            next_time: nextTime,
                            length: length
                        }
                    });

                case 18:
                    _ref = _context2.sent;
                    data = _ref.data;
                    successAction = _utils.requestActions.success(action, Object.assign({}, data, {
                        isContinuous: isContinuous,
                        offset: previousOffset
                    }));
                    _context2.next = 23;
                    return (0, _effects.put)(successAction);

                case 23:
                    deferred && deferred.resolve(successAction);
                    _context2.next = 33;
                    break;

                case 26:
                    _context2.prev = 26;
                    _context2.t0 = _context2['catch'](1);

                    console.error(_context2.t0);
                    failAction = _utils.requestActions.fail(action, _context2.t0);

                    deferred && deferred.reject(failAction);
                    _context2.next = 33;
                    return (0, _effects.put)(failAction);

                case 33:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this, [[1, 26]]);
}
exports.default = fetchRecentObjsWatcher;

/***/ }),
/* 1337 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _map2 = __webpack_require__(561);

var _map3 = _interopRequireDefault(_map2);

var _some2 = __webpack_require__(785);

var _some3 = _interopRequireDefault(_some2);

var _find2 = __webpack_require__(451);

var _find3 = _interopRequireDefault(_find2);

var _reduce2 = __webpack_require__(230);

var _reduce3 = _interopRequireDefault(_reduce2);

exports.default = historySaga;

var _effects = __webpack_require__(17);

var _constants = __webpack_require__(5);

var _history = __webpack_require__(1339);

var historyActions = _interopRequireWildcard(_history);

var _comment = __webpack_require__(1340);

var _suite = __webpack_require__(84);

var _common = __webpack_require__(19);

var _userHelper = __webpack_require__(65);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(addHistoryWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(addHistorySaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(classifySheetComment),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(classifyDocComment),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(historySaga);

function addHistoryWatcher() {
    return _regenerator2.default.wrap(function addHistoryWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)(_constants.actionTypes.history.commentHistory.FETCH_COMMENT_HISTORY_LIST_SUCCESS, addHistorySaga);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function addHistorySaga(action) {
    var state, suiteType, commentList;
    return _regenerator2.default.wrap(function addHistorySaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.select)();

                case 2:
                    state = _context2.sent;
                    suiteType = (0, _suite.selectCurrentSuiteType)(state);

                    if (!(suiteType === _common.NUM_FILE_TYPE.DOC)) {
                        _context2.next = 10;
                        break;
                    }

                    commentList = (0, _comment.selectDocComments)(state);
                    _context2.next = 8;
                    return classifyDocComment(commentList, action.payload);

                case 8:
                    _context2.next = 13;
                    break;

                case 10:
                    if (!(suiteType === _common.NUM_FILE_TYPE.SHEET)) {
                        _context2.next = 13;
                        break;
                    }

                    _context2.next = 13;
                    return classifySheetComment(action.payload);

                case 13:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function classifySheetComment(historyPayload) {
    var filterComment;
    return _regenerator2.default.wrap(function classifySheetComment$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    if (historyPayload) {
                        _context3.next = 2;
                        break;
                    }

                    return _context3.abrupt('return');

                case 2:
                    filterComment = (0, _reduce3.default)(historyPayload, function (memo, item, commentId) {
                        if (item.finish && item.comment_list) {
                            memo.push(Object.assign({}, item, {
                                comment_id: commentId,
                                comment_list: (0, _map3.default)(item.comment_list, function (comment) {
                                    // 如果comment.avatar_url没有值的话，取entities的内容
                                    var userAvatar = comment.avatar_url || (0, _userHelper.getUserAvatar)(comment.user_id);
                                    return Object.assign({}, comment, { comment_id: commentId, avatar_url: userAvatar });
                                })
                            }));
                        }
                        return memo;
                    }, []).sort(function (a, b) {
                        return b.finish_timestamp - a.finish_timestamp;
                    });
                    _context3.next = 5;
                    return (0, _effects.put)(historyActions.filterCommentHistory(filterComment));

                case 5:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function classifyDocComment(commentPayload, historyPayload) {
    var filterComment;
    return _regenerator2.default.wrap(function classifyDocComment$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    if (historyPayload) {
                        _context4.next = 2;
                        break;
                    }

                    return _context4.abrupt('return');

                case 2:
                    filterComment = (0, _reduce3.default)(historyPayload, function (memo, commentValue, commentId) {
                        if (commentId === 'entities') {
                            return memo;
                        }
                        // commentPayload是文章里面存在的评论, historyPayload是文章的所有评论
                        var commentInfo = (0, _find3.default)(commentPayload, function (c) {
                            return c.commentId === commentId;
                        });
                        if (!commentInfo) {
                            // 再判断这个不存在的评论是不是被解决
                            var isFinished = false;
                            // 这个不存在的评论是不是被删除了
                            var isNotAllDeleted = false;
                            if (commentValue.finish) {
                                isFinished = true;
                            } else if (!commentValue.is_whole) {
                                // 再筛选普通评论是不是在原文被删除了
                                // 剔除那种所有的评论被所有者和评论作者删除的评论，剩下就是原文被删除的评论
                                isNotAllDeleted = (0, _some3.default)(commentValue.comment_list, function (commentListItem) {
                                    return !commentListItem.delete_flag;
                                });
                            }
                            if ((isFinished || isNotAllDeleted) && commentValue.comment_list) {
                                memo.push(Object.assign({}, commentValue, {
                                    comment_id: commentId,
                                    comment_list: (0, _map3.default)(commentValue.comment_list, function (comment) {
                                        // 如果comment.avatar_url没有值的话，取entities的内容
                                        var userAvatar = comment.avatar_url || (0, _userHelper.getUserAvatar)(comment.user_id);
                                        return Object.assign({}, comment, { comment_id: commentId, avatar_url: userAvatar });
                                    })
                                }));
                            }
                        }
                        return memo;
                    }, []).sort(function (a, b) {
                        return b.finish_timestamp - a.finish_timestamp;
                    });
                    _context4.next = 5;
                    return (0, _effects.put)(historyActions.filterCommentHistory(filterComment));

                case 5:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}
function historySaga() {
    return _regenerator2.default.wrap(function historySaga$(_context5) {
        while (1) {
            switch (_context5.prev = _context5.next) {
                case 0:
                    _context5.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(addHistoryWatcher)]);

                case 2:
                case 'end':
                    return _context5.stop();
            }
        }
    }, _marked5, this);
}

/***/ }),
/* 1338 */,
/* 1339 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.reOpenComment = exports.filterCommentHistory = exports.fetchCommentHistory = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

var _routeHelper = __webpack_require__(67);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// 获取已解决评论
var fetchCommentHistory = exports.fetchCommentHistory = function fetchCommentHistory(token, type) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.history.commentHistory.FETCH_COMMENT_HISTORY_LIST
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_GET_COMMENT_HISTORY_LIST,
        method: _$constants.apiUrls.METHOD.POST,
        data: { token: token, type: type, obj_type: (0, _routeHelper.locateRoute)().isSheet ? 3 : undefined }
    });
};
var filterCommentHistory = exports.filterCommentHistory = function filterCommentHistory(comment) {
    return {
        type: _$constants.actionTypes.history.commentHistory.FILTER_COMMENT_HISTORY_LIST,
        payload: comment
    };
};
var reOpenComment = exports.reOpenComment = function reOpenComment(comment, token, editor) {
    return (0, _defineProperty3.default)({
        type: _$constants.actionTypes.history.commentHistory.REOPEN_HISTORY_COMMENT,
        payload: { editor: editor }
    }, _common.REQUEST, {
        url: _$constants.apiUrls.POST_REOPEN_COMMENT,
        method: _$constants.apiUrls.METHOD.POST,
        data: { comment_id: comment.comment_id, token: token, finish: 0, obj_type: (0, _routeHelper.locateRoute)().isSheet ? 3 : undefined },
        options: {
            transformResponse: function transformResponse(response) {
                return Object.assign({}, response, { comment: comment });
            }
        }
    });
};

/***/ }),
/* 1340 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.selectCommentNeededUser = exports.selectGlobalCommentToken = exports.selectDocCommentToken = exports.selectDocComments = undefined;

var _docCommentHelper = __webpack_require__(465);

var _reselect = __webpack_require__(131);

var _user = __webpack_require__(72);

var selectDocComments = exports.selectDocComments = (0, _reselect.createSelector)(function (state) {
  return state.appState.comment.docComment.commentList;
}, function (state) {
  return state.appState.comment.docComment.replyItems;
}, function (commentList, replyItems) {
  return commentList.map(function (comment) {
    return Object.assign({}, comment, {
      comment_list: comment.comment_list.map(function (replyId) {
        return replyItems[(0, _docCommentHelper.formatReplyId)(comment.commentId, replyId)];
      })
    });
  });
});

var selectDocCommentToken = exports.selectDocCommentToken = function selectDocCommentToken(state) {
  return state.appState.comment.docComment.token;
};

var selectGlobalCommentToken = exports.selectGlobalCommentToken = function selectGlobalCommentToken(state) {
  return state.appState.comment.globalComment.token;
};
var selectCommentNeededUser = exports.selectCommentNeededUser = (0, _reselect.createSelector)(_user.selectCurrentUser, function (user) {
  return {
    name: user.get('name'),
    avatar_url: user.get('avatar_url'),
    user_id: user.get('id')
  };
});

/***/ }),
/* 1341 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.DELAY_DURATION = undefined;

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.fetchPackageVersion = fetchPackageVersion;
exports.updateNotifiedSaga = updateNotifiedSaga;
exports.updateCheckingLoop = updateCheckingLoop;
exports.default = updateSaga;

var _reduxSaga = __webpack_require__(240);

var _effects = __webpack_require__(17);

var _constants = __webpack_require__(5);

var _api = __webpack_require__(150);

var _update = __webpack_require__(1342);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(updateNotifiedSaga),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(updateCheckingLoop),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(updateSaga);

/* locale constants */
var PLATFORM_LARK = 'lark';
var PLATFORM_BROWSER = 'browser';
var win = window;
var mockUrl = win && win.User && win.User.updateCheckingUrl;
var DELAY_DURATION = exports.DELAY_DURATION = mockUrl ? 10 * 1000 : 10 * 60 * 1000; // 10 mins
/* ===============  */
function fetchPackageVersion(platform, version) {
    var channel = platform === PLATFORM_LARK ? 'lark_docs_channel' : 'docs_channel';
    return (0, _api.fetchDoc)({
        url: mockUrl || _constants.apiUrls.GET_PACKAGE_VERSION,
        method: _constants.apiUrls.METHOD.GET,
        params: { package_version: version, channel: channel }
    });
}
// 处理更新
function updateNotifiedSaga() {
    var _ref, payload, platform;

    return _regenerator2.default.wrap(function updateNotifiedSaga$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.take)(_constants.actionTypes.update.UPDATE_NOTIFIED);

                case 2:
                    _ref = _context.sent;
                    payload = _ref.payload;
                    platform = payload.platform;
                    _context.t0 = platform;
                    _context.next = _context.t0 === PLATFORM_LARK ? 8 : _context.t0 === PLATFORM_BROWSER ? 11 : 15;
                    break;

                case 8:
                    _context.next = 10;
                    return (0, _effects.put)((0, _update.newVersionNotified)());

                case 10:
                    return _context.abrupt('break', 16);

                case 11:
                    console.log('update: browser');
                    _context.next = 14;
                    return (0, _effects.put)((0, _update.newVersionNotified)());

                case 14:
                    return _context.abrupt('break', 16);

                case 15:
                    console.log('New version found');

                case 16:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
// 更新轮询
function updateCheckingLoop() {
    var action, payload, platform, currentPackageVersion, response, packageVersion;
    return _regenerator2.default.wrap(function updateCheckingLoop$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.take)(_constants.actionTypes.update.START_UPDATE_CHECKING_LOOP);

                case 2:
                    action = _context2.sent;
                    payload = action.payload;
                    platform = payload.platform;
                    currentPackageVersion = 0;

                case 6:
                    if (false) {}

                    _context2.prev = 7;
                    _context2.next = 10;
                    return (0, _effects.call)(fetchPackageVersion, platform, currentPackageVersion);

                case 10:
                    response = _context2.sent;
                    packageVersion = response.data.package_version;

                    if (!(currentPackageVersion === 0)) {
                        _context2.next = 16;
                        break;
                    }

                    currentPackageVersion = packageVersion;
                    _context2.next = 20;
                    break;

                case 16:
                    if (!(currentPackageVersion !== packageVersion)) {
                        _context2.next = 20;
                        break;
                    }

                    _context2.next = 19;
                    return (0, _effects.put)((0, _update.updateNotified)(platform));

                case 19:
                    return _context2.abrupt('break', 29);

                case 20:
                    _context2.next = 25;
                    break;

                case 22:
                    _context2.prev = 22;
                    _context2.t0 = _context2['catch'](7);

                    // 容错处理
                    console.error(_context2.t0);

                case 25:
                    _context2.next = 27;
                    return (0, _effects.call)(_reduxSaga.delay, DELAY_DURATION);

                case 27:
                    _context2.next = 6;
                    break;

                case 29:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this, [[7, 22]]);
}
function updateSaga() {
    return _regenerator2.default.wrap(function updateSaga$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(updateCheckingLoop), (0, _effects.fork)(updateNotifiedSaga)]);

                case 2:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}

/***/ }),
/* 1342 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.newVersionNotified = exports.updateNotified = exports.startUpdateCheckingLoop = undefined;

var _$constants = __webpack_require__(5);

var startUpdateCheckingLoop = exports.startUpdateCheckingLoop = function startUpdateCheckingLoop(platform) {
    return {
        type: _$constants.actionTypes.update.START_UPDATE_CHECKING_LOOP,
        payload: { platform: platform }
    };
};
var updateNotified = exports.updateNotified = function updateNotified(platform) {
    return {
        type: _$constants.actionTypes.update.UPDATE_NOTIFIED,
        payload: { platform: platform }
    };
};
var newVersionNotified = exports.newVersionNotified = function newVersionNotified() {
    return {
        type: _$constants.actionTypes.update.NEW_VERSION_NOTIFIED
    };
};

/***/ }),
/* 1343 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = openSuiteFromFolderWatcher;

var _effects = __webpack_require__(17);

var _url = __webpack_require__(713);

var _common = __webpack_require__(85);

var _url2 = __webpack_require__(530);

var _$constants = __webpack_require__(5);

var _route = __webpack_require__(514);

var _routeHelper = __webpack_require__(67);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(openSuiteFromFolderWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(getBackUrl);

function getIsAlsoFileList(prevRoute, curRoute) {
    return [prevRoute.get('type'), curRoute.get('type')].every(function (type) {
        return type === _route.RouteType.FILELIST;
    });
}
function getPathName() {
    return location.pathname;
}
function openSuiteFromFolderWatcher() {
    var prevRoute, backURL, curRoute, shouldRecordBackUrl;
    return _regenerator2.default.wrap(function openSuiteFromFolderWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    if (false) {}

                    _context.next = 3;
                    return (0, _effects.select)(_common.selectRoute);

                case 3:
                    prevRoute = _context.sent;
                    _context.next = 6;
                    return getBackUrl(prevRoute);

                case 6:
                    backURL = _context.sent;
                    _context.next = 9;
                    return (0, _effects.take)(_$constants.actionTypes.route.LOCATION_CHANGE);

                case 9:
                    _context.next = 11;
                    return (0, _effects.select)(_common.selectRoute);

                case 11:
                    curRoute = _context.sent;
                    shouldRecordBackUrl = !prevRoute.isEmpty() && !getIsAlsoFileList(prevRoute, curRoute) && location.pathname !== backURL;

                    if (!shouldRecordBackUrl) {
                        _context.next = 16;
                        break;
                    }

                    _context.next = 16;
                    return (0, _effects.put)((0, _url.setBackUrl)(backURL));

                case 16:
                    _context.next = 0;
                    break;

                case 18:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function getBackUrl(prevRoute) {
    var currentLocation, isCreateFromRootRoute, isCreateFromSuite, isCreateFromRootRouteExceptExplorer, historyBackUrl, backUrlMap;
    return _regenerator2.default.wrap(function getBackUrl$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    currentLocation = (0, _routeHelper.locateRoute)();
                    isCreateFromRootRoute = (0, _routeHelper.isUnderRootRoute)();
                    isCreateFromSuite = (0, _routeHelper.isUnderSuiteView)();
                    isCreateFromRootRouteExceptExplorer = !currentLocation.isExplorer && isCreateFromRootRoute;
                    historyBackUrl = void 0;

                    if (!(currentLocation.isFolder || currentLocation.isExplorer)) {
                        _context2.next = 9;
                        break;
                    }

                    historyBackUrl = getPathName();
                    // @TODO: 封装getBackUrlByPathName, default args: location.pathName.
                    _context2.next = 17;
                    break;

                case 9:
                    if (!isCreateFromSuite) {
                        _context2.next = 16;
                        break;
                    }

                    _context2.next = 12;
                    return (0, _effects.select)(_url2.selectBackUrlMap);

                case 12:
                    backUrlMap = _context2.sent;

                    historyBackUrl = backUrlMap[location.pathname];
                    _context2.next = 17;
                    break;

                case 16:
                    if (isCreateFromRootRouteExceptExplorer) {
                        historyBackUrl = prevRoute.get('url');
                    }

                case 17:
                    if (typeof historyBackUrl === 'undefined') {
                        // fallback url
                        historyBackUrl = _$constants.route.URL.HOME;
                    }
                    return _context2.abrupt('return', historyBackUrl);

                case 19:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}

/***/ }),
/* 1344 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _configLookupTable;

exports.default = watchFetchPagedData;

var _effects = __webpack_require__(17);

var _constants = __webpack_require__(5);

var _utils = __webpack_require__(260);

var _common = __webpack_require__(19);

var _api = __webpack_require__(150);

var _explorer = __webpack_require__(48);

var explorerSelectors = _interopRequireWildcard(_explorer);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(watchFetchPagedData),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchPagedDataSaga);

var DEFAULT_PARAM;
(function (DEFAULT_PARAM) {
    DEFAULT_PARAM[DEFAULT_PARAM["NEXT_ID"] = 0] = "NEXT_ID";
    DEFAULT_PARAM[DEFAULT_PARAM["CHECK_ID"] = 0] = "CHECK_ID";
    DEFAULT_PARAM[DEFAULT_PARAM["PREVIOUS_OFFSET"] = 0] = "PREVIOUS_OFFSET";
})(DEFAULT_PARAM || (DEFAULT_PARAM = {}));
var mapMethod2Fields = function mapMethod2Fields(method) {
    var _apiUrls$METHOD$POST$;

    return (_apiUrls$METHOD$POST$ = {}, (0, _defineProperty3.default)(_apiUrls$METHOD$POST$, _constants.apiUrls.METHOD.POST, 'data'), (0, _defineProperty3.default)(_apiUrls$METHOD$POST$, _constants.apiUrls.METHOD.GET, 'params'), _apiUrls$METHOD$POST$)[method];
};
var configLookupTable = (_configLookupTable = {}, (0, _defineProperty3.default)(_configLookupTable, _constants.actionTypes.explorer.FETCH_RECENT_OBJS, {
    url: _constants.apiUrls.POST_FETCH_RECENT_OBJS,
    method: _constants.apiUrls.METHOD.POST,
    loadInfoSelector: explorerSelectors.selectRecentObjLoadInfo,
    indexesSelector: explorerSelectors.selectRecentObjTokens
}), (0, _defineProperty3.default)(_configLookupTable, _constants.actionTypes.explorer.FETCH_STAR_LIST, {
    url: _constants.apiUrls.GET_STAR_LIST,
    method: _constants.apiUrls.METHOD.GET,
    loadInfoSelector: explorerSelectors.selectStarListLoadInfo,
    indexesSelector: explorerSelectors.selectStaredFileMetas
}), (0, _defineProperty3.default)(_configLookupTable, _constants.actionTypes.explorer.FETCH_SHARE_OBJECTS, {
    url: _constants.apiUrls.GET_SHARE_OBJECTS,
    method: _constants.apiUrls.METHOD.GET,
    loadInfoSelector: explorerSelectors.selectSharedFilesLoadInfo,
    indexesSelector: explorerSelectors.selectSharedFiles
}), _configLookupTable);
function getRealPagedFetchConfig(action) {
    return configLookupTable[action.payload.realActionType];
}
function watchFetchPagedData() {
    var fetchPagedDataQueue, action;
    return _regenerator2.default.wrap(function watchFetchPagedData$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.actionChannel)(_constants.actionTypes.intermediate.FETCH_PAGED_DATA);

                case 2:
                    fetchPagedDataQueue = _context.sent;

                case 3:
                    if (false) {}

                    _context.next = 6;
                    return (0, _effects.take)(fetchPagedDataQueue);

                case 6:
                    action = _context.sent;
                    _context.next = 9;
                    return (0, _effects.call)(fetchPagedDataSaga, action);

                case 9:
                    _context.next = 3;
                    break;

                case 11:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchPagedDataSaga(action) {
    var deferred, _action$payload, realActionType, realPayload, _getRealPagedFetchCon, loadInfoSelector, indexesSelector, url, method, realAction2Dispatch, previousLoadInfo, isContinuous, length, extraData, previousOffset, hasMore, nextId, checkId, indexes, paramsOrData, _ref, data, successAction, failAction;

    return _regenerator2.default.wrap(function fetchPagedDataSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    deferred = action[_common.DEFERRED];
                    _action$payload = action.payload, realActionType = _action$payload.realActionType, realPayload = (0, _objectWithoutProperties3.default)(_action$payload, ['realActionType']);
                    _getRealPagedFetchCon = getRealPagedFetchConfig(action), loadInfoSelector = _getRealPagedFetchCon.loadInfoSelector, indexesSelector = _getRealPagedFetchCon.indexesSelector, url = _getRealPagedFetchCon.url, method = _getRealPagedFetchCon.method;
                    realAction2Dispatch = {
                        type: realActionType,
                        payload: Object.assign({}, realPayload)
                    };
                    _context2.prev = 4;
                    _context2.next = 7;
                    return (0, _effects.select)(loadInfoSelector);

                case 7:
                    previousLoadInfo = _context2.sent;
                    isContinuous = realPayload.isContinuous, length = realPayload.length, extraData = (0, _objectWithoutProperties3.default)(realPayload, ['isContinuous', 'length']);
                    previousOffset = DEFAULT_PARAM.PREVIOUS_OFFSET;
                    hasMore = void 0;
                    nextId = void 0;
                    checkId = void 0;

                    if (!(isContinuous && previousLoadInfo)) {
                        _context2.next = 21;
                        break;
                    }

                    nextId = previousLoadInfo.get('next');
                    checkId = previousLoadInfo.get('checkId');
                    hasMore = previousLoadInfo.get('hasMore');
                    _context2.next = 19;
                    return (0, _effects.select)(indexesSelector);

                case 19:
                    indexes = _context2.sent;

                    previousOffset = indexes.size;

                case 21:
                    if (!(hasMore === false)) {
                        _context2.next = 23;
                        break;
                    }

                    return _context2.abrupt('return');

                case 23:
                    _context2.next = 25;
                    return (0, _effects.put)(_utils.requestActions.start(realAction2Dispatch));

                case 25:
                    paramsOrData = mapMethod2Fields(method);
                    _context2.next = 28;
                    return (0, _effects.call)(_api.fetchDoc, (0, _defineProperty3.default)({
                        url: url,
                        method: method
                    }, paramsOrData, Object.assign({
                        next_id: nextId,
                        check_id: checkId,
                        length: length
                    }, extraData)));

                case 28:
                    _ref = _context2.sent;
                    data = _ref.data;
                    successAction = _utils.requestActions.success(realAction2Dispatch, Object.assign({}, data, {
                        isContinuous: isContinuous,
                        offset: previousOffset
                    }));
                    _context2.next = 33;
                    return (0, _effects.put)(successAction);

                case 33:
                    deferred && deferred.resolve(successAction);
                    _context2.next = 43;
                    break;

                case 36:
                    _context2.prev = 36;
                    _context2.t0 = _context2['catch'](4);

                    console.error(_context2.t0);
                    failAction = _utils.requestActions.fail(realAction2Dispatch, _context2.t0);

                    deferred && deferred.resolve(failAction);
                    _context2.next = 43;
                    return (0, _effects.put)(failAction);

                case 43:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this, [[4, 36]]);
}

/***/ }),
/* 1345 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _effects = __webpack_require__(17);

var _common = __webpack_require__(540);

var _createDoc = __webpack_require__(1359);

var _homeGuide = __webpack_require__(1360);

var _sharedDoc = __webpack_require__(1362);

var _undoRedoGuide = __webpack_require__(1363);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(onBoardingSaga);
// import { checkHomeTutorialStateWatcher, updateHomeTutorialStateWatcher } from './banners/homeTutorial';


function onBoardingSaga() {
    return _regenerator2.default.wrap(function onBoardingSaga$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.all)([
                    // fork(checkHomeTutorialStateWatcher),
                    (0, _effects.fork)(_common.fetchLastestGuideWatcher), (0, _effects.fork)(_homeGuide.homeGuideCloseWatcher), (0, _effects.fork)(_homeGuide.homeGuidePrepareWatcher), (0, _effects.fork)(_createDoc.prepareCreateDocGuideWatcher), (0, _effects.fork)(_sharedDoc.prepareSharedDocGuideWatcher), (0, _effects.fork)(_undoRedoGuide.undoRedoGuideCheckWatcher), (0, _effects.fork)(_common.updateGuideSuccessWatcher)]);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
exports.default = onBoardingSaga;

/***/ }),
/* 1346 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var getMatchSelector = exports.getMatchSelector = function getMatchSelector(pattern) {
  return "[data-selector=\"" + pattern + "\"]";
};

/***/ }),
/* 1347 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.createDriver = undefined;

var _driver = __webpack_require__(1348);

var _driver2 = _interopRequireDefault(_driver);

__webpack_require__(1354);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Note – Do not forget to add e.stopPropagation() to the click binding that triggers driver.
 */
var createDriver = exports.createDriver = function createDriver(options) {
    return new _driver2.default(Object.assign({
        disablePrev: true,
        keyboardControl: false
    }, options));
};

/***/ }),
/* 1348 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _overlay = __webpack_require__(1349);

var _overlay2 = _interopRequireDefault(_overlay);

var _element = __webpack_require__(395);

var _element2 = _interopRequireDefault(_element);

var _popover = __webpack_require__(1351);

var _popover2 = _interopRequireDefault(_popover);

var _constants = __webpack_require__(263);

var _stage = __webpack_require__(1352);

var _stage2 = _interopRequireDefault(_stage);

var _mask = __webpack_require__(1353);

var _mask2 = _interopRequireDefault(_mask);

var _utils = __webpack_require__(264);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Plugin class that drives the plugin
 */
var Driver = function () {
  /**
   * @param {Object} options
   */
  function Driver() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    (0, _classCallCheck3.default)(this, Driver);

    this.options = Object.assign({
      animate: _constants.SHOULD_ANIMATE_OVERLAY, // Whether to animate or not
      opacity: _constants.OVERLAY_OPACITY, // Overlay opacity
      padding: _constants.OVERLAY_PADDING, // Spacing around the element from the overlay
      scrollIntoViewOptions: null, // Options to be passed to `scrollIntoView`
      allowClose: _constants.SHOULD_OUTSIDE_CLICK_CLOSE, // Whether to close overlay on click outside the element
      keyboardControl: _constants.ALLOW_KEYBOARD_CONTROL, // Whether to allow controlling through keyboard or not
      overlayClickNext: _constants.SHOULD_OUTSIDE_CLICK_NEXT, // Whether to move next on click outside the element
      stageBackground: '#ffffff', // Background color for the stage
      disablePrev: _constants.SHOULD_DISABLE_BUTTON,
      disableClose: _constants.SHOULD_DISABLE_BUTTON,
      onHighlightStarted: function onHighlightStarted() {
        return null;
      }, // When element is about to be highlighted
      onHighlighted: function onHighlighted() {
        return null;
      }, // When element has been highlighted
      onDeselected: function onDeselected() {
        return null;
      }, // When the element has been deselected
      onReset: function onReset() {
        return null;
      }, // When overlay is about to be cleared
      onNext: function onNext() {
        return null;
      }, // When next button is clicked
      onPrevious: function onPrevious() {
        return null;
      } }, options);

    this.document = document;
    this.window = window;
    this.isActivated = false;
    this.steps = []; // steps to be presented if any
    this.currentStep = 0; // index for the currently highlighted step
    this.currentMovePrevented = false; // If the current move was prevented

    this.overlay = new _overlay2.default(this.options, window, document);

    this.onResize = this.onResize.bind(this);
    this.onKeyUp = this.onKeyUp.bind(this);
    this.onClick = this.onClick.bind(this);
    this.moveNext = this.moveNext.bind(this);
    this.movePrevious = this.movePrevious.bind(this);
    this.preventMove = this.preventMove.bind(this);

    // Event bindings
    this.bind();
  }

  /**
   * Getter for steps property
   * @readonly
   * @public
   */


  (0, _createClass3.default)(Driver, [{
    key: 'getSteps',
    value: function getSteps() {
      return this.steps;
    }

    /**
     * Setter for steps property
     * @param steps
     * @public
     */

  }, {
    key: 'setSteps',
    value: function setSteps(steps) {
      this.steps = steps;
    }

    /**
     * Binds any DOM events listeners
     * @todo: add throttling in all the listeners
     * @private
     */

  }, {
    key: 'bind',
    value: function bind() {
      this.window.addEventListener('resize', this.onResize, false);
      this.window.addEventListener('keyup', this.onKeyUp, false);
      this.window.addEventListener('click', this.onClick, false);
      this.window.addEventListener('touchstart', this.onClick, false);
    }

    /**
     * Removes the popover if clicked outside the highlighted element
     * or outside the
     * @param e
     * @private
     */

  }, {
    key: 'onClick',
    value: function onClick(e) {
      if (!this.isActivated || !this.hasHighlightedElement()) {
        return;
      }

      var highlightedElement = this.overlay.getHighlightedElement();
      var popover = this.document.getElementById(_constants.ID_POPOVER);

      var clickedHighlightedElement = highlightedElement.node.contains(e.target);
      var clickedPopover = popover && popover.contains(e.target);

      if (!clickedHighlightedElement && !clickedPopover && this.options.overlayClickNext) {
        this.handleNext();
        return;
      }

      // Remove the overlay If clicked outside the highlighted element
      if (!clickedHighlightedElement && !clickedPopover && this.options.allowClose) {
        this.reset();
        return;
      }

      var nextClicked = e.target.classList.contains(_constants.CLASS_NEXT_STEP_BTN);
      var prevClicked = e.target.classList.contains(_constants.CLASS_PREV_STEP_BTN);
      var closeClicked = e.target.classList.contains(_constants.CLASS_CLOSE_BTN);

      if (closeClicked) {
        if (this.options.onClose) {
          this.options.onClose(highlightedElement);
        }
        this.reset();
        return;
      }

      if (nextClicked) {
        this.handleNext();
      } else if (prevClicked) {
        this.handlePrevious();
      }
    }

    /**
     * Handler for the onResize DOM event
     * Makes sure highlighted element stays at valid position
     * @private
     */

  }, {
    key: 'onResize',
    value: function onResize() {
      if (!this.isActivated) {
        return;
      }

      this.overlay.refresh();
    }

    /**
     * Clears the overlay on escape key process
     * @param event
     * @private
     */

  }, {
    key: 'onKeyUp',
    value: function onKeyUp(event) {
      // If driver is not active or keyboard control is disabled
      if (!this.isActivated) {
        return;
      }

      // If escape was pressed
      if (event.keyCode === _constants.ESC_KEY_CODE) {
        if (this.options.onClose) {
          this.options.onClose(this.getHighlightedElement());
        }
        this.reset();
        return;
      }

      if (!this.options.keyboardControl) {
        return;
      }

      // Arrow keys to only perform if it is stepped introduction
      if (this.steps.length !== 0) {
        if (event.keyCode === _constants.RIGHT_KEY_CODE) {
          this.handleNext();
        } else if (event.keyCode === _constants.LEFT_KEY_CODE) {
          this.handlePrevious();
        }
      }
    }

    /**
     * Prevents the current move. Useful in `onNext` if you want to
     * perform some asynchronous task and manually move to next step
     * @public
     */

  }, {
    key: 'preventMove',
    value: function preventMove() {
      this.currentMovePrevented = true;
    }

    /**
     * Handles the internal "move to next" event
     * @private
     */

  }, {
    key: 'handleNext',
    value: function handleNext() {
      this.currentMovePrevented = false;
      this.moveNext(true, true);
    }

    /**
     * Handles the internal "move to previous" event
     * @private
     */

  }, {
    key: 'handlePrevious',
    value: function handlePrevious() {
      this.currentMovePrevented = false;
      this.movePrevious(true, true);
    }

    /**
     * Moves to the next step if possible
     * otherwise resets the overlay
     * @public
     */

  }, {
    key: 'moveNext',
    value: function moveNext() {
      var shouldTriggerOnNext = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      var isInternal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

      if (shouldTriggerOnNext) {
        this.triggerCallback('onNext', isInternal);
      }

      var nextStep = this.steps[this.currentStep + 1];
      if (!nextStep) {
        this.reset();
        return;
      }

      this.overlay.highlight(nextStep);
      this.currentStep += 1;
    }

    /**
     * Moves to the previous step if possible
     * otherwise resets the overlay
     * @public
     */

  }, {
    key: 'movePrevious',
    value: function movePrevious() {
      var shouldTriggerOnPrevious = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      var isInternal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

      if (shouldTriggerOnPrevious) {
        this.triggerCallback('onPrevious', isInternal);
      }

      var previousStep = this.steps[this.currentStep - 1];
      if (!previousStep) {
        this.reset();
        return;
      }

      this.overlay.highlight(previousStep);
      this.currentStep -= 1;
    }

    // Call the bound handler if available

  }, {
    key: 'triggerCallback',
    value: function triggerCallback(cb, isInternal) {
      var currentStep = this.steps[this.currentStep];
      if (currentStep.options[cb]) {
        currentStep.options[cb](this.overlay.highlightedElement, isInternal);
      }
    }

    /**
     * @returns {boolean}
     * @public
     */

  }, {
    key: 'hasNextStep',
    value: function hasNextStep() {
      return !!this.steps[this.currentStep + 1];
    }

    /**
     * @returns {boolean}
     * @public
     */

  }, {
    key: 'hasPreviousStep',
    value: function hasPreviousStep() {
      return !!this.steps[this.currentStep - 1];
    }

    /**
     * Resets the steps if any and clears the overlay
     * @param {boolean} immediate
     * @public
     */

  }, {
    key: 'reset',
    value: function reset() {
      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

      this.currentStep = 0;
      this.isActivated = false;
      this.overlay.clear(immediate);
    }

    /**
     * Checks if there is any highlighted element or not
     * @returns {boolean}
     * @public
     */

  }, {
    key: 'hasHighlightedElement',
    value: function hasHighlightedElement() {
      var highlightedElement = this.overlay.getHighlightedElement();
      return highlightedElement && highlightedElement.node;
    }

    /**
     * Gets the currently highlighted element in overlay
     * @returns {Element}
     * @public
     */

  }, {
    key: 'getHighlightedElement',
    value: function getHighlightedElement() {
      return this.overlay.getHighlightedElement();
    }

    /**
     * Gets the element that was highlighted before currently highlighted element
     * @returns {Element}
     * @public
     */

  }, {
    key: 'getLastHighlightedElement',
    value: function getLastHighlightedElement() {
      return this.overlay.getLastHighlightedElement();
    }

    /**
     * Defines steps to be highlighted
     * @param {array} steps
     * @public
     */

  }, {
    key: 'defineSteps',
    value: function defineSteps(steps) {
      this.steps = [];

      for (var counter = 0; counter < steps.length; counter++) {
        var element = this.prepareElementFromStep(steps[counter], steps, counter);
        if (!element) {
          continue;
        }

        this.steps.push(element);
      }
    }

    /**
     * Prepares the step received from the user and returns an instance
     * of Element
     *
     * @param currentStep Step that is being prepared
     * @param allSteps  List of all the steps
     * @param index Index of the current step
     * @returns {null|Element}
     * @private
     */

  }, {
    key: 'prepareElementFromStep',
    value: function prepareElementFromStep(currentStep) {
      var allSteps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

      var elementOptions = {};
      var querySelector = currentStep;

      // If the `currentStep` is step definition
      // then grab the options and element from the definition
      var isStepDefinition = typeof currentStep !== 'string' && !(0, _utils.isDomElement)(currentStep);

      if (!currentStep || isStepDefinition && !currentStep.element) {
        throw new Error('Element is required in step ' + index);
      }

      if (isStepDefinition) {
        querySelector = currentStep.element;
        elementOptions = Object.assign({}, this.options, currentStep);
      }

      // If the given element is a query selector or a DOM element?
      var domElement = (0, _utils.isDomElement)(querySelector) ? querySelector : this.document.querySelector(querySelector);
      if (!domElement) {
        console.warn('Element to highlight ' + querySelector + ' not found');
        return null;
      }

      var popover = null;
      if (elementOptions.popover && elementOptions.popover.title) {
        var popoverOptions = Object.assign({}, this.options, elementOptions.popover, {
          totalCount: allSteps.length,
          currentIndex: index,
          isFirst: index === 0,
          isLast: index === allSteps.length - 1
        });

        popover = new _popover2.default(popoverOptions, this.window, this.document);
      }

      var stageOptions = Object.assign({}, this.options, elementOptions);

      var stage = new _stage2.default(stageOptions, this.window, this.document);

      var mask = void 0;
      if (elementOptions.mask) {
        mask = new _mask2.default(stageOptions, this.window, this.document);
      }

      return new _element2.default({
        node: domElement,
        options: elementOptions,
        popover: popover,
        stage: stage,
        mask: mask,
        overlay: this.overlay,
        window: this.window,
        document: this.document
      });
    }

    /**
     * Initiates highlighting steps from first step
     * @param {number} index at which highlight is to be started
     * @public
     */

  }, {
    key: 'start',
    value: function start() {
      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

      if (!this.steps || this.steps.length === 0) {
        throw new Error('There are no steps defined to iterate');
      }

      this.isActivated = true;

      this.currentStep = index;
      this.overlay.highlight(this.steps[index]);
    }

    /**
     * Highlights the given element
     * @param {string|{element: string, popover: {}}} selector Query selector or a step definition
     * @public
     */

  }, {
    key: 'highlight',
    value: function highlight(selector) {
      this.isActivated = true;

      var element = this.prepareElementFromStep(selector);
      if (!element) {
        return;
      }

      this.overlay.highlight(element);
    }
  }]);
  return Driver;
}();

exports.default = Driver;

/***/ }),
/* 1349 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _constants = __webpack_require__(263);

var _utils = __webpack_require__(264);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Responsible for overlay creation and manipulation i.e.
 * cutting out the visible part, animating between the sections etc
 */
var Overlay = function () {
  /**
   * @param {Object} options
   * @param {Window} window
   * @param {Document} document
   */
  function Overlay(options, window, document) {
    (0, _classCallCheck3.default)(this, Overlay);

    this.options = options;

    this.highlightedElement = null; // currently highlighted dom element (instance of Element)
    this.lastHighlightedElement = null; // element that was highlighted before current one
    this.hideTimer = null;

    this.window = window;
    this.document = document;

    this.removeNode = this.removeNode.bind(this);
  }

  /**
   * Prepares the overlay
   * @private
   */


  (0, _createClass3.default)(Overlay, [{
    key: 'attachNode',
    value: function attachNode() {
      var pageOverlay = this.document.getElementById(_constants.ID_OVERLAY);
      if (!pageOverlay) {
        pageOverlay = (0, _utils.createNodeFromString)(_constants.OVERLAY_HTML);
        document.body.appendChild(pageOverlay);
      }

      this.node = pageOverlay;
      this.node.style.opacity = '0';

      if (!this.options.animate) {
        // For non-animation cases remove the overlay because we achieve this overlay by having
        // a higher box-shadow on the stage. Why are we doing it that way? Because the stage that
        // is shown "behind" the highlighted element to make it pop out of the screen, it introduces
        // some stacking contexts issues. To avoid those issues we just make the stage background
        // transparent and achieve the overlay using the shadow so to make the element below it visible
        // through the stage even if there are stacking issues.
        if (this.node.parentElement) {
          this.node.parentElement.removeChild(this.node);
        }
      }
    }

    /**
     * Highlights the dom element on the screen
     * @param {Element} element
     * @public
     */

  }, {
    key: 'highlight',
    value: function highlight(element) {
      if (!element || !element.node) {
        console.warn('Invalid element to highlight. Must be an instance of `Element`');
        return;
      }

      // If highlighted element is not changed from last time
      if (element.isSame(this.highlightedElement)) {
        return;
      }

      // There might be hide timer from last time
      // which might be getting triggered
      this.window.clearTimeout(this.hideTimer);

      // Trigger the hook for highlight started
      element.onHighlightStarted();

      // Old element has been deselected
      if (this.highlightedElement && !this.highlightedElement.isSame(this.lastHighlightedElement)) {
        this.highlightedElement.onDeselected();
      }

      // get the position of element around which we need to draw
      var position = element.getCalculatedPosition();
      if (!position.canHighlight()) {
        return;
      }

      this.lastHighlightedElement = this.highlightedElement;
      this.highlightedElement = element;

      this.show();

      // Element has been highlighted
      this.highlightedElement.onHighlighted();
    }

    /**
     * Shows the overlay on whole screen
     * @public
     */

  }, {
    key: 'show',
    value: function show() {
      var _this = this;

      if (this.node && this.node.parentElement) {
        return;
      }

      this.attachNode();

      window.setTimeout(function () {
        _this.node.style.opacity = '' + _this.options.opacity;
        _this.node.style.position = 'fixed';
        _this.node.style.left = '0';
        _this.node.style.top = '0';
        _this.node.style.bottom = '0';
        _this.node.style.right = '0';
      });
    }

    /**
     * Returns the currently selected element
     * @returns {null|*}
     * @public
     */

  }, {
    key: 'getHighlightedElement',
    value: function getHighlightedElement() {
      return this.highlightedElement;
    }

    /**
     * Gets the element that was highlighted before current element
     * @returns {null|*}
     * @public
     */

  }, {
    key: 'getLastHighlightedElement',
    value: function getLastHighlightedElement() {
      return this.lastHighlightedElement;
    }

    /**
     * Removes the overlay and cancel any listeners
     * @public
     */

  }, {
    key: 'clear',
    value: function clear() {
      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

      // Callback for when overlay is about to be reset
      if (this.options.onReset) {
        this.options.onReset(this.highlightedElement);
      }

      // Deselect the highlighted element if any
      if (this.highlightedElement) {
        var hideStage = true;
        this.highlightedElement.onDeselected(hideStage);
      }

      this.highlightedElement = null;
      this.lastHighlightedElement = null;

      if (!this.node) {
        return;
      }

      // Clear any existing timers and remove node
      this.window.clearTimeout(this.hideTimer);

      if (this.options.animate && !immediate) {
        this.node.style.opacity = '0';
        this.hideTimer = this.window.setTimeout(this.removeNode, _constants.ANIMATION_DURATION_MS);
      } else {
        this.removeNode();
      }
    }

    /**
     * Removes the overlay node if it exists
     * @private
     */

  }, {
    key: 'removeNode',
    value: function removeNode() {
      if (this.node && this.node.parentElement) {
        this.node.parentElement.removeChild(this.node);
      }
    }

    /**
     * Refreshes the overlay i.e. sets the size according to current window size
     * And moves the highlight around if necessary
     * @public
     */

  }, {
    key: 'refresh',
    value: function refresh() {
      // If no highlighted element, cancel the refresh
      if (!this.highlightedElement) {
        return;
      }

      // Reposition the stage and show popover
      this.highlightedElement.showPopover();
      this.highlightedElement.showStage();
    }
  }]);
  return Overlay;
}();

exports.default = Overlay;

/***/ }),
/* 1350 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Responsible for validating positions and is used
 * when manipulating positions across the application
 */
var Position = function () {
  /**
   * @param {number} left
   * @param {number} top
   * @param {number} right
   * @param {number} bottom
   */
  function Position() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
        _ref$left = _ref.left,
        left = _ref$left === undefined ? 0 : _ref$left,
        _ref$top = _ref.top,
        top = _ref$top === undefined ? 0 : _ref$top,
        _ref$right = _ref.right,
        right = _ref$right === undefined ? 0 : _ref$right,
        _ref$bottom = _ref.bottom,
        bottom = _ref$bottom === undefined ? 0 : _ref$bottom;

    (0, _classCallCheck3.default)(this, Position);

    this.left = left;
    this.right = right;
    this.top = top;
    this.bottom = bottom;
  }

  /**
   * Checks if the position is valid to be highlighted
   * @returns {boolean}
   * @public
   */


  (0, _createClass3.default)(Position, [{
    key: "canHighlight",
    value: function canHighlight() {
      return this.left < this.right && this.top < this.bottom;
    }

    /**
     * Checks if the given position is equal to the passed position
     * @param position Position
     * @returns {boolean}
     * @public
     */

  }, {
    key: "equals",
    value: function equals(position) {
      return Math.round(this.left) === Math.round(position.left) && Math.round(this.right) === Math.round(position.right) && Math.round(this.top) === Math.round(position.top) && Math.round(this.bottom) === Math.round(position.bottom);
    }
  }]);
  return Position;
}();

exports.default = Position;

/***/ }),
/* 1351 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _element = __webpack_require__(395);

var _element2 = _interopRequireDefault(_element);

var _constants = __webpack_require__(263);

var _utils = __webpack_require__(264);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DISTANCE = 26; // give it a little distance from the element

/**
 * Popover that is displayed on top of the highlighted element
 */

var Popover = function (_Element) {
  (0, _inherits3.default)(Popover, _Element);

  /**
   * @param {Object} options
   * @param {Window} window
   * @param {Document} document
   */
  function Popover(options, window, document) {
    (0, _classCallCheck3.default)(this, Popover);

    var _this = (0, _possibleConstructorReturn3.default)(this, (Popover.__proto__ || Object.getPrototypeOf(Popover)).call(this));

    _this.options = Object.assign({
      isFirst: true,
      isLast: true,
      totalCount: 1,
      currentIndex: 0,
      offset: 0,
      showButtons: true,
      closeBtnText: 'Close',
      doneBtnText: 'Done',
      startBtnText: 'Next &rarr;',
      nextBtnText: 'Next &rarr;',
      prevBtnText: '&larr; Previous'
    }, options);

    _this.window = window;
    _this.document = document;

    _this.attachNode();
    _this.hide();
    return _this;
  }

  /**
   * Prepares the dom element for popover
   * @private
   */


  (0, _createClass3.default)(Popover, [{
    key: 'attachNode',
    value: function attachNode() {
      var popover = this.document.getElementById(_constants.ID_POPOVER);
      if (!popover) {
        popover = (0, _utils.createNodeFromString)(_constants.POPOVER_HTML);
        document.body.appendChild(popover);
      }

      this.node = popover;
      this.tipNode = popover.querySelector('.' + _constants.CLASS_POPOVER_TIP);
      this.titleNode = popover.querySelector('.' + _constants.CLASS_POPOVER_TITLE);
      this.descriptionNode = popover.querySelector('.' + _constants.CLASS_POPOVER_DESCRIPTION);
      this.footerNode = popover.querySelector('.' + _constants.CLASS_POPOVER_FOOTER);
      this.nextBtnNode = popover.querySelector('.' + _constants.CLASS_NEXT_STEP_BTN);
      this.prevBtnNode = popover.querySelector('.' + _constants.CLASS_PREV_STEP_BTN);
      this.closeBtnNode = popover.querySelector('.' + _constants.CLASS_CLOSE_BTN);

      if (this.options.disablePrev) {
        this.prevBtnNode.classList.add(_constants.CLASS_BTN_HIDDEN);
      }
      if (this.options.disableClose) {
        this.closeBtnNode.classList.add(_constants.CLASS_BTN_HIDDEN);
      }
    }

    /**
     * Gets the title node for the popover
     * @returns {Element | null | *}
     * @public
     */

  }, {
    key: 'getTitleNode',
    value: function getTitleNode() {
      return this.titleNode;
    }

    /**
     * Gets the description node for the popover
     * @returns {Element | null | *}
     * @public
     */

  }, {
    key: 'getDescriptionNode',
    value: function getDescriptionNode() {
      return this.descriptionNode;
    }

    /**
     * Hides the popover
     * @public
     */

  }, {
    key: 'hide',
    value: function hide() {
      this.node.style.display = 'none';
    }

    /**
     * Sets the default state for the popover
     * @private
     */

  }, {
    key: 'setInitialState',
    value: function setInitialState() {
      this.node.style.display = 'block';
      this.node.style.left = '0';
      this.node.style.top = '0';
      this.node.style.bottom = '';
      this.node.style.right = '';

      // Remove the positional classes from tip
      this.node.querySelector('.' + _constants.CLASS_POPOVER_TIP).className = _constants.CLASS_POPOVER_TIP;
    }

    /**
     * Shows the popover at the given position
     * @param {Position} position
     * @public
     */

  }, {
    key: 'show',
    value: function show(position) {
      this.setInitialState();

      // Set the title and descriptions
      this.titleNode.innerHTML = this.options.title;
      this.descriptionNode.innerHTML = this.options.description || '';

      this.renderFooter();

      // Position the popover around the given position
      switch (this.options.position) {
        case 'left':
        case 'left-top':
          this.positionOnLeft(position);
          break;
        case 'left-center':
          this.positionOnLeftCenter(position);
          break;
        case 'left-bottom':
          this.positionOnLeftBottom(position);
          break;
        case 'right':
        case 'right-top':
          this.positionOnRight(position);
          break;
        case 'right-center':
          this.positionOnRightCenter(position);
          break;
        case 'right-bottom':
          this.positionOnRightBottom(position);
          break;
        case 'top':
        case 'top-left':
          this.positionOnTop(position);
          break;
        case 'top-center':
          this.positionOnTopCenter(position);
          break;
        case 'top-right':
          this.positionOnTopRight(position);
          break;
        case 'bottom':
        case 'bottom-left':
          this.positionOnBottom(position);
          break;
        case 'bottom-center':
          this.positionOnBottomCenter(position);
          break;
        case 'bottom-right':
          this.positionOnBottomRight(position);
          break;
        case 'auto':
        default:
          this.autoPosition(position);
          break;
      }
    }

    /**
     * Enables, disables buttons, sets the text and
     * decides if to show them or not
     * @private
     */

  }, {
    key: 'renderFooter',
    value: function renderFooter() {
      var _options = this.options,
          closeBtnText = _options.closeBtnText,
          currentIndex = _options.currentIndex,
          doneBtnText = _options.doneBtnText,
          isFirst = _options.isFirst,
          isLast = _options.isLast,
          nextBtnText = _options.nextBtnText,
          prevBtnText = _options.prevBtnText,
          showButtons = _options.showButtons,
          startBtnText = _options.startBtnText,
          totalCount = _options.totalCount;

      var nextButtonText = isLast ? doneBtnText : isFirst ? startBtnText : nextBtnText;

      this.nextBtnNode.innerHTML = totalCount > 1 ? currentIndex + 1 + '/' + totalCount + ' ' + nextButtonText : nextButtonText;
      this.prevBtnNode.innerHTML = prevBtnText;
      this.closeBtnNode.innerHTML = closeBtnText;

      if (!showButtons || !totalCount) {
        this.footerNode.style.display = 'none';
        return;
      }

      this.footerNode.style.display = 'block';
      this.prevBtnNode.classList[isFirst ? 'add' : 'remove'](_constants.CLASS_BTN_DISABLED);
      this.closeBtnNode.style.display = isLast ? 'none' : 'block';
    }

    /**
     * Shows the popover on the left of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnLeft',
    value: function positionOnLeft(elementPosition) {
      var popoverWidth = this.getSize().width;
      var popoverMargin = this.options.padding + DISTANCE;

      this.node.style.left = elementPosition.left - popoverWidth - popoverMargin + 'px';
      this.node.style.top = elementPosition.top + this.options.offset - this.options.padding + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      this.tipNode.classList.add('right');
    }

    /**
     * Shows the popover on the left of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnLeftBottom',
    value: function positionOnLeftBottom(elementPosition) {
      var popoverDimensions = this.getSize();

      var popoverWidth = popoverDimensions.width;
      var popoverMargin = this.options.padding + DISTANCE;

      this.node.style.left = elementPosition.left - popoverWidth - popoverMargin + 'px';
      this.node.style.top = elementPosition.bottom + this.options.padding + this.options.offset - popoverDimensions.height + 'px';
      this.node.style.bottom = '';
      this.node.style.right = '';

      this.tipNode.classList.add('right', 'position-bottom');
    }

    /**
     * Shows the popover on the left center of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnLeftCenter',
    value: function positionOnLeftCenter(elementPosition) {
      var popoverDimensions = this.getSize();

      var popoverWidth = popoverDimensions.width;
      var popoverHeight = popoverDimensions.height;
      var popoverCenter = popoverHeight / 2;

      var popoverMargin = this.options.padding + DISTANCE;
      var elementCenter = (elementPosition.bottom - elementPosition.top) / 2;
      var topCenterPosition = elementPosition.top - popoverCenter + elementCenter + this.options.offset;

      this.node.style.left = elementPosition.left - popoverWidth - popoverMargin + 'px';
      this.node.style.top = topCenterPosition + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      this.tipNode.classList.add('right', 'position-center');
    }

    /**
     * Shows the popover on the right of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnRight',
    value: function positionOnRight(elementPosition) {
      var popoverMargin = this.options.padding + DISTANCE;

      this.node.style.left = elementPosition.right + popoverMargin + 'px';
      this.node.style.top = elementPosition.top + this.options.offset - this.options.padding + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      this.tipNode.classList.add('left');
    }

    /**
     * Shows the popover on the right of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnRightCenter',
    value: function positionOnRightCenter(elementPosition) {
      var popoverDimensions = this.getSize();
      var popoverMargin = this.options.padding + DISTANCE;

      var popoverHeight = popoverDimensions.height;
      var popoverCenter = popoverHeight / 2;
      var elementCenter = (elementPosition.bottom - elementPosition.top) / 2;
      var topCenterPosition = elementPosition.top - popoverCenter + elementCenter + this.options.offset;

      this.node.style.left = elementPosition.right + popoverMargin + 'px';
      this.node.style.top = topCenterPosition + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      this.tipNode.classList.add('left', 'position-center');
    }

    /**
     * Shows the popover on the right of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnRightBottom',
    value: function positionOnRightBottom(elementPosition) {
      var popoverMargin = this.options.padding + DISTANCE;
      var popoverDimensions = this.getSize();

      this.node.style.left = elementPosition.right + popoverMargin + 'px';
      this.node.style.top = elementPosition.bottom + this.options.padding + this.options.offset - popoverDimensions.height + 'px';
      this.node.style.bottom = '';
      this.node.style.right = '';

      this.tipNode.classList.add('left', 'position-bottom');
    }

    /**
     * Shows the popover on the top of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnTop',
    value: function positionOnTop(elementPosition) {
      var popoverHeight = this.getSize().height;
      var popoverMargin = this.options.padding + DISTANCE;

      this.node.style.top = elementPosition.top - popoverHeight - popoverMargin + 'px';
      this.node.style.left = elementPosition.left - this.options.padding + this.options.offset + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      this.tipNode.classList.add('bottom');
    }

    /**
     * Shows the popover on the top center of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnTopCenter',
    value: function positionOnTopCenter(elementPosition) {
      var dimensions = this.getSize();
      var popoverHeight = dimensions.height;
      var popoverWidth = dimensions.width / 2;

      var popoverMargin = this.options.padding + DISTANCE;
      var nodeCenter = this.options.offset + elementPosition.left + (elementPosition.right - elementPosition.left) / 2;

      this.node.style.top = elementPosition.top - popoverHeight - popoverMargin + 'px';
      this.node.style.left = nodeCenter - popoverWidth - this.options.padding + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      // Add the tip at the top center
      this.tipNode.classList.add('bottom', 'position-center');
    }

    /**
     * Shows the popover on the top right of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnTopRight',
    value: function positionOnTopRight(elementPosition) {
      var dimensions = this.getSize();
      var popoverHeight = dimensions.height;
      var popoverMargin = this.options.padding + DISTANCE;

      this.node.style.top = elementPosition.top - popoverHeight - popoverMargin + 'px';
      this.node.style.left = elementPosition.right + this.options.padding + this.options.offset - dimensions.width + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      // Add the tip at the top center
      this.tipNode.classList.add('bottom', 'position-right');
    }

    /**
     * Shows the popover on the bottom of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnBottom',
    value: function positionOnBottom(elementPosition) {
      var popoverMargin = this.options.padding + DISTANCE;

      this.node.style.top = elementPosition.bottom + popoverMargin + 'px';
      this.node.style.left = elementPosition.left - this.options.padding + this.options.offset + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      this.tipNode.classList.add('top');
    }

    /**
     * Shows the popover on the bottom-center of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnBottomCenter',
    value: function positionOnBottomCenter(elementPosition) {
      var popoverWidth = this.getSize().width / 2;
      var popoverMargin = this.options.padding + DISTANCE;
      var nodeCenter = this.options.offset + elementPosition.left + (elementPosition.right - elementPosition.left) / 2;

      this.node.style.top = elementPosition.bottom + popoverMargin + 'px';
      this.node.style.left = nodeCenter - popoverWidth - this.options.padding + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      // Add the tip at the top center
      this.tipNode.classList.add('top', 'position-center');
    }

    /**
     * Shows the popover on the bottom-right of the given position
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'positionOnBottomRight',
    value: function positionOnBottomRight(elementPosition) {
      var dimensions = this.getSize();
      var popoverMargin = this.options.padding + DISTANCE;

      this.node.style.top = elementPosition.bottom + popoverMargin + 'px';
      this.node.style.left = elementPosition.right + this.options.padding + this.options.offset - dimensions.width + 'px';
      this.node.style.right = '';
      this.node.style.bottom = '';

      // Add the tip at the top center
      this.tipNode.classList.add('top', 'position-right');
    }

    /**
     * Automatically positions the popover around the given position
     * such that the element and popover remain in view
     * @todo add the left and right positioning decisions
     * @param {Position} elementPosition
     * @private
     */

  }, {
    key: 'autoPosition',
    value: function autoPosition(elementPosition) {
      var pageSize = this.getFullPageSize();
      var popoverSize = this.getSize();

      var pageHeight = pageSize.height;
      var popoverHeight = popoverSize.height;
      var popoverMargin = this.options.padding + DISTANCE;

      var pageHeightAfterPopOver = elementPosition.bottom + popoverHeight + popoverMargin;

      // If adding popover would go out of the window height, then show it to the top
      if (pageHeightAfterPopOver >= pageHeight) {
        this.positionOnTop(elementPosition);
      } else {
        this.positionOnBottom(elementPosition);
      }
    }
  }]);
  return Popover;
}(_element2.default);

exports.default = Popover;

/***/ }),
/* 1352 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _constants = __webpack_require__(263);

var _utils = __webpack_require__(264);

var _element = __webpack_require__(395);

var _element2 = _interopRequireDefault(_element);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Stage behind the highlighted element to give it a little
 * highlight from rest of the page
 */
var Stage = function (_Element) {
  (0, _inherits3.default)(Stage, _Element);

  /**
   * @param {Object} options
   * @param {Window} window
   * @param {Document} document
   */
  function Stage(options, window, document) {
    (0, _classCallCheck3.default)(this, Stage);

    var _this = (0, _possibleConstructorReturn3.default)(this, (Stage.__proto__ || Object.getPrototypeOf(Stage)).call(this));

    _this.options = options;
    _this.window = window;
    _this.document = document;
    return _this;
  }

  /**
   * Prepares the DOM element if not already there
   * @private
   */


  (0, _createClass3.default)(Stage, [{
    key: 'attachNode',
    value: function attachNode() {
      var stage = this.document.getElementById(_constants.ID_STAGE);
      if (!stage) {
        stage = (0, _utils.createNodeFromString)(_constants.STAGE_HTML);
        document.body.appendChild(stage);
      }

      this.node = stage;

      if (!this.options.animate) {
        this.node.classList.add(_constants.CLASS_STAGE_NO_ANIMATION);
      } else {
        this.node.classList.remove(_constants.CLASS_STAGE_NO_ANIMATION);
      }
    }

    /**
     * Simply hides the stage
     * @public
     */

  }, {
    key: 'hide',
    value: function hide() {
      if (!this.node || !this.node.parentElement) {
        return;
      }

      this.node.parentElement.removeChild(this.node);
    }

    /**
     * Makes it visible and sets the default properties
     * @private
     */

  }, {
    key: 'setInitialStyle',
    value: function setInitialStyle() {
      this.node.style.display = 'block';
      this.node.style.left = '0';
      this.node.style.top = '0';
      this.node.style.bottom = '';
      this.node.style.right = '';
    }

    /**
     * Shows the stage at provided position
     * @param {Position} position
     * @public
     */

  }, {
    key: 'show',
    value: function show(position, useCircleStage) {
      this.attachNode();

      this.setInitialStyle();

      // Make it two times the padding because, half will be given on left and half on right
      var requiredPadding = this.options.padding * 2;

      var width = position.right - position.left + requiredPadding;
      var height = position.bottom - position.top + requiredPadding;

      // Show the stage
      this.node.style.display = 'block';
      this.node.style.position = 'absolute';
      this.node.style.width = width + 'px';
      this.node.style.height = height + 'px';
      this.node.style.top = position.top - requiredPadding / 2 + 'px';
      this.node.style.left = position.left - requiredPadding / 2 + 'px';
      this.node.style.borderRadius = useCircleStage ? '50%' : '';
      this.node.style.backgroundColor = this.options.stageBackground;
    }
  }]);
  return Stage;
}(_element2.default);

exports.default = Stage;

/***/ }),
/* 1353 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _classCallCheck2 = __webpack_require__(6);

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(7);

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(10);

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(11);

var _inherits3 = _interopRequireDefault(_inherits2);

var _constants = __webpack_require__(263);

var _utils = __webpack_require__(264);

var _element = __webpack_require__(395);

var _element2 = _interopRequireDefault(_element);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Stage behind the highlighted element to give it a little
 * highlight from rest of the page
 */
var Stage = function (_Element) {
  (0, _inherits3.default)(Stage, _Element);

  /**
   * @param {Object} options
   * @param {Window} window
   * @param {Document} document
   */
  function Stage(options, window, document) {
    (0, _classCallCheck3.default)(this, Stage);

    var _this = (0, _possibleConstructorReturn3.default)(this, (Stage.__proto__ || Object.getPrototypeOf(Stage)).call(this));

    _this.options = options;
    _this.window = window;
    _this.document = document;
    return _this;
  }

  /**
   * Prepares the DOM element if not already there
   * @private
   */


  (0, _createClass3.default)(Stage, [{
    key: 'attachNode',
    value: function attachNode() {
      var stage = this.document.getElementById(_constants.ID_MASK);
      if (!stage) {
        stage = (0, _utils.createNodeFromString)(_constants.MASK_HTML);
        document.body.appendChild(stage);
      }

      this.node = stage;
    }

    /**
     * Simply hides the stage
     * @public
     */

  }, {
    key: 'hide',
    value: function hide() {
      if (!this.node || !this.node.parentElement) {
        return;
      }

      this.node.parentElement.removeChild(this.node);
    }

    /**
     * Makes it visible and sets the default properties
     * @private
     */

  }, {
    key: 'setInitialStyle',
    value: function setInitialStyle() {
      this.node.style.display = 'block';
      this.node.style.left = '0';
      this.node.style.top = '0';
      this.node.style.bottom = '';
      this.node.style.right = '';
    }

    /**
     * Shows the stage at provided position
     * @param {Position} position
     * @public
     */

  }, {
    key: 'show',
    value: function show(position) {
      this.attachNode();

      this.setInitialStyle();

      // Make it two times the padding because, half will be given on left and half on right
      var requiredPadding = this.options.padding * 2;

      var width = position.right - position.left + requiredPadding;
      var height = position.bottom - position.top + requiredPadding;

      // Show the stage
      this.node.style.display = 'block';
      this.node.style.position = 'absolute';
      this.node.style.width = width + 'px';
      this.node.style.height = height + 'px';
      this.node.style.top = position.top - requiredPadding / 2 + 'px';
      this.node.style.left = position.left - requiredPadding / 2 + 'px';
    }
  }]);
  return Stage;
}(_element2.default);

exports.default = Stage;

/***/ }),
/* 1354 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 1355 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.offCloseUndoRedoCallout = exports.onCloseUndoRedoCallout = exports.closeUndoRedoCallout = exports.offHomeTutorialFinish = exports.onHomeTutorialFinish = exports.finishHomeTutorial = exports.offTryCompleteManualGuide = exports.onTryCompleteManualGuide = exports.tryCompleteManualGuide = exports.isDriverHighlightOn = exports.setDriverHighlightFlag = exports.onDriverNextStep = exports.driverNextStep = exports.renderSteps = exports.scanSteps = exports.completeSteps = exports.acknowledgeSteps = exports.hideSteps = exports.removeSteps = exports.addSteps = undefined;

var _events = __webpack_require__(219);

var _events2 = _interopRequireDefault(_events);

var _global = __webpack_require__(473);

var _eventEmitter = __webpack_require__(110);

var _eventEmitter2 = _interopRequireDefault(_eventEmitter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Callout TourGuide communication methods
 */
var addSteps = exports.addSteps = function addSteps() {
  for (var _len = arguments.length, types = Array(_len), _key = 0; _key < _len; _key++) {
    types[_key] = arguments[_key];
  }

  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.ADD_STEP, types);
};
var removeSteps = exports.removeSteps = function removeSteps() {
  for (var _len2 = arguments.length, types = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    types[_key2] = arguments[_key2];
  }

  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.REMOVE_STEP, types);
};
var hideSteps = exports.hideSteps = function hideSteps() {
  for (var _len3 = arguments.length, types = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
    types[_key3] = arguments[_key3];
  }

  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.HIDE_STEP, types);
};
var acknowledgeSteps = exports.acknowledgeSteps = function acknowledgeSteps() {
  for (var _len4 = arguments.length, types = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
    types[_key4] = arguments[_key4];
  }

  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.ACKNOWLEDGE_STEP, types);
};
var completeSteps = exports.completeSteps = function completeSteps() {
  for (var _len5 = arguments.length, types = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
    types[_key5] = arguments[_key5];
  }

  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.COMPLETE_STEP, types);
};
var scanSteps = exports.scanSteps = function scanSteps() {
  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.SCAN_STEP);
};
var renderSteps = exports.renderSteps = function renderSteps() {
  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.RENDER_STEP);
};
/**
 * Driver communication methods
 */
var driverNextStep = exports.driverNextStep = function driverNextStep() {
  for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
    args[_key6] = arguments[_key6];
  }

  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.DRIVER_NEXT_STEP, args);
};
var onDriverNextStep = exports.onDriverNextStep = function onDriverNextStep(handler) {
  return _eventEmitter2.default.once(_events2.default.PC.DOCS.ONBOARDING.DRIVER_NEXT_STEP, handler);
};
var setDriverHighlightFlag = exports.setDriverHighlightFlag = function setDriverHighlightFlag(on) {
  (0, _global.getGlobalVar)().driverHighlightOn = on;
};
var isDriverHighlightOn = exports.isDriverHighlightOn = function isDriverHighlightOn() {
  return (0, _global.getGlobalVar)().driverHighlightOn;
};
/**
 * Home tutorial banner communication methods
 */
var tryCompleteManualGuide = exports.tryCompleteManualGuide = function tryCompleteManualGuide() {
  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.COMPLETE_MANUAL_GUIDE);
};
var onTryCompleteManualGuide = exports.onTryCompleteManualGuide = function onTryCompleteManualGuide(handler) {
  return _eventEmitter2.default.on(_events2.default.PC.DOCS.ONBOARDING.COMPLETE_MANUAL_GUIDE, handler);
};
var offTryCompleteManualGuide = exports.offTryCompleteManualGuide = function offTryCompleteManualGuide(handler) {
  return _eventEmitter2.default.off(_events2.default.PC.DOCS.ONBOARDING.COMPLETE_MANUAL_GUIDE, handler);
};
var finishHomeTutorial = exports.finishHomeTutorial = function finishHomeTutorial() {
  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.FINISH_HOME_TUTORIAL);
};
var onHomeTutorialFinish = exports.onHomeTutorialFinish = function onHomeTutorialFinish(handler) {
  return _eventEmitter2.default.on(_events2.default.PC.DOCS.ONBOARDING.FINISH_HOME_TUTORIAL, handler);
};
var offHomeTutorialFinish = exports.offHomeTutorialFinish = function offHomeTutorialFinish(handler) {
  return _eventEmitter2.default.off(_events2.default.PC.DOCS.ONBOARDING.FINISH_HOME_TUTORIAL, handler);
};
var closeUndoRedoCallout = exports.closeUndoRedoCallout = function closeUndoRedoCallout() {
  return _eventEmitter2.default.emitEvent(_events2.default.PC.DOCS.ONBOARDING.CLOSE_UNDO_REDO_CALLOUT);
};
var onCloseUndoRedoCallout = exports.onCloseUndoRedoCallout = function onCloseUndoRedoCallout(handler) {
  return _eventEmitter2.default.on(_events2.default.PC.DOCS.ONBOARDING.CLOSE_UNDO_REDO_CALLOUT, handler);
};
var offCloseUndoRedoCallout = exports.offCloseUndoRedoCallout = function offCloseUndoRedoCallout(handler) {
  return _eventEmitter2.default.off(_events2.default.PC.DOCS.ONBOARDING.CLOSE_UNDO_REDO_CALLOUT, handler);
};

/***/ }),
/* 1356 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.tutorialBannerConfig = undefined;

var _guide = __webpack_require__(310);

var _modal = __webpack_require__(334);

var _ui = __webpack_require__(1357);

var _common = __webpack_require__(19);

var _envConfigs = __webpack_require__(515);

var _onboarding = __webpack_require__(130);

var _ui2 = __webpack_require__(383);

var _linkHelper = __webpack_require__(467);

var _networkHelper = __webpack_require__(113);

var _userHelper = __webpack_require__(65);

var _$store = __webpack_require__(64);

var _$store2 = _interopRequireDefault(_$store);

var _onboarding2 = __webpack_require__(314);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var tutorialBannerConfig = exports.tutorialBannerConfig = {
    stepType: _onboarding.STEP_TYPES.home_tutorial_intro,
    getText: function getText() {
        return t('onboarding.home_tutorial.description', (0, _userHelper.getUserName)(window.User.id));
    },
    steps: [{
        stepType: _onboarding.STEP_TYPES.home_tutorial_best_practice,
        text: t('onboarding.home_tutorial.best_practice_banner'),
        steps: [{
            element: (0, _onboarding2.getMatchSelector)('best-practice-doc'),
            popover: {
                title: t('onboarding.home_tutorial.best_practice_callout'),
                doneBtnText: t('onboarding.home_tutorial.best_practice_action'),
                position: 'bottom-center'
            }
        }],
        onDone: function onDone(isInternal) {
            if (isInternal) {
                // fired by onNext button click
                var bestPracticeGuideToken = (0, _networkHelper.getEnvSpecificConfig)(_envConfigs.BEST_PRACTICE_GUIDE_DOC);
                (0, _linkHelper.openLink)({
                    url: '/doc/' + bestPracticeGuideToken,
                    title: ''
                });
                _$store2.default.dispatch((0, _guide.closeUserGuide)(_onboarding.STEP_TYPES.home_tutorial_best_practice));
            }
            /**
             * Since clicking on the pinned best practice doc should be considered as
             * complete the step, the listener that will call closeUserGuide is added in
             * TutorialBanner instead.
             */
        }
    }, {
        stepType: _onboarding.STEP_TYPES.home_tutorial_create_doc,
        text: t('onboarding.home_tutorial.create_doc_banner'),
        steps: [{
            element: (0, _onboarding2.getMatchSelector)('create-button'),
            popover: {
                title: t('onboarding.home_tutorial.create_doc_callout'),
                doneBtnText: t('onboarding.home_tutorial.create_doc_action'),
                position: 'left-center'
            }
        }],
        onDone: function onDone(isInternal) {
            if (isInternal) {
                // fired by onNext button click
                _$store2.default.dispatch((0, _ui.clickDropdownMenuItem)({
                    createType: _common.NUM_SUITE_TYPE.DOC,
                    isCtrlOrMetaKeyClicked: false,
                    menuType: _ui2.MENU_TYPE.EXPLORER_CREATE_DROPDOWN,
                    type: _ui2.explorerActionTypes.CREATE
                }));
            }
            _$store2.default.dispatch((0, _guide.closeUserGuide)(_onboarding.STEP_TYPES.home_tutorial_create_doc));
        }
    }, {
        stepType: _onboarding.STEP_TYPES.home_tutorial_shared_folder,
        text: t('onboarding.home_tutorial.shared_folder_banner'),
        steps: [{
            element: (0, _onboarding2.getMatchSelector)('add-shared-folder-button'),
            popover: {
                title: t('onboarding.home_tutorial.shared_folder_callout'),
                doneBtnText: t('onboarding.home_tutorial.shared_folder_action'),
                position: 'right-center'
            }
        }],
        onDone: function onDone(isInternal) {
            if (isInternal) {
                // fired by onNext button click
                _$store2.default.dispatch((0, _modal.openModal)(_ui2.MODAL_TYPES.CREATE_SHARE_FOLDER));
            }
            _$store2.default.dispatch((0, _guide.closeUserGuide)(_onboarding.STEP_TYPES.home_tutorial_shared_folder));
        }
    }]
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1357 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.clickDropdownMenuItem = exports.clickContextMenuItem = undefined;

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var createClickMenuItemAction = function createClickMenuItemAction(type) {
    return function (_ref) {
        var _ref$isCtrlOrMetaKeyC = _ref.isCtrlOrMetaKeyClicked,
            isCtrlOrMetaKeyClicked = _ref$isCtrlOrMetaKeyC === undefined ? false : _ref$isCtrlOrMetaKeyC,
            _ref$menuType = _ref.menuType,
            menuType = _ref$menuType === undefined ? '' : _ref$menuType,
            data = (0, _objectWithoutProperties3.default)(_ref, ['isCtrlOrMetaKeyClicked', 'menuType']);
        return {
            type: type,
            payload: Object.assign({}, data, {
                menuType: menuType,
                isCtrlOrMetaKeyClicked: isCtrlOrMetaKeyClicked
            })
        };
    };
};
var clickContextMenuItem = exports.clickContextMenuItem = createClickMenuItemAction(_$constants.actionTypes.ui.CLICK_CONTEXTMENU_ITEM);
var clickDropdownMenuItem = exports.clickDropdownMenuItem = createClickMenuItemAction(_$constants.actionTypes.ui.CLICK_DROPDOWNMENU_ITEM);

/***/ }),
/* 1358 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/***/ }),
/* 1359 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _get2 = __webpack_require__(14);

var _get3 = _interopRequireDefault(_get2);

exports.prepareCreateDocGuideWatcher = prepareCreateDocGuideWatcher;

var _effects = __webpack_require__(17);

var _onboarding = __webpack_require__(362);

var _$constants = __webpack_require__(5);

var _onboarding2 = __webpack_require__(130);

var _sagaHelper = __webpack_require__(333);

var _etherpad = __webpack_require__(563);

var _suite = __webpack_require__(84);

var _user = __webpack_require__(72);

var _guide = __webpack_require__(455);

var _guide2 = __webpack_require__(310);

var _preferenceStorageHelper = __webpack_require__(821);

var _utils = __webpack_require__(541);

var _eventEmitter = __webpack_require__(110);

var _eventEmitter2 = _interopRequireDefault(_eventEmitter);

var _events = __webpack_require__(219);

var _events2 = _interopRequireDefault(_events);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(prepareCreateDocGuideWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(prepareMobileCreateDocGuideSaga),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(prepareCreateDocGuideSaga);
// import { closeUserGuide, updateUserGuide } from '$actions/guide';

// import collectEvent from '$log/tea';

// import { getGroupIntroStep } from '$utils/onboarding';


var CREATE_DOC_TIME_WINDOW = 15 * 1000;
// const CREATE_DOC_COUNT_THRESHOLD = 5;
function prepareCreateDocGuideWatcher() {
    return _regenerator2.default.wrap(function prepareCreateDocGuideWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.onboarding.CREATE_DOC_GUIDE_PREPARE], (0, _sagaHelper.guardWorkerSaga)(prepareMobileCreateDocGuideSaga));

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function prepareMobileCreateDocGuideSaga() {
    return _regenerator2.default.wrap(function prepareMobileCreateDocGuideSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.call)(prepareCreateDocGuideSaga);

                case 2:
                    _context2.next = 4;
                    return (0, _effects.put)((0, _onboarding.setCreateDocCheckDone)());

                case 4:
                    _eventEmitter2.default.trigger(_events2.default.MOBILE.COMMON.USER_GUIDE.CREATE_DOC_TEMPLATE_SET);

                case 5:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function prepareCreateDocGuideSaga() {
    var mobileLocalUserGuide, hasCreateDocInMobile, groupType, isDone, isNewUser, currentUser, currentSuite, ownerId, createTime, isDocJustCreated, clientVars, initialText, editor;
    return _regenerator2.default.wrap(function prepareCreateDocGuideSaga$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.select)(_guide.selectMobileLocalUserGuide);

                case 2:
                    mobileLocalUserGuide = _context3.sent;
                    hasCreateDocInMobile = mobileLocalUserGuide && mobileLocalUserGuide.getIn([_onboarding2.MOBILE_STEP_TYPES.mobile_new_doc_user_create, _onboarding2.STEP_STATE.DONE]);

                    if (!hasCreateDocInMobile) {
                        _context3.next = 6;
                        break;
                    }

                    return _context3.abrupt('return');

                case 6:
                    // pc 主动创建过文档，即已完成新建文档引导则不再显示
                    groupType = _onboarding2.GROUP_TYPE.CREATE_DOC;
                    _context3.next = 9;
                    return (0, _effects.call)(_utils.isGuideGroupDoneSaga, groupType);

                case 9:
                    isDone = _context3.sent;

                    if (!isDone) {
                        _context3.next = 12;
                        break;
                    }

                    return _context3.abrupt('return');

                case 12:
                    _context3.next = 14;
                    return (0, _effects.select)(_guide.selectIsNewDocUser);

                case 14:
                    isNewUser = _context3.sent;

                    if (isNewUser) {
                        _context3.next = 17;
                        break;
                    }

                    return _context3.abrupt('return');

                case 17:
                    _context3.next = 19;
                    return (0, _effects.select)(_user.selectCurrentUser);

                case 19:
                    currentUser = _context3.sent;
                    _context3.next = 22;
                    return (0, _effects.select)(_suite.selectCurrentSuiteByObjToken);

                case 22:
                    currentSuite = _context3.sent;

                    if (currentSuite) {
                        _context3.next = 29;
                        break;
                    }

                    _context3.next = 26;
                    return (0, _effects.take)(_$constants.actionTypes.suite.FETCH_CURRENT_SUITE_SUCCESS);

                case 26:
                    _context3.next = 28;
                    return (0, _effects.select)(_suite.selectCurrentSuiteByObjToken);

                case 28:
                    currentSuite = _context3.sent;

                case 29:
                    ownerId = currentSuite.get('owner_id');
                    // ownerId will be falsy if suite data fetch fails

                    if (!(!ownerId || currentUser.get('id') !== ownerId)) {
                        _context3.next = 32;
                        break;
                    }

                    return _context3.abrupt('return');

                case 32:
                    // const currentSuiteToken = yield select(selectCurrentSuiteToken);
                    // if (markedSuiteToken) {
                    //   const result = yield put.resolve(updateUserGuide(introStep));
                    //   if (get(result, 'payload.is_done') === true) {
                    //     collectEvent('empty_doc_onboarding', { onboarding_tour_status: 'close' });
                    //     return;
                    //   }
                    //   if (markedSuiteToken === currentSuiteToken) {
                    //     yield put(setCreateDocGuideReady(true));
                    //   }
                    //   return;
                    // }
                    createTime = currentSuite.get('create_time');
                    isDocJustCreated = Date.now() - createTime * 1000 < CREATE_DOC_TIME_WINDOW;

                    if (isDocJustCreated) {
                        _context3.next = 36;
                        break;
                    }

                    return _context3.abrupt('return');

                case 36:
                    _context3.next = 38;
                    return (0, _effects.select)(_etherpad.selectClientVars);

                case 38:
                    clientVars = _context3.sent;
                    initialText = (0, _get3.default)(clientVars, 'collab_client_vars.initialAttributedText.text');

                    if (!(initialText !== '\n\n')) {
                        _context3.next = 42;
                        break;
                    }

                    return _context3.abrupt('return');

                case 42:
                    _context3.next = 44;
                    return (0, _effects.select)(_etherpad.selectEditor);

                case 44:
                    editor = _context3.sent;

                    if (editor) {
                        _context3.next = 52;
                        break;
                    }

                    _context3.next = 48;
                    return (0, _effects.take)(_$constants.actionTypes.etherpad.SET_EDITOR);

                case 48:
                    _context3.next = 50;
                    return (0, _effects.select)(_etherpad.selectEditor);

                case 50:
                    editor = _context3.sent;
                    return _context3.abrupt('return');

                case 52:
                    // Apply the template and save the doc token to server
                    applyCreateDocTemplate(editor, currentUser.get('id'));
                    // 重新取一次，防止中途mobileLocalUserGuide发生变化
                    _context3.next = 55;
                    return (0, _effects.select)(_guide.selectMobileLocalUserGuide);

                case 55:
                    mobileLocalUserGuide = _context3.sent;

                    // 更新本地存储
                    (0, _preferenceStorageHelper.setPreference)({
                        key: 'USER_GUIDE',
                        value: Object.assign({}, mobileLocalUserGuide.toJS(), (0, _defineProperty3.default)({}, _onboarding2.MOBILE_STEP_TYPES.mobile_new_doc_user_create, {
                            is_done: true
                        }))
                    });
                    _context3.next = 59;
                    return (0, _effects.put)((0, _guide2.updateLocalUserGuideInfo)(_onboarding2.MOBILE_STEP_TYPES.mobile_new_doc_user_create));

                case 59:
                    _context3.next = 61;
                    return (0, _effects.put)((0, _onboarding.setCreateDocGuideReady)(true));

                case 61:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
function applyCreateDocTemplate(editor, userId) {
    // IMPORTANT - the SPACE before the last '\n' (' \n') is REQUIRED
    // editor.replaceAllText(
    //   `${t('onboarding.create_doc.template_title')}\n${t('onboarding.create_doc.template_body')} \n`,
    // );
    // setTimeout(() => {
    //   editor.changesetTracker.tryChangeCallback();
    // });
    var apool = {
        nextNum: 11,
        numToAttrib: {
            0: ['author', userId],
            1: ['lineguid', 'NKGczU'],
            2: ['lineguid', 'NgfIQt'],
            3: ['horizontal-line', 'true'],
            4: ['lineguid', 'G6LMf2'],
            5: ['insertorder', 'first'],
            6: ['list', 'check1'],
            7: ['lmkr', '1'],
            8: ['lineguid', 'jgjjDD'],
            9: ['lineguid', 'ChGm1L'],
            10: ['lineguid', 'BXOrXm']
        }
    };
    var blank = ' ';
    var texts = [t('mobile.onboarding.create_doc.template_title'), t('mobile.onboarding.create_doc.template_first_row'), t('mobile.onboarding.create_doc.template_todo'), t('mobile.onboarding.create_doc.template_todo_task'), t('mobile.onboarding.create_doc.template_todo_checkbo'), t('mobile.onboarding.create_doc.template_mention')];
    var textToLen36 = function textToLen36(index) {
        return (texts[index] || '').length.toString(36);
    };
    /* eslint-disable */
    /* tslint:disable */
    // 不要轻易修改下面的格式，attribs 和 text 需要严格对应。 https://bytedance.feishu.cn/space/doc/P5zOxptehRIXe1e6nqydid
    var initialAttributedText = {
        attribs: '*0*1+' + textToLen36(0) + '|1+1*0*2+' + textToLen36(1) + '*0|1+1*3|2+3*0*4+' + textToLen36(2) + '*0|1+1*5*6*7+1*0*8+' + textToLen36(3) + '*0|1+1*5*6*7+1*0*9+' + textToLen36(4) + '*0|1+1*3|2+3*0*a+' + textToLen36(5) + '*0|2+2|1+1',
        text: texts[0] + '\n' + texts[1] + '\n\n' + blank + '\n' + texts[2] + '\n*' + texts[3] + '\n*' + texts[4] + '\n\n' + blank + '\n' + texts[5] + '\n\n\n'
    };
    /* tslint:enable */
    /* eslint-enable */
    editor.setClientVars({
        apool: apool,
        initialAttributedText: initialAttributedText
    });
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1360 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.homeGuidePrepareWatcher = homeGuidePrepareWatcher;
exports.homeGuideCloseWatcher = homeGuideCloseWatcher;

var _effects = __webpack_require__(17);

var _guide = __webpack_require__(310);

var _$constants = __webpack_require__(5);

var _sagaHelper = __webpack_require__(333);

var _guide2 = __webpack_require__(455);

var _onboarding = __webpack_require__(314);

var _config = __webpack_require__(1361);

var _config2 = _interopRequireDefault(_config);

var _common = __webpack_require__(540);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(homeGuidePrepareWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(homeGuideCloseWatcher),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(homeGuidePrepareSaga),
    _marked4 = /*#__PURE__*/_regenerator2.default.mark(defaultBannerHandleSaga),
    _marked5 = /*#__PURE__*/_regenerator2.default.mark(homeGuideCloseSaga);

var currentBanner = void 0;
function homeGuidePrepareWatcher() {
    return _regenerator2.default.wrap(function homeGuidePrepareWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.onboarding.HOME_GUIDE_PREPARE], (0, _sagaHelper.guardWorkerSaga)(homeGuidePrepareSaga));

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function homeGuideCloseWatcher() {
    return _regenerator2.default.wrap(function homeGuideCloseWatcher$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.onboarding.HOME_GUIDE_CLOSE], (0, _sagaHelper.guardWorkerSaga)(homeGuideCloseSaga));

                case 2:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function homeGuidePrepareSaga() {
    var userGuide, i, _banners$i, stepType, mainSaga, setReadyAction, isBannerDone, prevStepType, isPrevUserGuideExpired;

    return _regenerator2.default.wrap(function homeGuidePrepareSaga$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.call)(_common.fetchLatestGuideSaga);

                case 2:
                    _context3.next = 4;
                    return (0, _effects.select)(_guide2.selectUserGuide);

                case 4:
                    userGuide = _context3.sent;
                    i = 0;

                case 6:
                    if (!(i < _config2.default.length)) {
                        _context3.next = 31;
                        break;
                    }

                    _banners$i = _config2.default[i], stepType = _banners$i.stepType, mainSaga = _banners$i.mainSaga, setReadyAction = _banners$i.setReadyAction;
                    isBannerDone = (0, _onboarding.isGuideTypeDone)(userGuide, stepType);

                    if (isBannerDone) {
                        _context3.next = 26;
                        break;
                    }

                    if (!(i > 0)) {
                        _context3.next = 17;
                        break;
                    }

                    prevStepType = _config2.default[i - 1].stepType;
                    isPrevUserGuideExpired = (0, _onboarding.isGuideTypeExpired)(userGuide, prevStepType);

                    if (isPrevUserGuideExpired) {
                        _context3.next = 17;
                        break;
                    }

                    _context3.next = 16;
                    return (0, _effects.put)(setReadyAction(false));

                case 16:
                    return _context3.abrupt('return');

                case 17:
                    currentBanner = _config2.default[i];

                    if (!mainSaga) {
                        _context3.next = 23;
                        break;
                    }

                    _context3.next = 21;
                    return (0, _effects.call)(mainSaga);

                case 21:
                    _context3.next = 25;
                    break;

                case 23:
                    _context3.next = 25;
                    return (0, _effects.call)(defaultBannerHandleSaga, _config2.default[i]);

                case 25:
                    return _context3.abrupt('return');

                case 26:
                    _context3.next = 28;
                    return (0, _effects.put)(setReadyAction(false));

                case 28:
                    i++;
                    _context3.next = 6;
                    break;

                case 31:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}
// Default handling for simple banners
function defaultBannerHandleSaga(_ref) {
    var isPersistent = _ref.isPersistent,
        stepType = _ref.stepType,
        setReadyAction = _ref.setReadyAction;

    var _ref2, started;

    return _regenerator2.default.wrap(function defaultBannerHandleSaga$(_context4) {
        while (1) {
            switch (_context4.prev = _context4.next) {
                case 0:
                    if (isPersistent) {
                        _context4.next = 3;
                        break;
                    }

                    _context4.next = 3;
                    return (0, _effects.put)((0, _guide.updateUserGuide)(stepType));

                case 3:
                    _context4.next = 5;
                    return (0, _effects.put)(setReadyAction(true, true));

                case 5:
                    _context4.next = 7;
                    return (0, _effects.race)({
                        started: (0, _effects.take)(_$constants.actionTypes.onboarding.HOME_GUIDE_START),
                        canceled: (0, _effects.take)(_$constants.actionTypes.onboarding.HOME_GUIDE_CANCEL),
                        closed: (0, _effects.take)(_$constants.actionTypes.onboarding.HOME_GUIDE_CLOSE)
                    });

                case 7:
                    _ref2 = _context4.sent;
                    started = _ref2.started;

                    if (!started) {
                        _context4.next = 12;
                        break;
                    }

                    _context4.next = 12;
                    return (0, _effects.call)(homeGuideCloseSaga);

                case 12:
                case 'end':
                    return _context4.stop();
            }
        }
    }, _marked4, this);
}
function homeGuideCloseSaga() {
    var _currentBanner, stepType, setReadyAction;

    return _regenerator2.default.wrap(function homeGuideCloseSaga$(_context5) {
        while (1) {
            switch (_context5.prev = _context5.next) {
                case 0:
                    if (currentBanner) {
                        _context5.next = 2;
                        break;
                    }

                    return _context5.abrupt('return');

                case 2:
                    _currentBanner = currentBanner, stepType = _currentBanner.stepType, setReadyAction = _currentBanner.setReadyAction;
                    _context5.next = 5;
                    return (0, _effects.put)((0, _guide.closeUserGuide)(stepType, JSON.stringify({
                        closeTime: Date.now()
                    })));

                case 5:
                    _context5.next = 7;
                    return (0, _effects.put)(setReadyAction(false));

                case 7:
                    currentBanner = null;

                case 8:
                case 'end':
                    return _context5.stop();
            }
        }
    }, _marked5, this);
}

/***/ }),
/* 1361 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _onboarding = __webpack_require__(362);

var _onboarding2 = __webpack_require__(130);

// const tutorialBanner = {
//   stepType: STEP_TYPES.home_tutorial_intro,
//   setReadyAction: setHomeTutorialReady,
//   isPersistent: true,
// };
var mentionPromoBanner = {
    stepType: _onboarding2.STEP_TYPES.mention_intro,
    setReadyAction: _onboarding.setMentionGuideReady
};
var banners = [
// tutorialBanner,
mentionPromoBanner];
exports.default = banners;

/***/ }),
/* 1362 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _get2 = __webpack_require__(14);

var _get3 = _interopRequireDefault(_get2);

exports.prepareSharedDocGuideWatcher = prepareSharedDocGuideWatcher;

var _effects = __webpack_require__(17);

var _guide = __webpack_require__(310);

var _onboarding = __webpack_require__(362);

var _$constants = __webpack_require__(5);

var _onboarding2 = __webpack_require__(130);

var _sagaHelper = __webpack_require__(333);

var _tea = __webpack_require__(42);

var _tea2 = _interopRequireDefault(_tea);

var _etherpad = __webpack_require__(563);

var _suite = __webpack_require__(84);

var _user = __webpack_require__(72);

var _onboarding3 = __webpack_require__(314);

var _utils = __webpack_require__(541);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(prepareSharedDocGuideWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(prepareSharedDocGuideSaga);

var OPEN_SHARE_COUNT_THRESHOLD = 3;
function prepareSharedDocGuideWatcher() {
    return _regenerator2.default.wrap(function prepareSharedDocGuideWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.onboarding.SHARED_DOC_GUIDE_PREPARE], (0, _sagaHelper.guardWorkerSaga)(prepareSharedDocGuideSaga));

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function prepareSharedDocGuideSaga() {
    var groupType, isDone, introStep, context, profileChecked, openShareCount, currentUser, currentSuite, ownerId, editor, result;
    return _regenerator2.default.wrap(function prepareSharedDocGuideSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    groupType = _onboarding2.GROUP_TYPE.SHARED_DOC;
                    _context2.next = 3;
                    return (0, _effects.call)(_utils.isGuideGroupDoneSaga, groupType);

                case 3:
                    isDone = _context2.sent;

                    if (!isDone) {
                        _context2.next = 6;
                        break;
                    }

                    return _context2.abrupt('return');

                case 6:
                    introStep = (0, _onboarding3.getGroupIntroStep)(groupType);
                    _context2.next = 9;
                    return (0, _effects.call)(_utils.getGuideTypeContextSaga, introStep);

                case 9:
                    context = _context2.sent;
                    profileChecked = Boolean(context && context.profileChecked);

                    if (profileChecked) {
                        _context2.next = 22;
                        break;
                    }

                    _context2.next = 14;
                    return (0, _effects.call)(_utils.getUserProfileAttrSaga, _onboarding2.PROFILE_GROUP.USER, _onboarding2.PROFILE.user.docs_acc_open_share_count);

                case 14:
                    openShareCount = _context2.sent;

                    if (!(openShareCount === -1)) {
                        _context2.next = 17;
                        break;
                    }

                    return _context2.abrupt('return');

                case 17:
                    if (!(openShareCount > OPEN_SHARE_COUNT_THRESHOLD)) {
                        _context2.next = 21;
                        break;
                    }

                    _context2.next = 20;
                    return (0, _effects.put)((0, _guide.closeUserGuide)(introStep));

                case 20:
                    return _context2.abrupt('return');

                case 21:
                    profileChecked = true;

                case 22:
                    _context2.next = 24;
                    return (0, _effects.select)(_user.selectCurrentUser);

                case 24:
                    currentUser = _context2.sent;
                    _context2.next = 27;
                    return (0, _effects.select)(_suite.selectCurrentSuiteByObjToken);

                case 27:
                    currentSuite = _context2.sent;

                    if (currentSuite) {
                        _context2.next = 34;
                        break;
                    }

                    _context2.next = 31;
                    return (0, _effects.take)(_$constants.actionTypes.suite.FETCH_CURRENT_SUITE_SUCCESS);

                case 31:
                    _context2.next = 33;
                    return (0, _effects.select)(_suite.selectCurrentSuiteByObjToken);

                case 33:
                    currentSuite = _context2.sent;

                case 34:
                    ownerId = currentSuite.get('owner_id');
                    // ownerId will be falsy if suite data fetch fails

                    if (!(!ownerId || currentUser.get('id') === ownerId)) {
                        _context2.next = 37;
                        break;
                    }

                    return _context2.abrupt('return');

                case 37:
                    _context2.next = 39;
                    return (0, _effects.take)(_$constants.actionTypes.etherpad.SET_EDITOR);

                case 39:
                    _context2.next = 41;
                    return (0, _effects.select)(_etherpad.selectEditor);

                case 41:
                    editor = _context2.sent;

                    if (!contentHasNoHeading(editor)) {
                        _context2.next = 44;
                        break;
                    }

                    return _context2.abrupt('return');

                case 44:
                    _context2.next = 46;
                    return _effects.put.resolve((0, _guide.updateUserGuide)(introStep, JSON.stringify({ profileChecked: profileChecked })));

                case 46:
                    result = _context2.sent;

                    if (!((0, _get3.default)(result, 'payload.is_done') === true)) {
                        _context2.next = 50;
                        break;
                    }

                    (0, _tea2.default)('shared_doc_onboarding', { onboarding_tour_status: 'close' });
                    return _context2.abrupt('return');

                case 50:
                    _context2.next = 52;
                    return (0, _effects.put)((0, _onboarding.setSharedDocGuideReady)(true));

                case 52:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function contentHasNoHeading(editor) {
    var headerPairs = getLineEntryIndexPairs(editor).filter(filterHeaderPairs);
    return !headerPairs.length;
}
function getLineEntryIndexPairs(editor) {
    var _editor$getRep = editor.getRep(),
        lines = _editor$getRep.lines;

    var lineEntryIndexPairs = [];
    var index = 0;
    for (var entry = lines.atIndex(0); entry !== null; entry = lines.next(entry), index += 1) {
        lineEntryIndexPairs.push({ entry: entry, index: index });
    }
    return lineEntryIndexPairs;
}
function filterHeaderPairs(pair, index) {
    var entry = pair.entry;
    // 过滤掉空标题和 header, 第一个 entry 是标题

    if (!entry.lineNode.textContent || index === 0) return false;
    // 匹配 H1、H2、H3
    return (/(?:^| )heading-h[123](?: |$)/.test(entry.lineNode.className)
    );
}

/***/ }),
/* 1363 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.undoRedoGuideCheckWatcher = undoRedoGuideCheckWatcher;

var _effects = __webpack_require__(17);

var _onboarding = __webpack_require__(362);

var _$constants = __webpack_require__(5);

var _onboarding2 = __webpack_require__(130);

var _sagaHelper = __webpack_require__(333);

var _common = __webpack_require__(540);

var _utils = __webpack_require__(541);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(undoRedoGuideCheckWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(undoRedoGuideCheckSaga);

var SEVEN_DAYS = 7 * 24 * 60 * 60;
function undoRedoGuideCheckWatcher() {
    return _regenerator2.default.wrap(function undoRedoGuideCheckWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_$constants.actionTypes.onboarding.UNDO_REDO_GUIDE_CHECK_STATE], (0, _sagaHelper.guardWorkerSaga)(undoRedoGuideCheckSaga));

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function undoRedoGuideCheckSaga() {
    var isGuideDone, redoCount, undoCount, createFirstFileTime;
    return _regenerator2.default.wrap(function undoRedoGuideCheckSaga$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.call)(_common.fetchLatestGuideSaga);

                case 2:
                    _context2.next = 4;
                    return (0, _effects.call)(_utils.isGuideTypeDoneSaga, _onboarding2.STEP_TYPES.undo_redo_callout);

                case 4:
                    isGuideDone = _context2.sent;

                    if (!isGuideDone) {
                        _context2.next = 7;
                        break;
                    }

                    return _context2.abrupt('return');

                case 7:
                    _context2.next = 9;
                    return (0, _effects.call)(_utils.getUserProfileAttrSaga, _onboarding2.PROFILE_GROUP.USER, _onboarding2.PROFILE.user.docs_acc_editor_redo_count);

                case 9:
                    redoCount = _context2.sent;

                    if (!(redoCount === -1 || redoCount > 0)) {
                        _context2.next = 12;
                        break;
                    }

                    return _context2.abrupt('return');

                case 12:
                    _context2.next = 14;
                    return (0, _effects.call)(_utils.getUserProfileAttrSaga, _onboarding2.PROFILE_GROUP.USER, _onboarding2.PROFILE.user.docs_acc_editor_undo_count);

                case 14:
                    undoCount = _context2.sent;

                    if (!(undoCount === -1 || undoCount > 0)) {
                        _context2.next = 17;
                        break;
                    }

                    return _context2.abrupt('return');

                case 17:
                    _context2.next = 19;
                    return (0, _effects.call)(_utils.getUserProfileAttrSaga, _onboarding2.PROFILE_GROUP.USER, _onboarding2.PROFILE.user.docs_first_create_file_time);

                case 19:
                    createFirstFileTime = _context2.sent;

                    if (!(createFirstFileTime === -1 || Date.now() / 1000 - createFirstFileTime < SEVEN_DAYS)) {
                        _context2.next = 22;
                        break;
                    }

                    return _context2.abrupt('return');

                case 22:
                    _context2.next = 24;
                    return (0, _effects.take)(_$constants.actionTypes.etherpad.SET_EDITOR);

                case 24:
                    _context2.next = 26;
                    return (0, _effects.put)((0, _onboarding.setUndoRedoGuideStateOn)());

                case 26:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}

/***/ }),
/* 1364 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(12);

var _regenerator2 = _interopRequireDefault(_regenerator);

exports.default = userSaga;

var _effects = __webpack_require__(17);

var _constants = __webpack_require__(5);

var _translate = __webpack_require__(772);

var translateActions = _interopRequireWildcard(_translate);

var _translate2 = __webpack_require__(764);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _marked = /*#__PURE__*/_regenerator2.default.mark(fetchTranslateConfigWatcher),
    _marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchTranslateConfig),
    _marked3 = /*#__PURE__*/_regenerator2.default.mark(userSaga);

function fetchTranslateConfigWatcher() {
    return _regenerator2.default.wrap(function fetchTranslateConfigWatcher$(_context) {
        while (1) {
            switch (_context.prev = _context.next) {
                case 0:
                    _context.next = 2;
                    return (0, _effects.takeEvery)([_constants.actionTypes.translate.GET_TRANSLATE_CONFIG_SUCCESS, _constants.actionTypes.translate.GET_TRANSLATE_CONFIG_FAIL], fetchTranslateConfig);

                case 2:
                case 'end':
                    return _context.stop();
            }
        }
    }, _marked, this);
}
function fetchTranslateConfig(action) {
    var translateStatus, _action$payload, target_lang, src_lang;

    return _regenerator2.default.wrap(function fetchTranslateConfig$(_context2) {
        while (1) {
            switch (_context2.prev = _context2.next) {
                case 0:
                    _context2.next = 2;
                    return (0, _effects.select)(_translate2.selectTranslateStatus);

                case 2:
                    translateStatus = _context2.sent;

                    if (translateStatus.translating) {
                        _context2.next = 5;
                        break;
                    }

                    return _context2.abrupt('return');

                case 5:
                    if (!(action.type === _constants.actionTypes.translate.GET_TRANSLATE_CONFIG_FAIL)) {
                        _context2.next = 9;
                        break;
                    }

                    _context2.next = 8;
                    return (0, _effects.put)(translateActions.updateTranslateStatus({ translating: false }));

                case 8:
                    return _context2.abrupt('return');

                case 9:
                    _action$payload = action.payload, target_lang = _action$payload.target_lang, src_lang = _action$payload.src_lang;
                    // 翻译目标语言与原文语言相同不翻译

                    if (!(target_lang === src_lang)) {
                        _context2.next = 14;
                        break;
                    }

                    _context2.next = 13;
                    return (0, _effects.put)(translateActions.updateTranslateStatus({ translating: false }));

                case 13:
                    return _context2.abrupt('return');

                case 14:
                case 'end':
                    return _context2.stop();
            }
        }
    }, _marked2, this);
}
function userSaga() {
    return _regenerator2.default.wrap(function userSaga$(_context3) {
        while (1) {
            switch (_context3.prev = _context3.next) {
                case 0:
                    _context3.next = 2;
                    return (0, _effects.all)([(0, _effects.fork)(fetchTranslateConfigWatcher)]);

                case 2:
                case 'end':
                    return _context3.stop();
            }
        }
    }, _marked3, this);
}

/***/ }),
/* 1365 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.makeRootReducer = undefined;

var _redux = __webpack_require__(66);

var _reactRouterRedux = __webpack_require__(173);

var _user = __webpack_require__(1366);

var fromUser = _interopRequireWildcard(_user);

var _suite = __webpack_require__(1367);

var fromSuite = _interopRequireWildcard(_suite);

var _guide = __webpack_require__(1368);

var fromGuide = _interopRequireWildcard(_guide);

var _share = __webpack_require__(1369);

var fromShare = _interopRequireWildcard(_share);

var _docHistory = __webpack_require__(1370);

var _docHistory2 = _interopRequireDefault(_docHistory);

var _explorer = __webpack_require__(1373);

var fromExplorer = _interopRequireWildcard(_explorer);

var _onboarding = __webpack_require__(1382);

var fromOnboarding = _interopRequireWildcard(_onboarding);

var _route = __webpack_require__(1383);

var fromRoute = _interopRequireWildcard(_route);

var _service = __webpack_require__(1384);

var fromService = _interopRequireWildcard(_service);

var _message = __webpack_require__(1385);

var fromMessage = _interopRequireWildcard(_message);

var _labs = __webpack_require__(1393);

var fromLabs = _interopRequireWildcard(_labs);

var _sidebar = __webpack_require__(1397);

var fromSidebar = _interopRequireWildcard(_sidebar);

var _modal = __webpack_require__(1398);

var fromModal = _interopRequireWildcard(_modal);

var _header = __webpack_require__(1399);

var fromHeader = _interopRequireWildcard(_header);

var _sheet = __webpack_require__(1400);

var _sheet2 = _interopRequireDefault(_sheet);

var _etherpad = __webpack_require__(1402);

var fromEtherpad = _interopRequireWildcard(_etherpad);

var _comment = __webpack_require__(1403);

var _comment2 = _interopRequireDefault(_comment);

var _history = __webpack_require__(1405);

var _history2 = _interopRequireDefault(_history);

var _updateChecking = __webpack_require__(1407);

var _updateChecking2 = _interopRequireDefault(_updateChecking);

var _member = __webpack_require__(1408);

var _navBackUrl = __webpack_require__(1414);

var _error = __webpack_require__(1415);

var _fetchStatus = __webpack_require__(1416);

var _network = __webpack_require__(1417);

var _like = __webpack_require__(526);

var _like2 = _interopRequireDefault(_like);

var _translate = __webpack_require__(1418);

var _translate2 = _interopRequireDefault(_translate);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var makeRootReducer = exports.makeRootReducer = function makeRootReducer(asyncReducers) {
  return (0, _redux.combineReducers)(Object.assign({
    updateChecking: _updateChecking2.default,
    entities: (0, _redux.combineReducers)({
      folderPermissions: fromShare.folderPermissions,
      permissions: fromShare.permissions,
      users: fromUser.users,
      nodes: fromExplorer.nodes,
      objs: fromExplorer.objs
    }),
    appState: (0, _redux.combineReducers)({
      currentUser: fromUser.currentUser,
      currentNoteToken: fromSuite.currentNoteToken,
      userGuide: fromGuide.userGuide,
      noteMeta: fromSuite.noteMeta,
      shouldPrint: fromSuite.shouldPrint,
      staredFileMetas: fromExplorer.staredFileMetas,
      pinedFileMetas: fromExplorer.pinedFileMetas,
      currentPath: fromExplorer.currentPath,
      currentFileToken: fromExplorer.currentFileToken,
      selectedFileMetas: fromExplorer.selectedFileMetas,
      fileTokens: fromExplorer.fileTokens,
      shareObjectsList: fromExplorer.shareObjectsList,
      recentObjs: fromExplorer.recentObjs,
      onboarding: fromOnboarding.onboarding,
      // selectedFolderData: fromExplorer.selectedFolderData,
      trClicked: fromExplorer.trClicked,
      shouldLoadShare: fromExplorer.shouldLoadShare,
      hasShareFolder: fromExplorer.hasShareFolder,
      folderTree: fromExplorer.folderTree,
      shareTree: fromExplorer.shareTree,
      explorerPaginationInfo: fromExplorer.explorerPaginationInfo,
      rootToken: fromExplorer.rootToken,
      rootMetaLoadingStatus: fromExplorer.rootMetaLoadingStatus,
      explorerListLoadingStatus: fromExplorer.explorerListLoadingStatus,
      route: fromRoute.route,
      fileTokensHistory: fromExplorer.fileTokensHistory,
      members: _member.members,
      currentMemberId: _member.currentMemberId,
      etherpad: fromEtherpad.etherpad,
      message: fromMessage.message,
      messageShowing: fromMessage.messageShowing,
      comment: _comment2.default,
      history: _history2.default,
      docHistory: _docHistory2.default,
      fetchStatus: _fetchStatus.fetchStatus,
      failedServices: fromService.failedServices,
      error: _error.error,
      router: _reactRouterRedux.routerReducer,
      backUrlMap: _navBackUrl.backUrlMap,
      labList: fromLabs.labList,
      sidebarStatus: fromSidebar.sidebarStatus,
      ui: (0, _redux.combineReducers)({
        currentModals: fromModal.currentModals
      }),
      headerStatus: fromHeader.headerStatus,
      curLarkTitle: fromHeader.curLarkTitle,
      networkState: _network.networkState,
      like: _like2.default,
      translate: _translate2.default
    }),
    sheet: _sheet2.default
  }, asyncReducers));
};

/* etherpad relatives */
exports.default = makeRootReducer;

/***/ }),
/* 1366 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.currentUser = exports.users = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _handleActions, _handleActions2;

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _get = __webpack_require__(83);

var _get2 = _interopRequireDefault(_get);

var _mapValues = __webpack_require__(513);

var _mapValues2 = _interopRequireDefault(_mapValues);

var _User = __webpack_require__(684);

var _utils = __webpack_require__(542);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var updateOldUserEntity = function updateOldUserEntity(oldEntity, entity2Merge) {
    return oldEntity ? oldEntity.mergeWith(_utils.keepNext, new _User.User(entity2Merge)) : new _User.User(entity2Merge);
};
var users = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_FILE_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_RECENT_OBJS_SUCCESS, _$constants.actionTypes.explorer.FETCH_SHARE_HOME_SUCCESS, _$constants.actionTypes.explorer.FETCH_MEMBERS_OF_SHARE_FOLDER_SUCCESS, _$constants.actionTypes.explorer.FETCH_ROOT_SHARE_FOLDER_SUCCESS, _$constants.actionTypes.comment.docComment.FETCH_COMMENT_LIST_SUCCESS, _$constants.actionTypes.search.FETCH_SEARCH_SUITE_SUCCESS, _$constants.actionTypes.search.FETCH_SEARCH_USER_SUCCESS, _$constants.actionTypes.pageMessage.FETCH_PC_INIT_MESSAGE_LIST_SUCCESS, _$constants.actionTypes.pageMessage.FETCH_MESSAGE_LIST_SUCCESS, _$constants.actionTypes.pageMessage.FETCH_MOBILE_MESSAGE_LIST_SUCCESS, _$constants.actionTypes.history.commentHistory.FETCH_COMMENT_HISTORY_LIST_SUCCESS, _$constants.actionTypes.explorer.FETCH_PIN_LIST_SUCCESS, _$constants.actionTypes.explorer.ADD_PIN_SUCCESS, _$constants.actionTypes.explorer.ADD_PIN_SILENTLY_SUCCESS, _$constants.actionTypes.explorer.ADD_HELP_SUCCESS, _$constants.actionTypes.explorer.FETCH_STAR_LIST_SUCCESS, _$constants.actionTypes.explorer.ADD_STAR_SUCCESS, _$constants.actionTypes.explorer.FETCH_SHARE_OBJECTS_SUCCESS), function (state, action) {
    var entities = action.payload.entities;

    if (!entities || !entities.users) return state;
    var users = (0, _mapValues2.default)(entities.users, function (user) {
        return new _User.User(user);
    });
    return state.mergeDeep(users);
}), (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.user.FETCH_USER_DETAIL_SUCCESS, _$constants.actionTypes.user.FETCH_CURRENT_USER_SUCCESS), function (state, action) {
    var _action$payload = action.payload,
        id = _action$payload.id,
        rest = (0, _objectWithoutProperties3.default)(_action$payload, ['id']);

    var userEntity = Object.assign({ id: id }, rest);
    return state.updateIn([id], function (old) {
        return new _User.User(userEntity).mergeWith(_utils.keepNext, old);
    });
}), (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_FILE_META_FAIL, _$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_FAIL), function (state, action) {
    var folderOwner = (0, _get2.default)(action.error, ['meta', 'owner']);
    if (typeof folderOwner === 'undefined') {
        return state;
    }
    var ownerId = folderOwner.id;
    return state.merge((0, _defineProperty3.default)({}, ownerId, new _User.User(folderOwner)));
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_FAIL, function (state, action) {
    var users = (0, _get2.default)(action, ['error', 'meta', 'entities', 'users'], undefined);
    if (!users) {
        return state;
    }
    var recordedUser = (0, _mapValues2.default)(users, function (user) {
        return new _User.User(user);
    });
    return state.mergeDeep(recordedUser);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.suite.FETCH_CURRENT_SUITE_SUCCESS, function (state, action) {
    var _action$payload2 = action.payload,
        create_uid = _action$payload2.create_uid,
        owner_id = _action$payload2.owner_id,
        create_user_name = _action$payload2.create_user_name,
        owner_user_name = _action$payload2.owner_user_name,
        tenant_id = _action$payload2.tenant_id;

    var newCreatorEntity = updateOldUserEntity(state.get(create_uid), {
        name: create_user_name
    });
    var ownerEntityToAssign = { name: owner_user_name };
    if (_browserHelper2.default.isMobile) {
        ownerEntityToAssign.tenant_id = tenant_id;
    }
    var newOwnerEntity = updateOldUserEntity(state.get(owner_id), ownerEntityToAssign);
    return state.withMutations(function (state) {
        state.set(create_uid, newCreatorEntity).set(owner_id, newOwnerEntity);
    });
}), _handleActions), _immutable2.default.fromJS({}));
exports.users = users;
var currentUser = exports.currentUser = (0, _reduxActions.handleActions)((_handleActions2 = {}, (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.user.FETCH_CURRENT_USER_SUCCESS, function (state, action) {
    if (!action.payload) {
        return state;
    }
    var recordedUser = new _User.User(action.payload);
    return state.merge(recordedUser);
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.user.DELETE_CURRENT_USER, function () {
    return _immutable2.default.fromJS({});
}), _handleActions2), _immutable2.default.fromJS({}));

/***/ }),
/* 1367 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.shouldPrint = exports.currentNoteToken = exports.noteMeta = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions2;

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _suiteHelper = __webpack_require__(52);

var _$constants = __webpack_require__(5);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var noteMeta = exports.noteMeta = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.suite.SYNC_NOTE_META, function (state, _ref) {
    var payload = _ref.payload;
    return payload;
}), {});
/**
 * 从path中正则拿到token
 */
var currentNoteToken = exports.currentNoteToken = (0, _reduxActions.handleActions)((_handleActions2 = {}, (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.route.LOCATION_CHANGE, function (state, action) {
    var noteToken = void 0;
    var suiteType = (0, _suiteHelper.suiteTypeNum)();
    var pathname = action.payload.pathname;
    // noteRep = /(doc|spreadsheet)\/(\S+)\/*/.exec(pathname);
    // TODO: bitable 这里应该从 route 里面判断 isSuite;

    var noteRep = new RegExp('(' + _common.FILE_TYPE.DOC + '|' + _common.FILE_TYPE.SHEET + '|' + _common.FILE_TYPE.BITABLE + '|\n          ' + _common.FILE_TYPE.LIKELIST + '|' + _common.FILE_TYPE.MINDNOTE + '|' + _common.FILE_TYPE.SLIDE + ')\\/([^/?#]+)\\/*').exec(pathname);
    if (noteRep) {
        noteToken = noteRep[2].replace(/\/*$/, '');
        // google analytics
        window.noteToken = noteToken;
        return state.clear().merge({ type: suiteType, obj_token: noteToken });
    }
    return state.clear();
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.suite.SET_CURRENT_SUITE_TOKEN, function (state, action) {
    var _action$payload = action.payload,
        obj_token = _action$payload.obj_token,
        type = _action$payload.type;

    return state.clear().merge({ obj_token: obj_token, type: parseInt(type, 10) });
}), _handleActions2), _immutable2.default.fromJS({}));
var shouldPrint = exports.shouldPrint = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.suite.SET_SHOULD_PRINT, function (state, action) {
    var value = action.payload;
    return value;
}), false);

/***/ }),
/* 1368 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.userGuide = undefined;

var _slicedToArray2 = __webpack_require__(111);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _ImmutableMap2, _handleActions;

var _immutable = __webpack_require__(31);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _onboarding = __webpack_require__(130);

var _userGuide = __webpack_require__(714);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var initialState = (0, _immutable.Map)((_ImmutableMap2 = {}, (0, _defineProperty3.default)(_ImmutableMap2, _onboarding.DATA_FIELD.PROFILE, (0, _immutable.Map)(_onboarding.PROFILE).map(function (val) {
    return (0, _immutable.Map)(val).map(function () {
        return -1;
    });
})), (0, _defineProperty3.default)(_ImmutableMap2, _onboarding.DATA_FIELD.GUIDES, (0, _immutable.Map)(_onboarding.STEP_TYPES).map(function () {
    var _ImmutableMap;

    return (0, _immutable.Map)((_ImmutableMap = {}, (0, _defineProperty3.default)(_ImmutableMap, _onboarding.STEP_STATE.DONE, true), (0, _defineProperty3.default)(_ImmutableMap, _onboarding.STEP_STATE.CONTEXT, ''), _ImmutableMap));
})), (0, _defineProperty3.default)(_ImmutableMap2, _onboarding.DATA_FIELD.MOBILE_LOCAL_GUIDES, (0, _immutable.Map)({})), _ImmutableMap2));
var userGuide = exports.userGuide = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.guide.FETCH_USER_GUIDE_SUCCESS, function (state, action) {
    return state.mergeIn([_onboarding.DATA_FIELD.GUIDES], (0, _immutable.fromJS)(action.payload.guides).mapEntries(function (_ref) {
        var _ImmutableMap3;

        var _ref2 = (0, _slicedToArray3.default)(_ref, 2),
            k = _ref2[0],
            v = _ref2[1];

        return [(0, _userGuide.mapKey)(k), (0, _immutable.Map)((_ImmutableMap3 = {}, (0, _defineProperty3.default)(_ImmutableMap3, _onboarding.STEP_STATE.DONE, v.get('is_done')), (0, _defineProperty3.default)(_ImmutableMap3, _onboarding.STEP_STATE.CONTEXT, v.get('context')), _ImmutableMap3))];
    })).mergeIn([_onboarding.DATA_FIELD.PROFILE], action.payload.profile);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.guide.UPDATE_USER_GUIDE_SUCCESS, function (state, action) {
    var _fromJS;

    var _action$payload = action.payload,
        guideType = _action$payload.guideType,
        is_done = _action$payload.is_done,
        context = _action$payload.context;

    return state.setIn([_onboarding.DATA_FIELD.GUIDES, guideType], (0, _immutable.fromJS)((_fromJS = {}, (0, _defineProperty3.default)(_fromJS, _onboarding.STEP_STATE.DONE, is_done), (0, _defineProperty3.default)(_fromJS, _onboarding.STEP_STATE.CONTEXT, context), _fromJS)));
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.guide.CLOSE_USER_GUIDE_SUCCESS, function (state, action) {
    var guideType = action.payload.guideType;

    return state.setIn([_onboarding.DATA_FIELD.GUIDES, guideType], (0, _immutable.fromJS)((0, _defineProperty3.default)({}, _onboarding.STEP_STATE.DONE, true)));
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.guide.SET_LOCAL_USER_GUIDE, function (state, action) {
    return state.mergeIn([_onboarding.DATA_FIELD.MOBILE_LOCAL_GUIDES], (0, _immutable.fromJS)(action.payload).mapEntries(function (_ref3) {
        var _ImmutableMap4;

        var _ref4 = (0, _slicedToArray3.default)(_ref3, 2),
            k = _ref4[0],
            v = _ref4[1];

        return [(0, _userGuide.mapKey)(k), (0, _immutable.Map)((_ImmutableMap4 = {}, (0, _defineProperty3.default)(_ImmutableMap4, _onboarding.STEP_STATE.DONE, v.get('is_done')), (0, _defineProperty3.default)(_ImmutableMap4, _onboarding.STEP_STATE.CONTEXT, v.get('context')), _ImmutableMap4))];
    }));
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.guide.UPDATE_LOCAL_USER_GUIDE, function (state, action) {
    var _fromJS3;

    var guideType = action.payload;
    return state.setIn([_onboarding.DATA_FIELD.MOBILE_LOCAL_GUIDES, guideType], (0, _immutable.fromJS)((_fromJS3 = {}, (0, _defineProperty3.default)(_fromJS3, _onboarding.STEP_STATE.DONE, true), (0, _defineProperty3.default)(_fromJS3, _onboarding.STEP_STATE.CONTEXT, ''), _fromJS3)));
}), _handleActions), initialState);

/***/ }),
/* 1369 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.folderPermissions = exports.permissions = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _handleActions, _handleActions2;

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _isUndefined = __webpack_require__(228);

var _isUndefined2 = _interopRequireDefault(_isUndefined);

var _networkStateHelper = __webpack_require__(129);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// @TODO: 错误处理
/* eslint-disable */
var permissions = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_SUCCESS, function (state, action) {
  var _action$payload = action.payload,
      token = _action$payload.token,
      permissions = _action$payload.permissions,
      isFromNotification = _action$payload.isFromNotification,
      contact_url = _action$payload.contact_url,
      relationship_level = _action$payload.relationship_level,
      _action$payload$copy = _action$payload.copy,
      copy = _action$payload$copy === undefined ? 1 : _action$payload$copy;

  var finalPermission = void 0;
  var isChanged = false;
  var isPermissionOpened = false;
  var isPermissionClosed = false;

  if (permissions.length === 0) {
    finalPermission = [0];
  } else {
    finalPermission = permissions;
  }
  var oldPermission = state.getIn([token, 'permissions']);
  if (!(0, _isUndefined2.default)(oldPermission) && !oldPermission.equals(_immutable2.default.List(finalPermission))) {
    isChanged = true;
    isPermissionOpened = oldPermission.get(0) === _$constants.common.PERMISSION.PRIVATE && finalPermission[0] !== _$constants.common.PERMISSION.PRIVATE;
    isPermissionClosed = oldPermission.get(0) !== _$constants.common.PERMISSION.PRIVATE && finalPermission[0] === _$constants.common.PERMISSION.PRIVATE;
  }
  return state.mergeIn([token], {
    permissions: finalPermission,
    isFromNotification: isFromNotification,
    isChanged: isChanged,
    isPermissionOpened: isPermissionOpened,
    isPermissionClosed: isPermissionClosed,
    contactUrl: contact_url,
    relationshipLevel: relationship_level,
    copy: copy
  });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_FAIL, function (state, action) {
  // 离线情况，请求失败不更新权限数据
  if (!(0, _networkStateHelper.isOnLine)()) {
    return state;
  }

  var _action$payload2 = action.payload,
      token = _action$payload2.token,
      isFromNotification = _action$payload2.isFromNotification;

  return state.mergeIn([token], {
    isChanged: true,
    isPermissionClosed: true,
    isFromNotification: isFromNotification
  });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.FETCH_SUITE_PUBLIC_PERMISSION_SUCCESS, function (state, action) {
  var _action$payload3 = action.payload,
      token = _action$payload3.token,
      permission = _action$payload3.permission,
      isFromNotification = _action$payload3.isFromNotification,
      invite_external = _action$payload3.invite_external,
      external_access = _action$payload3.external_access,
      is_creator = _action$payload3.is_creator,
      is_owner = _action$payload3.is_owner,
      can_cross = _action$payload3.can_cross,
      _action$payload3$copy = _action$payload3.copy,
      copy = _action$payload3$copy === undefined ? 1 : _action$payload3$copy;

  return state.mergeIn([token], {
    publicPermission: permission,
    isFromNotification: isFromNotification,
    isCreator: is_creator,
    isOwner: is_owner,
    canCross: can_cross,
    inviteExternal: invite_external,
    externalAccess: external_access,
    copy: copy
  });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.FETCH_AUTHORIZED_MEMBERS_SUCCESS, function (state, action) {
  var _action$payload4 = action.payload,
      token = _action$payload4.token,
      isFromNotification = _action$payload4.isFromNotification,
      owners = _action$payload4.owners,
      type = _action$payload4.type,
      entities = _action$payload4.entities,
      rest = (0, _objectWithoutProperties3.default)(_action$payload4, ['token', 'isFromNotification', 'owners', 'type', 'entities']);
  var users = entities.users;

  var mergedOwners = owners.map(function (owner) {
    return Object.assign({}, users[owner.owner_id] || {}, owner);
  });
  return action.payload.code == null ? state.mergeIn([token], {
    authorizedMembers: mergedOwners,
    type: type,
    isFromNotification: isFromNotification
  }) : state.deleteIn(['authorizedMembers']);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.SET_SUITE_PUBLIC_PERMISSION_SUCCESS, function (state, action) {
  var _action$payload5 = action.payload,
      token = _action$payload5.token,
      type = _action$payload5.type,
      permission = _action$payload5.permission;

  return state.mergeIn([token], {
    publicPermission: permission
  });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.REMOVE_AUTHORIZED_MEMBERS_SUCCESS, function (state, action) {
  var _action$payload6 = action.payload,
      token = _action$payload6.token,
      type = _action$payload6.type,
      owner_id = _action$payload6.owner_id;

  var prevMembers = state.getIn([token, 'authorizedMembers']);
  var deletedMemberIdx = prevMembers.findIndex(function (val) {
    return val.get('owner_id') === owner_id;
  });
  // delete -1 will remove the last item in the list.
  return deletedMemberIdx === -1 ? state : state.deleteIn([token, 'authorizedMembers', deletedMemberIdx]);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.UPDATE_AUTHORIZED_MEMBERS, function (state, action) {
  var _action$payload7 = action.payload,
      token = _action$payload7.token,
      type = _action$payload7.type,
      _action$payload7$data = _action$payload7.data,
      index = _action$payload7$data.index,
      member = _action$payload7$data.member;

  if (!member || member.size === 0) {
    return state;
  }
  return state.setIn([token, 'authorizedMembers', index], member);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.etherpad.SET_CLIENT_VARS, function (state, action) {
  var _action$payload8 = action.payload,
      token = _action$payload8.token,
      permissions = _action$payload8.permissions;
  // 可能权限接口返回比较早，已经有了权限信息时则直接返回

  if (token && state.get(token) && state.get(token).get('permissions')) {
    return state;
  }
  if (permissions) {
    var res = state.set(token, _immutable2.default.Map({
      permissions: _immutable2.default.List(permissions)
    }));
    return res;
  }
  return state;
}), _handleActions), _immutable2.default.Map({}));

exports.permissions = permissions;
var folderPermissions = (0, _reduxActions.handleActions)((_handleActions2 = {}, (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.explorer.FETCH_MEMBERS_OF_SHARE_FOLDER_SUCCESS, function (state, action) {
  var _action$payload9 = action.payload,
      entities = _action$payload9.entities,
      space_id = _action$payload9.space_id,
      authorizedMemberMap = (0, _objectWithoutProperties3.default)(_action$payload9, ['entities', 'space_id']);

  var authorizedMembers = authorizedMemberMap[space_id] || [];
  return state.merge((0, _defineProperty3.default)({}, space_id, {
    authorizedMembers: authorizedMembers
  }));
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.explorer.REMOVE_MEMBER_FROM_FOLDER_SUCCESS, function (state, action) {
  var _action$payload10 = action.payload,
      spaceId = _action$payload10.spaceId,
      ownerId = _action$payload10.ownerId;

  var memberPath = [spaceId, 'authorizedMembers'];
  var newMembers = state.getIn(memberPath).filter(function (member) {
    return member.get('owner_id') !== ownerId;
  });
  return state.updateIn(memberPath, function (oldMember) {
    return newMembers;
  });
}), _handleActions2), _immutable2.default.Map({}));
exports.folderPermissions = folderPermissions;

/***/ }),
/* 1370 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _findIndex2 = __webpack_require__(346);

var _findIndex3 = _interopRequireDefault(_findIndex2);

var _handleActions;

var _redux = __webpack_require__(66);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _dateHelper = __webpack_require__(564);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var updateShowTime = function updateShowTime(histories) {
  histories.forEach(function (item) {
    item.localUpdateTime = (0, _dateHelper.forcePastShowDate)(parseInt(item.update_time, 10));
    item.localCreateTime = (0, _dateHelper.forcePastShowDate)(parseInt(item.create_time, 10));
  });
};

var updateHeight = function updateHeight(histories) {
  histories.forEach(function (item) {
    item.isUpdatedHeight = false;
  });
};

var docHistory = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.history.docHistory.FETCH_DOC_HISTORY_LIST_SUCCESS, function (state, action) {
  if (Object.keys(state).length === 0) {
    updateShowTime(action.payload.histories);
    updateHeight(action.payload.histories);
    return action.payload || {};
  }
  var _action$payload = action.payload,
      entities = _action$payload.entities,
      histories = _action$payload.histories,
      lastPage = _action$payload.last_page,
      token = _action$payload.token;

  if (state.token !== token) {
    updateShowTime(action.payload.histories);
    updateHeight(action.payload.histories);
    return action.payload || {};
  }
  var prevHistories = state.histories;
  histories.forEach(function (history) {
    var historyIndex = (0, _findIndex3.default)(prevHistories, function (item) {
      return item.history_id === history.history_id;
    });
    history.isUpdatedHeight = false;
    if (historyIndex > -1) {
      if (prevHistories[historyIndex].update_time < history.update_time) {
        prevHistories[historyIndex] = history;
      }
    } else {
      prevHistories.push(history);
    }
  });
  prevHistories.sort(function (a, b) {
    return b.update_time - a.update_time;
  });
  updateShowTime(prevHistories);

  var prevUserData = state.entities.users;
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = Object.keys(entities.users)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var userId = _step.value;

      if (!prevUserData[userId]) {
        prevUserData[userId] = entities.users[userId];
      }
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  state.last_page = lastPage;
  state.token = token;
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.history.docHistory.CLEAR_DOC_HISTORY_LIST, function (state, action) {
  return {};
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.history.docHistory.UPDATE_DOC_HISTORY_LIST, function (state, action) {
  var _action$payload2 = action.payload,
      token = _action$payload2.token,
      histories = _action$payload2.histories;
  var prevToken = state.token,
      prevHistories = state.histories;

  if (token !== prevToken) {
    return state;
  }
  var newHistories = prevHistories.map(function (history) {
    var historyIndex = (0, _findIndex3.default)(histories, function (item) {
      return item.history_id === history.history_id;
    });
    if (historyIndex > -1 && !histories[historyIndex].change) {
      return histories[historyIndex];
    } else {
      return history;
    }
  });
  return Object.assign({}, state, {
    histories: newHistories
  });
}), _handleActions), {});

exports.default = (0, _redux.combineReducers)({
  docHistory: docHistory
});

/***/ }),
/* 1371 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.refreshFormatter = exports.DATE_FORMAT = undefined;

var _moment = __webpack_require__(312);

var _moment2 = _interopRequireDefault(_moment);

__webpack_require__(715);

__webpack_require__(1372);

var _i18nHelper = __webpack_require__(222);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var language = (0, _i18nHelper.getLocale)().toLowerCase();
if (language.indexOf('zh') > -1) {
  _moment2.default.locale((0, _i18nHelper.getLocale)().toLowerCase());
} else if (language.indexOf('ja') > -1) {
  _moment2.default.locale('ja');
} else {
  _moment2.default.locale('en');
}

_moment2.default.relativeTimeThreshold('ss', 0);
_moment2.default.relativeTimeThreshold('s', 60);
_moment2.default.relativeTimeThreshold('m', 60);
_moment2.default.relativeTimeThreshold('h', 24);
_moment2.default.relativeTimeThreshold('d', 31);
_moment2.default.relativeTimeThreshold('M', 12);

var DATE_FORMAT = exports.DATE_FORMAT = {
  YESTERDAY: '昨天 H:mm',
  BEFORE_YESTERDAY: '前天 H:mm',
  SAME_WEEK: 'ddd H:mm',
  SAME_YEAR: 'M-DD H:mm',
  BEFORE_YEAR: 'YYYY-M-DD'
};

var refreshFormatter = exports.refreshFormatter = function refreshFormatter() {
  if (_moment2.default.locale() === 'en') {
    DATE_FORMAT.YESTERDAY = 'H:mm [Yesterday]';
    DATE_FORMAT.BEFORE_YESTERDAY = 'H:mm [The day before yesterday]';
    DATE_FORMAT.SAME_YEAR = 'MM/DD H:mm';
    DATE_FORMAT.BEFORE_YEAR = 'MM/DD/YYYY';

    _moment2.default.updateLocale('en', {
      relativeTime: {
        future: 'in %s',
        past: function past(text) {
          if (['Just now'].indexOf(text) === -1) {
            return text + ' ago';
          } else {
            return text;
          }
        },
        s: function s(number, withoutSuffix, key, isFuture) {
          return isFuture ? 'a moment' : 'Just now';
        },
        ss: '%d seconds',
        m: '1 minute',
        mm: '%d minutes',
        h: '1 hour',
        hh: '%d hours'
      }
    });
  } else if (_moment2.default.locale() === 'ja') {
    DATE_FORMAT.YESTERDAY = '[昨日] H:mm';
    DATE_FORMAT.BEFORE_YESTERDAY = '[一昨日] H:mm';

    _moment2.default.updateLocale('ja', {
      relativeTime: {
        future: '%s後',
        past: function past(text) {
          if (['ちょうど'].indexOf(text) === -1) {
            return text + ' \u524D';
          } else {
            return text;
          }
        },
        s: function s(number, withoutSuffix, key, isFuture) {
          return isFuture ? 'a moment' : 'ちょうど';
        },
        ss: '%d 秒',
        m: '1 分',
        mm: '%d 分',
        h: '1 時間',
        hh: '%d 時間'
      }
    });
  } else {
    DATE_FORMAT.YESTERDAY = '昨天 H:mm';
    DATE_FORMAT.BEFORE_YESTERDAY = '前天 H:mm';

    _moment2.default.updateLocale('zh-cn', {
      relativeTime: {
        future: '%s后',
        past: function past(text) {
          if (['刚刚'].indexOf(text) === -1) {
            return text + '\u524D';
          } else {
            return text;
          }
        },
        s: function s(number, withoutSuffix, key, isFuture) {
          return isFuture ? '一会' : '刚刚';
        },
        ss: '%d 秒',
        m: '1分钟',
        mm: '%d分钟',
        h: '1小时',
        hh: '%d小时'
      }
    });
  }
};

// 此处更新格式,
refreshFormatter();

/***/ }),
/* 1372 */,
/* 1373 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _flag = __webpack_require__(1374);

Object.keys(_flag).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _flag[key];
    }
  });
});

var _indexing = __webpack_require__(1375);

Object.keys(_indexing).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _indexing[key];
    }
  });
});

var _loadInfo = __webpack_require__(1376);

Object.keys(_loadInfo).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _loadInfo[key];
    }
  });
});

var _others = __webpack_require__(1377);

Object.keys(_others).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _others[key];
    }
  });
});

var _tree = __webpack_require__(1378);

Object.keys(_tree).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _tree[key];
    }
  });
});

var _entity = __webpack_require__(1379);

Object.keys(_entity).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _entity[key];
    }
  });
});

/***/ }),
/* 1374 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.hasShareFolder = exports.trClicked = exports.shouldLoadShare = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var shouldLoadShare = exports.shouldLoadShare = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.explorer.SET_SHOULD_LOAD_SHARE, function (state, action) {
    var value = action.payload;
    return value;
}), true);
var trClicked = exports.trClicked = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.explorer.SET_TR_CLICKED, function (state, action) {
    return action.payload;
}), false);
/**
 * 判断用户是否有共享文件夹来决定
 * 是否显示「文件夹」标签页
 */
var hasShareFolder = exports.hasShareFolder = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.explorer.SET_HAS_SHARE_FOLDER, function (state, action) {
    return action.payload;
}), false);

/***/ }),
/* 1375 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.staredFileMetas = exports.pinedFileMetas = exports.recentObjs = exports.selectedFileMetas = exports.currentPath = exports.currentFileToken = exports.fileTokensHistory = exports.fileTokens = exports.shareObjectsList = exports.rootToken = undefined;

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _isUndefined2 = __webpack_require__(227);

var _isUndefined3 = _interopRequireDefault(_isUndefined2);

var _handleActions, _handleActions3, _handleActions4, _handleActions5, _handleActions6, _handleActions7, _handleActions8, _handleActions9, _handleActions10;

var _immutable = __webpack_require__(31);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _modelHelper = __webpack_require__(209);

var _models = __webpack_require__(172);

var _routeHelper = __webpack_require__(67);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* 用来过滤实体数据中不存在的索引 */
var filterMissingEntityOnIndexs = function filterMissingEntityOnIndexs(indexs, entities) {
    return indexs.filter(function (index) {
        return !!entities[index];
    });
};
var rootToken = exports.rootToken = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, function (state, action) {
    var _action$payload = action.payload,
        path = _action$payload.path,
        type = _action$payload.type;

    var token = path[0];
    return state.merge((0, _defineProperty3.default)({}, type, token));
}), (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_EXPLORER_ROOT_TOKEN_MAP_SUCCESS, _$constants.actionTypes.explorer.LOAD_PERSISTED_ROOT_TOKEN_MAP), function (state, action) {
    return action.payload ? state.merge(action.payload) : state;
}), _handleActions), (0, _immutable.fromJS)({}));
var shareObjectsList = exports.shareObjectsList = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.explorer.FETCH_SHARE_OBJECTS_SUCCESS, function (state, action) {
    var _action$payload2 = action.payload,
        entities = _action$payload2.entities,
        files = _action$payload2.files,
        isContinuous = _action$payload2.isContinuous;
    var objs = entities.objs;

    var tokens = files.map(function (token) {
        var entity = objs[token];
        return (0, _modelHelper.getTypePrefixedToken)(entity.type, entity.obj_token);
    });
    if (isContinuous) {
        return state.concat((0, _immutable.List)(tokens));
    } else {
        return (0, _immutable.List)(tokens);
    }
}), (0, _immutable.List)());
var fileTokens = exports.fileTokens = (0, _reduxActions.handleActions)((_handleActions3 = {}, (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.explorer.FETCH_FILE_META_SUCCESS, function (state, action) {
    var _action$payload3 = action.payload,
        token = _action$payload3.token,
        files = _action$payload3.files,
        nodes = _action$payload3.entities.nodes;

    return state.merge((0, _defineProperty3.default)({}, '' + token, filterMissingEntityOnIndexs(files, nodes)));
}), (0, _defineProperty3.default)(_handleActions3, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_SHARE_HOME_SUCCESS, _$constants.actionTypes.explorer.FETCH_TREE_ROOT_META_SUCCESS), function (state, action) {
    var _action$payload4 = action.payload,
        files = _action$payload4.files,
        path = _action$payload4.path,
        offset = _action$payload4.offset,
        isContinuous = _action$payload4.isContinuous,
        entities = _action$payload4.entities;
    var nodes = entities.nodes;

    var key = path[0] ? path[0] : _$constants.apiField.FAKE_SHARE_FOLDER_TOKEN;
    var previousFiles = state.get(key);
    var resultFiles = filterMissingEntityOnIndexs(files, nodes);
    if (isContinuous && previousFiles) {
        var tmp = previousFiles.toJS();
        for (var i = 0; i < files.length; i++) {
            tmp[offset + i] = files[i];
        }
        resultFiles = (0, _immutable.fromJS)(tmp);
    }
    return state.merge((0, _defineProperty3.default)({}, key, resultFiles));
}), (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.explorer.HIDE_SHARE_FOLDER_SUCCESS, function (state, action) {
    var shareFolders = state.get(_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN);
    if ((0, _isUndefined3.default)(shareFolders)) return state;
    var _action$payload5 = action.payload,
        token = _action$payload5.token,
        hidden = _action$payload5.hidden;

    return state.set(_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN, shareFolders.filter(function (item) {
        return item !== token;
    })).set('hidden-share-folders', (0, _immutable.List)(hidden));
}), (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.explorer.SHOW_SHARE_FOLDER_SUCCESS, function (state, action) {
    var hiddenShareFolders = state.get('hidden-share-folders');
    if ((0, _isUndefined3.default)(hiddenShareFolders)) return state;
    var _action$payload6 = action.payload,
        token = _action$payload6.token,
        shown = _action$payload6.shown;

    return state.set('hidden-share-folders', hiddenShareFolders.filter(function (item) {
        return item !== token;
    })).set(_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN, (0, _immutable.List)(shown));
}), (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.explorer.FETCH_TREE_FILE_META_SUCCESS, function (state, action) {
    var _action$payload7 = action.payload,
        token = _action$payload7.token,
        files = _action$payload7.files,
        nodes = _action$payload7.entities.nodes;

    return state.merge((0, _defineProperty3.default)({}, token, filterMissingEntityOnIndexs(files, nodes)));
}), (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.explorer.FETCH_ROOT_SHARE_FOLDER_SUCCESS, function (state, action) {
    var _action$payload8 = action.payload,
        hidden = _action$payload8.hidden,
        files = _action$payload8.files;

    switch (hidden) {
        case _models.ShareFolderHiddenType.FetchVisible:
            return state.set(_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN, (0, _immutable.List)(files));
        case _models.ShareFolderHiddenType.FetchHidden:
            return state.set('hidden-share-folders', (0, _immutable.List)(files));
        default:
            return state;
    }
}), (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.explorer.REMOVE_MEMBER_FROM_FOLDER_SUCCESS, function (state, action) {
    // 即将从一个共享文件夹变成非共享，从 fileTokens 里面删除
    if (action.payload.onlyOne) {
        var token = action.payload.token;
        var shareTokenList = state.get(_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN);
        if (shareTokenList) {
            shareTokenList = shareTokenList.filter(function (item) {
                return item !== token;
            });
            return state.set(_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN, shareTokenList);
        } else {
            return state;
        }
    }
    return state;
}), (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.explorer.MOVE_FILE_SUCCESS, function (state, action) {
    var successTokens = action.payload.success_tokens;

    return state.map(function (item) {
        return item.filter(function (innerItem) {
            return successTokens.indexOf(innerItem) < 0;
        });
    });
}), (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.explorer.DISMISS_SHARE_FOLDER_SUCCESS, function (state, action) {
    var shareTokenList = state.get(_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN);
    if (!shareTokenList) return state;
    var tokens = action.payload.token;
    shareTokenList = shareTokenList.filter(function (item) {
        return tokens.indexOf(item) < 0;
    });
    return state.set(_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN, shareTokenList);
}), (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.explorer.REMOVE_FROM_FILE_TOKENS, function (state, action) {
    var _action$payload9 = action.payload,
        token = _action$payload9.token,
        removeToken = _action$payload9.removeToken;

    return state.update(token, function (fileTokenList) {
        return fileTokenList.filter(function (token) {
            return token !== removeToken;
        });
    });
}), _handleActions3), (0, _immutable.fromJS)({}));
var fileTokensHistory = exports.fileTokensHistory = (0, _reduxActions.handleActions)((_handleActions4 = {}, (0, _defineProperty3.default)(_handleActions4, _$constants.actionTypes.explorer.FETCH_FILE_META_SUCCESS, function (state, action) {
    var _action$payload10 = action.payload,
        token = _action$payload10.token,
        files = _action$payload10.files,
        nodes = _action$payload10.entities.nodes;

    var oldFiles = state.get(token) || [];
    var safeFiles = filterMissingEntityOnIndexs(files, nodes);
    var uniqueMergedFiles = (0, _immutable.Set)(oldFiles).concat(safeFiles);
    return state.setIn(['' + token], uniqueMergedFiles);
}), (0, _defineProperty3.default)(_handleActions4, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_SHARE_HOME_SUCCESS), function (state, action) {
    var _action$payload11 = action.payload,
        files = _action$payload11.files,
        path = _action$payload11.path,
        nodes = _action$payload11.entities.nodes;

    var key = path[0] ? path[0] : _$constants.apiField.FAKE_SHARE_FOLDER_TOKEN;
    var oldFiles = state.get(key) || [];
    var safeFiles = filterMissingEntityOnIndexs(files, nodes);
    var uniqueMergedFiles = (0, _immutable.Set)(oldFiles).concat(safeFiles);
    return state.setIn([key], uniqueMergedFiles);
}), _handleActions4), (0, _immutable.Map)({}));
/* current 系列 */
var currentFileToken = exports.currentFileToken = (0, _reduxActions.handleActions)((_handleActions5 = {}, (0, _defineProperty3.default)(_handleActions5, _$constants.actionTypes.route.LOCATION_CHANGE, function (state, action) {
    var fileToken = void 0;
    var pathname = action.payload.pathname;
    // @TODO: 抽离匹配机制,设计更合理的匹配逻辑。2018.10.11
    /* 先检测 folder 后的 token */

    var fileRep = /folder\/(\S+)\/*/.exec(pathname);
    if (fileRep) {
        fileToken = fileRep[1].replace(/\/*$/, '');
    }
    if (fileToken) {
        window.fileToken = fileToken; // @TODO: 移除GA google analytics
        return fileToken;
    }
    var shouldClearCur = (0, _routeHelper.locateRoute)(pathname).isHome;
    if (shouldClearCur) {
        return '';
    }
    return state;
}), (0, _defineProperty3.default)(_handleActions5, _$constants.actionTypes.explorer.SET_ROOT_META, function (state, action) {
    var token = action.payload.token;

    return token;
}), _handleActions5), '');
var currentPath = exports.currentPath = (0, _reduxActions.handleActions)((_handleActions6 = {}, (0, _defineProperty3.default)(_handleActions6, _$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, function (state, action) {
    var path = action.payload.path;

    if (path.length === 0) {
        return (0, _immutable.fromJS)([_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN]);
    } else {
        return state.clear().merge(path);
    }
}), (0, _defineProperty3.default)(_handleActions6, _$constants.actionTypes.explorer.FETCH_ROOT_SHARE_FOLDER_SUCCESS, function (state, action) {
    var willUpdatePath = action.payload.willUpdatePath;

    if (!willUpdatePath) return state;
    return (0, _immutable.List)([_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN]);
}), (0, _defineProperty3.default)(_handleActions6, _$constants.actionTypes.explorer.FETCH_SHARE_HOME_SUCCESS, function (state, action) {
    var _action$payload12 = action.payload,
        shareType = _action$payload12.share_type,
        path = _action$payload12.path;

    if (shareType === 5) return (0, _immutable.fromJS)([path[0]]);
    return (0, _immutable.fromJS)([_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN]);
}), (0, _defineProperty3.default)(_handleActions6, _$constants.actionTypes.explorer.FETCH_FILE_META_SUCCESS, function (state, action) {
    var _action$payload13 = action.payload,
        path = _action$payload13.path,
        need_path = _action$payload13.need_path,
        token = _action$payload13.token;

    if (need_path === 1) {
        if (path.length === 0) {
            return (0, _immutable.fromJS)([_$constants.apiField.FAKE_SHARE_FOLDER_TOKEN]);
        } else {
            return state.clear().merge(path);
        }
    } else {
        var pathArr = state.toJS();
        var index = pathArr.indexOf(token);
        if (index < 0) {
            return state.push(token);
        } else {
            return (0, _immutable.fromJS)(pathArr.slice(0, index + 1));
        }
    }
}), (0, _defineProperty3.default)(_handleActions6, _$constants.actionTypes.explorer.SET_PATH, function (state, action) {
    var path = action.payload.path;

    return (0, _immutable.List)(path);
}), _handleActions6), (0, _immutable.fromJS)([]));
// @TODO: ImmutableSet对于object失效，除非换成Map
var selectedFileMetas = exports.selectedFileMetas = (0, _reduxActions.handleActions)((_handleActions7 = {}, (0, _defineProperty3.default)(_handleActions7, _$constants.actionTypes.explorer.SET_SELECTED_FILE_METAS, function (state, action) {
    if (state.equals((0, _immutable.Set)(action.payload))) {
        return state;
    }
    return (0, _immutable.Set)(action.payload);
}), (0, _defineProperty3.default)(_handleActions7, _$constants.actionTypes.route.LOCATION_CHANGE, function (state, action) {
    var isPathChanged = action.payload.isPathChanged;

    var shouldReset = state.isEmpty() || isPathChanged;
    return shouldReset ? state.clear() : state;
}), _handleActions7), (0, _immutable.Set)([]));
var getPagedDataAppendedIndexes = function getPagedDataAppendedIndexes(pagedIndexes, currentIndexes) {
    var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

    for (var i = 0; i < pagedIndexes.length; i++) {
        currentIndexes[offset + i] = pagedIndexes[i];
    }
    return currentIndexes;
};
var recentObjs = exports.recentObjs = (0, _reduxActions.handleActions)((_handleActions8 = {}, (0, _defineProperty3.default)(_handleActions8, _$constants.actionTypes.explorer.FETCH_RECENT_OBJS_SUCCESS, function (state, action) {
    var _action$payload14 = action.payload,
        recent_objs = _action$payload14.recent_objs,
        offset = _action$payload14.offset,
        isContinuous = _action$payload14.isContinuous,
        objs = _action$payload14.entities.objs;

    var safeObjs = filterMissingEntityOnIndexs(recent_objs, objs);
    if (!isContinuous) {
        return (0, _immutable.List)(safeObjs);
    }
    var finalObjTokens = getPagedDataAppendedIndexes(safeObjs, state.toJS(), offset);
    return (0, _immutable.List)(finalObjTokens);
}), (0, _defineProperty3.default)(_handleActions8, _$constants.actionTypes.explorer.SET_RECENT_OBJ_TOKENS, function (state, action) {
    var tokens = action.payload.tokens;

    return tokens;
}), _handleActions8), (0, _immutable.List)([]));
var mapNodes2Metas = function mapNodes2Metas(nodes, tokens) {
    return tokens.map(function (token) {
        var originToken = (0, _modelHelper.getTypePrefixRemovedToken)(token);
        var type = nodes[token].type;

        var isSuite = _$constants.common.suiteType.indexOf(type) > -1;
        return {
            obj_token: isSuite ? originToken : '',
            token: isSuite ? '' : originToken,
            type: type
        };
    });
};
var pinedFileMetas = exports.pinedFileMetas = (0, _reduxActions.handleActions)((_handleActions9 = {}, (0, _defineProperty3.default)(_handleActions9, _$constants.actionTypes.explorer.FETCH_PIN_LIST_SUCCESS, function (state, action) {
    var _action$payload15 = action.payload,
        pinedTokens = _action$payload15.pin_nodes,
        nodes = _action$payload15.entities.nodes;

    var safePinedTokens = filterMissingEntityOnIndexs(pinedTokens, nodes);
    var pinedFileMetas = mapNodes2Metas(nodes, safePinedTokens);
    return (0, _immutable.List)(pinedFileMetas);
}), (0, _defineProperty3.default)(_handleActions9, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.ADD_PIN_SUCCESS, _$constants.actionTypes.explorer.ADD_PIN_SILENTLY_SUCCESS, _$constants.actionTypes.explorer.ADD_HELP_SUCCESS), function (state, action) {
    var _action$payload16 = action.payload,
        pinedTokens = _action$payload16.pin_nodes,
        nodes = _action$payload16.entities.nodes;

    var pinedFileMetas = mapNodes2Metas(nodes, pinedTokens);
    return state.unshift.apply(state, (0, _toConsumableArray3.default)(pinedFileMetas));
}), (0, _defineProperty3.default)(_handleActions9, _$constants.actionTypes.explorer.REMOVE_PIN_SUCCESS, function (state, action) {
    var token = action.payload.token;

    return state.filter(function (item) {
        var shouldRemove = item.token === token || item.obj_token === token;
        return !shouldRemove;
    });
}), _handleActions9), (0, _immutable.List)());
var staredFileMetas = exports.staredFileMetas = (0, _reduxActions.handleActions)((_handleActions10 = {}, (0, _defineProperty3.default)(_handleActions10, _$constants.actionTypes.explorer.FETCH_STAR_LIST_SUCCESS, function (state, action) {
    var _action$payload17 = action.payload,
        staredTokens = _action$payload17.star_nodes,
        nodes = _action$payload17.entities.nodes,
        offset = _action$payload17.offset,
        isContinuous = _action$payload17.isContinuous;

    var safeStaredTokens = filterMissingEntityOnIndexs(staredTokens, nodes);
    var staredFileMetas = mapNodes2Metas(nodes, safeStaredTokens);
    if (!isContinuous) {
        return (0, _immutable.List)(staredFileMetas);
    }
    var finalFileMetas = getPagedDataAppendedIndexes(staredFileMetas, state.toJS(), offset);
    return (0, _immutable.List)(finalFileMetas);
}), (0, _defineProperty3.default)(_handleActions10, _$constants.actionTypes.explorer.ADD_STAR_SUCCESS, function (state, action) {
    var _action$payload18 = action.payload,
        staredTokens = _action$payload18.star_nodes,
        nodes = _action$payload18.entities.nodes;

    var staredFileMetas = mapNodes2Metas(nodes, staredTokens);
    return state.unshift.apply(state, (0, _toConsumableArray3.default)(staredFileMetas));
}), (0, _defineProperty3.default)(_handleActions10, _$constants.actionTypes.explorer.REMOVE_STAR_SUCCESS, function (state, action) {
    var token = action.payload.token;

    return state.filter(function (item) {
        var shouldRemove = item.token === token || item.obj_token === token;
        return !shouldRemove;
    });
}), _handleActions10), (0, _immutable.List)());

/***/ }),
/* 1376 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.explorerListLoadingStatus = exports.rootMetaLoadingStatus = exports.explorerPaginationInfo = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _handleActions, _handleActions2, _Immutable$fromJS;

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var generalReducer = function generalReducer(key) {
    return function (state, action) {
        var _action$payload = action.payload,
            next_id = _action$payload.next_id,
            check_id = _action$payload.check_id,
            has_more = _action$payload.has_more;

        return state.set(key, _immutable2.default.Map({
            next: next_id,
            checkId: check_id,
            hasMore: has_more
        }));
    };
};
var explorerPaginationInfo = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.FETCH_SHARE_OBJECTS_SUCCESS, generalReducer('share-objects')), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.FETCH_RECENT_OBJS_SUCCESS, generalReducer('recent')), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.FETCH_STAR_LIST_SUCCESS, generalReducer('star')), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.UPDATE_EXPLORER_LOAD_INFO, function (state, action) {
    var _action$payload2 = action.payload,
        token = _action$payload2.token,
        res = (0, _objectWithoutProperties3.default)(_action$payload2, ['token']);

    return state.merge((0, _defineProperty3.default)({}, token, res));
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, function (state, action) {
    var _action$payload3 = action.payload,
        token = _action$payload3.token,
        type = _action$payload3.type,
        has_more = _action$payload3.has_more,
        next_id = _action$payload3.next_id,
        check_id = _action$payload3.check_id;

    return state.merge((0, _defineProperty3.default)({}, token, {
        type: type,
        token: token,
        hasMore: has_more,
        checkId: check_id,
        next: next_id
    }));
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.FETCH_SHARE_HOME_SUCCESS, function (state, action) {
    var _action$payload4 = action.payload,
        next_id = _action$payload4.next_id,
        check_id = _action$payload4.check_id,
        has_more = _action$payload4.has_more,
        path = _action$payload4.path,
        shareType = _action$payload4.share_type;

    var hasShareFolder = shareType === _$constants.common.NUM_ROOT_META.SHARE_FOLDERS;
    if (hasShareFolder) return state;
    var token = path[0] ? path[0] : _$constants.apiField.FAKE_SHARE_FOLDER_TOKEN;
    return state.merge((0, _defineProperty3.default)({}, token, {
        type: _$constants.common.NUM_ROOT_META.SHARE_FILES,
        token: token,
        hasMore: has_more,
        checkId: check_id,
        next: next_id
    }));
}), _handleActions), _immutable2.default.fromJS({}));
exports.explorerPaginationInfo = explorerPaginationInfo;
var rootMetaLoadingStatus = exports.rootMetaLoadingStatus = (0, _reduxActions.handleActions)((_handleActions2 = {}, (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.explorer.FETCH_ROOT_META_START, function (state, action) {
    var type = action.payload.type;

    return state.merge((0, _defineProperty3.default)({}, type, _$constants.common.StatusMap.loading));
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, function (state, action) {
    var type = action.payload.type;

    return state.merge((0, _defineProperty3.default)({}, type, _$constants.common.StatusMap.loaded));
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.explorer.FETCH_ROOT_META_FAIL, function (state, action) {
    var type = action.payload.type;

    return state.merge((0, _defineProperty3.default)({}, type, _$constants.common.StatusMap.failed));
}), _handleActions2), _immutable2.default.fromJS((_Immutable$fromJS = {}, (0, _defineProperty3.default)(_Immutable$fromJS, _$constants.common.NUM_ROOT_META.SHARE_FILES, _$constants.common.StatusMap.uninitialized), (0, _defineProperty3.default)(_Immutable$fromJS, _$constants.common.NUM_ROOT_META.EXPLORER, _$constants.common.StatusMap.uninitialized), _Immutable$fromJS)));
/* explorer loading相关 */
var explorerListLoadingStatus = exports.explorerListLoadingStatus = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.explorer.SET_EXPLORER_LIST_LOADING_STATUS, function (state, action) {
    var loadingStatus = action.payload.loadingStatus;

    return loadingStatus;
}), false);

/***/ }),
/* 1377 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.selectedFolderData = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions;

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// import { ReducerMap } from 'typings/redux';
// @TODO: 转化为索引形式, 此reducer应该不存在.
var selectedFolderData = exports.selectedFolderData = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.SET_CURRENT_FOLDER_DATA, function (state, action) {
    return _immutable2.default.fromJS(action.payload);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_SUCCESS, function (state, action) {
    if (action.payload.token) {
        var spaceId = action.payload.space_id;
        return state.set('space_id', spaceId);
    }
    return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.REMOVE_MEMBER_FROM_FOLDER_SUCCESS, function (state, action) {
    if (action.payload.onlyOne) {
        return state.delete('space_id').delete('share_root');
    }
    return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.TRANSFER_SHARE_FOLDER_OWNER_SUCCESS, function (state, action) {
    if (state !== null) {
        var ownerId = action.payload.ownerId;

        return state.set('share_creator', ownerId).set('owner_id', ownerId);
    }
    return state;
}), _handleActions), null);

/***/ }),
/* 1378 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.shareTree = exports.folderTree = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions, _handleActions2;

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// @TODO: Transform nodes to new Node();
var manipulateTreeItemGenerator = function manipulateTreeItemGenerator(currentPath, files, nodes) {
    var manipulateTreeItem = function manipulateTreeItem(item) {
        var token = item.get('token');
        if (token === currentPath) {
            var fileList = files;
            if (!(0, _immutable.isImmutable)(files)) {
                fileList = _immutable2.default.List(files);
            }
            var itemChild = fileList.filter(function (itemToken) {
                var entity = nodes[itemToken];
                // 0 & 4?
                return entity.type === 0 || entity.type === 4;
            }).map(function (item) {
                return _immutable2.default.fromJS({
                    token: item,
                    children: []
                });
            });
            return item.set('children', itemChild);
        } else {
            var children = item.get('children');
            return item.set('children', children.map(manipulateTreeItem));
        }
    };
    return manipulateTreeItem;
};
var folderTree = exports.folderTree = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_FOLDER_TREE_SUCCESS), function (state, action) {
    var tree = action.payload.tree;

    return _immutable2.default.fromJS(tree);
}), (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_TREE_FILE_META_SUCCESS), function (state, action) {
    var _action$payload = action.payload,
        path = _action$payload.path,
        files = _action$payload.files,
        entities = _action$payload.entities;
    var nodes = entities.nodes;

    if (path.length > 0) {
        var currentPath = path[path.length - 1];
        var manipulateTreeItem = manipulateTreeItemGenerator(currentPath, files, nodes);
        return state.map(manipulateTreeItem);
    }
    return state;
}), _handleActions), _immutable2.default.fromJS([]));
var shareTree = exports.shareTree = (0, _reduxActions.handleActions)((_handleActions2 = {}, (0, _defineProperty3.default)(_handleActions2, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_FOLDER_TREE_SUCCESS), function (state, action) {
    var share_tree = action.payload.share_tree;

    return _immutable2.default.fromJS(share_tree);
}), (0, _defineProperty3.default)(_handleActions2, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_TREE_FILE_META_SUCCESS), function (state, action) {
    var _action$payload2 = action.payload,
        path = _action$payload2.path,
        files = _action$payload2.files,
        entities = _action$payload2.entities;
    var nodes = entities.nodes;

    if (path.length > 0) {
        var currentPath = path[path.length - 1];
        var manipulateTreeItem = manipulateTreeItemGenerator(currentPath, files, nodes);
        return state.map(function (item) {
            return manipulateTreeItem(item);
        });
    }
    return state;
}), _handleActions2), _immutable2.default.fromJS([]));

/***/ }),
/* 1379 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _nodes = __webpack_require__(1380);

Object.defineProperty(exports, 'nodes', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_nodes).default;
  }
});

var _objs = __webpack_require__(1381);

Object.defineProperty(exports, 'objs', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_objs).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),
/* 1380 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _mapValues2 = __webpack_require__(513);

var _mapValues3 = _interopRequireDefault(_mapValues2);

var _handleActions;

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _Node = __webpack_require__(681);

var _titleHelper = __webpack_require__(195);

var _get = __webpack_require__(83);

var _get2 = _interopRequireDefault(_get);

var _utils = __webpack_require__(542);

var _modelHelper = __webpack_require__(209);

var _common = __webpack_require__(19);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var FIELD_SPACE_ID = 'space_id';
var FIELD_SHARE_ROOT = 'share_root';
var IS_SHARE_ROOT = 1;
var transformNode = function transformNode(node) {
    return (0, _mapValues3.default)(node, function (val, key) {
        if (key !== 'obj_token') return val;
        return val && node.type + ':' + val;
    });
};
var transformNodes = function transformNodes(nodes) {
    return (0, _mapValues3.default)(nodes, function (node) {
        return new _Node.Node(transformNode(node));
    });
};
// 防止默认值覆盖，默认值一般都是falsy value
var nodesMerger = function nodesMerger(oldVal, newVal) {
    return new _Node.Node(oldVal.mergeWith(_utils.keepNext, newVal));
};
var nodes = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_FILE_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_SHARE_HOME_SUCCESS,
/* share */
_$constants.actionTypes.explorer.FETCH_ROOT_SHARE_FOLDER_SUCCESS, _$constants.actionTypes.explorer.HIDE_SHARE_FOLDER_SUCCESS, _$constants.actionTypes.explorer.SHOW_SHARE_FOLDER_SUCCESS,
/* tree */
_$constants.actionTypes.explorer.FETCH_FOLDER_TREE_SUCCESS, _$constants.actionTypes.explorer.FETCH_TREE_ROOT_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_TREE_FILE_META_SUCCESS), function (state, action) {
    // console.time(`${action.type}`);
    var nodes = action.payload.entities.nodes;

    if (!nodes) return state;
    var transformedNodes = transformNodes(nodes);
    var rst = state.mergeWith(nodesMerger, transformedNodes);
    // console.timeEnd(`${action.type}`);
    return rst;
}), (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_PIN_LIST_SUCCESS, _$constants.actionTypes.explorer.FETCH_STAR_LIST_SUCCESS), function (state, action) {
    var nodes = action.payload.entities.nodes;

    if (!nodes) return state;
    var filteredNodes = _immutable2.default.Map(transformNodes(nodes)).mapKeys(function (typePrefixedToken) {
        return (0, _modelHelper.getTypePrefixRemovedToken)(typePrefixedToken);
    }).filter(function (node) {
        return node.token !== '';
    });
    if (filteredNodes.size === 0) return state;
    var rst = state.mergeWith(nodesMerger, filteredNodes);
    return rst;
}), (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.ADD_STAR_SUCCESS, _$constants.actionTypes.explorer.REMOVE_STAR_SUCCESS, _$constants.actionTypes.explorer.ADD_PIN_SUCCESS, _$constants.actionTypes.explorer.ADD_PIN_SILENTLY_SUCCESS, _$constants.actionTypes.explorer.ADD_HELP_SUCCESS, _$constants.actionTypes.explorer.REMOVE_PIN_SUCCESS), function (state, action) {
    var _action$payload = action.payload,
        token = _action$payload.token,
        type = _action$payload.type,
        field = _action$payload.field,
        value = _action$payload.value;

    if (_common.folderType.indexOf(type) < 0) {
        return state;
    }
    return state.setIn([token, field], value);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_SUCCESS, function (state, action) {
    var _state$get$merge;

    var token = action.payload.token;

    if (!token) return state;
    var spaceId = action.payload.space_id;
    var node = state.get(token).merge((_state$get$merge = {}, (0, _defineProperty3.default)(_state$get$merge, FIELD_SPACE_ID, spaceId), (0, _defineProperty3.default)(_state$get$merge, FIELD_SHARE_ROOT, IS_SHARE_ROOT), _state$get$merge));
    return state.set(token, node);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.REMOVE_MEMBER_FROM_FOLDER_SUCCESS, function (state, action) {
    var token = action.payload.token;

    if (!token) return state;
    if (action.payload.onlyOne) {
        var _token = action.payload.token;
        var node = state.get(_token);
        node = node.delete('space_id');
        node = node.delete('share_root');
        return state.set(_token, node);
    }
    return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.REMOVE_FILES_SHARED_INFO, function (state, action) {
    var metas = action.payload.metas;

    var rst = state.withMutations(function (nodeMap) {
        metas.forEach(function (_ref) {
            var token = _ref.token,
                objToken = _ref.objToken,
                type = _ref.type;

            if (typeof nodeMap.get(token) === 'undefined') {
                nodeMap.mergeIn([token], {
                    space_id: '',
                    share_root: 0,
                    link_token: ''
                });
            }
        });
    });
    return rst;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.suite.UPDATE_DOC_TITLE, function (state, action) {
    var _action$payload2 = action.payload,
        title = _action$payload2.title,
        type = _action$payload2.type,
        obj_token = _action$payload2.obj_token;

    return state.map(function (node) {
        var objToken = node.get('obj_token');
        var originToken = objToken && objToken.split(':')[1];
        if (originToken !== obj_token) return node;
        var newTitle = title || (0, _titleHelper.getUnnamedTitle)(type);
        return node.set('name', newTitle).set('title', newTitle);
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.RENAME_FILE_SUCCESS, function (state, action) {
    var _action$payload3 = action.payload,
        token = _action$payload3.token,
        newName = _action$payload3.newName;

    return state.updateIn([token, 'name'], function (val) {
        return newName;
    });
}), (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.permission.TRANSFER_SUITE_OWNER_SUCCESS, _$constants.actionTypes.explorer.TRANSFER_SHARE_FOLDER_OWNER_SUCCESS), function (state, action) {
    var _action$payload4 = action.payload,
        meta = _action$payload4.meta,
        ownerId = _action$payload4.ownerId;

    var nodeToken = (0, _get2.default)(action.payload, ['meta', 'nodeToken'], undefined);
    if (nodeToken) {
        return state.updateIn([meta.nodeToken, 'owner_id'], function (val) {
            return ownerId;
        });
    }
    return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.UPDATE_SHARE_FOLDER_DESC_SUCCESS, function (state, action) {
    var _action$payload5 = action.payload,
        token = _action$payload5.token,
        newDescription = _action$payload5.newDescription,
        newName = _action$payload5.newName;

    return state.updateIn([token, 'name'], function (oldName) {
        return newName || oldName;
    }).updateIn([token, 'share_desc'], function (oldDescription) {
        return newDescription || oldDescription;
    });
}), _handleActions), _immutable2.default.Map({}));
exports.default = nodes;

/***/ }),
/* 1381 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _reduce2 = __webpack_require__(236);

var _reduce3 = _interopRequireDefault(_reduce2);

var _handleActions;

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _Obj = __webpack_require__(683);

var _titleHelper = __webpack_require__(195);

var _common = __webpack_require__(19);

var _utils = __webpack_require__(542);

var _modelHelper = __webpack_require__(209);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Keep those nodes which are also obj entity (has obj_token)
 */
var transform2Objs = function transform2Objs(datas) {
    for (var _len = arguments.length, objs2Merge = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        objs2Merge[_key - 1] = arguments[_key];
    }

    return _immutable2.default.Map(datas).filter(function (item, key) {
        return typeof item.obj_token !== 'undefined' && item.obj_token !== '';
    }).toMap().mapKeys(function (key, item) {
        var type = item.type,
            objToken = item.obj_token;

        return (0, _modelHelper.getTypePrefixedToken)(type, objToken);
    }).map(function (item, key) {
        var merged = objs2Merge.reduce(function (prev, cur) {
            var curObj = cur[key];
            return curObj ? Object.assign({}, prev, curObj) : prev;
        }, item);
        merged = copyName2Title(merged);
        return new _Obj.Obj(merged);
    });
};
var copyName2Title = function copyName2Title(item) {
    return Object.assign({}, item, {
        title: item.name
    });
};
// 防止默认值覆盖，默认值一般都是falsy value
var objsMerger = function objsMerger(oldVal, newVal) {
    return new _Obj.Obj(oldVal.mergeWith(_utils.keepNext, newVal));
};
var objs = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_FILE_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_SHARE_HOME_SUCCESS,
/* share */
_$constants.actionTypes.explorer.FETCH_ROOT_SHARE_FOLDER_SUCCESS, _$constants.actionTypes.explorer.HIDE_SHARE_FOLDER_SUCCESS, _$constants.actionTypes.explorer.SHOW_SHARE_FOLDER_SUCCESS,
/* tree */
_$constants.actionTypes.explorer.FETCH_FOLDER_TREE_SUCCESS, _$constants.actionTypes.explorer.FETCH_TREE_ROOT_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_TREE_FILE_META_SUCCESS,
/* pin or star */
_$constants.actionTypes.explorer.FETCH_PIN_LIST_SUCCESS, _$constants.actionTypes.explorer.FETCH_STAR_LIST_SUCCESS,
/* guide */
// 该action被用于pin一个之前没加载过的文档, 需要写入数据
_$constants.actionTypes.explorer.ADD_PIN_SILENTLY_SUCCESS, _$constants.actionTypes.explorer.ADD_HELP_SUCCESS), function (state, action) {
    var entities = action.payload.entities;
    var nodes = entities.nodes,
        _entities$objs = entities.objs,
        objs = _entities$objs === undefined ? {} : _entities$objs;

    if (!nodes) return state;
    var transformedObjs = transform2Objs(nodes, objs);
    return state.mergeWith(objsMerger, transformedObjs);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.FETCH_SHARE_OBJECTS_SUCCESS, function (state, action) {
    var entities = action.payload.entities;
    var objs = entities.objs;

    var objsMap = (0, _reduce3.default)(objs, function (acc, atom) {
        var objToken = atom['obj_token'];
        var type = atom['type'];
        var obj = new _Obj.Obj(atom);
        return acc.set(type + ':' + objToken, obj);
    }, _immutable2.default.Map());
    return state.mergeWith(objsMerger, objsMap);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.FETCH_RECENT_OBJS_SUCCESS, function (state, action) {
    var objs = action.payload.entities.objs;

    if (!objs) return state;
    var objsToMerge = transform2Objs(objs);
    return state.mergeWith(objsMerger, objsToMerge);
}), (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.ADD_STAR_SUCCESS, _$constants.actionTypes.explorer.REMOVE_STAR_SUCCESS, _$constants.actionTypes.explorer.ADD_PIN_SUCCESS, _$constants.actionTypes.explorer.ADD_PIN_SILENTLY_SUCCESS, _$constants.actionTypes.explorer.ADD_HELP_SUCCESS, _$constants.actionTypes.explorer.REMOVE_PIN_SUCCESS), function (state, action) {
    var _action$payload = action.payload,
        token = _action$payload.token,
        type = _action$payload.type,
        field = _action$payload.field,
        value = _action$payload.value;

    if (_common.suiteType.indexOf(type) < 0) {
        return state;
    }
    var typePrefixedToken = (0, _modelHelper.getTypePrefixedToken)(type, token);
    return state.setIn([typePrefixedToken, field], value);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.suite.FETCH_CURRENT_SUITE_SUCCESS, function (state, action) {
    var _action$payload2 = action.payload,
        token = _action$payload2.token,
        type = _action$payload2.type,
        title = _action$payload2.title,
        obj_type = _action$payload2.obj_type,
        url = _action$payload2.url,
        data = (0, _objectWithoutProperties3.default)(_action$payload2, ['token', 'type', 'title', 'obj_type', 'url']);

    var obj = state.get(type + ':' + token) || new _Obj.Obj();
    var newObj = obj.mergeWith(_utils.keepNext, Object.assign({
        obj_token: token,
        title: (0, _titleHelper.getTitle)(action),
        type: type,
        url: url
    }, data));
    return state.set(type + ':' + token, newObj);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.suite.FETCH_CURRENT_SUITE_FAIL, function (state, action) {
    var _action$payload3 = action.payload,
        token = _action$payload3.token,
        type = _action$payload3.type;

    if (!token) return state;
    var code = action.error.code;

    var obj = state.get(type + ':' + token) || new _Obj.Obj();
    var dataToMerge = !code ? { obj_token: token, type: type } : { title: (0, _titleHelper.getTitle)(action) };
    // 被删除会返回失败 之前返回成功 和delete flag
    if (code === _$constants.error.STATUS_CODE.NOTE_DELETED) {
        dataToMerge.delete_flag = 1;
    }
    var newObj = obj.merge(dataToMerge);
    return state.set(type + ':' + token, newObj);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.FETCH_USER_PERMISSION_ON_SUITE_FAIL, function (state, action) {
    var _action$payload4 = action.payload,
        token = _action$payload4.token,
        type = _action$payload4.type;

    if (!token) return state;
    var code = action.error.code;

    var typePrefixedToken = type + ':' + token;
    var isAlreadyDeleted = state.getIn([typePrefixedToken, 'delete_flag']) === 1;
    if (isAlreadyDeleted || code !== _$constants.error.STATUS_CODE.FORBIDDEN) {
        return state;
    }
    return state.mergeIn([type + ':' + token], {
        title: (0, _titleHelper.getTitle)(action)
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.permission.TRANSFER_SUITE_OWNER_SUCCESS, function (state, action) {
    var _action$payload5 = action.payload,
        suiteToken = _action$payload5.suiteToken,
        suiteType = _action$payload5.suiteType,
        ownerId = _action$payload5.ownerId;

    return state.mergeIn([suiteType + ':' + suiteToken], {
        owner_id: ownerId
    });
}), (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.suite.UPDATE_TITLE_SUCCESS, _$constants.actionTypes.suite.UPDATE_DOC_TITLE), function (state, action) {
    var _action$payload6 = action.payload,
        obj_token = _action$payload6.obj_token,
        type = _action$payload6.type,
        rest = (0, _objectWithoutProperties3.default)(_action$payload6, ['obj_token', 'type']);

    var obj = state.get(type + ':' + obj_token) || new _Obj.Obj();
    var newObj = obj.set('name', rest.title).set('title', rest.title);
    return state.set(type + ':' + obj_token, newObj);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.suite.UPDATE_HAS_COPIED, function (state, action) {
    var _action$payload7 = action.payload,
        objToken = _action$payload7.objToken,
        type = _action$payload7.type,
        value = _action$payload7.value;

    var oldObj = state.get(type + ':' + objToken);
    if (oldObj) return oldObj.set('has_copied', value);
    return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.explorer.REMOVE_FILES_SHARED_INFO, function (state, action) {
    var metas = action.payload.metas;

    var rst = state.withMutations(function (objMap) {
        metas.forEach(function (_ref) {
            var token = _ref.token,
                objToken = _ref.objToken,
                type = _ref.type;

            var typePrefixedToken = (0, _modelHelper.getTypePrefixedToken)(type, objToken);
            if (typeof objMap.get(typePrefixedToken) !== 'undefined') {
                var clearedNode = objMap.mergeIn([typePrefixedToken], {
                    space_id: '',
                    share_root: 0,
                    link_token: ''
                });
                return clearedNode;
            }
        });
    });
    return rst;
}), _handleActions), _immutable2.default.Map({}));
exports.default = objs;

/***/ }),
/* 1382 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.onboarding = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions;

var _immutable = __webpack_require__(31);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var defaultTutorialState = (0, _immutable.fromJS)({});
var initialState = {
    homeGuideOn: false,
    createDocGuideOn: false,
    sharedDocGuideOn: false,
    homeTutorialBannerOn: false,
    homeTutorialState: defaultTutorialState,
    mentionGuideBannerOn: false,
    undoRedoGuideRequired: false,
    createDocCheckDone: false
};
var getDefaultBannerState = function getDefaultBannerState() {
    return {
        homeGuideOn: false,
        homeTutorialBannerOn: false,
        homeTutorialState: defaultTutorialState,
        mentionGuideBannerOn: false
    };
};
var onboarding = exports.onboarding = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.HOME_GUIDE_PREPARE, function (state) {
    return Object.assign({}, state, {
        homeGuideOn: false
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.CREATE_DOC_GUIDE_PREPARE, function (state) {
    return Object.assign({}, state, {
        createDocGuideOn: false,
        sharedDocGuideOn: false
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.CREATE_DOC_GUIDE_READY, function (state, action) {
    var on = action.payload.on;

    return Object.assign({}, state, {
        createDocGuideOn: on
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.SHARED_DOC_GUIDE_PREPARE, function (state) {
    return Object.assign({}, state, {
        createDocGuideOn: false,
        sharedDocGuideOn: false
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.SHARED_DOC_GUIDE_READY, function (state, action) {
    var on = action.payload.on;

    return Object.assign({}, state, {
        sharedDocGuideOn: on
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.HOME_TUTORIAL_READY, function (state, action) {
    var _action$payload = action.payload,
        on = _action$payload.on,
        bannerOn = _action$payload.bannerOn;

    return Object.assign({}, state, getDefaultBannerState(), {
        homeGuideOn: on,
        homeTutorialBannerOn: on && bannerOn
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.HOME_TUTORIAL_SET_STATE, function (state, action) {
    return Object.assign({}, state, {
        homeTutorialState: state.homeTutorialState.merge(action.payload)
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.MENTION_GUIDE_READY, function (state, action) {
    var _action$payload2 = action.payload,
        on = _action$payload2.on,
        bannerOn = _action$payload2.bannerOn;

    return Object.assign({}, state, getDefaultBannerState(), {
        homeGuideOn: on,
        mentionGuideBannerOn: on && bannerOn
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.UNDO_REDO_GUIDE_CHECK_STATE, function (state) {
    return Object.assign({}, state, {
        undoRedoGuideRequired: false
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.UNDO_REDO_GUIDE_SET_ON, function (state) {
    return Object.assign({}, state, {
        undoRedoGuideRequired: true
    });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.onboarding.CREATE_DOC_CHECK_DONE, function (state, action) {
    return Object.assign({}, state, {
        createDocCheckDone: true
    });
}), _handleActions), initialState);

/***/ }),
/* 1383 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.route = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _qs = __webpack_require__(353);

var _qs2 = _interopRequireDefault(_qs);

var _routeHelper = __webpack_require__(67);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var route = exports.route = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.route.LOCATION_CHANGE, function (state, action) {
    var _action$payload = action.payload,
        pathname = _action$payload.pathname,
        search = _action$payload.search;

    var routeObj = (0, _routeHelper.getCurrentRouteObj)(pathname);
    var query = _qs2.default.parse(search.replace('?', ''));
    return _immutable2.default.fromJS(Object.assign({}, routeObj, { query: query }));
}), _immutable2.default.Map({}));

/***/ }),
/* 1384 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.failedServices = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions;

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _reduxActions = __webpack_require__(29);

var _routeHelper = __webpack_require__(67);

var _$constants = __webpack_require__(5);

var _get = __webpack_require__(83);

var _get2 = _interopRequireDefault(_get);

var _isNumber = __webpack_require__(582);

var _isNumber2 = _interopRequireDefault(_isNumber);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var failedServices = exports.failedServices = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, (0, _reduxActions.combineActions)(_$constants.actionTypes.explorer.FETCH_ROOT_META_SUCCESS, _$constants.actionTypes.explorer.FETCH_ROOT_META_FAIL), function (state, action) {
    var failedServices = (0, _get2.default)(action, ['meta', 'fail']);
    return failedServices ? _immutable2.default.Set.of(failedServices) : state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.route.LOCATION_CHANGE, function (state, action) {
    var _action$payload = action.payload,
        pathname = _action$payload.pathname,
        isPathChanged = _action$payload.isPathChanged;

    var currentLocateRouteRst = (0, _routeHelper.locateRoute)(pathname);
    var isUnderSuite = (0, _routeHelper.isUnderSuiteView)(currentLocateRouteRst);
    var suiteTypeStr = (0, _routeHelper.getSuiteTypeStr)();
    var suiteNumType = _$constants.common.mapFileType2TypeNum[suiteTypeStr];
    return isPathChanged && isUnderSuite ? state.delete(suiteNumType) : state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.suite.FETCH_CURRENT_SUITE_START, function (state, action) {
    // 当开始请求suite的时候，清除fail状态.
    // 状态的更新移至suite sync里.
    var type = action.payload.type;

    return state.delete(type);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.service.SET_FAILED_SERVICES, function (state, action) {
    var failedServices = action.payload;
    return (0, _isNumber2.default)(failedServices) ? state.add(failedServices) : state.union(failedServices);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.service.CLEAR_FAILED_SERVICES, function (state, action) {
    var resumedServices = action.payload;
    return (0, _isNumber2.default)(resumedServices) ? state.delete(resumedServices) : state.subtract(resumedServices);
}), _handleActions), _immutable2.default.Set([]));

/***/ }),
/* 1385 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.messageShowing = exports.message = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _uniqBy2 = __webpack_require__(460);

var _uniqBy3 = _interopRequireDefault(_uniqBy2);

var _handleActions;

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _messageFeedHelper = __webpack_require__(758);

var _constant = __webpack_require__(571);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DEFAULT_MESSAGES = {
  version: 0,
  message: [],
  comment: {},
  newMessageNum: 0
};

var message = exports.message = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.pageMessage.FETCH_MOBILE_MESSAGE_LIST_SUCCESS, function (state, action) {
  if (action.payload) {
    var _action$payload = action.payload,
        user = _action$payload.user,
        _message = _action$payload.message,
        comment = _action$payload.comment;

    state.comment = comment;
    state.message = (0, _messageFeedHelper.mobileFilterMessage)(_message, user, comment);
    state.newMessageNum = (0, _messageFeedHelper.getNewMessageNum)(state.message);
    return Object.assign({}, state);
  }

  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.pageMessage.UPDATE_MOBILE_MESSAGE, function (state, action) {
  if (action.payload.data.message) {
    var _action$payload$data = action.payload.data,
        user = _action$payload$data.user,
        _message2 = _action$payload$data.message,
        comment = _action$payload$data.comment;

    var _message3 = (0, _messageFeedHelper.mobileFilterMessage)([_message2], user, comment);
    var newList = state.message.concat(_message3);
    newList = (0, _uniqBy3.default)(newList, 'message_id'); // 过滤；
    state.message = newList;
    state.comment = Object.assign({}, state.comment, comment);
    state.newMessageNum = (0, _messageFeedHelper.getNewMessageNum)(state.message);
    return Object.assign({}, state);
  }
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.pageMessage.SET_LOCAL_MESSAGE_MOBILE_READ, function (state, action) {
  var data = action.payload;
  state.message = state.message.map(function (m) {
    if (data.indexOf(m.message_id) !== -1) {
      return Object.assign(m, { status: _constant.MESSAGE_READ });
    }
    return m;
  });
  state.newMessageNum = (0, _messageFeedHelper.getNewMessageNum)(state.message);
  return Object.assign({}, state);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.pageMessage.SET_MESSAGE_MOBILE_READ_SUCCESS, function (state, action) {
  var data = action.payload.msg_id;
  state.message = state.message.map(function (m) {
    if (data.indexOf(m.message_id) !== -1) {
      return Object.assign(m, { status: _constant.MESSAGE_READ });
    }
    return m;
  });
  state.newMessageNum = (0, _messageFeedHelper.getNewMessageNum)(state.message);
  return Object.assign({}, state);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.pageMessage.REMOVE_MOBILE_COMMENTS, function (state, action) {
  var commentId = action.payload;
  if (commentId) {
    state.message = state.message.filter(function (item, index) {
      return !(item.comment_id && item.comment_id === commentId);
    });
    return Object.assign({}, state);
  }
  state.newMessageNum = (0, _messageFeedHelper.getNewMessageNum)(state.message);
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.pageMessage.RESET_MOBILE_MESSAGE_LIST, function () {
  return {
    version: 0,
    message: [],
    comment: {},
    newMessageNum: 0
  };
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.pageMessage.UPDATE_MOBILE_MESSAGE_NUM, function (state, action) {
  return {
    newMessageNum: action.payload.num
  };
}), _handleActions), DEFAULT_MESSAGES);

/**
 * 移动端展示文档feed流
 */
var messageShowing = exports.messageShowing = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.pageMessage.SET_MESSAGE_SHOW_STATE, function (state, action) {
  var showing = action.payload.showing;

  return showing;
}), false);

/***/ }),
/* 1386 */,
/* 1387 */,
/* 1388 */,
/* 1389 */,
/* 1390 */,
/* 1391 */,
/* 1392 */,
/* 1393 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(t) {

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.labList = exports.initialState = exports.language = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _reduxActions = __webpack_require__(29);

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _redux = __webpack_require__(66);

var _$constants = __webpack_require__(5);

var _i18nHelper = __webpack_require__(222);

var _labs = __webpack_require__(1394);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var language = exports.language = (0, _i18nHelper.getLanguage)();
var initialState = exports.initialState = _immutable2.default.fromJS([{
    experiment_id: _labs.PRESENTATION_MODE_ID,
    name: t('labs.presentation_mode'),
    func_name: _labs.PRESENTATION_MODE_NAME,
    guide_name: _labs.PRESENTATION_GUIDE,
    desc: t('labs.presentation_mode_desc'),
    image: __webpack_require__(1395),
    opened: false,
    link: _labs.PRESENTATION_MODE_URL[language]
}, {
    experiment_id: _labs.MINDMAP_ID,
    name: t('labs.mindmap'),
    func_name: _labs.MINDMAP_NAME,
    guide_name: _labs.MINDMAP_GUIDE,
    desc: t('labs.mindmap_desc'),
    image: __webpack_require__(1396),
    opened: false,
    link: _labs.MINDMAP_URL[language]
}]);
var labList = exports.labList = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.labs.FETCH_OPEN_LABS_SUCCESS, function (state, action) {
    var entities = action.payload.entities;

    return state.map(function (item) {
        var key = item.get('experiment_id');
        if (entities[key]) {
            return item.set('opened', entities[key].opened);
        }
        return item.set('opened', false);
    });
}), initialState);
exports.default = (0, _redux.combineReducers)({
    labList: labList
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 1394 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var PRESENTATION_MODE_ID = exports.PRESENTATION_MODE_ID = '1';
var MINDMAP_ID = exports.MINDMAP_ID = '3';
var PRESENTATION_GUIDE = exports.PRESENTATION_GUIDE = 'presentation_guide';
var BLOCK_IFRAME_GUIDE = exports.BLOCK_IFRAME_GUIDE = 'iframe_guide';
var MINDMAP_GUIDE = exports.MINDMAP_GUIDE = 'mindmap_guide';
var LABS_GUIDE = exports.LABS_GUIDE = [PRESENTATION_GUIDE,
// BLOCK_IFRAME_GUIDE,
MINDMAP_GUIDE];
var PRESENTATION_MODE_NAME = exports.PRESENTATION_MODE_NAME = 'presentation_mode';
var BLOCK_IFRAME_NAME = exports.BLOCK_IFRAME_NAME = 'block_iframe';
var MINDMAP_NAME = exports.MINDMAP_NAME = 'mindmap';
var PRESENTATION_MODE_URL = exports.PRESENTATION_MODE_URL = {
    zh: 'https://docs.bytedance.net/help/doc/6ij9tOdhDPyBUNCs82YgVh',
    en: 'https://docs.bytedance.net/help/doc/doz2TkReUN9Wt537GAIKSc'
};
var MINDMAP_URL = exports.MINDMAP_URL = {
    zh: 'https://docs.bytedance.net/help/doc/zsceFm4IW9WFR7L5vK1F7f',
    en: 'https://docs.bytedance.net/help/doc/s0i23Zl41JYxE44Jem01Dh'
};

/***/ }),
/* 1395 */
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADMCAYAAAA/IkzyAAAAAXNSR0IArs4c6QAACklJREFUeAHtndtv3EQUh8feJptLL7T0Eih9AoEEat+IeIb+2X3hCSmVQGopVaF9oAi1tOWW+22z+GxIvbnV8Y7HMz7ns7SK1+s5M+f7zS/jsb3ebGV1fejGljzPXH96yuV5PtqaZdnYp8dX7y0d38YWCKRK4O6iX8vOjRefnZkeGaXKJONlWIeAJQIjwwyHQzc/N1uY5d2jiSUw5AqBkwjkYpa52T5mOYkO2yBwhEDe6+Vv5ytHPuMtBCBwhEAuE3zmLEeo8BYCpxAoTobtnw075XM2QwACYwRwyxgMViFQRSDncKwKEZ9DoCTACFOyYA0ClQQwTCUidoBASQDDlCxYg0AlAQxTiYgdIFASwDAlC9YgUEkAw1QiYgcIlAQwTMmCNQhUEsAwlYjYAQIlAQxTsmANApUEMEwlInaAQEkAw5QsWINAJQEMU4mIHSBQEsAwJQvWIFBJAMNUImIHCJQEMEzJgjUIVBLAMJWI2AECJQEMU7JgDQKVBLLiMUuHnnxZWYIdIGCYACOMYfFJvT4BDFOfGSUME8AwhsUn9foEMEx9ZpQwTADDGBaf1OsTwDD1mVHCMAEMY1h8Uq9PAMPUZ0YJwwQwjGHxSb0+AQxTnxklDBPAMIbFJ/X6BDBMfWaUMEwAwxgWn9TrE8Aw9ZlRwjABDGNYfFKvT+Bc/SKHS9xbOvyedxBImcDdRb/WMcL48aO0MQIYxpjgpOtHAMP48aO0MQIYxpjgpOtHAMP48aO0MQIYxpjgpOtHAMP48aO0MQIYxpjgpOtHAMP48aO0MQIYxpjgpOtHAMP48aO0MQIYxpjgpOtHAMP48aO0MQIYxpjgpOtHAMP48aO0MQLe34cxxot0JyTw7f0VNzfbc3MzuTs/m7trV84V77v3/xrDTNgBKFaPwM7u0P27slu89sv98ty5C/M9t3B1yn10Y9r1evXixdobw8QiT71uZW0wev36Ytt9fKvvPrw+5bLEuXRvTEwcKM2rT2B7e889frbhlh6sufWNvfoBWizBCNMibG1Vbe0M3Zu/dt3fy7tua3u4/9rZc3tFn//mqwu105UR5/6Pa+72p3PuyqU0j9EwTG1ZbRcQM/z+atu9fF3MR1YHBYxmf1NY5jo/PF53n3884z64NpUcbAyTnCRpNkhs8fL1jnv225bb3Ap72CQ/7P3Ts003M527y4mNNMxh0uyfSbVqc2vo7hfzi0dPN4Kb5SBxMc2Dn9fd+mazI9hB/En/YphJyRkp98/KwC09XHPLxfyi7UUOzx4WpknJMhim7V7Qofr+eLPrvn+07raLiXysRU4EvHi1E6v6Y/VimGNI2CAEZGSRQ7C94tAo9vL0+ZYbtD/AnZg2hjkRi+2NMmd58CQNs4gSMsLJmbkUFgyTggoJtUHGkwdP4h6GnYTj5Zs0DsswzEnqGN4mp45jTPCrkC8X13w2ipEv9oJhYiuQUP1yUVKus6S6vP4z/iiDYVLtHRHaJfOE0BclfdJa3Yx3tu6g3RjmgAR/3YvicCzlZWM9vmG4NSblHtJi2+RGyuXVcB0yz/xv3N8o7mqOvWCY2AokUr/cddz0jZTjqX09wd3L4+VTWeeQLBUlIrdDbtFnqSaAYaoZmdhDvs/CUk0Aw1QzMrEHhjmbzMxhzsZJ/V5bDd9gee+7ZW9mWXGiYJJvbnpX/I4AjDDvgMNHcQnkCfbOBJsUVySrtfen0usKKbYpPUpWe2zkvPvT/tdJmk4hxTZhmKZV7mi8FDtnim3CMB3t4E03+/LF9M7/pNgmDNN0z+tovKvFs45dUs+dzNx+m9ICimHS0iNaa/pTmbt0Pp2H50lbpE2pLRgmNUUitmfhWjqHZSm1ZVwSDDNOw/j6zevTbqYfv0tIG6QtKS7x6aRIxWib5EKhPEU/9iJtSPGipXDBMLF7R2L1LxTPM75Y/G5LrEXqljakumCYVJWJ1C6ZZt/5bM5NR7jyL3VK3elN9UsxMEzJgrX/Ccz0s6LjzromviV5VqhSl9Qpdae8YJiU1YnYtvcu9NwXn7RjGjGL1CV1pr6kcx4xdVIG23fj6jnX78+NnoIZ6vnK+4dh3TCLdAFGGINGqJOy/NdfvD0f5ESATPAldhdGlgNmjDAHJPh7KgGZV3x5Z76xH1SS6yxy6ljOhqU9YzmOBMMcZ8KWEwhIx5af0Lvx/tToweDyDLP9xzKd9VkAmbt4Ph/FkIuSqV5nOSH1Q5swzCEcvKkiIB391sL06HXaj8JKDPnyl9yeLy+561hupEzx3rCqfI9+jmGOEuH9mQmIAW7emBq9zlyo4zsy6e+4gDS/XQLRR5i7i+0mfNba7i2ddU/2s0SAEcaS2uTqTQDDeCMkgCUCGMaS2uTqTSD6HIa5greGBGiRACNMi7CpqvsEMEz3NSSDFglgmBZhU1X3CWCY7mtIBi0SwDAtwqaq7hPAMN3XkAxaJIBhWoRNVd0nEP06TKr3knVfWp0ZxL5uxwijs1+RVSACGCYQWMLqJIBhdOpKVoEIRJ/DxD4mDcSVsEoJMMIoFZa0whDAMGG4ElUpAQyjVFjSCkMAw4ThSlSlBDCMUmFJKwwBDBOGK1GVEsAwSoUlrTAEol+H4V6yMMJqjRr7uh0jjNaeRV5BCGCYIFgJqpUAhtGqLHkFIRB9DhP7mDQIVYKqJcAIo1ZaEgtBAMOEoEpMtQQwjFppSSwEAQwTgiox1RLAMGqlJbEQBDBMCKrEVEsAw6iVlsRCEIh+HYZ7yULIqjdm7Ot2jDB6+xaZBSCAYQJAJaReAhhGr7ZkFoBA9DlM7GPSAEwJqZgAI4xicUmteQIYpnmmRFRMAMMoFpfUmieAYZpnSkTFBDCMYnFJrXkCGKZ5pkRUTADDKBaX1JongGGaZ0pExQQwjGJxSa15AhimeaZEVEwAwygWl9SaJ4BhmmdKRMUEMIxicUmteQIYpnmmRFRMAMMoFpfUmieAYZpnSkTFBDCMYnFJrXkCGKZ5pkRUTADDKBaX1JongGGaZ0pExQQwjGJxSa15AtmwWJoPS0QI6CTACKNTV7IKRADDBAJLWJ0EMIxOXckqEAEMEwgsYXUSwDA6dSWrQAQwTCCwhNVJAMPo1JWsAhHAMIHAElYnAQyjU1eyCkQAwwQCS1idBDCMTl3JKhABDBMILGF1EsAwOnUlq0AEvH/jkt+oDKQMYYMQuLvoF5YRxo8fpY0RwDDGBCddPwIYxo8fpY0RwDDGBCddPwIYxo8fpY0RwDDGBCddPwIYxo8fpY0RwDDGBCddPwIYxo8fpY0RwDDGBCddPwIYxo8fpY0RwDDGBCddPwIYxo8fpY0RwDDGBCddPwIYxo8fpY0RwDDGBCddPwIYxo8fpY0RyPl5GGOKk64XAUYYL3wUtkYgHwz2rOVMvhCYmEC+ubXtOCybmB8FjRHId3cHbm+PUcaY7qQ7IYE8yzK3srqBaSYESDFbBN5O+pdX1t3uYMDhmS39ybYmgdGD/GSUkXnMajHS9Hq5m53pj/5KLPmMBQIQ2CfwH+7dcmbAH5QgAAAAAElFTkSuQmCC"

/***/ }),
/* 1396 */
/***/ (function(module, exports) {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAABmCAYAAAFO2NT0AAAAAXNSR0IArs4c6QAADEVJREFUeAHtXXuMF0cd//6Ogx7IQ+EOqByUx9E7iPSukCNNIdW2FIqJRqkIZ1pjtCZaE2P7h4+krdE2UTHxD6PVP5TE1HhFCpr6oBDUlpRGIOBdMZRXgcJdoNxB5NE7Hsf9nM/eze7s7Ozu7P5mf7vX307y+83Md74z39fszOy8liiGKyBP8eJLxSh5q6Igc1y9TK8OEuE37EIzfelvDxLNsqTgeSiWTNU8e+En66ixlseIjvQyBX1nkwX4wd7PW/73l/7R8pXsIUOQi8WekpJIZcVLn6bajs3Wj8NDM+1c/wrHtf1k2LOL54FC4SIPRvILUStrYfL6QqgiVCzoZUJlfSNChbUpLXfKd0J2qiLwsBtNu8LeM/0orZrVYZVoZ+Ll+1VWngF4yakcFfbItUucGXJLaIO9gcaaSTZQK1Nvy1o7AwJVVDN6pguiEbGbmah1UKPsIRTGVGHcI12WSIkRAalrN8/A89QHAGM5odEmqaaiPC0jhRFGG+dyh73dVqzmy1WoRgRtikd16Dh0HO9MOO62U4tp7/kGq9t6drhj4WnwPYR4othLcRh8/ky/+N9GEUwn+hqsOJT2wsGH6YlFr7rSPYT+vvZ1+uTmj9sFurCHI/UT+uixjx2RkuS4O9mojWYf/BNtn/8AiU0CyMVu9928Eu04OdPqVa/eGqBlh3cQCMrOqERy4TxuTCJeYOX4w/bZ9Ac2lmszL3bhbGHyuo8Ot3FJEADLxdvxb6QhRUFBrixEPM1NEEe+aRh67Rgef01hZm61TG2jm5GEE0CxF7x9TslE2t+eb3PsFyiJCAi0LThGrq55pbdIL8SPHQX8t50LHCjGAPgpSlSAnHymQp7apdM9y10zmOHvfM+0vkxVBWekjzSlJLXjyHqBRPcs/5BJdpwA4M/t+5yc7N//ezAFgNj3i2EBxRX0qMuVyiIX+oh62U90vN//HRtoIDxYPGZLMGfieRHVCiuJoFC5YE9OAQAb8PdvAWwHPURURrWxYwaUho9T1tPdHWxQsV2ZtaRBxc1bVXT91iiae6idBslps8QXIeUwVsmKD3D0qEHCTySgQjWirsdrG1Rl27CS1GWXEhAo2/jLiLoCBLGSykIkjIk8XdaAPXwpXkxqtCqTNB/Hk4JShTqW1KjYPPN+JQrC+KGMHLinl8wE65jP6WK/GsZNM6tBE+ynIZC9bAkjzoSB7avstxsdMPstCxdq5FSzPRAq2KUuzPpXHiJrjQh8SutELtZXhLOaajXD3KdruWYhq0r4xXTh4sYsOI1soZbZdmK6NZNZKnOY7TzzxF9KLSYwf6gwmJLlDi+bU9gviuPzw11XwjPyyWlV+UFvYRw/VBiOaMJXveiKMD4BrqL1o/1r6HtLtqqSbJgRYVQv0jYFIcBfrjmIv2Tz+A/3NguvdRw65D++cKcboIhFEibqS7qCXiCIr3tsP91CB3rm0qQxfbS24U2qG3s5MB9PDBUmiUkATtzPxxqquI7qhyfDK6tplqU3GR8/5ia91TOF7qq7YBV7szhIt3du8ZC4b/xU2trgtKoehGGA3d0mujbrR53BL/SNpXVsSLN4Wi9t/MiTvpiNNRNpd9MqZTp/OQt9ZpS5DQKnjOu3hzQbh/YnKEu/f8I0JVwEZuqZwRybPFtVxdZ3zzY/Qs/PaBH5VoZTr2ZKriICeTXLlGUiyuBBF4QpnPWk5oBcA7kGZA04rVnflnq6NrCXL2XLiNmMF9rZ2v4XOG9OA2DtoBpak+eJ2feLbUPTykOcOsJkn3MfDp1p5Q+AMI6MuTCOLrIV+kBZJvVXAI9tr7A55U72u8ZS6lnP0WT3Hh5UGZAtYfYxIcStQqdYHD9sutGoQxoosvwJxWERURCRjLgvSoRL4ewIg6pVosuOMHhGSnSpC4NtKp/Zupq2vN9QoigBG6VLLlmjAD4z87MHdw9NN7n3VjslBC1COVg6bYSAbTiIKaY/r9lmz5tZrZZMA4JoLkCl1jRj7zbmyjARaDtUesURBTs9JJDaM9N+6E765pK3QtiLlpyaMGeufIjqJ2Jt3JxLTRhzIjglhT4zM1/4FOks4TlFqkM45bF67jl1oiFoqDAmBAGvWBsNW+sZLFbR82yjrTgWWDr1OK2efUBL3FBhxFL8DumIOGJYd3mQ51HtGMZpIjgdgTLzzGDpz89xgfzSOTySZXimuL64sowyxPjJ/iELxC0b+TJjmWoSOs+YEhmxDN+4EMaDuHQuL5v39J+1Dr+pytB918yMZbA8rtpoD+GeZucVdFwky+haQIewCueLTa9RT/9E2nz8Xrp0YxwtrjsRaQk9VBhs4DHR16DT1HGwkHzOUicfcEKFSXonki6jOniZeWZ0mA3DSU2YsdUDbAUltGKE8e9KT02YxdN66J/vznAxgwhuBMCZGBy0xfmYKM5uwsu9Q+PqjdHWRIa4R3PN8ddp19XzHv6xD2B0wKUUqS+d43W5cfL/6Ml/LLeYh0VUgiBxRmfwpjkufWrVDAz8cuUuusGmmrCLdu3R/Zwnjx92kIlnMPsE8lIj+BAIVW7+odJfoVO1DJcZVe4rdbN4NLafCWHAfdBGH3lzkJ+0mREGDKLVwi4m0UGQH9ffLYJ8w6k/MyJnaH7Pt3gP24o4QeFMWSaIUZ20XBgdLaWBk1smDa3703Q2/TmWiXuTmT+V8qTUVC8tD6GcSq6BXAO5BsqjAfcAldEsYtvp9YFOKhYnl4eFCqeCDvG26mZcZChqwukxORR7gXOjcG0k70PX1v5rNymvYYbvGnOj5bFkNeDdS64wTLIs5KXraSA3jJ6eyo6VG6bsKtcjmBtGT09lx8rUrGzZpQ8jiOsecSnRaXGvmCIT9sLiqILBap4bRqFnC3RIwyA8LwyHX4TNyjyrn2/Qxn4kRiBc5ylRiQXjKK5xV6GGwXLDqDSE+9TiulLyCjRzwwjKwKo9jiWcHxwrQCMGcUGeAVfxfQxO7Tz7RisdufhhS504K1JTP0B1p7ullW5NbePWQgOuYg2D82DfYruOYJBFdRetU0iuwztNrDHZz5o0vyOJsvJxJ/wScyOzijQMmqxH/7rC2nBkn2+TFY1G3rp8nykbZ0a7WbyX+fyUIpqsWpaG/X6a93oyTG1XkYb56Z4WyyhPtXY6Z/WCVAbFNwGB+WVyFdn5H3ivzlLvA3fgMcimq0jD9A9vnq5hG6mz6irSMFk1hshXyX2MqSObIlOlhk1faYvjO7jC851L060jPOAP13nOm3TOOs6je6VnFLlKNoyJI0FRGNbBNcETjrr+/sh9dPLyVCVJGAu/f5+700rHYbJHG3d5PnSjzKwBLNkwfjRWsg8m3ZZY6UNUr7MuYscxPw7iw6HwX7Hv70WZmIEBcWb56+ybfSaeoMRUl4TC4qs6Wk6cOoxiFF468iBv3IN+vBz4iRkm7SfG8/FOUerhsB/OvXNqaFTMVxYcIzXhEjNM2k+MeGJNVhQ3iB8ODu3zvkPOGxbH2V4TLjHDRH1ikuov4igJ944PDlZZH5aNkh/3YMS5s1xFIzHDpP3EqISNAsO9HKvu6KDt77bQPnZXh1+fgxavFQZhuPKnB6PQk3FLNoypU/QyY6XEwZMJB0XDQDqXp5igJ5ZRsmFG0o0AouBZD+dTMhm1UG6Y3DDZ0cDMCe9bzHRdHp8dpiROSu5jpPJGRLRt4VHasOdu+vn+u2jD/W/68owPxDzT3Ukbe9/x/agtzsB/uXYePTejOfAWD18iPgme99tyX2Hiw1fiYHycHN8Or2dPzy8e2uW+rJNR/27Xf+g3vccj8RHlYgK5YH79CodXrGGgAOyQ+cbO5ewT3WMtAz21tMNaasbFPL/uiTc7+rW6+YHXY3DFy35uGFkjLI4dMy8fnUeb3m6w9gIcbPwq3SrwXReKDAGg8aOq6dSizwZgqJNkw1RkHyOrBh9Gb1twzPohbdnhMexqq3iGmTHazCRmPlyWrcTiG2ff47nYRoHmAWEggLwmXG4YhRYbayZRd/Mawuf5dB1wkQd5Tbi8KfPRIm5Q4t9MxP1wL144Sf+68h513xyah0OThS/3PTZljjFjiKxU9KhMVETaYbnzz5uytC3iQz83jI9i0gbnhknbAj70c8P4KCZtsMIwhfa0mao8+l6de0ZlUIp1A9O1gQ0s+ImR9fFPcD9SnHU34WtUU/1t+ealkSJBzmeugexo4P+MLFwyqfYDvAAAAABJRU5ErkJggg=="

/***/ }),
/* 1397 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.sidebarStatus = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _redux = __webpack_require__(66);

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var initialState = _immutable2.default.fromJS({ opened: false });
var sidebarStatus = exports.sidebarStatus = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.sidebar.SHOULD_OPEN_SIDEBAR, function (state, action) {
    if (action.payload) {
        var opened = action.payload.opened;

        return state.set('opened', opened);
    }
}), initialState);
exports.default = (0, _redux.combineReducers)({
    sidebarStatus: sidebarStatus
});

/***/ }),
/* 1398 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.currentModals = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions;

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var currentModals = exports.currentModals = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.ui.OPEN_MODAL, function (state, action) {
    var _action$payload = action.payload,
        modalType = _action$payload.modalType,
        modalProps = _action$payload.modalProps;

    return state.concat({ type: modalType, props: modalProps });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.ui.CLOSE_MODAL, function (state, action) {
    return state.butLast();
}), _handleActions), _immutable2.default.Set([]));

/***/ }),
/* 1399 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.curLarkTitle = exports.headerStatus = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _reduxActions = __webpack_require__(29);

var _redux = __webpack_require__(66);

var _$constants = __webpack_require__(5);

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var initialState = _immutable2.default.fromJS({ shown: true });
var headerStatus = exports.headerStatus = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.header.TOGGLE_HEADER_SHOWN, function (state, action) {
    if (action.payload) {
        var shown = action.payload.shown;

        return state.set('shown', shown);
    }
}), initialState);
var curLarkTitle = exports.curLarkTitle = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.header.STORE_LARK_TITLE, function (state, action) {
    if (action.payload) {
        var title = action.payload.title;

        return title;
    }
}), '');
exports.default = (0, _redux.combineReducers)({
    headerStatus: headerStatus,
    curLarkTitle: curLarkTitle
});

/***/ }),
/* 1400 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _reduce2 = __webpack_require__(230);

var _reduce3 = _interopRequireDefault(_reduce2);

var _isEqual2 = __webpack_require__(748);

var _isEqual3 = _interopRequireDefault(_isEqual2);

var _handleActions, _handleActions3, _handleActions5, _handleActions6, _handleActions8, _handleActions10, _handleActions11, _handleActions12, _handleActions13, _handleActions15, _handleActions16;

var _redux = __webpack_require__(66);

var _reduxActions = __webpack_require__(29);

var _sheet = __webpack_require__(744);

var _browserHelper = __webpack_require__(27);

var _browserHelper2 = _interopRequireDefault(_browserHelper);

var _sheet2 = __webpack_require__(382);

var _$constants = __webpack_require__(5);

var _filter = __webpack_require__(1401);

var _filter2 = _interopRequireDefault(_filter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var isMobile = _browserHelper2.default.mobile;

var formula = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _sheet2.SHOW_FORMULA_LIST, function (state) {
    return Object.assign({}, state, { visible: true });
}), (0, _defineProperty3.default)(_handleActions, _sheet2.HIDE_FORMULA_LIST, function (state) {
    return Object.assign({}, state, { visible: false });
}), _handleActions), { visible: false });
var permissions = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _sheet2.SET_SHEET_PERMISSIONS, function (state, _ref) {
    var payload = _ref.payload;

    if (payload) return payload;
    return state;
}), []);
var status = (0, _reduxActions.handleActions)((_handleActions3 = {}, (0, _defineProperty3.default)(_handleActions3, _sheet2.FREEZE_SPREAD_TOGGLE, function (state, _ref2) {
    var _ref2$payload = _ref2.payload,
        payload = _ref2$payload === undefined ? !state.frozen : _ref2$payload;

    if (payload === state.frozen) {
        return state;
    }
    return Object.assign({}, state, { frozen: payload });
}), (0, _defineProperty3.default)(_handleActions3, _sheet2.UPDATE_SHEET_STATUS, function (state, _ref3) {
    var payload = _ref3.payload;

    if (payload.emptySheet === state.emptySheet) {
        return state;
    }
    return Object.assign({}, state, { emptySheet: payload.emptySheet });
}), (0, _defineProperty3.default)(_handleActions3, _sheet2.CHANGE_SHEET_LOCKED_STATUS, function (state, _ref4) {
    var payload = _ref4.payload;
    var _payload$lockedPermis = payload.lockedPermissionInfo,
        _payload$lockedPermis2 = _payload$lockedPermis.hasPermission,
        hasPermission = _payload$lockedPermis2 === undefined ? state.hasPermission : _payload$lockedPermis2,
        _payload$lockedPermis3 = _payload$lockedPermis.sheetPermission,
        sheetPermission = _payload$lockedPermis3 === undefined ? state.sheetPermission : _payload$lockedPermis3,
        _payload$lockedPermis4 = _payload$lockedPermis.rowPermission,
        rowPermission = _payload$lockedPermis4 === undefined ? state.rowPermission : _payload$lockedPermis4,
        _payload$lockedPermis5 = _payload$lockedPermis.colPermission,
        colPermission = _payload$lockedPermis5 === undefined ? state.colPermission : _payload$lockedPermis5;

    return Object.assign({}, state, { hasPermission: hasPermission, sheetPermission: sheetPermission, rowPermission: rowPermission, colPermission: colPermission });
}), (0, _defineProperty3.default)(_handleActions3, _sheet2.CHANNEL_ONLINE, function (state) {
    if (state.online) {
        return state;
    }
    return Object.assign({}, state, { online: true });
}), (0, _defineProperty3.default)(_handleActions3, _sheet2.CHANNEL_OFFLINE, function (state) {
    if (!state.online) {
        return state;
    }
    return Object.assign({}, state, { online: false });
}), (0, _defineProperty3.default)(_handleActions3, _$constants.actionTypes.network.SET_NETWORK_STATE, function (state, action) {
    if (action.payload) {
        var data = action.payload.data;

        state.online = data.connected;
        return Object.assign({}, state);
    }
}), _handleActions3), { frozen: false, emptySheet: false, online: true, isMobile: isMobile });
var coord = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _sheet2.UPDATE_SHEET_STATUS, function (state, _ref5) {
    var coord = _ref5.payload.coord;

    if (!coord) {
        return state;
    }
    if (coord.row === state.row && coord.col === state.col) {
        return state;
    }
    return Object.assign({}, state, coord);
}), { row: 0, col: 0 });
var toolbar = (0, _reduxActions.handleActions)((_handleActions5 = {}, (0, _defineProperty3.default)(_handleActions5, _sheet2.UPDATE_SHEET_STATUS, function (state, _ref6) {
    var payload = _ref6.payload;
    var _payload$cellStatus = payload.cellStatus,
        cellStatus = _payload$cellStatus === undefined ? {} : _payload$cellStatus,
        _payload$rangeStatus = payload.rangeStatus,
        rangeStatus = _payload$rangeStatus === undefined ? {} : _payload$rangeStatus,
        _payload$isFiltered = payload.isFiltered,
        isFiltered = _payload$isFiltered === undefined ? false : _payload$isFiltered;

    if (isFiltered === state.isFiltered && (0, _isEqual3.default)(cellStatus, state.cellStatus) && (0, _isEqual3.default)(rangeStatus, state.rangeStatus)) {
        return state;
    }
    return Object.assign({}, state, { cellStatus: cellStatus || {}, rangeStatus: rangeStatus || {}, isFiltered: isFiltered });
}), (0, _defineProperty3.default)(_handleActions5, _sheet2.SHOW_HYPER_LINK_EDITOR, function (state, _ref7) {
    var payload = _ref7.payload;

    return Object.assign({}, state, { hyperlinkEditor: Object.assign({}, payload) });
}), (0, _defineProperty3.default)(_handleActions5, _sheet2.HIDE_HYPER_LINK_EDITOR, function (state) {
    return Object.assign({}, state, { hyperlinkEditor: false });
}), (0, _defineProperty3.default)(_handleActions5, _sheet2.TOGGLE_NAV_BAR, function (state, _ref8) {
    var payload = _ref8.payload;

    return Object.assign({}, state, { toggleNavBar: Object.assign({}, payload) });
}), _handleActions5), { cellStatus: {}, rangeStatus: {} });
var embedToolbar = (0, _reduxActions.handleActions)((_handleActions6 = {}, (0, _defineProperty3.default)(_handleActions6, _sheet2.SET_EMBED_TOOLBAR_VISIBLE, function (state, _ref9) {
    var payload = _ref9.payload;

    var visible = payload;
    return Object.assign({}, state, { visible: visible });
}), (0, _defineProperty3.default)(_handleActions6, _sheet2.SET_EMBED_SHEET_COMMENT_FUNC, function (state, _ref10) {
    var payload = _ref10.payload;

    return Object.assign({}, state, { onComment: payload });
}), (0, _defineProperty3.default)(_handleActions6, _sheet2.SET_EMBED_SHEET_ALLOW_COMMENT, function (state, _ref11) {
    var payload = _ref11.payload;

    return Object.assign({}, state, { commentable: payload });
}), (0, _defineProperty3.default)(_handleActions6, _sheet2.SET_ACTIVE_SHEETID, function (state, _ref12) {
    var payload = _ref12.payload;
    return Object.assign({}, state, { activeSheetId: payload });
}), _handleActions6), {
    visible: false,
    onComment: null,
    commentable: false,
    activeSheetId: ''
});
// const activeSpread = handleActions({
//   [SET_ACTIVE_SPREAD]: (state, { payload }) => payload,
// }, null);
var formatPainter = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _sheet2.FORMAT_PAINTER_TOGGLE, function (state, _ref13) {
    var _ref13$payload = _ref13.payload,
        payload = _ref13$payload === undefined ? null : _ref13$payload;

    var painterFormatting = payload == null ? !state.painterFormatting : payload;
    return Object.assign({}, state, { painterFormatting: painterFormatting });
}), {
    painterFormatting: false
});
var findbar = (0, _reduxActions.handleActions)((_handleActions8 = {}, (0, _defineProperty3.default)(_handleActions8, _sheet2.SHOW_FINDBAR, function (state, _ref14) {
    var payload = _ref14.payload;

    if (state.visible && !payload) {
        return Object.assign({}, state, { findFocus: true });
    }
    return Object.assign({}, state, { visible: true, replaceVisible: payload, findFocus: true });
}), (0, _defineProperty3.default)(_handleActions8, _sheet2.HIDE_FINDBAR, function (state) {
    return Object.assign({}, state, { visible: false, replaceVisible: false, findFocus: false });
}), (0, _defineProperty3.default)(_handleActions8, _sheet2.FOCUS_FINDBAR, function (state, _ref15) {
    var payload = _ref15.payload;

    return Object.assign({}, state, { findFocus: payload });
}), _handleActions8), { visible: false, replaceVisible: false, findFocus: false });
var chartOptions = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _sheet2.CHANGE_CHART_OPTIONS, function (state, _ref16) {
    var payload = _ref16.payload;

    return Object.assign({}, state, payload);
}), {
    chartType: 'bar',
    chartTitle: '',
    chartDataRange: {
        enableEdit: true,
        isValid: true
    },
    chartXRange: [],
    xAxisPos: 'row',
    stacking: '0',
    chartYRange: [],
    chartValue: []
});
var comment = (0, _reduxActions.handleActions)((_handleActions10 = {}, (0, _defineProperty3.default)(_handleActions10, _sheet2.TOGGLE_COMMENT_PANEL, function (state, _ref17) {
    var payload = _ref17.payload;
    var prevToggle = state.toggle,
        prevTarget = state.target;
    var _payload$toggle = payload.toggle,
        toggle = _payload$toggle === undefined ? !prevToggle : _payload$toggle,
        _payload$target = payload.target,
        target = _payload$target === undefined ? prevTarget : _payload$target;

    return Object.assign({}, state, {
        toggle: toggle,
        target: target || null,
        reopenCommentId: null,
        mask: false
    });
}), (0, _defineProperty3.default)(_handleActions10, _sheet2.PULL_SHEET_COMMENT_SUCCESS, function (state, _ref18) {
    var payload = _ref18.payload;

    return Object.assign({}, state, {
        data: Object.assign({}, state.data, payload),
        reopenCommentId: null
    });
}), (0, _defineProperty3.default)(_handleActions10, _sheet2.PULL_SHEET_COMMENT_FAIL, function (state, _ref19) {
    var payload = _ref19.payload;

    return state;
}), (0, _defineProperty3.default)(_handleActions10, _sheet2.UPDATE_COMMENT_DATA, function (state, _ref20) {
    var payload = _ref20.payload;
    return Object.assign({}, state, {
        data: Object.assign({}, state.data, payload),
        reopenCommentId: null
    });
}), (0, _defineProperty3.default)(_handleActions10, _sheet2.UPDATE_SHEET_REPLY_COMMENT_SUCCESS, function (state, _ref21) {
    var payload = _ref21.payload;

    if (payload) {
        var commentId = payload.commentId,
            replyId = payload.replyId;

        var _comment = state.data[commentId];
        if (!_comment || !_comment.comment_list) {
            return state;
        }
        var index = _comment.comment_list.findIndex(function (item) {
            return item.reply_id === replyId;
        });
        if (index < 0) {
            return state;
        }
        var newCommentList = [].concat((0, _toConsumableArray3.default)(_comment.comment_list));
        newCommentList[index] = Object.assign({}, newCommentList[index], payload.reply);
        _comment.comment_list = newCommentList;
        return Object.assign({}, state, {
            data: Object.assign({}, state.data, (0, _defineProperty3.default)({}, commentId, _comment))
        });
    }
    return state;
}), (0, _defineProperty3.default)(_handleActions10, _sheet2.DELETE_SHEET_COMMENT, function (state, _ref22) {
    var payload = _ref22.payload;

    var commentId = payload.commentId;
    var newState = Object.assign({}, state);
    if (newState[commentId]) {
        delete newState[commentId];
    }
    return newState;
}), (0, _defineProperty3.default)(_handleActions10, _sheet2.REOPEN_SHEET_COMMENT, function (state, _ref23) {
    var payload = _ref23.payload;

    return Object.assign({}, state, {
        data: Object.assign({}, state.data, (0, _defineProperty3.default)({}, payload.comment_id, Object.assign({}, payload, {
            finish: 0
        }))),
        reopenCommentId: payload.comment_id
    });
}), (0, _defineProperty3.default)(_handleActions10, _sheet2.TOGGLE_COMMENT_MASK, function (state, _ref24) {
    var payload = _ref24.payload;

    return Object.assign({}, state, {
        target: state.mask && payload ? null : state.target,
        mask: payload
    });
}), (0, _defineProperty3.default)(_handleActions10, _sheet2.CLEAN_COMMENT, function (state, action) {
    return {
        toggle: false,
        target: null,
        data: {},
        mask: true
    };
}), _handleActions10), { toggle: false, target: null, data: {}, reopenCommentId: null, mask: true });
var history = (0, _reduxActions.handleActions)((_handleActions11 = {}, (0, _defineProperty3.default)(_handleActions11, _sheet2.SHOW_HISTORY, function (state, _ref25) {
    var payload = _ref25.payload;

    return Object.assign({}, state, { visible: true, localVisible: !!payload });
}), (0, _defineProperty3.default)(_handleActions11, _sheet2.HIDE_HISTORY, function (state) {
    return Object.assign({}, state, { visible: false, localVisible: false });
}), (0, _defineProperty3.default)(_handleActions11, _sheet2.TOGGLE_HISTORY, function (state) {
    return Object.assign({}, state, { visible: !state.visible, localVisible: false });
}), _handleActions11), { visible: false, localVisible: false });
var dropdownMenu = (0, _reduxActions.handleActions)((_handleActions12 = {}, (0, _defineProperty3.default)(_handleActions12, _sheet2.SHOW_DROPDOWN_MENU, function (state, _ref26) {
    var payload = _ref26.payload;

    if (state.visible && !payload) {
        return Object.assign({}, state);
    }
    return Object.assign({}, state, { visible: true });
}), (0, _defineProperty3.default)(_handleActions12, _sheet2.HIDE_DROPDOWN_MENU, function (state) {
    return Object.assign({}, state, { visible: false });
}), _handleActions12), {
    visible: false
});
var fetchState = (0, _reduxActions.handleActions)((_handleActions13 = {}, (0, _defineProperty3.default)(_handleActions13, _sheet2.SNAPSHOT_LOADED, function (state) {
    return Object.assign({}, state, {
        spreadState: Object.assign({}, state.spreadState, {
            loading: false,
            loaded: true
        })
    });
}), (0, _defineProperty3.default)(_handleActions13, _sheet2.SNAPSHOT_LOADING, function (state) {
    return Object.assign({}, state, {
        spreadState: Object.assign({}, state.spreadState, {
            loading: true,
            loaded: false
        })
    });
}), (0, _defineProperty3.default)(_handleActions13, _sheet2.SNAPSHOT_META, function (state, _ref27) {
    var payload = _ref27.payload;
    var activeSheetId = payload.activeSheetId,
        initialRows = payload.initialRows,
        snapshot = payload.snapshot;

    var totalSheet = snapshot.sheetCount || 1;
    var loadedSheet = 0;
    var sheetState = (0, _reduce3.default)(snapshot.sheets, function (pre, sheet) {
        var row = 0;
        var totalRow = sheet.rowCount == null ? _sheet.DEFAULT_ROW_COUNT : sheet.rowCount;
        if (sheet.id === activeSheetId) {
            row = initialRows;
        }
        if (row >= totalRow) {
            loadedSheet++;
            pre[sheet.id] = {
                loading: false,
                loaded: true,
                totalRow: totalRow,
                row: row
            };
            return pre;
        }
        pre[sheet.id] = {
            loading: true,
            loaded: false,
            totalRow: totalRow,
            row: row
        };
        return pre;
    }, {});
    var loaded = loadedSheet === totalSheet;
    return {
        spreadState: {
            totalSheet: totalSheet,
            loading: !loaded,
            loaded: loaded,
            loadedSheet: loadedSheet
        },
        sheetState: sheetState
    };
}), (0, _defineProperty3.default)(_handleActions13, _sheet2.LOAD_ROW_DATA, function (state, _ref28) {
    var payload = _ref28.payload;
    var sheetId = payload.sheetId,
        loadedRow = payload.loadedRow;

    var prevSheetState = state.sheetState[sheetId];
    var newSpreadState = Object.assign({}, state.spreadState);
    var newSheetState = Object.assign({}, state.sheetState[sheetId]);
    // sheet 加载完毕
    if (loadedRow >= prevSheetState.totalRow) {
        newSheetState.loading = false;
        newSheetState.loaded = true;
        newSpreadState.loadedSheet++;
        // 所有 sheet 都加载完毕
        if (newSpreadState.loadedSheet >= newSpreadState.totalSheet) {
            newSpreadState.loading = false;
            newSpreadState.loaded = true;
        }
    }
    return {
        spreadState: newSpreadState,
        sheetState: Object.assign({}, state.sheetState, (0, _defineProperty3.default)({}, sheetId, newSheetState))
    };
}), (0, _defineProperty3.default)(_handleActions13, _sheet2.RESET_SPREAD_STATE, function (state) {
    return {
        spreadState: {
            loading: true,
            loaded: false,
            totalSheet: 0,
            loadedSheet: 0
        },
        sheetState: {}
    };
}), _handleActions13), {
    spreadState: {
        loading: true,
        loaded: false,
        totalSheet: 0,
        loadedSheet: 0
    },
    sheetState: {}
});
var fileExport = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _sheet2.EXPORT_FILE, function (state, _ref29) {
    var _ref29$payload = _ref29.payload,
        payload = _ref29$payload === undefined ? {} : _ref29$payload;

    return Object.assign({}, state, payload);
}), {
    isExport: false
});
// 用于判断离线有无缓存
var clientVars = (0, _reduxActions.handleActions)((_handleActions15 = {}, (0, _defineProperty3.default)(_handleActions15, _sheet2.RESET_SHEET_CLIENT_VARS, function (state, action) {
    return null;
}), (0, _defineProperty3.default)(_handleActions15, _sheet2.SET_SHEET_CLIENT_VARS, function (state, action) {
    if (action.payload) {
        return action.payload;
    }
    return state;
}), _handleActions15), null);
var chart = (0, _reduxActions.handleActions)((_handleActions16 = {}, (0, _defineProperty3.default)(_handleActions16, _sheet2.INIT_SHEET_CHART, function (state, _ref30) {
    var payload = _ref30.payload;

    return Object.assign({}, state, payload);
}), (0, _defineProperty3.default)(_handleActions16, _sheet2.SET_SHEET_CHART, function (state, _ref31) {
    var payload = _ref31.payload;
    var chartBlock = payload.chartBlock,
        forceUpdate = payload.forceUpdate;
    var sheetId = chartBlock.sheetId,
        chartId = chartBlock.chartId;

    if (!state[sheetId]) {
        return Object.assign({}, state, (0, _defineProperty3.default)({}, sheetId, (0, _defineProperty3.default)({}, chartId, Object.assign({}, chartBlock, { forceUpdate: forceUpdate }))));
    }
    return Object.assign({}, state, (0, _defineProperty3.default)({}, sheetId, Object.assign({}, state[sheetId], (0, _defineProperty3.default)({}, chartId, Object.assign({}, state[sheetId][chartId], chartBlock, { forceUpdate: forceUpdate })))));
}), (0, _defineProperty3.default)(_handleActions16, _sheet2.DEL_SHEET_CHART, function (state, _ref32) {
    var payload = _ref32.payload;
    var sheetId = payload.sheetId,
        chartId = payload.chartId;

    var newState = Object.assign({}, state, (0, _defineProperty3.default)({}, sheetId, Object.assign({}, state[sheetId])));
    Reflect.deleteProperty(newState[sheetId], chartId);
    if (state.isShowChartSettingPanel) {
        newState.isShowChartSettingPanel = false;
    }
    newState.activeChartId = '';
    return newState;
}), (0, _defineProperty3.default)(_handleActions16, _sheet2.SET_ACTIVE_CHART, function (state, _ref33) {
    var _Object$assign9;

    var payload = _ref33.payload;
    var sheetId = payload.sheetId,
        chartId = payload.chartId;

    if (state[sheetId][chartId].isActive) {
        return state;
    }
    var newSheet = Object.assign({}, state[sheetId]);
    for (var _chartId in newSheet) {
        newSheet[_chartId].isActive = false;
    }
    return Object.assign({}, state, (_Object$assign9 = {}, (0, _defineProperty3.default)(_Object$assign9, sheetId, Object.assign({}, newSheet, (0, _defineProperty3.default)({}, chartId, Object.assign({}, state[sheetId][chartId], {
        forceUpdate: false,
        isActive: true
    })))), (0, _defineProperty3.default)(_Object$assign9, 'activeChartId', chartId), _Object$assign9));
}), (0, _defineProperty3.default)(_handleActions16, _sheet2.CLEAR_ACTIVE_CHART, function (state) {
    var newState = state;
    Object.keys(state).forEach(function (sheetId) {
        if (state[sheetId]) {
            Object.keys(state[sheetId]).forEach(function (chartId) {
                if (state[sheetId][chartId].isActive) {
                    newState = Object.assign({}, newState, (0, _defineProperty3.default)({}, sheetId, Object.assign({}, newState[sheetId], (0, _defineProperty3.default)({}, chartId, Object.assign({}, newState[sheetId][chartId], {
                        isActive: false
                    })))));
                }
            });
        }
    });
    newState.activeChartId = '';
    return newState;
}), (0, _defineProperty3.default)(_handleActions16, _sheet2.HIDE_CHART_PANEL, function (state) {
    if (!state.isShowChartSettingPanel) {
        return state;
    }
    return Object.assign({}, state, { isShowChartSettingPanel: false });
}), (0, _defineProperty3.default)(_handleActions16, _sheet2.SHOW_CHART_PANEL, function (state) {
    if (state.isShowChartSettingPanel) {
        return state;
    }
    return Object.assign({}, state, { isShowChartSettingPanel: true });
}), _handleActions16), { isShowChartSettingPanel: false });
exports.default = (0, _redux.combineReducers)({
    permissions: permissions,
    toolbar: toolbar,
    status: status,
    formula: formula,
    findbar: findbar,
    coord: coord,
    // activeSpread,
    filter: _filter2.default,
    formatPainter: formatPainter,
    comment: comment,
    history: history,
    dropdownMenu: dropdownMenu,
    fetchState: fetchState,
    embedToolbar: embedToolbar,
    fileExport: fileExport,
    clientVars: clientVars,
    chart: chart,
    chartOptions: chartOptions
});

/***/ }),
/* 1401 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _reduxActions = __webpack_require__(29);

var _redux = __webpack_require__(66);

var _sheet = __webpack_require__(382);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var filterMenuState = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _sheet.SHOW_FILTER_MENU, function (state, _ref) {
    var _ref$payload = _ref.payload,
        visible = _ref$payload.visible,
        col = _ref$payload.col,
        top = _ref$payload.top,
        left = _ref$payload.left;
    return { visible: visible, col: col, top: top, left: left };
}), {
    visible: false
});
exports.default = (0, _redux.combineReducers)({
    filterMenuState: filterMenuState
});

/***/ }),
/* 1402 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.etherpad = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions;

var _redux = __webpack_require__(66);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var clientVars = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.etherpad.FETCH_CLIENT_VARS_SUCCESS, function (state, action) {
  if (action.payload) {
    return action.payload;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.etherpad.RESET_CLIENT_VARS, function (state, action) {
  return null;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.etherpad.SET_CLIENT_VARS, function (state, action) {
  if (action.payload) {
    return action.payload;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.etherpad.CHANGE_TOKEN, function (state, action) {
  if (action.payload && state) {
    var token = action.payload;

    return Object.assign({}, state, { token: token });
  }
  return state;
}), _handleActions), null);

var editor = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.etherpad.SET_EDITOR, function (state, action) {
  return action.payload;
}), null);

var etherpad = exports.etherpad = (0, _redux.combineReducers)({
  clientVars: clientVars,
  editor: editor
});

/***/ }),
/* 1403 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _toConsumableArray2 = __webpack_require__(58);

var _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);

var _uniqBy2 = __webpack_require__(788);

var _uniqBy3 = _interopRequireDefault(_uniqBy2);

var _groupBy3 = __webpack_require__(1404);

var _groupBy4 = _interopRequireDefault(_groupBy3);

var _get2 = __webpack_require__(14);

var _get3 = _interopRequireDefault(_get2);

var _handleActions, _handleActions2;

var _redux = __webpack_require__(66);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _docCommentHelper = __webpack_require__(465);

var _message = __webpack_require__(581);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DEFAULT_GLOBAL_COMMENTS = { commentList: [], version: 0 };
var DEFAULT_COMMENTS = { commentList: [], replyItems: {}, resolving: [], version: 0 };

var updateVersion = function updateVersion(cb) {
  return function (state, action) {
    var newState = cb(state, action);
    var version = (0, _get3.default)(action, 'payload.version');
    if (version > state.version) {
      newState.version = version;
    }
    return newState;
  };
};

var getTime = function getTime(time) {
  return Math.floor(new Date(time).getTime() / 1000);
};

var mergeGlobalComments = function mergeGlobalComments(state, action) {
  var _action$payload = action.payload,
      messageInfo = _action$payload.messageInfo,
      fetchedComments = _action$payload.comment_list,
      replaceAll = _action$payload.replaceAll,
      token = _action$payload.token;

  var nextState = Object.assign({}, state, { token: token });

  var _groupBy2 = (0, _groupBy4.default)(state.commentList, function (_ref) {
    var error = _ref.error,
        sending = _ref.sending;

    return error || sending ? 'unFinish' : 'normal';
  }),
      _groupBy2$unFinish = _groupBy2.unFinish,
      unFinishList = _groupBy2$unFinish === undefined ? [] : _groupBy2$unFinish,
      _groupBy2$normal = _groupBy2.normal,
      normalList = _groupBy2$normal === undefined ? [] : _groupBy2$normal;

  var allCommentInfo = void 0;
  var fetched = fetchedComments.reduce(function (memo, comment) {
    var comment_id = comment.comment_id,
        reply_id = comment.reply_id;

    var messageKey = (0, _docCommentHelper.formatReplyId)(comment_id, reply_id);
    var message = messageInfo && messageInfo[messageKey] || {};
    // 处理doc_message先回到的情况，此时commentId还是一个假的commentId，只能依靠uuid
    if (message.uuid) {
      var isUnFinishComment = unFinishList.find(function (unFinish) {
        return unFinish.uuid === message.uuid;
      });

      if (!isUnFinishComment) {
        memo.push(comment);
      }
    } else {
      memo.push(comment);
    }

    return memo;
  }, []);

  if (replaceAll) {
    allCommentInfo = fetched;
  } else {
    allCommentInfo = (0, _uniqBy3.default)(fetched.concat(normalList), 'reply_id');
  }

  var commentList = allCommentInfo.map(function (comment) {
    var comment_id = comment.comment_id,
        reply_id = comment.reply_id;

    var messageKey = (0, _docCommentHelper.formatReplyId)(comment_id, reply_id);
    var message = messageInfo && messageInfo[messageKey] || {};

    if (!comment.create_timestamp) {
      comment.create_timestamp = getTime(comment.create_time);
    }

    return message ? Object.assign({}, comment, message) : comment;
  });

  nextState.commentList = commentList.sort(function (a, b) {
    return a.create_timestamp - b.create_timestamp;
  }).concat(unFinishList);

  return nextState;
};

var mergeComments = function mergeComments(state, action) {
  var _action$payload2 = action.payload,
      allComments = _action$payload2.allComments,
      fetchedComments = _action$payload2.fetchedComments,
      messageInfo = _action$payload2.messageInfo,
      token = _action$payload2.token;

  var oldCommentList = state.commentList;

  var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems), commentList: [], token: token });
  var comments = allComments || [].concat(oldCommentList);

  var _loop = function _loop(index) {
    var comment = comments[index];
    if (!comment) {
      return 'break';
    }
    var commentId = comment.commentId;

    var commentInfo = fetchedComments[commentId];
    var oldComment = oldCommentList.find(function (c) {
      return c.commentId === commentId;
    });

    if (commentInfo) {
      var notOkReplyItems = (0, _get3.default)(oldComment, 'comment_list', []).filter(function (replyId) {
        var replyKey = (0, _docCommentHelper.formatReplyId)(commentId, replyId);

        var _ref2 = state.replyItems[replyKey] || {},
            type = _ref2.type,
            sending = _ref2.sending,
            error = _ref2.error;

        return (sending || error) && type === 'reply';
      });

      var replyIds = [];

      commentInfo.comment_list.forEach(function (replyItem) {
        var replyId = replyItem.reply_id;


        var replyKey = (0, _docCommentHelper.formatReplyId)(commentId, replyId);
        var message = messageInfo && messageInfo[replyKey] || {};
        var matchRelyItemInState = state.replyItems[replyKey];
        if (!matchRelyItemInState && message.uuid) {
          // 处理doc_message先于reply/add接口回来的情况
          var found = notOkReplyItems.find(function (id) {
            var notOkReplyItem = state.replyItems[(0, _docCommentHelper.formatReplyId)(commentId, id)];
            return notOkReplyItem.uuid === message.uuid;
          });

          if (found) {
            return;
          }
        }

        replyIds.push(replyId);
        var curReplyItem = matchRelyItemInState || {};

        if (!curReplyItem.create_timestamp && !replyItem.create_timestamp) {
          replyItem.create_timestamp = getTime(replyItem.create_time);
        }

        if (curReplyItem.type && curReplyItem.type === 'update') {
          if (replyItem.update_timestamp && curReplyItem.update_timestamp && replyItem.update_timestamp > curReplyItem.update_timestamp) {
            nextState.replyItems[replyKey] = Object.assign({}, replyItem, message);
          } else {
            nextState.replyItems[replyKey] = Object.assign({}, curReplyItem, message);
          }
        } else {
          nextState.replyItems[replyKey] = Object.assign({}, curReplyItem, replyItem, message);
        }
      });

      nextState.commentList.push(Object.assign({}, comment, commentInfo, {
        comment_list: replyIds.concat(notOkReplyItems)
      }));
    } else if (oldComment) {
      nextState.commentList.push(oldComment);
    }
  };

  for (var index = 0; index < comments.length; index++) {
    var _ret = _loop(index);

    if (_ret === 'break') break;
  }
  return nextState;
};

var globalComment = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.etherpad.SET_CLIENT_VARS, function (state, action) {
  var version = (0, _get3.default)(action.payload, 'collab_client_vars.doc_comment_rev', 0);
  return Object.assign({}, state, { version: version });
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.SET_GLOBAL_COMMENT_VERSION, function (state, action) {
  if (action.payload) {
    return Object.assign({}, state, { version: action.payload });
  }

  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.MERGE_GLOBAL_COMMENT_MESSAGE_STATUSES, updateVersion(function (state, action) {
  if (action.payload) {
    return mergeGlobalComments(state, action);
  }
  return state;
})), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.MERGE_GLOBAL_COMMENT_REACTION, function (state, action) {
  var newReactions = action.payload;
  if (newReactions && newReactions.size) {
    var commentList = state.commentList.map(function (item) {
      var replyId = item.reply_id;
      item.reaction = newReactions.get(replyId) || [];
      return item;
    });
    return Object.assign({}, state, {
      commentList: commentList
    });
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.REMOVE_GLOBAL_COMMENT, function (state, action) {
  if (action.payload.ids.length) {
    state.commentList = state.commentList.filter(function (item, index) {
      return action.payload.ids.indexOf(item.reply_id) === -1;
    });
  }
  return Object.assign({}, state);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.UPDATE_GLOBAL_COMMENT_START, function (state, action) {
  if (action.payload) {
    var replyId = action.payload.replyId;

    var nextCommentList = [].concat((0, _toConsumableArray3.default)(state.commentList));
    nextCommentList.some(function (item, index) {
      if (item.reply_id === replyId) {
        nextCommentList[index] = Object.assign({}, nextCommentList[index], {
          sending: true,
          type: 'update',
          error: null
        });
        return true;
      }
    });
    return Object.assign({}, state, {
      commentList: nextCommentList
    });
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.UPDATE_GLOBAL_COMMENT_SUCCESS, function (state, action) {
  if (action.payload) {
    var _action$payload3 = action.payload,
        replyId = _action$payload3.replyId,
        reply = _action$payload3.reply;

    var nextCommentList = [].concat((0, _toConsumableArray3.default)(state.commentList));
    nextCommentList.some(function (item, index) {
      if (item.reply_id === replyId) {
        nextCommentList[index] = Object.assign({}, nextCommentList[index], reply, {
          sending: false,
          type: 'update',
          error: null
        });
        return true;
      }
    });
    return Object.assign({}, state, {
      commentList: nextCommentList
    });
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.UPDATE_GLOBAL_COMMENT_FAIL, function (state, action) {
  if (action.payload) {
    var payload = action.payload,
        error = action.error;
    var replyId = payload.replyId;

    var nextCommentList = [].concat((0, _toConsumableArray3.default)(state.commentList));
    nextCommentList.some(function (item, index) {
      if (item.reply_id === replyId) {
        nextCommentList[index] = Object.assign({}, nextCommentList[index], {
          sending: false,
          type: 'update',
          error: error
        });
        return true;
      }
    });
    return Object.assign({}, state, {
      commentList: nextCommentList
    });
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.DELETE_GLOBAL_COMMENT_START, function (state, action) {
  if (action.payload) {
    var _action$payload4 = action.payload,
        replyId = _action$payload4.replyId,
        replyItem = _action$payload4.replyItem;

    var nextCommentList = [].concat((0, _toConsumableArray3.default)(state.commentList));
    nextCommentList.some(function (item, index) {
      if (item.reply_id === replyId) {
        nextCommentList[index] = Object.assign({}, nextCommentList[index], replyItem, {
          sending: true,
          type: 'delete',
          error: null
        });
        return true;
      }
    });
    return Object.assign({}, state, {
      commentList: nextCommentList
    });
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.DELETE_GLOBAL_COMMENT_SUCCESS, function (state, action) {
  if (action.payload) {
    var replyId = action.payload.replyId;

    var nextCommentList = [].concat((0, _toConsumableArray3.default)(state.commentList));
    nextCommentList = nextCommentList.filter(function (item) {
      return item.reply_id !== replyId;
    });
    return Object.assign({}, state, {
      commentList: nextCommentList
    });
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.DELETE_GLOBAL_COMMENT_FAIL, function (state, action) {
  if (action.payload) {
    var payload = action.payload,
        error = action.error;
    var replyId = payload.replyId,
        replyItem = payload.replyItem;

    var nextCommentList = [].concat((0, _toConsumableArray3.default)(state.commentList));
    nextCommentList.some(function (item, index) {
      if (item.reply_id === replyId) {
        nextCommentList[index] = Object.assign({}, nextCommentList[index], replyItem, {
          sending: false,
          type: 'delete',
          error: error
        });
        return true;
      }
    });
    return Object.assign({}, state, {
      commentList: nextCommentList
    });
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.RESOLVE_GLOBAL_COMMENT_SUCCESS, function (state, action) {
  if (action.payload) {
    var resolvedCommentId = action.payload.comment_id;

    state.commentList = state.commentList.filter(function (_ref3, index) {
      var commentId = _ref3.comment_id;

      return commentId !== resolvedCommentId;
    });
    return Object.assign({}, state);
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.ADD_NEW_GLOBAL_COMMENT_TO_LOCAL, function (state, action) {
  var nextState = Object.assign({}, state);
  var nextCommentList = [].concat(state.commentList);

  var commentItem = action.payload.commentItem;

  var index = nextState.commentList.findIndex(function (comment) {
    return comment.comment_id === commentItem.comment_id;
  });

  if (index > -1) {
    nextCommentList[index] = Object.assign({}, state.commentList[index], commentItem);
  } else {
    nextCommentList.push(commentItem);
  }
  nextState.commentList = nextCommentList;
  return nextState;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.ADD_NEW_GLOBAL_COMMENT_SUCCESS, function (state, action) {
  var nextState = Object.assign({}, state);
  var _action$payload5 = action.payload,
      reply_id = _action$payload5.reply_id,
      comment_id = _action$payload5.comment_id,
      commentItem = _action$payload5.commentItem;

  nextState.commentList = [].concat(state.commentList);
  action.payload.serverFirst = true;
  state.commentList.find(function (comment, index) {
    if (comment.comment_id === commentItem.comment_id) {
      nextState.commentList[index] = Object.assign({}, comment, {
        comment_id: comment_id,
        reply_id: reply_id,
        sending: false,
        error: null
      });
      return true;
    }
  });
  return nextState;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.ADD_NEW_GLOBAL_COMMENT_FAIL, function (state, action) {
  var nextState = Object.assign({}, state);

  var commentItem = action.payload.commentItem;

  nextState.commentList = [].concat(state.commentList);

  state.commentList.find(function (comment, index) {
    if (comment.comment_id === commentItem.comment_id) {
      nextState.commentList[index] = Object.assign({}, comment, { sending: false, error: action.error });
      return true;
    }
  });

  return nextState;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.REOPEN_GLOBAL_COMMENT, function (state, action) {
  var comment = (0, _get3.default)(action, 'payload.comment');

  var newList = (0, _uniqBy3.default)([Object.assign({}, comment.comment_list[0], { comment_id: comment.comment_id })].concat(state.commentList), 'reply_id');
  newList.sort(function (a, b) {
    return a.create_timestamp - b.create_timestamp;
  });

  state.commentList = newList;
  return Object.assign({}, state);
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.SET_LOCAL_GLOBAL_COMMENT_READ, function (state, action) {
  var messageIds = action.payload.messageIds;

  var nextState = Object.assign({}, state);

  var commentList = [].concat(state.commentList);
  state.commentList.forEach(function (comment, index) {
    var messageId = comment.message_id;

    if (messageIds.indexOf(messageId) > -1) {
      commentList[index] = Object.assign({}, comment, { status: _message.MESSAGE_READED });
    }
  });

  nextState.commentList = commentList;
  return nextState;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.comment.globalComment.RESET_GLOBAL_COMMENT, function (state, action) {
  return DEFAULT_GLOBAL_COMMENTS;
}), _handleActions), DEFAULT_GLOBAL_COMMENTS);

var docComment = (0, _reduxActions.handleActions)((_handleActions2 = {}, (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.etherpad.SET_CLIENT_VARS, function (state, action) {
  if (action.payload) {
    var version = (0, _get3.default)(action.payload, 'collab_client_vars.comment_rev');
    return Object.assign({}, state, { version: version });
  }

  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.SET_COMMENT_VERSION, function (state, action) {
  if (action.payload) {
    return Object.assign({}, state, { version: action.payload });
  }

  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.REOPEN_COMMENT, function (state, action) {
  var _action$payload6 = action.payload,
      insertComment = _action$payload6.insertComment,
      insertIndex = _action$payload6.insertIndex;

  if (insertIndex > -1) {
    var nextState = Object.assign({}, state, {
      replyItems: Object.assign({}, state.replyItems),
      commentList: [].concat(state.commentList)
    });

    var replyIds = [];
    insertComment.comment_list.forEach(function (replyItem) {
      var replyId = replyItem.reply_id;

      replyIds.push(replyId);

      var replyKey = (0, _docCommentHelper.formatReplyId)(insertComment.comment_id, replyId);
      var curReplyItem = state.replyItems[replyKey] || {};
      nextState.replyItems[replyKey] = Object.assign({}, curReplyItem, replyItem);
    });

    nextState.commentList.splice(insertIndex, 0, Object.assign({}, insertComment, { comment_list: replyIds }));

    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.MERGE_COMMENT_MESSAGE_STATUSES, updateVersion(function (state, action) {
  if (action.payload) {
    return mergeComments(state, action);
  }
  return state;
})), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.RESOLVE_COMMENT_SUCCESS, function (state, action) {
  if (action.payload) {
    var nextState = Object.assign({}, state, {
      resolving: [].concat((0, _toConsumableArray3.default)(state.resolving))
    });
    var _commentId = action.payload.comment_id;


    state.commentList.forEach(function (comment) {
      if (comment.commentId === _commentId) {
        nextState.resolving.push(comment);
      }
    });

    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.RESOLVE_COMMENT_ANIMATED, function (state, action) {
  if (action.payload) {
    var nextState = Object.assign({}, state, {
      commentList: [],
      replyItems: Object.assign({}, state.replyItems),
      resolving: []
    });
    var _commentId2 = action.payload.comment_id;


    state.commentList.forEach(function (comment) {
      if (comment.commentId === _commentId2) {
        comment.comment_list.forEach(function (replyId) {
          var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId2, replyId);
          delete nextState.replyItems[replyKey];
        });
        return;
      }
      nextState.commentList.push(comment);
    });

    nextState.resolving = state.resolving.filter(function (comment) {
      return comment.commentId !== _commentId2;
    });

    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.REPLY_COMMENT_START, function (state, action) {
  if (action.payload) {
    var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });
    var _action$payload7 = action.payload,
        _commentId3 = _action$payload7.commentId,
        replyItem = _action$payload7.replyItem;

    var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId3, replyItem.reply_id);
    if (!nextState.replyItems[replyKey]) {
      nextState.commentList = [].concat(state.commentList);
      nextState.commentList.find(function (comment, index) {
        if (comment.commentId === _commentId3) {
          nextState.commentList[index] = Object.assign({}, comment, {
            comment_list: [].concat(comment.comment_list, replyItem.reply_id)
          });
          return true;
        }
      });
    }

    nextState.replyItems[replyKey] = Object.assign({}, replyItem, { sending: true, error: null });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.REPLY_COMMENT_SUCCESS, function (state, action) {
  if (action.payload) {
    var _action$payload8 = action.payload,
        _commentId4 = _action$payload8.commentId,
        replyItem = _action$payload8.replyItem,
        newReplyId = _action$payload8.reply_id;


    var nextState = Object.assign({}, state, {
      replyItems: Object.assign({}, state.replyItems),
      commentList: [].concat(state.commentList)
    });

    state.commentList.find(function (comment, index) {
      var comment_list = comment.comment_list;

      if (comment.commentId === _commentId4) {
        nextState.commentList[index] = Object.assign({}, comment, {
          comment_list: comment_list.map(function (replyId) {
            if (replyId === replyItem.reply_id) {
              return newReplyId;
            }

            return replyId;
          })
        });
        return true;
      }
    });
    var prevReplyKey = (0, _docCommentHelper.formatReplyId)(_commentId4, replyItem.reply_id);
    delete nextState.replyItems[prevReplyKey];

    var nextReplyKey = (0, _docCommentHelper.formatReplyId)(_commentId4, newReplyId);
    nextState.replyItems[nextReplyKey] = Object.assign({}, replyItem, { reply_id: newReplyId, sending: false, error: null });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.REPLY_COMMENT_FAIL, function (state, action) {
  if (action.payload) {
    var payload = action.payload,
        error = action.error;
    var replyItem = payload.replyItem,
        _commentId5 = payload.commentId;


    var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });
    var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId5, replyItem.reply_id);
    nextState.replyItems[replyKey] = Object.assign({}, replyItem, { sending: false, error: error });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.UPDATE_REPLY_COMMENT_START, function (state, action) {
  if (action.payload) {
    var payload = action.payload;
    var _commentId6 = payload.commentId,
        replyItem = payload.replyItem;


    var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });
    var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId6, replyItem.reply_id);

    if (!nextState.replyItems[replyKey]) {
      return state;
    }

    var prevReplyItem = nextState.replyItems[replyKey];

    nextState.replyItems[replyKey] = Object.assign({}, prevReplyItem, replyItem, { type: 'update', sending: true, error: null });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.UPDATE_REPLY_COMMENT_SUCCESS, function (state, action) {
  if (action.payload) {
    var _action$payload9 = action.payload,
        _commentId7 = _action$payload9.commentId,
        replyItem = _action$payload9.replyItem,
        replyId = _action$payload9.replyId;

    var nextState = Object.assign({}, state, {
      replyItems: Object.assign({}, state.replyItems),
      commentList: [].concat(state.commentList)
    });

    var nextReplyKey = (0, _docCommentHelper.formatReplyId)(_commentId7, replyId);

    if (!nextState.replyItems[nextReplyKey]) {
      return state;
    }

    nextState.replyItems[nextReplyKey] = Object.assign({}, replyItem, {
      reply_id: replyId
    }, action.payload.reply, {
      sending: false,
      type: 'update',
      error: null
    });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.UPDATE_REPLY_COMMENT_FAIL, function (state, action) {
  if (action.payload) {
    var payload = action.payload,
        error = action.error;
    var _commentId8 = payload.commentId,
        replyItem = payload.replyItem;


    var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });
    var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId8, replyItem.reply_id);

    if (!nextState.replyItems[replyKey]) {
      return state;
    }

    var prevReplyItem = nextState.replyItems[replyKey];

    nextState.replyItems[replyKey] = Object.assign({}, prevReplyItem, { type: 'update', sending: false, error: error });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.DELETE_REPLY_COMMENT_START, function (state, action) {
  if (action.payload) {
    var payload = action.payload;
    var _commentId9 = payload.commentId,
        replyId = payload.replyId;


    var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });
    var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId9, replyId);

    if (!nextState.replyItems[replyKey]) {
      return state;
    }

    var prevReplyItem = nextState.replyItems[replyKey];

    nextState.replyItems[replyKey] = Object.assign({}, prevReplyItem, { type: 'delete', sending: true, error: null });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.DELETE_REPLY_COMMENT_SUCCESS, function (state, action) {
  if (action.payload) {
    var _action$payload10 = action.payload,
        _commentId10 = _action$payload10.commentId,
        replyId = _action$payload10.replyId;

    var nextState = Object.assign({}, state, {
      replyItems: Object.assign({}, state.replyItems),
      commentList: [].concat(state.commentList)
    });

    nextState.commentList = [].concat(state.commentList);

    nextState.commentList.find(function (comment, index) {
      if (comment.commentId === _commentId10) {
        var newCommentList = comment.comment_list.filter(function (item) {
          return item !== replyId;
        });
        nextState.commentList[index] = Object.assign({}, comment, {
          comment_list: newCommentList
        });
        return true;
      }
    });

    var prevReplyKey = (0, _docCommentHelper.formatReplyId)(_commentId10, replyId);

    if (!nextState.replyItems[prevReplyKey]) {
      return state;
    }

    delete nextState.replyItems[prevReplyKey];

    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.DELETE_REPLY_COMMENT_FAIL, function (state, action) {
  if (action.payload) {
    var payload = action.payload,
        error = action.error;
    var _commentId11 = payload.commentId,
        replyId = payload.replyId;


    var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });
    var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId11, replyId);

    if (!nextState.replyItems[replyKey]) {
      return state;
    }

    var prevReplyItem = nextState.replyItems[replyKey];

    nextState.replyItems[replyKey] = Object.assign({}, prevReplyItem, { sending: false, type: 'delete', error: error });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.START_NEW_COMMENT, function (state, action) {
  var _action$payload11 = action.payload,
      insertIndex = _action$payload11.insertIndex,
      commentId = _action$payload11.commentId,
      top = _action$payload11.top,
      quote = _action$payload11.quote,
      selZone = _action$payload11.selZone;

  var nextState = Object.assign({}, state, {
    commentList: [].concat(state.commentList)
  });

  nextState.commentList.splice(insertIndex, 0, { selZone: selZone, commentId: commentId, top: top, quote: quote, comment_list: [] });
  return nextState;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.REMOVE_COMMENTS, function (state, action) {
  var commentIds = action.payload;
  var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems), commentList: [] });

  state.commentList.forEach(function (comment, index) {
    var found = commentIds.indexOf(comment.commentId) > -1;
    if (found) {
      comment.comment_list.forEach(function (replyId) {
        var replyKey = (0, _docCommentHelper.formatReplyId)(comment.commentId, replyId);
        delete nextState.replyItems[replyKey];
      });
      return;
    }

    nextState.commentList.push(comment);
  });

  return nextState;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.POST_COMMENT_TO_LOCAL, function (state, action) {
  if (action.payload) {
    var _action$payload12 = action.payload,
        replyItem = _action$payload12.replyItem,
        _commentId12 = _action$payload12.commentId,
        quote = _action$payload12.quote;

    var nextState = Object.assign({}, state, {
      replyItems: Object.assign({}, state.replyItems),
      commentList: [].concat(state.commentList)
    });

    state.commentList.find(function (comment, index) {
      if (comment.commentId === _commentId12) {
        var replyId = replyItem.reply_id;

        nextState.commentList[index] = Object.assign({}, comment, {
          quote: quote,
          comment_list: [replyId],
          localStartTime: Date.now()
        });

        var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId12, replyId);
        nextState.replyItems[replyKey] = replyItem;
        return true;
      }
    });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.POST_COMMENT_SUCCESS, function (state, action) {
  if (action.payload) {
    var _action$payload13 = action.payload,
        replyItem = _action$payload13.replyItem,
        _commentId13 = _action$payload13.commentId,
        newReplyId = _action$payload13.reply_id;


    var nextState = Object.assign({}, state, {
      replyItems: Object.assign({}, state.replyItems),
      commentList: [].concat(state.commentList)
    });

    state.commentList.find(function (comment, index) {
      if (comment.commentId === _commentId13) {
        var replyId = replyItem.reply_id;

        nextState.commentList[index] = Object.assign({}, comment, { comment_list: [newReplyId] });

        var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId13, replyId);
        delete nextState.replyItems[replyKey];

        var newReplyKey = (0, _docCommentHelper.formatReplyId)(_commentId13, newReplyId);
        nextState.replyItems[newReplyKey] = Object.assign({}, replyItem, { reply_id: newReplyId });
        return true;
      }
    });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.POST_COMMENT_FAIL, function (state, action) {
  if (action.payload) {
    var payload = action.payload,
        error = action.error;
    var replyItem = payload.replyItem,
        _commentId14 = payload.commentId;


    var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });

    var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId14, replyItem.reply_id);
    nextState.replyItems[replyKey] = Object.assign({}, replyItem, { error: error, sending: false });

    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.LINK_COMMENT_TO_DOC, function (state, action) {
  if (action.payload) {
    var _action$payload14 = action.payload,
        _commentId15 = _action$payload14.commentId,
        replyId = _action$payload14.replyId;


    var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });

    var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId15, replyId);
    var replyItem = state.replyItems[replyKey];
    nextState.replyItems[replyKey] = Object.assign({}, replyItem, { sending: true, error: null });
    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.LINK_COMMENT_TO_DOC_OK, function (state, action) {
  if (action.payload) {
    var _action$payload15 = action.payload,
        _commentId16 = _action$payload15.commentId,
        newCommentId = _action$payload15.newCommentId;


    var nextState = Object.assign({}, state, {
      replyItems: Object.assign({}, state.replyItems),
      commentList: [].concat(state.commentList)
    });

    state.commentList.find(function (comment, index) {
      if (comment.commentId === _commentId16) {
        var rootReplyId = comment.comment_list[0];
        var prevReplyKey = (0, _docCommentHelper.formatReplyId)(_commentId16, rootReplyId);
        var prevReplyItem = state.replyItems[prevReplyKey];
        delete nextState.replyItems[prevReplyKey];

        var newReplyKey = (0, _docCommentHelper.formatReplyId)(newCommentId, rootReplyId);
        nextState.replyItems[newReplyKey] = Object.assign({}, prevReplyItem, { sending: false });

        nextState.commentList[index] = Object.assign({}, comment, {
          commentId: newCommentId
        });
        return true;
      }
    });

    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.LINK_COMMENT_TO_DOC_ERROR, function (state, action) {
  if (action.payload) {
    var payload = action.payload;
    var replyId = payload.replyId,
        _commentId17 = payload.commentId,
        error = payload.error;


    var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });
    var replyKey = (0, _docCommentHelper.formatReplyId)(_commentId17, replyId);
    var replyItem = state.replyItems[replyKey];
    nextState.replyItems[replyKey] = Object.assign({}, replyItem, { sending: false, error: error });

    return nextState;
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.UPDATE_COMMENTS, function (state, action) {
  var allComments = action.payload;
  var oldCommentList = state.commentList;
  var commentList = allComments.reduce(function (memo, comment) {
    var commentId = comment.commentId;

    var commentInfo = oldCommentList.find(function (c) {
      return c.commentId === commentId;
    });

    if (commentInfo) {
      memo.push(Object.assign({}, commentInfo, comment));
    }

    return memo;
  }, []);

  return Object.assign({}, state, { commentList: commentList });
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.SET_LOCAL_DOC_COMMENT_READ, function (state, action) {
  var messageIds = action.payload.messageIds;

  var nextState = Object.assign({}, state, { replyItems: Object.assign({}, state.replyItems) });
  var replyItems = nextState.replyItems;


  Object.keys(replyItems).forEach(function (replyKey) {
    var replyItem = replyItems[replyKey];
    var messageId = replyItem.message_id;


    if (messageIds.indexOf(messageId) > -1) {
      replyItems[replyKey] = Object.assign({}, replyItem, { status: _message.MESSAGE_READED });
    }
  });

  return nextState;
}), (0, _defineProperty3.default)(_handleActions2, _$constants.actionTypes.comment.docComment.RESET_COMMENTS, function (state, action) {
  return DEFAULT_COMMENTS;
}), _handleActions2), DEFAULT_COMMENTS);

exports.default = (0, _redux.combineReducers)({
  globalComment: globalComment,
  docComment: docComment
});

/***/ }),
/* 1404 */,
/* 1405 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _filter2 = __webpack_require__(560);

var _filter3 = _interopRequireDefault(_filter2);

var _handleActions;

var _redux = __webpack_require__(66);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var commentHistory = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.history.commentHistory.FILTER_COMMENT_HISTORY_LIST, function (state, action) {
  if (action.payload) {
    return [].concat(action.payload);
  }
  return state;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.history.commentHistory.REOPEN_HISTORY_COMMENT_SUCCESS, function (state, action) {
  if (action.payload) {
    var comment = action.payload.comment;

    state = (0, _filter3.default)(state, function (item) {
      return item.comment_id !== comment.comment_id;
    });
  }
  return state;
}), _handleActions), []);

exports.default = (0, _redux.combineReducers)({
  commentHistory: commentHistory
});

/***/ }),
/* 1406 */,
/* 1407 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _reduxActions = __webpack_require__(29);

var _constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var updateChecking = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _constants.actionTypes.update.NEW_VERSION_NOTIFIED, function (state, action) {
    return { hasNewVersion: true };
}), { hasNewVersion: false });
exports.default = updateChecking;

/***/ }),
/* 1408 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.currentMemberId = exports.members = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _objectWithoutProperties2 = __webpack_require__(38);

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _sortBy2 = __webpack_require__(789);

var _sortBy3 = _interopRequireDefault(_sortBy2);

var _filter2 = __webpack_require__(560);

var _filter3 = _interopRequireDefault(_filter2);

var _find2 = __webpack_require__(451);

var _find3 = _interopRequireDefault(_find2);

var _uniqBy2 = __webpack_require__(460);

var _uniqBy3 = _interopRequireDefault(_uniqBy2);

var _handleActions;

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _userHelper = __webpack_require__(65);

var _memberHelper = __webpack_require__(766);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var members = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.member.ADD_SUITE_MEMBERS, function (state, action) {
  var _action$payload = action.payload,
      type = _action$payload.type,
      token = _action$payload.token,
      members = _action$payload.members;

  var nextState = Object.assign({}, state);

  var membersKey = (0, _memberHelper.genSuiteMembersKey)(type, token);
  var currentMembers = state[membersKey] || [];
  var newMembers = members.map(function (member) {
    return (0, _userHelper.makeCompatibleUser)(member);
  });
  var nextMembers = (0, _uniqBy3.default)(currentMembers.concat(newMembers), 'member_id');

  (0, _memberHelper.setSuiteMembers)(nextState, { type: type, token: token, members: (0, _sortBy3.default)(nextMembers, 'create_time') });

  return nextState;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.member.UPDATE_SUITE_MEMBER, function (state, action) {
  var _action$payload2 = action.payload,
      type = _action$payload2.type,
      token = _action$payload2.token,
      memberInfo = _action$payload2.memberInfo;
  var needUpdateMemberId = memberInfo.member_id,
      needUpdateInfo = (0, _objectWithoutProperties3.default)(memberInfo, ['member_id']);


  var membersKey = (0, _memberHelper.genSuiteMembersKey)(type, token);
  var currentMembers = state[membersKey] || [];
  var existed = (0, _find3.default)(currentMembers, function (_ref) {
    var memberId = _ref.member_id;

    return memberId === needUpdateMemberId;
  });

  var nextState = Object.assign({}, state);
  if (existed) {
    var updateInfo = needUpdateInfo.user_id ? (0, _userHelper.makeCompatibleUser)(needUpdateInfo) : needUpdateInfo;
    existed = Object.assign({}, existed, updateInfo);

    return nextState;
  }

  var newMember = (0, _userHelper.makeCompatibleUser)(memberInfo);
  var nextMembers = [].concat(currentMembers);
  nextMembers.push(newMember);
  (0, _memberHelper.setSuiteMembers)(nextState, { type: type, token: token, members: (0, _sortBy3.default)(nextMembers, 'create_time') });

  return nextState;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.member.REMOVE_SUITE_MEMBERS, function (state, action) {
  var _action$payload3 = action.payload,
      type = _action$payload3.type,
      token = _action$payload3.token,
      memberIds = _action$payload3.memberIds;


  var membersKey = (0, _memberHelper.genSuiteMembersKey)(type, token);
  var currentMembers = state[membersKey] || [];
  var nextMembers = [].concat(currentMembers);
  memberIds.forEach(function (memberId) {
    nextMembers = (0, _filter3.default)(nextMembers, function (member) {
      return member.member_id !== memberId;
    });
  });

  var nextState = Object.assign({}, state);
  (0, _memberHelper.setSuiteMembers)(nextState, { type: type, token: token, members: nextMembers });
  return nextState;
}), (0, _defineProperty3.default)(_handleActions, _$constants.actionTypes.member.RESET_SUITE_MEMBERS, function (state, action) {
  var _action$payload4 = action.payload,
      type = _action$payload4.type,
      token = _action$payload4.token;


  var nextState = Object.assign({}, state);
  (0, _memberHelper.deleteSuiteMembers)(nextState, { type: type, token: token });
  return nextState;
}), _handleActions), {});

exports.members = members;
var currentMemberId = exports.currentMemberId = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.member.SET_CURRENT_MEMBER_ID, function (state, action) {
  return String(action.payload);
}), null);

/***/ }),
/* 1409 */,
/* 1410 */,
/* 1411 */,
/* 1412 */,
/* 1413 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setCurrentMemberId = exports.resetSuiteMembers = exports.removeSuiteMembers = exports.updateSuiteMember = exports.addSuiteMembers = undefined;

var _$constants = __webpack_require__(5);

var addSuiteMembers = exports.addSuiteMembers = function addSuiteMembers(_ref) {
    var type = _ref.type,
        token = _ref.token,
        members = _ref.members;
    return {
        type: _$constants.actionTypes.member.ADD_SUITE_MEMBERS,
        payload: { type: type, token: token, members: members }
    };
};
var updateSuiteMember = exports.updateSuiteMember = function updateSuiteMember(_ref2) {
    var type = _ref2.type,
        token = _ref2.token,
        memberInfo = _ref2.memberInfo;
    return {
        type: _$constants.actionTypes.member.UPDATE_SUITE_MEMBER,
        payload: { type: type, token: token, memberInfo: memberInfo }
    };
};
var removeSuiteMembers = exports.removeSuiteMembers = function removeSuiteMembers(_ref3) {
    var type = _ref3.type,
        token = _ref3.token,
        memberIds = _ref3.memberIds;
    return {
        type: _$constants.actionTypes.member.REMOVE_SUITE_MEMBERS,
        payload: { type: type, token: token, memberIds: memberIds }
    };
};
var resetSuiteMembers = exports.resetSuiteMembers = function resetSuiteMembers(_ref4) {
    var type = _ref4.type,
        token = _ref4.token;
    return {
        type: _$constants.actionTypes.member.RESET_SUITE_MEMBERS,
        payload: { type: type, token: token }
    };
};
var setCurrentMemberId = exports.setCurrentMemberId = function setCurrentMemberId(memberId) {
    return {
        type: _$constants.actionTypes.member.SET_CURRENT_MEMBER_ID,
        payload: memberId
    };
};

/***/ }),
/* 1414 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.backUrlMap = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var initialState = {};
var backUrlMap = exports.backUrlMap = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.route.SET_BACK_URL, function (state, action) {
    var _action$payload = action.payload,
        current = _action$payload.current,
        back = _action$payload.back;

    return Object.assign({}, state, (0, _defineProperty3.default)({}, current, back));
}), initialState);

/***/ }),
/* 1415 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.error = undefined;

var _camelCase = __webpack_require__(529);

var _camelCase2 = _interopRequireDefault(_camelCase);

var _immutable = __webpack_require__(31);

var _immutable2 = _interopRequireDefault(_immutable);

var _$constants = __webpack_require__(5);

var _actionHelper = __webpack_require__(531);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// 注意到我们的reducer在初始状态下取对应的error会是undefine，
// 所以在组件内访问 xxxError.code时
// 务必前置判断: xxxxError && xError.code === XX
var error = exports.error = function error() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _immutable2.default.Map({});
  var action = arguments[1];

  var key = (0, _camelCase2.default)(action.type.replace(_$constants.actionTypes.prefix.FETCH, '').replace(_$constants.actionTypes.suffix.SUCCESS, '').replace(_$constants.actionTypes.suffix.FAIL, ''));
  if (action.type === _$constants.actionTypes.route.LOCATION_CHANGE) {
    return state.clear();
  }
  if ((0, _actionHelper.isFailAction)(action) && action.error) {
    var _action$error = action.error,
        code = _action$error.code,
        msg = _action$error.msg,
        meta = _action$error.meta;

    return state.mergeIn([key], { code: code, msg: msg, meta: meta }); // key: { code, msg }
  }
  if ((0, _actionHelper.isSuccessAction)(action) && state.get(key) != null) {
    return state.deleteIn([key]);
  }
  return state;
};

/***/ }),
/* 1416 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.fetchStatus = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _isUndefined2 = __webpack_require__(228);

var _isUndefined3 = _interopRequireDefault(_isUndefined2);

var _camelCase2 = __webpack_require__(529);

var _camelCase3 = _interopRequireDefault(_camelCase2);

var _redux = __webpack_require__(66);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

var _object = __webpack_require__(462);

var _actionTypes = __webpack_require__(631);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var isInitial = function isInitial(type) {
    return (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, '' + type + _$constants.actionTypes.suffix.SUCCESS, function undefined(state, action) {
        return false;
    }), true);
};
var status = function status(type) {
    var _handleActions2;

    var canResetFetchStatus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    return (0, _reduxActions.handleActions)((_handleActions2 = {}, (0, _defineProperty3.default)(_handleActions2, '' + type + _$constants.actionTypes.suffix.START, function undefined(state, action) {
        return _$constants.common.StatusMap.loading;
    }), (0, _defineProperty3.default)(_handleActions2, '' + type + _$constants.actionTypes.suffix.SUCCESS, function undefined(state, action) {
        return _$constants.common.StatusMap.loaded;
    }), (0, _defineProperty3.default)(_handleActions2, '' + type + _$constants.actionTypes.suffix.FAIL, function undefined(state, action) {
        return _$constants.common.StatusMap.failed;
    }), (0, _defineProperty3.default)(_handleActions2, '' + _$constants.actionTypes.route.LOCATION_CHANGE, function undefined(state, action) {
        var _action$payload = action.payload,
            hash = _action$payload.hash,
            isPathChanged = _action$payload.isPathChanged;
        // hash改变时内容不变，不需要重置

        var shouldResetStatus = canResetFetchStatus && hash === '' && isPathChanged;
        // console.log({
        //   type,
        //   shouldResetStatus,
        // });
        return shouldResetStatus ? _$constants.common.StatusMap.uninitialized : state;
    }), (0, _defineProperty3.default)(_handleActions2, '' + _$constants.actionTypes.explorer.SET_CURRENT_SUITE_TOKEN, function undefined(state, action) {
        return canResetFetchStatus ? _$constants.common.StatusMap.uninitialized : state;
    }), _handleActions2), _$constants.common.StatusMap.uninitialized);
};
var isContinuous = function isContinuous(type) {
    return (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, '' + type + _$constants.actionTypes.suffix.START, function undefined(state, action) {
        return !(0, _isUndefined3.default)(action.payload.isContinuous) ? action.payload.isContinuous : state;
    }), false);
};
var fetchStatusConstructor = function fetchStatusConstructor(types) {
    var hasFetchPrefix = function hasFetchPrefix(type) {
        return type.indexOf(_$constants.actionTypes.prefix.FETCH) > -1;
    };
    var hasAsyncSuffix = function hasAsyncSuffix(type) {
        var suffixArr = [];
        for (var key in _$constants.actionTypes.suffix) {
            suffixArr.push(_$constants.actionTypes.suffix[key]);
        }
        return suffixArr.some(function (suffix) {
            return type.indexOf(suffix) !== -1;
        });
    };
    var reducers = {};
    for (var type in types) {
        var canResetFetchStatus = type in _actionTypes.classifiedActionTypes.shouldResetFetchStatus;
        if (hasFetchPrefix(type) && !hasAsyncSuffix(type)) {
            var sliceLength = _$constants.actionTypes.prefix.FETCH.length;
            reducers[(0, _camelCase3.default)(type.slice(sliceLength))] = (0, _redux.combineReducers)({
                isInitial: isInitial(type),
                status: status(type, canResetFetchStatus),
                isContinuous: isContinuous(type)
            });
        }
    }
    return reducers;
};
var fetchStatus = exports.fetchStatus = (0, _redux.combineReducers)(Object.assign({}, fetchStatusConstructor((0, _object.flattenObj)(_$constants.actionTypes))));

/***/ }),
/* 1417 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.networkState = undefined;

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _reduxActions = __webpack_require__(29);

var _$constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var networkState = exports.networkState = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _$constants.actionTypes.network.SET_NETWORK_STATE, function (state, action) {
    if (action.payload) {
        var data = action.payload.data;

        return data;
    }
}), {});

/***/ }),
/* 1418 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(9);

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions2;

var _redux = __webpack_require__(66);

var _reduxActions = __webpack_require__(29);

var _constants = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var translateStatusInitialState = {
    translating: false,
    translated: false,
    translate_exiting: false
};
var translateConfigInitialState = {
    target_lang: 'en',
    src_lang: 'zh'
};
var pagePosisionInitialState = {
    firstIndex: 0,
    elementViewY: 0
};
var clientVars = null;
var originClientVars = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _constants.actionTypes.translate.SET_CLIENTVARS, function (state, action) {
    var payload = action.payload;

    return payload.clientVars;
}), clientVars);
var translateStatus = (0, _reduxActions.handleActions)((_handleActions2 = {}, (0, _defineProperty3.default)(_handleActions2, _constants.actionTypes.translate.TOGGLE_TRANSLATE, function (state, action) {
    var payload = action.payload;

    return Object.assign({}, translateStatusInitialState, {
        translating: payload.status
    });
}), (0, _defineProperty3.default)(_handleActions2, _constants.actionTypes.translate.UPDATE_TRANSLATE_STATUS, function (state, action) {
    var payload = action.payload;

    return Object.assign({}, state, payload);
}), _handleActions2), translateStatusInitialState);
var translateConfig = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _constants.actionTypes.translate.GET_TRANSLATE_CONFIG_SUCCESS, function (state, action) {
    var payload = action.payload;

    return {
        target_lang: payload.target_lang,
        src_lang: payload.src_lang
    };
}), translateConfigInitialState);
var pagePosition = (0, _reduxActions.handleActions)((0, _defineProperty3.default)({}, _constants.actionTypes.translate.UPDATE_PAGE_POSITION, function (state, action) {
    var payload = action.payload;

    return Object.assign({}, payload);
}), pagePosisionInitialState);
var translate = (0, _redux.combineReducers)({
    status: translateStatus,
    config: translateConfig,
    originClientVars: originClientVars,
    pagePosition: pagePosition
});
exports.default = translate;

/***/ }),
/* 1419 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var ConvertShareType = exports.ConvertShareType = undefined;
(function (ConvertShareType) {
    ConvertShareType["panelOpen"] = "panel_open";
    ConvertShareType["panelCallout"] = "panel_callout";
    ConvertShareType["toast"] = "toast";
})(ConvertShareType || (exports.ConvertShareType = ConvertShareType = {}));

/***/ }),
/* 1420 */,
/* 1421 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (fn) {
  var _this = this;

  var memorized = void 0;
  return function () {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    if (memorized) return memorized;

    var result = fn.apply(_this, args);
    memorized = result;
    return result;
  };
};

;

/***/ })
]]);
//# sourceMappingURL=https://s3.pstatp.com/eesz/resource/bear/js/mobile_app~mobile_update.a7a53eba681092f49f61.js.map